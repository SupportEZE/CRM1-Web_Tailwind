import{a as ye}from"./chunk-J4NDCUAB.js";import{a as Se}from"./chunk-REKAXM5L.js";import{a as he}from"./chunk-SQZ3YN6N.js";import{c as be}from"./chunk-CIBZCVJQ.js";import{a as fe}from"./chunk-OTFCGVEU.js";import{a as ue}from"./chunk-HPLI5COI.js";import{b as ve}from"./chunk-DUVWFXSE.js";import{a as pe}from"./chunk-OEHD5D2Y.js";import{a as Ce}from"./chunk-GLWQGYBC.js";import{a as Z}from"./chunk-DC4QM32I.js";import{F as _e,c as X,q as ce,s as me,u as ge}from"./chunk-VHE3PQ3O.js";import{$ as Q,Aa as te,B as U,Ea as ie,G as q,Ga as ne,Ha as ae,Ia as oe,Ja as re,Qa as se,W as J,Z as K,hb as le,jb as de,va as $,w as Y,wa as ee,z}from"./chunk-GYDYF5F3.js";import{M as H,Q as G,f as N,g as W,o as O,t as j}from"./chunk-PD5VTTIY.js";import{$c as R,Aa as c,Ba as m,Hb as D,Lc as I,Mc as g,Nc as h,Ob as u,Pc as P,Uc as w,Vc as B,Wc as L,Yc as M,Zc as A,_b as p,bc as k,ed as E,fc as T,gd as x,kc as s,lb as F,lc as o,mc as v,nc as y,oc as S,qc as C,rb as r,sb as b,wc as _,yc as f}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var Be=()=>["Bonus"],V=()=>[],Le=(a,n,t)=>({name:a,label:n,count:t}),Me=a=>[a];function ke(a,n){a&1&&v(0,"app-skeleton"),a&2&&k("w100 h25")}function Te(a,n){a&1&&(y(0),u(1,ke,1,2,"app-skeleton",23),S()),a&2&&(r(),p("ngForOf",M(1,V).constructor(2)))}function Ie(a,n){if(a&1){let t=C();s(0,"app-listing-tab",25),_("tabChange",function(i){c(t);let d=f(2);return m(d.onTabChange(i.tab))}),o()}if(a&2){let t=n.$implicit,e=f(2);p("tabs",A(6,Me,R(2,Le,t.name,t.label,t.count)))("activeTab",e.activeTab)}}function Ee(a,n){if(a&1&&(y(0),u(1,Ie,1,8,"app-listing-tab",24),S()),a&2){let t=f();r(),p("ngForOf",t.mainTabs)}}function xe(a,n){if(a&1){let t=C();s(0,"button",26),_("click",function(){c(t);let i=f();return i.filter.created_name="",m(i.getBadgesList())}),s(1,"mat-icon"),g(2,"close"),o()()}}function Ve(a,n){if(a&1){let t=C();s(0,"button",26),_("click",function(){c(t);let i=f();return i.filter.customer_type_name="",m(i.getBadgesList())}),s(1,"mat-icon"),g(2,"close"),o()()}}function Fe(a,n){if(a&1){let t=C();s(0,"button",26),_("click",function(){c(t);let i=f();return i.filter.title="",m(i.getBadgesList())}),s(1,"mat-icon"),g(2,"close"),o()()}}function De(a,n){if(a&1){let t=C();y(0),s(1,"img",36),_("click",function(){let i=c(t).$implicit,d=f(3);return m(d.comanFuncation.zoom(i._id,"badges/get-doc"))}),o(),S()}if(a&2){let t=n.$implicit;r(),p("src",t.signed_url,F)}}function Pe(a,n){if(a&1){let t=C();s(0,"app-icon-button",34),_("clickEvent",function(){c(t);let i=f().$implicit,d=f(2);return m(d.delete(i._id,"badges/delete",i.title))}),o()}a&2&&p("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function Ae(a,n){if(a&1){let t=C();s(0,"tr",12)(1,"td",13),g(2),o(),s(3,"td")(4,"div",28)(5,"span",29),u(6,De,2,1,"ng-container",30),o()()(),s(7,"td"),g(8),E(9,"date"),o(),s(10,"td"),g(11),o(),s(12,"td"),g(13),o(),s(14,"td"),g(15),o(),s(16,"td"),g(17),E(18,"date"),o(),s(19,"td"),g(20),E(21,"date"),o(),s(22,"td"),g(23),o(),s(24,"td",31)(25,"strong"),g(26),o()(),s(27,"td")(28,"span",32)(29,"app-toggle",33),_("checkedChange",function(i){let d=c(t).$implicit,l=f(2);return m(l.onToggleChange(i,d._id,d.status))}),o()()(),s(30,"td")(31,"div")(32,"app-icon-button",34),_("clickEvent",function(){let i=c(t).$implicit,d=f(2);return m(d.openMainLogModal(i._id))}),o(),u(33,Pe,1,2,"app-icon-button",35),o()()()}if(a&2){let t=n.$implicit,e=n.index,i=f(2);r(2),h((i.pagination.cur_page-1)*i.pagination.limit+e+1),r(4),p("ngForOf",t.files),r(2),h(t.created_at?x(9,15,t.created_at,"dd MMM yyyy hh:mm a"):"---"),r(3),h(t.created_name?t.created_name:"---"),r(2),h(t.customer_type_name||"--"),r(2),h(t.title||"--"),r(2),h(t.start_date?x(18,18,t.start_date,"d MMM yyyy"):"---"),r(3),h(t.end_date?x(21,21,t.end_date,"d MMM yyyy"):"---"),r(3),P("",t.incentive_type||"--"," ",t.incentive_value?"("+t.incentive_value+")":"",""),r(3),h(t.eligible_points?t.eligible_points+"PT":"---"),r(3),p("checked",t.isChecked),r(3),p("icon","ri-file-list-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),r(),p("ngIf",i.accessRight==null?null:i.accessRight.deleteRight)}}function Re(a,n){if(a&1&&(y(0),u(1,Ae,34,24,"tr",27),S()),a&2){let t=f();r(),p("ngForOf",t.badgesMasterList)("ngForTrackBy",t.trackById)}}function Ne(a,n){a&1&&(s(0,"td"),v(1,"app-skeleton"),o()),a&2&&(r(),k("h20 bg-skeleton"))}function We(a,n){a&1&&(s(0,"tr",12),u(1,Ne,2,2,"td",30),o()),a&2&&(r(),p("ngForOf",M(1,V).constructor(12)))}function Oe(a,n){a&1&&(y(0),u(1,We,2,2,"tr",37),S()),a&2&&(r(),p("ngForOf",M(1,V).constructor(9)))}function je(a,n){a&1&&(y(0),v(1,"app-data-not-found"),S())}var we=class a{constructor(n,t,e,i,d,l,He,Ge,Ye){this.dialog=n;this.api=t;this.alert=e;this.router=i;this.dateService=d;this.toastr=l;this.moduleService=He;this.logService=Ge;this.comanFuncation=Ye}FORMID=ue;filter={};skLoading=!1;view;pagination={};badgesMasterList=[];cashMasterList=[];moduleFormId=0;moduleId=0;submodule={};activeTab="Active";isChecked=!1;originalData={};mainTabs=[];moduleName="";tabCount={};accessRight={};ngOnInit(){let n=this.moduleService.getAccessMap("IRP","Bonus","Badges");n&&(this.accessRight=n),this.getBadgesList();let t=this.moduleService.getSubModuleByName("IRP","Bonus"),e=this.moduleService.getSubSubModuleByName("IRP","Bonus","Badges"),i=this.moduleService.getFormById("IRP","Bonus",this.FORMID.ID.BadgesList);t&&(this.moduleId=t.module_id,this.moduleName=t.title),e&&(this.submodule=e,this.moduleName=e.title),i&&(this.moduleFormId=i.form_id)}listColumns=[{label:"S.No",field:"S.No"},{label:"Images",field:"Images"},{label:"Created At",field:"Created At"},{label:"Created Name",field:"Created Name"},{label:"Customer Category",field:"Customer Category"},{label:"Title",field:"Title"},{label:"Start Date",field:"Start Date"},{label:"End Date",field:"End Date"},{label:"Incentive Type",field:"Incentive Type"},{label:"Eligible Points",field:"Eligible Points",table_class:"text-right"},{label:"Status",field:"Status"},{label:"Action",field:"Action"}];onTabChange(n){this.activeTab=n,this.getBadgesList()}goToGiftAdd(){this.router.navigate(["/apps/loyalty/badges-list/badges-add"])}onRefresh(){this.filter={},this.getBadgesList()}trackById(n,t){return t.id}onDateChange(n,t){if(t){let e=this.dateService.formatToYYYYMMDD(t);this.filter[n]=e}else this.filter[n]=null;(this.filter.start_date&&this.filter.end_date||this.filter.created_at)&&this.getBadgesList()}getBadgesList(){this.skLoading=!0,this.api.post({filters:this.filter,activeTab:this.activeTab,page:this.pagination.cur_page??1},"badges/read").subscribe(n=>{if(n.statusCode==200){this.skLoading=!1,this.badgesMasterList=n.data.result,this.tabCount=n.data.statusTabs?n.data.statusTabs:{},this.mainTabs=[{name:"Active",label:"Active",icon:"ri-team-fill",count:this.tabCount.activeCount?this.tabCount.activeCount:0},{name:"Inactive",label:"Inactive",icon:"ri-calendar-check-fill",count:this.tabCount.inActiveCount?this.tabCount.inActiveCount:0}],this.pagination=n.pagination;for(let t=0;t<this.badgesMasterList.length;t++){let e=this.badgesMasterList[t];e.isChecked=e.status==="Active"}}})}changeToPagination(n){n==="Next"&&this.pagination.cur_page<this.pagination.total_pages?this.pagination.cur_page++:n==="Previous"&&this.pagination.cur_page>1&&this.pagination.cur_page--,this.getBadgesList()}changeToPage(n){this.pagination.cur_page=n,this.getBadgesList()}delete(n,t,e){this.comanFuncation.delete(n,this.submodule,e,t,"single_action",n).subscribe(i=>{i===!0&&this.getBadgesList()})}openMainLogModal(n){this.comanFuncation.listLogsModal(this.submodule.sub_module_id,n,this.submodule.module_type).subscribe(t=>{})}onToggleChange(n,t,e){this.comanFuncation.statusChange(n,t,e,this.submodule,"toggle","badges/update-status").subscribe(i=>{i?this.getBadgesList():this.getBadgesList()})}static \u0275fac=function(t){return new(t||a)(b(se),b(K),b(Q),b(H),b(de),b(Y),b(Z),b(fe),b(be))};static \u0275cmp=D({type:a,selectors:[["app-badges-list"]],decls:64,vars:43,consts:[["picker",""],["picker1",""],["picker2",""],[3,"title","title1","activeitem","btnShow1"],[1,"box","py-3","px-4"],["aria-label","Tabs","role","tablist",1,"sm:flex","sm:space-x-2","sm:rtl:space-x-reverse","gap-1"],[4,"ngIf"],[1,"row"],[1,"col-xl-12"],[3,"onRefresh","button1","pageTitle","refreshLabel","btnShow","btnShow2","addBtnLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-hover ti-head-primary",3,"tableHead","tableHeadColumn","tableHeight","showCheckbox","columns"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","createdAt","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["matInput","","name","start_date","placeholder","Start Date",3,"ngModelChange","matDatepicker","ngModel"],["matInput","","name","end_date","placeholder","End Date",3,"ngModelChange","matDatepicker","ngModel"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"class",4,"ngFor","ngForOf"],[3,"tabs","activeTab","tabChange",4,"ngFor","ngForOf"],[3,"tabChange","tabs","activeTab"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center"],[1,"avatar","avatar-sm","me-2","avatar-rounded"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"badge"],[3,"checkedChange","checked"],[3,"clickEvent","icon","buttonClass"],[3,"icon","buttonClass","clickEvent",4,"ngIf"],["alt","Gift Image",3,"click","src"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"]],template:function(t,e){if(t&1){let i=C();v(0,"app-page-header",3),s(1,"div",4)(2,"nav",5),u(3,Te,2,2,"ng-container",6)(4,Ee,2,1,"ng-container",6),o(),s(5,"div",7)(6,"div",8)(7,"app-page-sub-header",9),_("onRefresh",function(){return c(i),m(e.onRefresh())})("button1",function(){return c(i),m(e.goToGiftAdd())}),o(),s(8,"div",10)(9,"div",10)(10,"spk-reusable-tables",11)(11,"tr",12)(12,"td",13),g(13,"\xA0"),o(),s(14,"td",13),g(15,"\xA0"),o(),s(16,"td")(17,"div",14)(18,"mat-form-field",15)(19,"input",16),L("ngModelChange",function(l){return c(i),B(e.filter.created_at,l)||(e.filter.created_at=l),m(l)}),_("ngModelChange",function(l){return c(i),m(e.onDateChange("created_at",l))}),o(),v(20,"mat-datepicker-toggle",17)(21,"mat-datepicker",null,0),o()()(),s(23,"td",13)(24,"div",14)(25,"mat-form-field",15)(26,"input",18),L("ngModelChange",function(l){return c(i),B(e.filter.created_name,l)||(e.filter.created_name=l),m(l)}),_("keyup.enter",function(){return c(i),m(e.getBadgesList())}),o(),u(27,xe,3,0,"button",19),o()()(),s(28,"td",13)(29,"div",14)(30,"mat-form-field",15)(31,"input",18),L("ngModelChange",function(l){return c(i),B(e.filter.customer_type_name,l)||(e.filter.customer_type_name=l),m(l)}),_("keyup.enter",function(){return c(i),m(e.getBadgesList())}),o(),u(32,Ve,3,0,"button",19),o()()(),s(33,"td",13)(34,"div",14)(35,"mat-form-field",15)(36,"input",18),L("ngModelChange",function(l){return c(i),B(e.filter.title,l)||(e.filter.title=l),m(l)}),_("keyup.enter",function(){return c(i),m(e.getBadgesList())}),o(),u(37,Fe,3,0,"button",19),o()()(),s(38,"td",13)(39,"div",14)(40,"mat-form-field",15)(41,"input",20),L("ngModelChange",function(l){return c(i),B(e.filter.start_date,l)||(e.filter.start_date=l),m(l)}),_("ngModelChange",function(l){return c(i),m(e.onDateChange("start_date",l))}),o(),v(42,"mat-datepicker-toggle",17)(43,"mat-datepicker",null,1),o()()(),s(45,"td",13)(46,"div",14)(47,"mat-form-field",15)(48,"input",21),L("ngModelChange",function(l){return c(i),B(e.filter.end_date,l)||(e.filter.end_date=l),m(l)}),_("ngModelChange",function(l){return c(i),m(e.onDateChange("end_date",l))}),o(),v(49,"mat-datepicker-toggle",17)(50,"mat-datepicker",null,2),o()()(),s(52,"td"),g(53,"\xA0"),o(),s(54,"td"),g(55,"\xA0"),o(),s(56,"td"),g(57,"\xA0"),o(),s(58,"td"),g(59,"\xA0"),o()(),u(60,Re,2,2,"ng-container",6)(61,Oe,2,2,"ng-container",6),o(),u(62,je,2,0,"ng-container",6),o(),s(63,"app-pagination-footer",22),_("preButtonClick",function(){return c(i),m(e.changeToPagination("Previous"))})("nextButtonClick",function(){return c(i),m(e.changeToPagination("Next"))})("pageChange",function(l){return c(i),m(e.changeToPage(l))}),o()()()()()}if(t&2){let i=I(22),d=I(44),l=I(51);p("title","IRP")("title1",M(42,Be))("activeitem","Badges list")("btnShow1",!1),r(3),p("ngIf",e.skLoading),r(),p("ngIf",!e.skLoading),r(3),k("p-0 pt-3"),p("pageTitle","Badges List")("refreshLabel","Refresh")("btnShow",!0)("btnShow2",e.accessRight==null?null:e.accessRight.addRight)("addBtnLabel","Add Badge"),r(3),p("tableHead","border-b")("tableHeadColumn","!text-center")("tableHeight","630px")("showCheckbox",!1)("columns",e.listColumns),r(9),p("matDatepicker",i),w("ngModel",e.filter.created_at),r(),p("for",i),r(6),w("ngModel",e.filter.created_name),r(),T(e.filter.created_name?27:-1),r(4),w("ngModel",e.filter.customer_type_name),r(),T(e.filter.customer_type_name?32:-1),r(4),w("ngModel",e.filter.title),r(),T(e.filter.title?37:-1),r(4),p("matDatepicker",d),w("ngModel",e.filter.start_date),r(),p("for",d),r(6),p("matDatepicker",l),w("ngModel",e.filter.end_date),r(),p("for",l),r(11),p("ngIf",!e.skLoading),r(),p("ngIf",e.skLoading),r(),p("ngIf",!e.badgesMasterList.length&&!e.skLoading),r(),p("currentPage",e.pagination.cur_page)("totalPage",e.pagination.total_pages)("pageLimit",e.pagination.limit)("listLength",e.badgesMasterList.length)("preBtn",!e.pagination.prev)("nextBtn",!e.pagination.next)}},dependencies:[pe,_e,N,W,z,U,q,Ce,X,me,ce,ye,he,Se,ge,O,le,te,ae,oe,re,ie,ne,ee,$,j,J,ve,G],encapsulation:2})};export{we as BadgesListComponent};
