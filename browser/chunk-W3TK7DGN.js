import{a as xt}from"./chunk-X3YIMVQX.js";import"./chunk-5QFGLOXN.js";import{a as $}from"./chunk-NUEZMFL3.js";import{a as Ct}from"./chunk-J4NDCUAB.js";import"./chunk-PU6S26UW.js";import{a as bt}from"./chunk-SQZ3YN6N.js";import{c as ut}from"./chunk-CIBZCVJQ.js";import"./chunk-OTFCGVEU.js";import"./chunk-CNF4GSI7.js";import{a as mt}from"./chunk-OEHD5D2Y.js";import{a as ft}from"./chunk-GLWQGYBC.js";import{a as Z}from"./chunk-DC4QM32I.js";import{F as gt,c as X,s as dt}from"./chunk-VHE3PQ3O.js";import{$ as Q,Aa as it,B as U,Ea as nt,G as J,Ga as ot,Ha as at,Ia as rt,Ja as ct,Qa as lt,Z as K,Za as st,hb as _t,jb as pt,va as tt,w as q,wa as et,z}from"./chunk-GYDYF5F3.js";import{M as Y,f as j,g as O,o as N,t as H}from"./chunk-PD5VTTIY.js";import{Aa as m,Ba as d,Bc as W,Hb as D,Lc as G,Mc as p,Nc as f,Ob as u,Oc as T,Uc as w,Vc as S,Wc as y,Yc as L,_b as _,bc as V,cc as F,ed as M,fc as k,gc as A,hd as E,ic as R,jc as B,kc as a,lb as I,lc as o,mc as v,nc as x,oc as h,qc as b,rb as r,sb as C,wc as g,yc as s}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var vt=()=>["Pop & Gift"],P=()=>[];function wt(n,c){if(n&1){let t=b();a(0,"div")(1,"spk-sales-cards",12),g("buttonClick",function(){let e=m(t).$implicit,l=s();return d(l.onTabChange(e.activeTab))}),o()()}if(n&2){let t=c.$implicit,i=s();F("",t.colClass," xl:col-span-6 col-span-12"),r(),_("card",t)("bgOnActive",t.activeTab===i.activeTab?"bg-primary/10":"")}}function St(n,c){if(n&1){let t=b();a(0,"button",22),g("click",function(){m(t);let e=s(3);return e.filter.created_name="",d(e.getList())}),a(1,"mat-icon"),p(2,"close"),o()()}}function yt(n,c){if(n&1){let t=b();a(0,"button",22),g("click",function(){m(t);let e=s(3);return e.filter.product_name="",d(e.getList())}),a(1,"mat-icon"),p(2,"close"),o()()}}function kt(n,c){if(n&1){let t=b();a(0,"button",22),g("click",function(){m(t);let e=s(3);return e.filter.description="",d(e.getList())}),a(1,"mat-icon"),p(2,"close"),o()()}}function Lt(n,c){if(n&1){let t=b();x(0),a(1,"img",38),g("click",function(){let e=m(t).$implicit,l=s(4);return d(l.comanFuncation.zoom(e._id,"pop-gift/get-doc"))}),o(),h()}if(n&2){let t=c.$implicit;r(),_("src",t.signed_url,I)}}function Tt(n,c){if(n&1){let t=b();a(0,"app-icon-button",39),g("clickEvent",function(){m(t);let e=s().$implicit,l=s(3);return d(l.openModal(e,"edit"))}),o()}n&2&&_("icon","ri-edit-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-success waves-effect waves-light")}function Mt(n,c){if(n&1){let t=b();a(0,"app-icon-button",40),g("click",function(){m(t);let e=s().$implicit,l=s(3);return d(l.delete(e._id,"pop-gift/delete","Delete"))}),o()}n&2&&_("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function Et(n,c){if(n&1){let t=b();a(0,"tr",23)(1,"td",24),p(2),o(),a(3,"td"),p(4),M(5,"date"),o(),a(6,"td"),p(7),o(),a(8,"td")(9,"div",25)(10,"span",26),u(11,Lt,2,1,"ng-container",27),o(),a(12,"div",28)(13,"span",29),p(14),o(),a(15,"span",29)(16,"a",30),g("click",function(){let e=m(t).$implicit,l=s(3);return d(l.goToDetailPage(e._id))}),p(17),o()()()()(),a(18,"td")(19,"span",29),p(20),o(),a(21,"span",29)(22,"span",31),p(23,"Last Transaction "),o(),a(24,"span",32),p(25),o()()(),a(26,"td")(27,"span",33),p(28),o()(),a(29,"td",34),u(30,Tt,1,2,"app-icon-button",35),a(31,"app-icon-button",36),g("clickEvent",function(){let e=m(t).$implicit,l=s(3);return d(l.openMainLogModal(e._id))}),o(),u(32,Mt,1,2,"app-icon-button",37),o()()}if(n&2){let t=c.$implicit,i=c.index,e=s(3);r(2),f((e.pagination.cur_page-1)*e.pagination.limit+i+1),r(2),f(E(5,14,t.created_at,"d MMM yyyy, hh:mm a","--")),r(3),f(t.created_name),r(4),_("ngForOf",t.files),r(3),f(t.product_name),r(3),f(t.product_code),r(3),f(t.stock_quantity||"--"),r(5),T("",t.last_transaction_days||0," Days Ago"),r(2),W("matTooltip",t.description),r(),f(t.description||"--"),r(2),_("ngIf",e.accessRight==null?null:e.accessRight.modifyRight),r(),_("icon","ri-file-list-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),r(),_("ngIf",e.accessRight==null?null:e.accessRight.deleteRight)}}function Pt(n,c){if(n&1){let t=b();x(0),a(1,"tr",14)(2,"td"),p(3,"\xA0"),o(),a(4,"td")(5,"div",15)(6,"mat-form-field",16)(7,"input",17),y("ngModelChange",function(e){m(t);let l=s(2);return S(l.filter.created_at,e)||(l.filter.created_at=e),d(e)}),g("ngModelChange",function(){m(t);let e=s(2);return d(e.getList())}),o(),v(8,"mat-datepicker-toggle",18)(9,"mat-datepicker",null,0),o()()(),a(11,"td")(12,"div",15)(13,"mat-form-field",16)(14,"input",19),y("ngModelChange",function(e){m(t);let l=s(2);return S(l.filter.created_name,e)||(l.filter.created_name=e),d(e)}),g("keyup.enter",function(){m(t);let e=s(2);return d(e.getList())}),o(),u(15,St,3,0,"button",20),o()()(),a(16,"td")(17,"div",15)(18,"mat-form-field",16)(19,"input",19),y("ngModelChange",function(e){m(t);let l=s(2);return S(l.filter.product_name,e)||(l.filter.product_name=e),d(e)}),g("keyup.enter",function(){m(t);let e=s(2);return d(e.getList())}),o(),u(20,yt,3,0,"button",20),o()()(),a(21,"td"),p(22,"\xA0"),o(),a(23,"td")(24,"div",15)(25,"mat-form-field",16)(26,"input",19),y("ngModelChange",function(e){m(t);let l=s(2);return S(l.filter.description,e)||(l.filter.description=e),d(e)}),g("keyup.enter",function(){m(t);let e=s(2);return d(e.getList())}),o(),u(27,kt,3,0,"button",20),o()()(),a(28,"td"),p(29,"\xA0"),o()(),u(30,Et,33,18,"tr",21),h()}if(n&2){let t=G(10),i=s(2);r(7),_("matDatepicker",t),w("ngModel",i.filter.created_at),r(),_("for",t),r(6),w("ngModel",i.filter.created_name),r(),k(i.filter.created_name?15:-1),r(4),w("ngModel",i.filter.product_name),r(),k(i.filter.product_name?20:-1),r(6),w("ngModel",i.filter.description),r(),k(i.filter.description?27:-1),r(3),_("ngForOf",i.listing)}}function Vt(n,c){n&1&&(a(0,"td"),v(1,"app-skeleton"),o()),n&2&&(r(),V("h20 bg-skeleton"))}function Gt(n,c){n&1&&(a(0,"tr",14),u(1,Vt,2,2,"td",27),o()),n&2&&(r(),_("ngForOf",L(1,P).constructor(7)))}function It(n,c){n&1&&(x(0),u(1,Gt,2,2,"tr",41),h()),n&2&&(r(),_("ngForOf",L(1,P).constructor(8)))}function Dt(n,c){if(n&1&&(x(0),a(1,"spk-reusable-tables",13),u(2,Pt,31,10,"ng-container",11)(3,It,2,2,"ng-container",11),o(),h()),n&2){let t=s();r(),_("tableHead","border-b")("showAction",!0)("showS_No",!0)("columns",t.headers),r(),_("ngIf",!t.skLoading),r(),_("ngIf",t.skLoading)}}function Ft(n,c){if(n&1){let t=b();a(0,"button",22),g("click",function(){m(t);let e=s(3);return e.filter.created_name="",d(e.getList())}),a(1,"mat-icon"),p(2,"close"),o()()}}function At(n,c){if(n&1){let t=b();a(0,"button",22),g("click",function(){m(t);let e=s(3);return e.filter.assigned_to_name="",d(e.getList())}),a(1,"mat-icon"),p(2,"close"),o()()}}function Rt(n,c){if(n&1){let t=b();a(0,"tr",23)(1,"td",24),p(2),o(),a(3,"td"),p(4),M(5,"date"),o(),a(6,"td"),p(7),o(),a(8,"td")(9,"div",25)(10,"span",26),v(11,"img",42),o(),a(12,"div",28)(13,"span",29)(14,"a",30),g("click",function(){let e=m(t).$implicit,l=s(3);return d(l.goToDetailPage(e._id))}),p(15),o()(),a(16,"span",29),p(17),o()()()(),a(18,"td",34),p(19),o(),a(20,"td",34),p(21),o(),a(22,"td"),p(23),M(24,"date"),a(25,"span",32),p(26),o()(),a(27,"td",34)(28,"app-icon-button",40),g("click",function(){let e=m(t).$implicit,l=s(3);return d(l.delete(e._id,"pop-gift/delete","Delete"))}),o()()()}if(n&2){let t=c.$implicit,i=c.index,e=s(3);r(2),f((e.pagination.cur_page-1)*e.pagination.limit+i+1),r(2),f(E(5,11,t.created_at,"d MMM yyyy, hh:mm a","--")),r(3),f(t.created_name),r(8),f(t.assigned_to_name||"--"),r(2),f(t.mobile||"--"),r(2),f(t.total_items),r(2),f(t.stock_quantity),r(2),T(" ",E(24,15,t.last_transaction_date,"d MMM yyyy, hh:mm a","--")," "),r(3),T("",t.last_transaction_days||0," Days Ago"),r(2),_("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}}function Bt(n,c){if(n&1){let t=b();x(0),a(1,"tr",14)(2,"td"),p(3,"\xA0"),o(),a(4,"td")(5,"div",15)(6,"mat-form-field",16)(7,"input",17),y("ngModelChange",function(e){m(t);let l=s(2);return S(l.filter.created_at,e)||(l.filter.created_at=e),d(e)}),g("ngModelChange",function(){m(t);let e=s(2);return d(e.getList())}),o(),v(8,"mat-datepicker-toggle",18)(9,"mat-datepicker",null,0),o()()(),a(11,"td")(12,"div",15)(13,"mat-form-field",16)(14,"input",19),y("ngModelChange",function(e){m(t);let l=s(2);return S(l.filter.created_name,e)||(l.filter.created_name=e),d(e)}),g("keyup.enter",function(){m(t);let e=s(2);return d(e.getList())}),o(),u(15,Ft,3,0,"button",20),o()()(),a(16,"td")(17,"div",15)(18,"mat-form-field",16)(19,"input",19),y("ngModelChange",function(e){m(t);let l=s(2);return S(l.filter.assigned_to_name,e)||(l.filter.assigned_to_name=e),d(e)}),g("keyup.enter",function(){m(t);let e=s(2);return d(e.getList())}),o(),u(20,At,3,0,"button",20),o()()(),a(21,"td"),p(22,"\xA0"),o(),a(23,"td"),p(24,"\xA0"),o(),a(25,"td"),p(26,"\xA0"),o()(),u(27,Rt,29,19,"tr",21),h()}if(n&2){let t=G(10),i=s(2);r(7),_("matDatepicker",t),w("ngModel",i.filter.created_at),r(),_("for",t),r(6),w("ngModel",i.filter.created_name),r(),k(i.filter.created_name?15:-1),r(4),w("ngModel",i.filter.assigned_to_name),r(),k(i.filter.assigned_to_name?20:-1),r(7),_("ngForOf",i.listing)}}function Wt(n,c){n&1&&(a(0,"td"),v(1,"app-skeleton"),o()),n&2&&(r(),V("h20 bg-skeleton"))}function jt(n,c){n&1&&(a(0,"tr",14),u(1,Wt,2,2,"td",27),o()),n&2&&(r(),_("ngForOf",L(1,P).constructor(8)))}function Ot(n,c){n&1&&(x(0),u(1,jt,2,2,"tr",41),h()),n&2&&(r(),_("ngForOf",L(1,P).constructor(8)))}function Nt(n,c){if(n&1&&(x(0),a(1,"spk-reusable-tables",13),u(2,Bt,28,8,"ng-container",11)(3,Ot,2,2,"ng-container",11),o(),h()),n&2){let t=s();r(),_("tableHead","border-b")("showAction",!0)("showS_No",!0)("columns",t.headers_one),r(),_("ngIf",!t.skLoading),r(),_("ngIf",t.skLoading)}}function Ht(n,c){n&1&&(x(0),v(1,"app-data-not-found"),h())}var ht=class n{constructor(c,t,i,e,l,Yt,qt,zt){this.dialog=c;this.api=t;this.alert=i;this.router=e;this.toastr=l;this.comanFuncation=Yt;this.moduleService=qt;this.dateService=zt}skLoading=!1;activeTab="company_stock";pagination={};filter={};mainTabs=[];submodule={};listingCount={};listing=[];cardData=[];showChangeStatusBtn=!1;accessRight={};ngOnInit(){let c=this.moduleService.getAccessMap("SFA","Pop Gift");c&&(this.accessRight=c);let t=this.moduleService.getSubModuleByName("SFA","Pop Gift");t&&(this.submodule=t),this.getList()}goToDetailPage(c){this.router.navigate(["/apps/sfa/pop-gift/pop-gift-detail",c,this.activeTab])}onRefresh(){this.filter={},this.getList()}onTabChange(c){this.activeTab=c,(this.activeTab==="company_stock"||this.activeTab==="team_stock"||this.activeTab==="distributor_stock")&&this.getList()}changeToPage(c){this.pagination.cur_page=c,this.getList()}changeToPagination(c){c==="Next"&&this.pagination.cur_page<this.pagination.total_pages?this.pagination.cur_page++:c==="Previous"&&this.pagination.cur_page>1&&this.pagination.cur_page--,this.getList()}getList(){this.skLoading=!0,this.filter.created_at&&(this.filter.created_at=this.dateService.formatToYYYYMMDD(this.filter.created_at)),this.api.post({filters:this.filter,activeTab:this.activeTab,page:this.pagination.cur_page??1},"pop-gift/read-pop-gift").subscribe(c=>{c.statusCode==200&&(this.skLoading=!1,this.listing=c.data.result,this.listingCount=c.data.summaryStats,this.pagination=c.pagination,this.getMainTabs())})}openModal(c,t){this.dialog.open(xt,{width:t!=="manage-transaction"?"400px":"770px",panelClass:t!=="manage-transaction"?"mat-right-modal":"",position:t!=="manage-transaction"?{right:"0px"}:void 0,data:{formType:t,formData:c||{}}}).afterClosed().subscribe(e=>{e===!0&&this.getList()})}delete(c,t,i){this.comanFuncation.delete(c,this.submodule,i,t,"single_action",c).subscribe(e=>{e===!0&&this.getList()})}getMainTabs(){this.cardData=[{id:1,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Total Items",value:this.listingCount.totalItems,graph:"Stock Execution",color:"success",percentage:"2.56%",percentageIcon:"ti ti-arrow-narrow-up fs-16",bg:"primary",icon:"ti ti-box-multiple",colClass:"xxl:col-span-2"},{id:2,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Company Stock",value:this.listingCount.companyStock,graph:"Stock Execution",color:"success",percentage:"0.34%",percentageIcon:"ti ti-arrow-narrow-up fs-16",bg:"primarytint1color",icon:"ti ti-building-warehouse",colClass:"xxl:col-span-2",activeTab:"company_stock"},{id:3,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Team Stock",value:this.listingCount.teamStock,graph:"Stock Execution",color:"success",percentage:"7.66%",percentageIcon:"ti ti-arrow-narrow-up fs-16",bg:"primarytint2color",icon:"ti ti-users",colClass:"xxl:col-span-2",activeTab:"team_stock"},{id:4,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Distributor Stock",value:this.listingCount.customerStock,graph:"Stock Execution",color:"danger",percentage:"0.74%",percentageIcon:"ti ti-arrow-narrow-down fs-16",bg:"primarytint3color",icon:"ti ti-truck-loading",colClass:"xxl:col-span-3",activeTab:"distributor_stock"},{id:5,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Successfully Distribution",value:Math.round(+this.listingCount.distributionPercentage.replace("%",""))+"%",graph:"Stock Execution",color:"danger",percentage:"0.74%",percentageIcon:"ti ti-arrow-narrow-down fs-16",bg:"primarytint3color",icon:"ti ti-checkup-list",colClass:"xxl:col-span-3",activeTab:"percentage_stock"}]}openMainLogModal(c){this.comanFuncation.listLogsModal(this.submodule.module_id,c,this.submodule.module_type).subscribe(t=>{t===!0&&this.getList()})}headers=[{label:"Created At"},{label:"Created By"},{label:"Item Detail"},{label:"Stock"},{label:"Description"}];headers_one=[{label:"Created At"},{label:"Created By"},{label:"User Detail"},{label:"Total Item",table_class:"text-center"},{label:"Total Stock",table_class:"text-center"},{label:"Last Transaction"}];static \u0275fac=function(t){return new(t||n)(C(lt),C(K),C(Q),C(Y),C(q),C(ut),C(Z),C(pt))};static \u0275cmp=D({type:n,selectors:[["app-pop-gift-list"]],decls:15,vars:18,consts:[["picker",""],[3,"title","title1","activeitem"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xxl:col-span-12","col-span-12"],[3,"class"],[1,"row"],[1,"col-xl-12"],[1,"box"],[3,"onRefresh","logBtn","button1","importBtn","pageTitle","listLength","btnShow","refreshLabel","btnShow1","logsLabel","btnShow2","addBtnLabel","btnShow3","importLabel","importIcon"],[1,"box-body"],[1,"table-responsive","overflow-auto","table-bordered-default"],[4,"ngIf"],[3,"buttonClick","card","bgOnActive"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showAction","showS_No","columns"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"table-search-filters"],[1,"table-input"],["matInput","","placeholder","Created At",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["class","product-list border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"product-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"flex","items-center"],[1,"avatar","avatar-sm","me-2","avatar-rounded"],[4,"ngFor","ngForOf"],[1,""],[1,"block"],[1,"text-primary","font-medium","underline",3,"click"],[1,"text-textmuted","dark:text-textmuted/50","text-[11px]"],[1,"badge","text-primary","bg-primary/10"],[1,"ellipsis",3,"matTooltip"],[1,"text-center"],["matTooltip","Edit",3,"icon","buttonClass","clickEvent",4,"ngIf"],[3,"clickEvent","icon","buttonClass"],[3,"icon","buttonClass","click",4,"ngIf"],["alt","Gift Image",3,"click","src"],["matTooltip","Edit",3,"clickEvent","icon","buttonClass"],[3,"click","icon","buttonClass"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],["src","./assets/images/faces/11.jpg","alt","Gift Image"]],template:function(t,i){t&1&&(v(0,"app-page-header",1),a(1,"div",2)(2,"div",3)(3,"div",2),R(4,wt,2,5,"div",4,A),o()()(),a(6,"div",5)(7,"div",6)(8,"div",7)(9,"app-page-sub-header",8),g("onRefresh",function(){return i.onRefresh()})("logBtn",function(){return i.openMainLogModal("")})("button1",function(){return i.openModal("","add")})("importBtn",function(){return i.openModal("","manage-transaction")}),o(),a(10,"div",9)(11,"div",10),u(12,Dt,4,6,"ng-container",11)(13,Nt,4,6,"ng-container",11)(14,Ht,2,0,"ng-container",11),o()()()()()),t&2&&(_("title","Pop & Gift")("title1",L(17,vt))("activeitem","Pop & Gift List"),r(4),B(i.cardData),r(5),_("pageTitle","Pop & Gift List")("listLength",i.listing.length)("btnShow",!0)("refreshLabel","Refresh")("btnShow1",!0)("logsLabel","Logs")("btnShow2",i.accessRight==null?null:i.accessRight.addRight)("addBtnLabel","Add Pop & Gift")("btnShow3",i.accessRight==null?null:i.accessRight.addRight)("importLabel","Manage Transaction")("importIcon","ri-box-3-line"),r(3),_("ngIf",i.activeTab==="company_stock"),r(),_("ngIf",i.activeTab!=="company_stock"),r(),_("ngIf",!i.listing.length&&!i.skLoading))},dependencies:[gt,j,O,z,U,J,ft,X,dt,Ct,bt,st,N,H,mt,_t,it,at,rt,ct,nt,ot,et,tt,$],encapsulation:2})};export{ht as PopGiftListComponent};
