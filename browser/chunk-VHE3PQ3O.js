import{A as di,Aa as Au,B as Nn,Ba as Zg,C as Jl,Ca as Kg,D as Ql,Da as Yg,Ea as ku,F as Ir,Fa as Xg,G as Qo,Ga as La,H as $l,Ha as Jg,I as Gg,Ia as Qg,Ja as $g,L as $o,M as Or,Oa as e_,P as ec,Pa as t_,Q as Ug,Va as Pu,W as pi,Wa as n_,X as fi,Xa as i_,Ya as Du,Z as qg,Za as r_,_a as tc,ab as o_,bb as s_,da as Wg,hb as Ai,jb as Ra,la as jg,oa as Ou,u as zg,ua as Da,va as Mu,wa as Kr,x as ar,y as Hg,z as Zn}from"./chunk-GYDYF5F3.js";import{G as Bg,Q as Vg,b as Dg,e as Rn,f as ni,g as Mt,k as Lg,l as Tu,m as vo,n as Rg,o as Iu,q as Ng,t as Pt,u as Fg}from"./chunk-PD5VTTIY.js";import{$ as Tg,$b as Ln,Aa as Q,Ac as wr,Ba as $,Ca as Eu,Cd as Pg,Ec as Su,Fc as ti,G as Cg,Ga as Xo,Gc as Hn,Hb as lt,Hc as Gn,Ib as jn,Jb as Zr,K as Eg,Ka as be,Kb as kg,La as Wr,Lc as Sr,M as xg,Mc as te,Nb as af,Nc as Wt,O as wg,Ob as _e,Oc as bt,P as Sg,Pa as kn,Ua as Ig,Uc as Zl,Vc as Kl,Wc as Yl,Xc as Oi,Yb as xu,Yc as ka,Zb as xr,Zc as Mi,_b as N,_c as Ls,aa as of,ac as Ki,bc as en,ca as qr,cc as zn,ea as sf,ed as wt,f as Ds,fc as wu,fd as kt,g as vg,gd as Xl,ja as Zi,jd as Pa,ka as go,kb as jr,kc as V,la as Wn,lb as Og,lc as B,mc as Be,na as Aa,nc as Nt,oc as Ft,pa as Cu,pb as Jo,pc as jl,q as ql,qc as $e,qd as Tr,rb as D,s as yg,sb as Fe,v as bu,vb as Mg,w as bg,wc as he,xb as Wl,yb as Ag,yc as z,za as An,zc as _o}from"./chunk-2NSPOFEK.js";import{a as Cn,b as ji,e as Ul,g as Ps}from"./chunk-66YHNWRR.js";var od=Ul((rd,b0)=>{"use strict";(function(n,t){typeof rd=="object"&&typeof b0<"u"?t(rd):typeof define=="function"&&define.amd?define(["exports"],t):(n=n||self,t(n.FilePond={}))})(rd,function(n){"use strict";var t=function(c){return c instanceof HTMLElement},e=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],_=Object.assign({},c),b=[],x=[],w=function(){return Object.assign({},_)},M=function(){var X=[].concat(b);return b.length=0,X},A=function(){var X=[].concat(x);x.length=0,X.forEach(function(Ee){var qe=Ee.type,Ye=Ee.data;k(qe,Ye)})},k=function(X,Ee,qe){if(qe&&!document.hidden){x.push({type:X,data:Ee});return}ue[X]&&ue[X](Ee),b.push({type:X,data:Ee})},U=function(X){for(var Ee,qe=arguments.length,Ye=new Array(qe>1?qe-1:0),Me=1;Me<qe;Me++)Ye[Me-1]=arguments[Me];return ne[X]?(Ee=ne)[X].apply(Ee,Ye):null},q={getState:w,processActionQueue:M,processDispatchQueue:A,dispatch:k,query:U},ne={};u.forEach(function(pe){ne=Object.assign({},pe(_),{},ne)});var ue={};return f.forEach(function(pe){ue=Object.assign({},pe(k,U,_),{},ue)}),q},i=function(c,u,f){if(typeof f=="function"){c[u]=f;return}Object.defineProperty(c,u,Object.assign({},f))},r=function(c,u){for(var f in c)c.hasOwnProperty(f)&&u(f,c[f])},s=function(c){var u={};return r(c,function(f){i(u,f,c[f])}),u},a=function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(f===null)return c.getAttribute(u)||c.hasAttribute(u);c.setAttribute(u,f)},d="http://www.w3.org/2000/svg",h=["svg","path"],m=function(c){return h.includes(c)},y=function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};typeof u=="object"&&(f=u,u=null);var _=m(c)?document.createElementNS(d,c):document.createElement(c);return u&&(m(c)?a(_,"class",u):_.className=u),r(f,function(b,x){a(_,b,x)}),_},E=function(c){return function(u,f){typeof f<"u"&&c.children[f]?c.insertBefore(u,c.children[f]):c.appendChild(u)}},O=function(c,u){return function(f,_){return typeof _<"u"?u.splice(_,0,f):u.push(f),f}},T=function(c,u){return function(f){return u.splice(u.indexOf(f),1),f.element.parentNode&&c.removeChild(f.element),f}},S=function(){return typeof window<"u"&&typeof window.document<"u"}(),F=function(){return S},G=F()?y("svg"):{},j="children"in G?function(v){return v.children.length}:function(v){return v.childNodes.length},oe=function(c,u,f,_){var b=f[0]||c.left,x=f[1]||c.top,w=b+c.width,M=x+c.height*(_[1]||1),A={element:Object.assign({},c),inner:{left:c.left,top:c.top,right:c.right,bottom:c.bottom},outer:{left:b,top:x,right:w,bottom:M}};return u.filter(function(k){return!k.isRectIgnored()}).map(function(k){return k.rect}).forEach(function(k){ve(A.inner,Object.assign({},k.inner)),ve(A.outer,Object.assign({},k.outer))}),ee(A.inner),A.outer.bottom+=A.element.marginBottom,A.outer.right+=A.element.marginRight,ee(A.outer),A},ve=function(c,u){u.top+=c.top,u.right+=c.left,u.bottom+=c.top,u.left+=c.left,u.bottom>c.bottom&&(c.bottom=u.bottom),u.right>c.right&&(c.right=u.right)},ee=function(c){c.width=c.right-c.left,c.height=c.bottom-c.top},ye=function(c){return typeof c=="number"},Ae=function(c,u,f){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.001;return Math.abs(c-u)<_&&Math.abs(f)<_},Ze=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.stiffness,f=u===void 0?.5:u,_=c.damping,b=_===void 0?.75:_,x=c.mass,w=x===void 0?10:x,M=null,A=null,k=0,U=!1,q=function(X,Ee){if(!U){if(!(ye(M)&&ye(A))){U=!0,k=0;return}var qe=-(A-M)*f;k+=qe/w,A+=k,k*=b,Ae(A,M,k)||Ee?(A=M,k=0,U=!0,ue.onupdate(A),ue.oncomplete(A)):ue.onupdate(A)}},ne=function(X){if(ye(X)&&!ye(A)&&(A=X),M===null&&(M=X,A=X),M=X,A===M||typeof M>"u"){U=!0,k=0,ue.onupdate(A),ue.oncomplete(A);return}U=!1},ue=s({interpolate:q,target:{set:ne,get:function(){return M}},resting:{get:function(){return U}},onupdate:function(X){},oncomplete:function(X){}});return ue},je=function(c){return c},se=function(c){return c<.5?2*c*c:-1+(4-2*c)*c},ge=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.duration,f=u===void 0?500:u,_=c.easing,b=_===void 0?se:_,x=c.delay,w=x===void 0?0:x,M=null,A,k,U=!0,q=!1,ne=null,ue=function(Ee,qe){U||ne===null||(M===null&&(M=Ee),!(Ee-M<w)&&(A=Ee-M-w,A>=f||qe?(A=1,k=q?0:1,pe.onupdate(k*ne),pe.oncomplete(k*ne),U=!0):(k=A/f,pe.onupdate((A>=0?b(q?1-k:k):0)*ne))))},pe=s({interpolate:ue,target:{get:function(){return q?0:ne},set:function(Ee){if(ne===null){ne=Ee,pe.onupdate(Ee),pe.oncomplete(Ee);return}Ee<ne?(ne=1,q=!0):(q=!1,ne=Ee),U=!1,M=null}},resting:{get:function(){return U}},onupdate:function(Ee){},oncomplete:function(Ee){}});return pe},Le={spring:Ze,tween:ge},Ie=function(c,u,f){var _=c[u]&&typeof c[u][f]=="object"?c[u][f]:c[u]||c,b=typeof _=="string"?_:_.type,x=typeof _=="object"?Object.assign({},_):{};return Le[b]?Le[b](x):null},et=function(c,u,f){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;u=Array.isArray(u)?u:[u],u.forEach(function(b){c.forEach(function(x){var w=x,M=function(){return f[x]},A=function(U){return f[x]=U};typeof x=="object"&&(w=x.key,M=x.getter||M,A=x.setter||A),!(b[w]&&!_)&&(b[w]={get:M,set:A})})})},Qe=function(c){var u=c.mixinConfig,f=c.viewProps,_=c.viewInternalAPI,b=c.viewExternalAPI,x=Object.assign({},f),w=[];return r(u,function(M,A){var k=Ie(A);if(k){k.onupdate=function(q){f[M]=q},k.target=x[M];var U={key:M,setter:function(ne){k.target!==ne&&(k.target=ne)},getter:function(){return f[M]}};et([U],[_,b],f,!0),w.push(k)}}),{write:function(A){var k=document.hidden,U=!0;return w.forEach(function(q){q.resting||(U=!1),q.interpolate(A,k)}),U},destroy:function(){}}},pt=function(c){return function(u,f){c.addEventListener(u,f)}},Pe=function(c){return function(u,f){c.removeEventListener(u,f)}},Et=function(c){var u=c.mixinConfig,f=c.viewProps,_=c.viewInternalAPI,b=c.viewExternalAPI,x=c.viewState,w=c.view,M=[],A=pt(w.element),k=Pe(w.element);return b.on=function(U,q){M.push({type:U,fn:q}),A(U,q)},b.off=function(U,q){M.splice(M.findIndex(function(ne){return ne.type===U&&ne.fn===q}),1),k(U,q)},{write:function(){return!0},destroy:function(){M.forEach(function(q){k(q.type,q.fn)})}}},ke=function(c){var u=c.mixinConfig,f=c.viewProps,_=c.viewExternalAPI;et(u,_,f)},De=function(c){return c!=null},vt={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},He=function(c){var u=c.mixinConfig,f=c.viewProps,_=c.viewInternalAPI,b=c.viewExternalAPI,x=c.view,w=Object.assign({},f),M={};et(u,[_,b],f);var A=function(){return[f.translateX||0,f.translateY||0]},k=function(){return[f.scaleX||0,f.scaleY||0]},U=function(){return x.rect?oe(x.rect,x.childViews,A(),k()):null};return _.rect={get:U},b.rect={get:U},u.forEach(function(q){f[q]=typeof w[q]>"u"?vt[q]:w[q]}),{write:function(){if(de(M,f))return J(x.element,f),Object.assign(M,Object.assign({},f)),!0},destroy:function(){}}},de=function(c,u){if(Object.keys(c).length!==Object.keys(u).length)return!0;for(var f in u)if(u[f]!==c[f])return!0;return!1},J=function(c,u){var f=u.opacity,_=u.perspective,b=u.translateX,x=u.translateY,w=u.scaleX,M=u.scaleY,A=u.rotateX,k=u.rotateY,U=u.rotateZ,q=u.originX,ne=u.originY,ue=u.width,pe=u.height,X="",Ee="";(De(q)||De(ne))&&(Ee+="transform-origin: "+(q||0)+"px "+(ne||0)+"px;"),De(_)&&(X+="perspective("+_+"px) "),(De(b)||De(x))&&(X+="translate3d("+(b||0)+"px, "+(x||0)+"px, 0) "),(De(w)||De(M))&&(X+="scale3d("+(De(w)?w:1)+", "+(De(M)?M:1)+", 1) "),De(U)&&(X+="rotateZ("+U+"rad) "),De(A)&&(X+="rotateX("+A+"rad) "),De(k)&&(X+="rotateY("+k+"rad) "),X.length&&(Ee+="transform:"+X+";"),De(f)&&(Ee+="opacity:"+f+";",f===0&&(Ee+="visibility:hidden;"),f<1&&(Ee+="pointer-events:none;")),De(pe)&&(Ee+="height:"+pe+"px;"),De(ue)&&(Ee+="width:"+ue+"px;");var qe=c.elementCurrentStyle||"";(Ee.length!==qe.length||Ee!==qe)&&(c.style.cssText=Ee,c.elementCurrentStyle=Ee)},ae={styles:He,listeners:Et,animations:Qe,apis:ke},me=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return u.layoutCalculated||(c.paddingTop=parseInt(f.paddingTop,10)||0,c.marginTop=parseInt(f.marginTop,10)||0,c.marginRight=parseInt(f.marginRight,10)||0,c.marginBottom=parseInt(f.marginBottom,10)||0,c.marginLeft=parseInt(f.marginLeft,10)||0,u.layoutCalculated=!0),c.left=u.offsetLeft||0,c.top=u.offsetTop||0,c.width=u.offsetWidth||0,c.height=u.offsetHeight||0,c.right=c.left+c.width,c.bottom=c.top+c.height,c.scrollTop=u.scrollTop,c.hidden=u.offsetParent===null,c},ie=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.tag,f=u===void 0?"div":u,_=c.name,b=_===void 0?null:_,x=c.attributes,w=x===void 0?{}:x,M=c.read,A=M===void 0?function(){}:M,k=c.write,U=k===void 0?function(){}:k,q=c.create,ne=q===void 0?function(){}:q,ue=c.destroy,pe=ue===void 0?function(){}:ue,X=c.filterFrameActionsForChild,Ee=X===void 0?function(Ne,We){return We}:X,qe=c.didCreateView,Ye=qe===void 0?function(){}:qe,Me=c.didWriteView,_t=Me===void 0?function(){}:Me,Re=c.ignoreRect,Qt=Re===void 0?!1:Re,$t=c.ignoreRectUpdate,ze=$t===void 0?!1:$t,Xe=c.mixins,tt=Xe===void 0?[]:Xe;return function(Ne){var We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=y(f,"filepond--"+b,w),rn=window.getComputedStyle(it,null),Kt=me(),ot=null,fe=!1,K=[],Ke=[],mt={},Ct={},Lt=[U],Ut=[A],bn=[pe],Tn=function(){return it},Oa=function(){return K.concat()},fg=function(){return mt},YC=function(Rt){return function(ho,mo){return ho(Rt,mo)}},hg=function(){return ot||(ot=oe(Kt,K,[0,0],[1,1]),ot)},XC=function(){return rn},JC=function(){ot=null,K.forEach(function(mo){return mo._read()});var Rt=!(ze&&Kt.width&&Kt.height);Rt&&me(Kt,it,rn);var ho={root:Yo,props:We,rect:Kt};Ut.forEach(function(mo){return mo(ho)})},QC=function(Rt,ho,mo){var Ma=ho.length===0;return Lt.forEach(function(Ii){var ks=Ii({props:We,root:Yo,actions:ho,timestamp:Rt,shouldOptimize:mo});ks===!1&&(Ma=!1)}),Ke.forEach(function(Ii){var ks=Ii.write(Rt);ks===!1&&(Ma=!1)}),K.filter(function(Ii){return!!Ii.element.parentNode}).forEach(function(Ii){var ks=Ii._write(Rt,Ee(Ii,ho),mo);ks||(Ma=!1)}),K.forEach(function(Ii,ks){Ii.element.parentNode||(Yo.appendChild(Ii.element,ks),Ii._read(),Ii._write(Rt,Ee(Ii,ho),mo),Ma=!1)}),fe=Ma,_t({props:We,root:Yo,actions:ho,timestamp:Rt}),Ma},$C=function(){Ke.forEach(function(Rt){return Rt.destroy()}),bn.forEach(function(Rt){Rt({root:Yo,props:We})}),K.forEach(function(Rt){return Rt._destroy()})},mg={element:{get:Tn},style:{get:XC},childViews:{get:Oa}},gg=Object.assign({},mg,{rect:{get:hg},ref:{get:fg},is:function(Rt){return b===Rt},appendChild:E(it),createChildView:YC(Ne),linkView:function(Rt){return K.push(Rt),Rt},unlinkView:function(Rt){K.splice(K.indexOf(Rt),1)},appendChildView:O(it,K),removeChildView:T(it,K),registerWriter:function(Rt){return Lt.push(Rt)},registerReader:function(Rt){return Ut.push(Rt)},registerDestroyer:function(Rt){return bn.push(Rt)},invalidateLayout:function(){return it.layoutCalculated=!1},dispatch:Ne.dispatch,query:Ne.query}),_g={element:{get:Tn},childViews:{get:Oa},rect:{get:hg},resting:{get:function(){return fe}},isRectIgnored:function(){return Qt},_read:JC,_write:QC,_destroy:$C},eE=Object.assign({},mg,{rect:{get:function(){return Kt}}});Object.keys(tt).sort(function(gn,Rt){return gn==="styles"?1:Rt==="styles"?-1:0}).forEach(function(gn){var Rt=ae[gn]({mixinConfig:tt[gn],viewProps:We,viewState:Ct,viewInternalAPI:gg,viewExternalAPI:_g,view:s(eE)});Rt&&Ke.push(Rt)});var Yo=s(gg);ne({root:Yo,props:We});var tE=j(it);return K.forEach(function(gn,Rt){Yo.appendChild(gn.element,tE+Rt)}),Ye(Yo),s(_g)}},Ge=function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:60,_="__framePainter";if(window[_]){window[_].readers.push(c),window[_].writers.push(u);return}window[_]={readers:[c],writers:[u]};var b=window[_],x=1e3/f,w=null,M=null,A=null,k=null,U=function(){document.hidden?(A=function(){return window.setTimeout(function(){return q(performance.now())},x)},k=function(){return window.clearTimeout(M)}):(A=function(){return window.requestAnimationFrame(q)},k=function(){return window.cancelAnimationFrame(M)})};document.addEventListener("visibilitychange",function(){k&&k(),U(),q(performance.now())});var q=function ne(ue){M=A(ne),w||(w=ue);var pe=ue-w;pe<=x||(w=ue-pe%x,b.readers.forEach(function(X){return X()}),b.writers.forEach(function(X){return X(ue)}))};return U(),q(performance.now()),{pause:function(){k(M)}}},Oe=function(c,u){return function(f){var _=f.root,b=f.props,x=f.actions,w=x===void 0?[]:x,M=f.timestamp,A=f.shouldOptimize;w.filter(function(k){return c[k.type]}).forEach(function(k){return c[k.type]({root:_,props:b,action:k.data,timestamp:M,shouldOptimize:A})}),u&&u({root:_,props:b,actions:w,timestamp:M,shouldOptimize:A})}},st=function(c,u){return u.parentNode.insertBefore(c,u)},ut=function(c,u){return u.parentNode.insertBefore(c,u.nextSibling)},Dt=function(c){return Array.isArray(c)},gt=function(c){return c==null},Zt=function(c){return c.trim()},at=function(c){return""+c},Yt=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return gt(c)?[]:Dt(c)?c:at(c).split(u).map(Zt).filter(function(f){return f.length})},pn=function(c){return typeof c=="boolean"},fn=function(c){return pn(c)?c:c==="true"},Ot=function(c){return typeof c=="string"},zt=function(c){return ye(c)?c:Ot(c)?at(c).replace(/[a-z]+/gi,""):0},Bt=function(c){return parseInt(zt(c),10)},Xt=function(c){return parseFloat(zt(c))},xt=function(c){return ye(c)&&isFinite(c)&&Math.floor(c)===c},ft=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(xt(c))return c;var f=at(c).trim();return/MB$/i.test(f)?(f=f.replace(/MB$i/,"").trim(),Bt(f)*u*u):/KB/i.test(f)?(f=f.replace(/KB$i/,"").trim(),Bt(f)*u):Bt(f)},qt=function(c){return typeof c=="function"},bi=function(c){for(var u=self,f=c.split("."),_=null;_=f.shift();)if(u=u[_],!u)return null;return u},Fi={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},pr=function(c){var u={};return u.url=Ot(c)?c:c.url||"",u.timeout=c.timeout?parseInt(c.timeout,10):0,u.headers=c.headers?c.headers:{},r(Fi,function(f){u[f]=fr(f,c[f],Fi[f],u.timeout,u.headers)}),u.process=c.process||Ot(c)||c.url?u.process:null,u.remove=c.remove||null,delete u.headers,u},fr=function(c,u,f,_,b){if(u===null)return null;if(typeof u=="function")return u;var x={url:f==="GET"||f==="PATCH"?"?"+c+"=":"",method:f,headers:b,withCredentials:!1,timeout:_,onload:null,ondata:null,onerror:null};if(Ot(u))return x.url=u,x;if(Object.assign(x,u),Ot(x.headers)){var w=x.headers.split(/:(.+)/);x.headers={header:w[0],value:w[1]}}return x.withCredentials=fn(x.withCredentials),x},Bi=function(c){return pr(c)},Jn=function(c){return c===null},At=function(c){return typeof c=="object"&&c!==null},Ci=function(c){return At(c)&&Ot(c.url)&&At(c.process)&&At(c.revert)&&At(c.restore)&&At(c.fetch)},li=function(c){return Dt(c)?"array":Jn(c)?"null":xt(c)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(c)?"bytes":Ci(c)?"api":typeof c},so=function(c){return c.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",')},Vi={array:Yt,boolean:fn,int:function(c){return li(c)==="bytes"?ft(c):Bt(c)},number:Xt,float:Xt,bytes:ft,string:function(c){return qt(c)?c:at(c)},function:function(c){return bi(c)},serverapi:Bi,object:function(c){try{return JSON.parse(so(c))}catch{return null}}},Fr=function(c,u){return Vi[u](c)},Fn=function(c,u,f){if(c===u)return c;var _=li(c);if(_!==f){var b=Fr(c,f);if(_=li(b),b===null)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+f+'"';c=b}return c},nr=function(c,u){var f=c;return{enumerable:!0,get:function(){return f},set:function(b){f=Fn(b,c,u)}}},zi=function(c){var u={};return r(c,function(f){var _=c[f];u[f]=nr(_[0],_[1])}),s(u)},ir=function(c){return{items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:zi(c)}},Ei=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return c.split(/(?=[A-Z])/).map(function(f){return f.toLowerCase()}).join(u)},Br=function(c,u){var f={};return r(u,function(_){f[_]={get:function(){return c.getState().options[_]},set:function(x){c.dispatch("SET_"+Ei(_,"_").toUpperCase(),{value:x})}}}),f},Do=function(c){return function(u,f,_){var b={};return r(c,function(x){var w=Ei(x,"_").toUpperCase();b["SET_"+w]=function(M){try{_.options[x]=M.value}catch{}u("DID_SET_"+w,{value:_.options[x]})}}),b}},Vr=function(c){return function(u){var f={};return r(c,function(_){f["GET_"+Ei(_,"_").toUpperCase()]=function(b){return u.options[_]}}),f}},P={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},H=function(){return Math.random().toString(36).substring(2,11)};function W(v){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W=function(c){return typeof c}:W=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},W(v)}var ce;function Te(v,c,u,f){ce||(ce=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103);var _=v&&v.defaultProps,b=arguments.length-3;if(!c&&b!==0&&(c={children:void 0}),c&&_)for(var x in _)c[x]===void 0&&(c[x]=_[x]);else c||(c=_||{});if(b===1)c.children=f;else if(b>1){for(var w=new Array(b),M=0;M<b;M++)w[M]=arguments[M+3];c.children=w}return{$$typeof:ce,type:v,key:u===void 0?null:""+u,ref:null,props:c,_owner:null}}function xe(v){var c;if(typeof Symbol<"u"&&(Symbol.asyncIterator&&(c=v[Symbol.asyncIterator],c!=null)||Symbol.iterator&&(c=v[Symbol.iterator],c!=null)))return c.call(v);throw new TypeError("Object is not async iterable")}function Je(v){this.wrapped=v}function we(v){var c,u;function f(x,w){return new Promise(function(M,A){var k={key:x,arg:w,resolve:M,reject:A,next:null};u?u=u.next=k:(c=u=k,_(x,w))})}function _(x,w){try{var M=v[x](w),A=M.value,k=A instanceof Je;Promise.resolve(k?A.wrapped:A).then(function(U){if(k){_("next",U);return}b(M.done?"return":"normal",U)},function(U){_("throw",U)})}catch(U){b("throw",U)}}function b(x,w){switch(x){case"return":c.resolve({value:w,done:!0});break;case"throw":c.reject(w);break;default:c.resolve({value:w,done:!1});break}c=c.next,c?_(c.key,c.arg):u=null}this._invoke=f,typeof v.return!="function"&&(this.return=void 0)}typeof Symbol=="function"&&Symbol.asyncIterator&&(we.prototype[Symbol.asyncIterator]=function(){return this}),we.prototype.next=function(v){return this._invoke("next",v)},we.prototype.throw=function(v){return this._invoke("throw",v)},we.prototype.return=function(v){return this._invoke("return",v)};function Ce(v){return function(){return new we(v.apply(this,arguments))}}function Ht(v){return new Je(v)}function Jt(v,c){var u={},f=!1;function _(b,x){return f=!0,x=new Promise(function(w){w(v[b](x))}),{done:!1,value:c(x)}}return typeof Symbol=="function"&&Symbol.iterator&&(u[Symbol.iterator]=function(){return this}),u.next=function(b){return f?(f=!1,b):_("next",b)},typeof v.throw=="function"&&(u.throw=function(b){if(f)throw f=!1,b;return _("throw",b)}),typeof v.return=="function"&&(u.return=function(b){return _("return",b)}),u}function nn(v,c,u,f,_,b,x){try{var w=v[b](x),M=w.value}catch(A){u(A);return}w.done?c(M):Promise.resolve(M).then(f,_)}function Vt(v){return function(){var c=this,u=arguments;return new Promise(function(f,_){var b=v.apply(c,u);function x(M){nn(b,f,_,x,w,"next",M)}function w(M){nn(b,f,_,x,w,"throw",M)}x(void 0)})}}function hn(v,c){if(!(v instanceof c))throw new TypeError("Cannot call a class as a function")}function wn(v,c){for(var u=0;u<c.length;u++){var f=c[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,f.key,f)}}function cn(v,c,u){return c&&wn(v.prototype,c),u&&wn(v,u),v}function In(v,c){for(var u in c){var f=c[u];f.configurable=f.enumerable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,u,f)}if(Object.getOwnPropertySymbols)for(var _=Object.getOwnPropertySymbols(c),b=0;b<_.length;b++){var x=_[b],f=c[x];f.configurable=f.enumerable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,x,f)}return v}function aa(v,c){for(var u=Object.getOwnPropertyNames(c),f=0;f<u.length;f++){var _=u[f],b=Object.getOwnPropertyDescriptor(c,_);b&&b.configurable&&v[_]===void 0&&Object.defineProperty(v,_,b)}return v}function ao(v,c,u){return c in v?Object.defineProperty(v,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):v[c]=u,v}function Lo(){return Lo=Object.assign||function(v){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(v[f]=u[f])}return v},Lo.apply(this,arguments)}function hl(v){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{},f=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(u).filter(function(_){return Object.getOwnPropertyDescriptor(u,_).enumerable}))),f.forEach(function(_){ao(v,_,u[_])})}return v}function lo(v,c){var u=Object.keys(v);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(v);c&&(f=f.filter(function(_){return Object.getOwnPropertyDescriptor(v,_).enumerable})),u.push.apply(u,f)}return u}function ml(v){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{};c%2?lo(u,!0).forEach(function(f){ao(v,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(u)):lo(u).forEach(function(f){Object.defineProperty(v,f,Object.getOwnPropertyDescriptor(u,f))})}return v}function co(v,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(c&&c.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),c&&_s(v,c)}function Om(v,c){v.prototype=Object.create(c.prototype),v.prototype.constructor=v,v.__proto__=c}function la(v){return la=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},la(v)}function _s(v,c){return _s=Object.setPrototypeOf||function(f,_){return f.__proto__=_,f},_s(v,c)}function pp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ca(v,c,u){return pp()?ca=Reflect.construct:ca=function(_,b,x){var w=[null];w.push.apply(w,b);var M=Function.bind.apply(_,w),A=new M;return x&&_s(A,x.prototype),A},ca.apply(null,arguments)}function gl(v){return Function.toString.call(v).indexOf("[native code]")!==-1}function uo(v){var c=typeof Map=="function"?new Map:void 0;return uo=function(f){if(f===null||!gl(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c<"u"){if(c.has(f))return c.get(f);c.set(f,_)}function _(){return ca(f,arguments,la(this).constructor)}return _.prototype=Object.create(f.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),_s(_,f)},uo(v)}function fp(v,c){return c!=null&&typeof Symbol<"u"&&c[Symbol.hasInstance]?!!c[Symbol.hasInstance](v):v instanceof c}function hp(v){return v&&v.__esModule?v:{default:v}}function ua(v){if(v&&v.__esModule)return v;var c={};if(v!=null){for(var u in v)if(Object.prototype.hasOwnProperty.call(v,u)){var f=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(v,u):{};f.get||f.set?Object.defineProperty(c,u,f):c[u]=v[u]}}return c.default=v,c}function Gt(v,c){if(v!==c)throw new TypeError("Cannot instantiate an arrow function")}function vn(v){if(v==null)throw new TypeError("Cannot destructure undefined")}function da(v,c){if(v==null)return{};var u={},f=Object.keys(v),_,b;for(b=0;b<f.length;b++)_=f[b],!(c.indexOf(_)>=0)&&(u[_]=v[_]);return u}function Ro(v,c){if(v==null)return{};var u=da(v,c),f,_;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(v);for(_=0;_<b.length;_++)f=b[_],!(c.indexOf(f)>=0)&&Object.prototype.propertyIsEnumerable.call(v,f)&&(u[f]=v[f])}return u}function No(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function Nc(v,c){return c&&(typeof c=="object"||typeof c=="function")?c:No(v)}function yt(v,c){for(;!Object.prototype.hasOwnProperty.call(v,c)&&(v=la(v),v!==null););return v}function mn(v,c,u){return typeof Reflect<"u"&&Reflect.get?mn=Reflect.get:mn=function(_,b,x){var w=yt(_,b);if(w){var M=Object.getOwnPropertyDescriptor(w,b);return M.get?M.get.call(x):M.value}},mn(v,c,u||v)}function Fo(v,c,u,f){return typeof Reflect<"u"&&Reflect.set?Fo=Reflect.set:Fo=function(b,x,w,M){var A=yt(b,x),k;if(A){if(k=Object.getOwnPropertyDescriptor(A,x),k.set)return k.set.call(M,w),!0;if(!k.writable)return!1}if(k=Object.getOwnPropertyDescriptor(M,x),k){if(!k.writable)return!1;k.value=w,Object.defineProperty(M,x,k)}else ao(M,x,w);return!0},Fo(v,c,u,f)}function _l(v,c,u,f,_){var b=Fo(v,c,u,f||v);if(!b&&_)throw new Error("failed to set property");return u}function Hi(v,c){return c||(c=v.slice(0)),Object.freeze(Object.defineProperties(v,{raw:{value:Object.freeze(c)}}))}function Mm(v,c){return c||(c=v.slice(0)),v.raw=c,v}function vl(v,c){if(v===po)throw new ReferenceError(c+" is not defined - temporal dead zone");return v}function Bo(v){throw new Error('"'+v+'" is read-only')}function On(v){throw new Error('Class "'+v+'" cannot be referenced in computed property keys.')}var po={};function pa(v,c){return vs(v)||Cl(v,c)||ma()}function fa(v,c){return vs(v)||El(v,c)||ma()}function yl(v){return vs(v)||ys(v)||ma()}function zr(v){return bl(v)||ys(v)||ha()}function bl(v){if(Array.isArray(v)){for(var c=0,u=new Array(v.length);c<v.length;c++)u[c]=v[c];return u}}function vs(v){if(Array.isArray(v))return v}function ys(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}function Cl(v,c){var u=[],f=!0,_=!1,b=void 0;try{for(var x=v[Symbol.iterator](),w;!(f=(w=x.next()).done)&&(u.push(w.value),!(c&&u.length===c));f=!0);}catch(M){_=!0,b=M}finally{try{!f&&x.return!=null&&x.return()}finally{if(_)throw b}}return u}function El(v,c){for(var u=[],f=v[Symbol.iterator](),_;!(_=f.next()).done&&(u.push(_.value),!(c&&u.length===c)););return u}function ha(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ma(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Fc(v){return function(){var c=v.apply(this,arguments);return c.next(),c}}function mp(v,c){if(typeof v!="object"||v===null)return v;var u=v[Symbol.toPrimitive];if(u!==void 0){var f=u.call(v,c||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(v)}function ht(v){var c=mp(v,"string");return typeof c=="symbol"?c:String(c)}function hr(v,c){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.")}function an(v,c,u,f){u&&Object.defineProperty(v,c,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(f):void 0})}function gp(v,c,u,f,_){var b={};return Object.keys(f).forEach(function(x){b[x]=f[x]}),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=u.slice().reverse().reduce(function(x,w){return w(v,c,x)||x},b),_&&b.initializer!==void 0&&(b.value=b.initializer?b.initializer.call(_):void 0,b.initializer=void 0),b.initializer===void 0&&(Object.defineProperty(v,c,b),b=null),b}var xl=0;function Bc(v){return"__private_"+xl+++"_"+v}function Vc(v,c){if(!Object.prototype.hasOwnProperty.call(v,c))throw new TypeError("attempted to use private field on non-instance");return v}function Vo(v,c){var u=c.get(v);if(!u)throw new TypeError("attempted to get private field on non-instance");return u.get?u.get.call(v):u.value}function zc(v,c,u){var f=c.get(v);if(!f)throw new TypeError("attempted to set private field on non-instance");if(f.set)f.set.call(v,u);else{if(!f.writable)throw new TypeError("attempted to set read only private field");f.value=u}return u}function ga(v,c){if(!c.has(v))throw new TypeError("attempted to set private field on non-instance");var u=c.get(v);if(u.set)return"__destrObj"in u||(u.__destrObj={set value(f){u.set.call(v,f)}}),u.__destrObj;if(!u.writable)throw new TypeError("attempted to set read only private field");return u}function Bn(v,c,u){if(v!==c)throw new TypeError("Private static access of wrong provenance");return u.value}function zo(v,c,u,f){if(v!==c)throw new TypeError("Private static access of wrong provenance");if(!u.writable)throw new TypeError("attempted to set read only private field");return u.value=f,f}function _p(v,c,u){if(v!==c)throw new TypeError("Private static access of wrong provenance");return u}function vp(){throw new TypeError("attempted to set read only static private field")}function Am(v,c,u,f){var _=wl();if(f)for(var b=0;b<f.length;b++)_=f[b](_);var x=c(function(A){_.initializeInstanceElements(A,w.elements)},u),w=_.decorateClass(Hc(x.d.map(Sl)),v);return _.initializeClassElements(x.F,w.elements),_.runClassFinishers(x.F,w.finishers)}function wl(){wl=function(){return v};var v={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(c,u){["method","field"].forEach(function(f){u.forEach(function(_){_.kind===f&&_.placement==="own"&&this.defineClassElement(c,_)},this)},this)},initializeClassElements:function(c,u){var f=c.prototype;["method","field"].forEach(function(_){u.forEach(function(b){var x=b.placement;if(b.kind===_&&(x==="static"||x==="prototype")){var w=x==="static"?c:f;this.defineClassElement(w,b)}},this)},this)},defineClassElement:function(c,u){var f=u.descriptor;if(u.kind==="field"){var _=u.initializer;f={enumerable:f.enumerable,writable:f.writable,configurable:f.configurable,value:_===void 0?void 0:_.call(c)}}Object.defineProperty(c,u.key,f)},decorateClass:function(c,u){var f=[],_=[],b={static:[],prototype:[],own:[]};if(c.forEach(function(w){this.addElementPlacement(w,b)},this),c.forEach(function(w){if(!St(w))return f.push(w);var M=this.decorateElement(w,b);f.push(M.element),f.push.apply(f,M.extras),_.push.apply(_,M.finishers)},this),!u)return{elements:f,finishers:_};var x=this.decorateConstructor(f,u);return _.push.apply(_,x.finishers),x.finishers=_,x},addElementPlacement:function(c,u,f){var _=u[c.placement];if(!f&&_.indexOf(c.key)!==-1)throw new TypeError("Duplicated element ("+c.key+")");_.push(c.key)},decorateElement:function(c,u){for(var f=[],_=[],b=c.decorators,x=b.length-1;x>=0;x--){var w=u[c.placement];w.splice(w.indexOf(c.key),1);var M=this.fromElementDescriptor(c),A=this.toElementFinisherExtras((0,b[x])(M)||M);c=A.element,this.addElementPlacement(c,u),A.finisher&&_.push(A.finisher);var k=A.extras;if(k){for(var U=0;U<k.length;U++)this.addElementPlacement(k[U],u);f.push.apply(f,k)}}return{element:c,finishers:_,extras:f}},decorateConstructor:function(c,u){for(var f=[],_=u.length-1;_>=0;_--){var b=this.fromClassDescriptor(c),x=this.toClassDescriptor((0,u[_])(b)||b);if(x.finisher!==void 0&&f.push(x.finisher),x.elements!==void 0){c=x.elements;for(var w=0;w<c.length-1;w++)for(var M=w+1;M<c.length;M++)if(c[w].key===c[M].key&&c[w].placement===c[M].placement)throw new TypeError("Duplicated element ("+c[w].key+")")}}return{elements:c,finishers:f}},fromElementDescriptor:function(c){var u={kind:c.kind,key:c.key,placement:c.placement,descriptor:c.descriptor},f={value:"Descriptor",configurable:!0};return Object.defineProperty(u,Symbol.toStringTag,f),c.kind==="field"&&(u.initializer=c.initializer),u},toElementDescriptors:function(c){if(c!==void 0)return yl(c).map(function(u){var f=this.toElementDescriptor(u);return this.disallowProperty(u,"finisher","An element descriptor"),this.disallowProperty(u,"extras","An element descriptor"),f},this)},toElementDescriptor:function(c){var u=String(c.kind);if(u!=="method"&&u!=="field")throw new TypeError(`An element descriptor's .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "`+u+'"');var f=ht(c.key),_=String(c.placement);if(_!=="static"&&_!=="prototype"&&_!=="own")throw new TypeError(`An element descriptor's .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "`+_+'"');var b=c.descriptor;this.disallowProperty(c,"elements","An element descriptor");var x={kind:u,key:f,placement:_,descriptor:Object.assign({},b)};return u!=="field"?this.disallowProperty(c,"initializer","A method descriptor"):(this.disallowProperty(b,"get","The property descriptor of a field descriptor"),this.disallowProperty(b,"set","The property descriptor of a field descriptor"),this.disallowProperty(b,"value","The property descriptor of a field descriptor"),x.initializer=c.initializer),x},toElementFinisherExtras:function(c){var u=this.toElementDescriptor(c),f=xi(c,"finisher"),_=this.toElementDescriptors(c.extras);return{element:u,finisher:f,extras:_}},fromClassDescriptor:function(c){var u={kind:"class",elements:c.map(this.fromElementDescriptor,this)},f={value:"Descriptor",configurable:!0};return Object.defineProperty(u,Symbol.toStringTag,f),u},toClassDescriptor:function(c){var u=String(c.kind);if(u!=="class")throw new TypeError(`A class descriptor's .kind property must be "class", but a decorator created a class descriptor with .kind "`+u+'"');this.disallowProperty(c,"key","A class descriptor"),this.disallowProperty(c,"placement","A class descriptor"),this.disallowProperty(c,"descriptor","A class descriptor"),this.disallowProperty(c,"initializer","A class descriptor"),this.disallowProperty(c,"extras","A class descriptor");var f=xi(c,"finisher"),_=this.toElementDescriptors(c.elements);return{elements:_,finisher:f}},runClassFinishers:function(c,u){for(var f=0;f<u.length;f++){var _=(0,u[f])(c);if(_!==void 0){if(typeof _!="function")throw new TypeError("Finishers must return a constructor.");c=_}}return c},disallowProperty:function(c,u,f){if(c[u]!==void 0)throw new TypeError(f+" can't have a ."+u+" property.")}};return v}function Sl(v){var c=ht(v.key),u;v.kind==="method"?u={value:v.value,writable:!0,configurable:!0,enumerable:!1}:v.kind==="get"?u={get:v.value,configurable:!0,enumerable:!1}:v.kind==="set"?u={set:v.value,configurable:!0,enumerable:!1}:v.kind==="field"&&(u={configurable:!0,writable:!0,enumerable:!0});var f={kind:v.kind==="field"?"field":"method",key:c,placement:v.static?"static":v.kind==="field"?"own":"prototype",descriptor:u};return v.decorators&&(f.decorators=v.decorators),v.kind==="field"&&(f.initializer=v.value),f}function yp(v,c){v.descriptor.get!==void 0?c.descriptor.get=v.descriptor.get:c.descriptor.set=v.descriptor.set}function Hc(v){for(var c=[],u=function(x){return x.kind==="method"&&x.key===_.key&&x.placement===_.placement},f=0;f<v.length;f++){var _=v[f],b;if(_.kind==="method"&&(b=c.find(u)))if(Gc(_.descriptor)||Gc(b.descriptor)){if(St(_)||St(b))throw new ReferenceError("Duplicated methods ("+_.key+") can't be decorated.");b.descriptor=_.descriptor}else{if(St(_)){if(St(b))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+_.key+").");b.decorators=_.decorators}yp(_,b)}else c.push(_)}return c}function St(v){return v.decorators&&v.decorators.length}function Gc(v){return v!==void 0&&!(v.value===void 0&&v.writable===void 0)}function xi(v,c){var u=v[c];if(u!==void 0&&typeof u!="function")throw new TypeError("Expected '"+c+"' to be a function");return u}function _a(v,c,u){if(!c.has(v))throw new TypeError("attempted to get private field on non-instance");return u}function bp(){throw new TypeError("attempted to reassign private method")}function Uc(v,c){Uc=function(w,M){return new b(w,M)};var u=uo(RegExp),f=RegExp.prototype,_=new WeakMap;function b(w,M){var A=u.call(this,w);return _.set(A,M),A}co(b,u),b.prototype.exec=function(w){var M=f.exec.call(this,w);return M&&(M.groups=x(M,this)),M},b.prototype[Symbol.replace]=function(w,M){if(typeof M=="string"){var A=_.get(this);return f[Symbol.replace].call(this,w,M.replace(/\$<([^>]+)>/g,function(U,q){return"$"+A[q]}))}else if(typeof M=="function"){var k=this;return f[Symbol.replace].call(this,w,function(){var U=[];return U.push.apply(U,arguments),typeof U[U.length-1]!="object"&&U.push(x(U,k)),M.apply(this,U)})}else return f[Symbol.replace].call(this,w,M)};function x(w,M){var A=_.get(M);return Object.keys(A).reduce(function(k,U){return k[U]=w[A[U]],k},Object.create(null))}return Uc.apply(this,arguments)}var bs=function(c,u){return c.splice(u,1)},Cp=function(c,u){u?c():document.hidden?Promise.resolve(1).then(c):setTimeout(c,0)},Cs=function(){var c=[],u=function(b,x){bs(c,c.findIndex(function(w){return w.event===b&&(w.cb===x||!x)}))},f=function(b,x,w){c.filter(function(M){return M.event===b}).map(function(M){return M.cb}).forEach(function(M){return Cp(function(){return M.apply(void 0,zr(x))},w)})};return{fireSync:function(b){for(var x=arguments.length,w=new Array(x>1?x-1:0),M=1;M<x;M++)w[M-1]=arguments[M];f(b,w,!0)},fire:function(b){for(var x=arguments.length,w=new Array(x>1?x-1:0),M=1;M<x;M++)w[M-1]=arguments[M];f(b,w,!1)},on:function(b,x){c.push({event:b,cb:x})},onOnce:function(b,x){c.push({event:b,cb:function(){u(b,x),x.apply(void 0,arguments)}})},off:u}},qc=function(c,u,f){Object.getOwnPropertyNames(c).filter(function(_){return!f.includes(_)}).forEach(function(_){return Object.defineProperty(u,_,Object.getOwnPropertyDescriptor(c,_))})},Ep=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Vn=function(c){var u={};return qc(c,u,Ep),u},xp=function(c){c.forEach(function(u,f){u.released&&bs(c,f)})},nt={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Mn={INPUT:1,LIMBO:2,LOCAL:3},Tl=function(c){return/[^0-9]+/.exec(c)},mr=function(){return Tl(1.1.toLocaleString())[0]},Wc=function(){var c=mr(),u=1e3.toLocaleString(),f="1000";return u!==f?Tl(u)[0]:c==="."?",":"."},re={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Es=[],Gi=function(c,u,f){return new Promise(function(_,b){var x=Es.filter(function(M){return M.key===c}).map(function(M){return M.cb});if(x.length===0){_(u);return}var w=x.shift();x.reduce(function(M,A){return M.then(function(k){return A(k,f)})},w(u,f)).then(function(M){return _(M)}).catch(function(M){return b(M)})})},Hr=function(c,u,f){return Es.filter(function(_){return _.key===c}).map(function(_){return _.cb(u,f)})},jc=function(c,u){return Es.push({key:c,cb:u})},wp=function(c){return Object.assign(Ho,c)},va=function(){return Object.assign({},Ho)},Il=function(c){r(c,function(u,f){Ho[u]&&(Ho[u][0]=Fn(f,Ho[u][0],Ho[u][1]))})},Ho={id:[null,re.STRING],name:["filepond",re.STRING],disabled:[!1,re.BOOLEAN],className:[null,re.STRING],required:[!1,re.BOOLEAN],captureMethod:[null,re.STRING],allowSyncAcceptAttribute:[!0,re.BOOLEAN],allowDrop:[!0,re.BOOLEAN],allowBrowse:[!0,re.BOOLEAN],allowPaste:[!0,re.BOOLEAN],allowMultiple:[!1,re.BOOLEAN],allowReplace:[!0,re.BOOLEAN],allowRevert:[!0,re.BOOLEAN],allowRemove:[!0,re.BOOLEAN],allowProcess:[!0,re.BOOLEAN],allowReorder:[!1,re.BOOLEAN],allowDirectoriesOnly:[!1,re.BOOLEAN],storeAsFile:[!1,re.BOOLEAN],forceRevert:[!1,re.BOOLEAN],maxFiles:[null,re.INT],checkValidity:[!1,re.BOOLEAN],itemInsertLocationFreedom:[!0,re.BOOLEAN],itemInsertLocation:["before",re.STRING],itemInsertInterval:[75,re.INT],dropOnPage:[!1,re.BOOLEAN],dropOnElement:[!0,re.BOOLEAN],dropValidation:[!1,re.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],re.ARRAY],instantUpload:[!0,re.BOOLEAN],maxParallelUploads:[2,re.INT],allowMinimumUploadDuration:[!0,re.BOOLEAN],chunkUploads:[!1,re.BOOLEAN],chunkForce:[!1,re.BOOLEAN],chunkSize:[5e6,re.INT],chunkRetryDelays:[[500,1e3,3e3],re.ARRAY],server:[null,re.SERVER_API],fileSizeBase:[1e3,re.INT],labelFileSizeBytes:["bytes",re.STRING],labelFileSizeKilobytes:["KB",re.STRING],labelFileSizeMegabytes:["MB",re.STRING],labelFileSizeGigabytes:["GB",re.STRING],labelDecimalSeparator:[mr(),re.STRING],labelThousandsSeparator:[Wc(),re.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',re.STRING],labelInvalidField:["Field contains invalid files",re.STRING],labelFileWaitingForSize:["Waiting for size",re.STRING],labelFileSizeNotAvailable:["Size not available",re.STRING],labelFileCountSingular:["file in list",re.STRING],labelFileCountPlural:["files in list",re.STRING],labelFileLoading:["Loading",re.STRING],labelFileAdded:["Added",re.STRING],labelFileLoadError:["Error during load",re.STRING],labelFileRemoved:["Removed",re.STRING],labelFileRemoveError:["Error during remove",re.STRING],labelFileProcessing:["Uploading",re.STRING],labelFileProcessingComplete:["Upload complete",re.STRING],labelFileProcessingAborted:["Upload cancelled",re.STRING],labelFileProcessingError:["Error during upload",re.STRING],labelFileProcessingRevertError:["Error during revert",re.STRING],labelTapToCancel:["tap to cancel",re.STRING],labelTapToRetry:["tap to retry",re.STRING],labelTapToUndo:["tap to undo",re.STRING],labelButtonRemoveItem:["Remove",re.STRING],labelButtonAbortItemLoad:["Abort",re.STRING],labelButtonRetryItemLoad:["Retry",re.STRING],labelButtonAbortItemProcessing:["Cancel",re.STRING],labelButtonUndoItemProcessing:["Undo",re.STRING],labelButtonRetryItemProcessing:["Retry",re.STRING],labelButtonProcessItem:["Upload",re.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',re.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',re.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',re.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',re.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',re.STRING],oninit:[null,re.FUNCTION],onwarning:[null,re.FUNCTION],onerror:[null,re.FUNCTION],onactivatefile:[null,re.FUNCTION],oninitfile:[null,re.FUNCTION],onaddfilestart:[null,re.FUNCTION],onaddfileprogress:[null,re.FUNCTION],onaddfile:[null,re.FUNCTION],onprocessfilestart:[null,re.FUNCTION],onprocessfileprogress:[null,re.FUNCTION],onprocessfileabort:[null,re.FUNCTION],onprocessfilerevert:[null,re.FUNCTION],onprocessfile:[null,re.FUNCTION],onprocessfiles:[null,re.FUNCTION],onremovefile:[null,re.FUNCTION],onpreparefile:[null,re.FUNCTION],onupdatefiles:[null,re.FUNCTION],onreorderfiles:[null,re.FUNCTION],beforeDropFile:[null,re.FUNCTION],beforeAddFile:[null,re.FUNCTION],beforeRemoveFile:[null,re.FUNCTION],beforePrepareFile:[null,re.FUNCTION],stylePanelLayout:[null,re.STRING],stylePanelAspectRatio:[null,re.STRING],styleItemPanelAspectRatio:[null,re.STRING],styleButtonRemoveItemPosition:["left",re.STRING],styleButtonProcessItemPosition:["right",re.STRING],styleLoadIndicatorPosition:["right",re.STRING],styleProgressIndicatorPosition:["right",re.STRING],styleButtonRemoveItemAlign:[!1,re.BOOLEAN],files:[[],re.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],re.ARRAY]},Gr=function(c,u){return gt(u)?c[0]||null:xt(u)?c[u]||null:(typeof u=="object"&&(u=u.id),c.find(function(f){return f.id===u})||null)},Ol=function(c){if(gt(c))return c;if(/:/.test(c)){var u=c.split(":");return u[1]/u[0]}return parseFloat(c)},Qn=function(c){return c.filter(function(u){return!u.archived})},wi={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},ya=null,xs=function(){if(ya===null)try{var c=new DataTransfer;c.items.add(new File(["hello world"],"This_Works.txt"));var u=document.createElement("input");u.setAttribute("type","file"),u.files=c.files,ya=u.files.length===1}catch{ya=!1}return ya},Si=[nt.LOAD_ERROR,nt.PROCESSING_ERROR,nt.PROCESSING_REVERT_ERROR],Zc=[nt.LOADING,nt.PROCESSING,nt.PROCESSING_QUEUED,nt.INIT],Kc=[nt.PROCESSING_COMPLETE],Sp=function(c){return Si.includes(c.status)},Ml=function(c){return Zc.includes(c.status)},Al=function(c){return Kc.includes(c.status)},Yc=function(c){return At(c.options.server)&&(At(c.options.server.process)||qt(c.options.server.process))},Tp=function(c){return{GET_STATUS:function(){var f=Qn(c.items),_=wi.EMPTY,b=wi.ERROR,x=wi.BUSY,w=wi.IDLE,M=wi.READY;return f.length===0?_:f.some(Sp)?b:f.some(Ml)?x:f.some(Al)?M:w},GET_ITEM:function(f){return Gr(c.items,f)},GET_ACTIVE_ITEM:function(f){return Gr(Qn(c.items),f)},GET_ACTIVE_ITEMS:function(){return Qn(c.items)},GET_ITEMS:function(){return c.items},GET_ITEM_NAME:function(f){var _=Gr(c.items,f);return _?_.filename:null},GET_ITEM_SIZE:function(f){var _=Gr(c.items,f);return _?_.fileSize:null},GET_STYLES:function(){return Object.keys(c.options).filter(function(f){return/^style/.test(f)}).map(function(f){return{name:f,value:c.options[f]}})},GET_PANEL_ASPECT_RATIO:function(){var f=/circle/.test(c.options.stylePanelLayout),_=f?1:Ol(c.options.stylePanelAspectRatio);return _},GET_ITEM_PANEL_ASPECT_RATIO:function(){return c.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(f){return Qn(c.items).filter(function(_){return _.status===f})},GET_TOTAL_ITEMS:function(){return Qn(c.items).length},SHOULD_UPDATE_FILE_INPUT:function(){return c.options.storeAsFile&&xs()&&!Yc(c)},IS_ASYNC:function(){return Yc(c)},GET_FILE_SIZE_LABELS:function(f){return{labelBytes:f("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:f("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:f("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:f("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0}}}},Xc=function(c){var u=Qn(c.items).length;if(!c.options.allowMultiple)return u===0;var f=c.options.maxFiles;return f===null||u<f},Jc=function(c,u,f){return Math.max(Math.min(f,c),u)},Ui=function(c,u,f){return c.splice(u,0,f)},Go=function(c,u,f){return gt(u)?null:typeof f>"u"?(c.push(u),u):(f=Jc(f,0,c.length),Ui(c,f,u),u)},kl=function(c){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(c)},ci=function(c){return(""+c).split("/").pop().split("?").shift()},ba=function(c){return c.split(".").pop()},Uo=function(c){if(typeof c!="string")return"";var u=c.split("/").pop();return/svg/.test(u)?"svg":/zip|compressed/.test(u)?"zip":/plain/.test(u)?"txt":/msword/.test(u)?"doc":/[a-z]+/.test(u)?u==="jpeg"?"jpg":u:""},ws=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(u+c).slice(-u.length)},qo=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return c.getFullYear()+"-"+ws(c.getMonth()+1,"00")+"-"+ws(c.getDate(),"00")+"_"+ws(c.getHours(),"00")+"-"+ws(c.getMinutes(),"00")+"-"+ws(c.getSeconds(),"00")},fo=function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,b=typeof f=="string"?c.slice(0,c.size,f):c.slice(0,c.size,c.type);return b.lastModifiedDate=new Date,c._relativePath&&(b._relativePath=c._relativePath),Ot(u)||(u=qo()),u&&_===null&&ba(u)?b.name=u:(_=_||Uo(b.type),b.name=u+(_?"."+_:"")),b},Ca=function(){return window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder},Qc=function(c,u){var f=Ca();if(f){var _=new f;return _.append(c),_.getBlob(u)}return new Blob([c],{type:u})},Ur=function(c,u){for(var f=new ArrayBuffer(c.length),_=new Uint8Array(f),b=0;b<c.length;b++)_[b]=c.charCodeAt(b);return Qc(f,u)},Ss=function(c){return(/^data:(.+);/.exec(c)||[])[1]||null},Ip=function(c){var u=c.split(",")[1];return u.replace(/\s/g,"")},Pl=function(c){return atob(Ip(c))},Op=function(c){var u=Ss(c),f=Pl(c);return Ur(f,u)},gr=function(c,u,f){return fo(Op(c),u,null,f)},Mp=function(c){if(!/^content-disposition:/i.test(c))return null;var u=c.split(/filename=|filename\*=.+''/).splice(1).map(function(f){return f.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(f){return f.length});return u.length?decodeURI(u[u.length-1]):null},Wo=function(c){if(/content-length:/i.test(c)){var u=c.match(/[0-9]+/)[0];return u?parseInt(u,10):null}return null},Ap=function(c){if(/x-content-transfer-id:/i.test(c)){var u=(c.split(":")[1]||"").trim();return u||null}return null},qi=function(c){var u={source:null,name:null,size:null},f=c.split(`
`),_=!0,b=!1,x=void 0;try{for(var w=f[Symbol.iterator](),M;!(_=(M=w.next()).done);_=!0){var A=M.value,k=Mp(A);if(k){u.name=k;continue}var U=Wo(A);if(U){u.size=U;continue}var q=Ap(A);if(q){u.source=q;continue}}}catch(ne){b=!0,x=ne}finally{try{!_&&w.return!=null&&w.return()}finally{if(b)throw x}}return u},Ea=function(c){var u={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},f=function(){return u.progress},_=function(){u.request&&u.request.abort&&u.request.abort()},b=function(){var A=u.source;w.fire("init",A),A instanceof File?w.fire("load",A):A instanceof Blob?w.fire("load",fo(A,A.name)):kl(A)?w.fire("load",gr(A)):x(A)},x=function(A){if(!c){w.fire("error",{type:"error",body:"Can't load URL",code:400});return}u.timestamp=Date.now(),u.request=c(A,function(k){u.duration=Date.now()-u.timestamp,u.complete=!0,k instanceof Blob&&(k=fo(k,k.name||ci(A))),w.fire("load",k instanceof Blob?k:k?k.body:null)},function(k){w.fire("error",typeof k=="string"?{type:"error",code:0,body:k}:k)},function(k,U,q){if(q&&(u.size=q),u.duration=Date.now()-u.timestamp,!k){u.progress=null;return}u.progress=U/q,w.fire("progress",u.progress)},function(){w.fire("abort")},function(k){var U=qi(typeof k=="string"?k:k.headers);w.fire("meta",{size:u.size||U.size,filename:U.name,source:U.source})})},w=Object.assign({},Cs(),{setSource:function(A){return u.source=A},getProgress:f,abort:_,load:b});return w},Dl=function(c){return/GET|HEAD/.test(c)},_r=function(c,u,f){var _={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){b=!0,w.abort()}},b=!1,x=!1;f=Object.assign({method:"POST",headers:{},withCredentials:!1},f),u=encodeURI(u),Dl(f.method)&&c&&(u=""+u+encodeURIComponent(typeof c=="string"?c:JSON.stringify(c)));var w=new XMLHttpRequest,M=Dl(f.method)?w:w.upload;return M.onprogress=function(A){b||_.onprogress(A.lengthComputable,A.loaded,A.total)},w.onreadystatechange=function(){w.readyState<2||w.readyState===4&&w.status===0||x||(x=!0,_.onheaders(w))},w.onload=function(){w.status>=200&&w.status<300?_.onload(w):_.onerror(w)},w.onerror=function(){return _.onerror(w)},w.onabort=function(){b=!0,_.onabort()},w.ontimeout=function(){return _.ontimeout(w)},w.open(f.method,u,!0),xt(f.timeout)&&(w.timeout=f.timeout),Object.keys(f.headers).forEach(function(A){var k=unescape(encodeURIComponent(f.headers[A]));w.setRequestHeader(A,k)}),f.responseType&&(w.responseType=f.responseType),f.withCredentials&&(w.withCredentials=!0),w.send(c),_},un=function(c,u,f,_){return{type:c,code:u,body:f,headers:_}},vr=function(c){return function(u){c(un("error",0,"Timeout",u.getAllResponseHeaders()))}},Ts=function(c){return/\?/.test(c)},rr=function(){for(var c="",u=arguments.length,f=new Array(u),_=0;_<u;_++)f[_]=arguments[_];return f.forEach(function(b){c+=Ts(c)&&Ts(b)?b.replace(/\?/,"&"):b}),c},jo=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=arguments.length>1?arguments[1]:void 0;if(typeof u=="function")return u;if(!u||!Ot(u.url))return null;var f=u.onload||function(b){return b},_=u.onerror||function(b){return null};return function(b,x,w,M,A,k){var U=_r(b,rr(c,u.url),Object.assign({},u,{responseType:"blob"}));return U.onload=function(q){var ne=q.getAllResponseHeaders(),ue=qi(ne).name||ci(b);x(un("load",q.status,u.method==="HEAD"?null:fo(f(q.response),ue),ne))},U.onerror=function(q){w(un("error",q.status,_(q.response)||q.statusText,q.getAllResponseHeaders()))},U.onheaders=function(q){k(un("headers",q.status,null,q.getAllResponseHeaders()))},U.ontimeout=vr(w),U.onprogress=M,U.onabort=A,U}},$n={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},$c=function(c,u,f,_,b,x,w,M,A,k,U){for(var q=[],ne=U.chunkTransferId,ue=U.chunkServer,pe=U.chunkSize,X=U.chunkRetryDelays,Ee={serverId:ne,aborted:!1},qe=u.ondata||function(fe){return fe},Ye=u.onload||function(fe,K){return K==="HEAD"?fe.getResponseHeader("Upload-Offset"):fe.response},Me=u.onerror||function(fe){return null},_t=function(K){var Ke=new FormData;At(b)&&Ke.append(f,JSON.stringify(b));var mt=typeof u.headers=="function"?u.headers(_,b):Object.assign({},u.headers,{"Upload-Length":_.size}),Ct=Object.assign({},u,{headers:mt}),Lt=_r(qe(Ke),rr(c,u.url),Ct);Lt.onload=function(Ut){return K(Ye(Ut,Ct.method))},Lt.onerror=function(Ut){return w(un("error",Ut.status,Me(Ut.response)||Ut.statusText,Ut.getAllResponseHeaders()))},Lt.ontimeout=vr(w)},Re=function(K){var Ke=rr(c,ue.url,Ee.serverId),mt=typeof u.headers=="function"?u.headers(Ee.serverId):Object.assign({},u.headers),Ct={headers:mt,method:"HEAD"},Lt=_r(null,Ke,Ct);Lt.onload=function(Ut){return K(Ye(Ut,Ct.method))},Lt.onerror=function(Ut){return w(un("error",Ut.status,Me(Ut.response)||Ut.statusText,Ut.getAllResponseHeaders()))},Lt.ontimeout=vr(w)},Qt=Math.floor(_.size/pe),$t=0;$t<=Qt;$t++){var ze=$t*pe,Xe=_.slice(ze,ze+pe,"application/offset+octet-stream");q[$t]={index:$t,size:Xe.size,offset:ze,data:Xe,file:_,progress:0,retries:zr(X),status:$n.QUEUED,error:null,request:null,timeout:null}}var tt=function(){return x(Ee.serverId)},Ne=function(K){return K.status===$n.QUEUED||K.status===$n.ERROR},We=function(K){if(!Ee.aborted){if(K=K||q.find(Ne),!K){q.every(function(Tn){return Tn.status===$n.COMPLETE})&&tt();return}K.status=$n.PROCESSING,K.progress=null;var Ke=ue.ondata||function(Tn){return Tn},mt=ue.onerror||function(Tn){return null},Ct=ue.onload||function(){},Lt=rr(c,ue.url,Ee.serverId),Ut=typeof ue.headers=="function"?ue.headers(K):Object.assign({},ue.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":K.offset,"Upload-Length":_.size,"Upload-Name":_.name}),bn=K.request=_r(Ke(K.data),Lt,Object.assign({},ue,{headers:Ut}));bn.onload=function(Tn){Ct(Tn,K.index,q.length),K.status=$n.COMPLETE,K.request=null,Kt()},bn.onprogress=function(Tn,Oa,fg){K.progress=Tn?Oa:null,rn()},bn.onerror=function(Tn){K.status=$n.ERROR,K.request=null,K.error=mt(Tn.response)||Tn.statusText,it(K)||w(un("error",Tn.status,mt(Tn.response)||Tn.statusText,Tn.getAllResponseHeaders()))},bn.ontimeout=function(Tn){K.status=$n.ERROR,K.request=null,it(K)||vr(w)(Tn)},bn.onabort=function(){K.status=$n.QUEUED,K.request=null,A()}}},it=function(K){return K.retries.length===0?!1:(K.status=$n.WAITING,clearTimeout(K.timeout),K.timeout=setTimeout(function(){We(K)},K.retries.shift()),!0)},rn=function(){var K=q.reduce(function(mt,Ct){return mt===null||Ct.progress===null?null:mt+Ct.progress},0);if(K===null)return M(!1,0,0);var Ke=q.reduce(function(mt,Ct){return mt+Ct.size},0);M(!0,K,Ke)},Kt=function(){var K=q.filter(function(Ke){return Ke.status===$n.PROCESSING}).length;K>=1||We()},ot=function(){q.forEach(function(K){clearTimeout(K.timeout),K.request&&K.request.abort()})};return Ee.serverId?Re(function(fe){Ee.aborted||(q.filter(function(K){return K.offset<fe}).forEach(function(K){K.status=$n.COMPLETE,K.progress=K.size}),Kt())}):_t(function(fe){Ee.aborted||(k(fe),Ee.serverId=fe,Kt())}),{abort:function(){Ee.aborted=!0,ot()}}},kp=function(c,u,f,_){return function(b,x,w,M,A,k,U){if(b){var q=_.chunkUploads,ne=q&&b.size>_.chunkSize,ue=q&&(ne||_.chunkForce);if(b instanceof Blob&&ue)return $c(c,u,f,b,x,w,M,A,k,U,_);var pe=u.ondata||function(Re){return Re},X=u.onload||function(Re){return Re},Ee=u.onerror||function(Re){return null},qe=typeof u.headers=="function"?u.headers(b,x)||{}:Object.assign({},u.headers),Ye=Object.assign({},u,{headers:qe}),Me=new FormData;At(x)&&Me.append(f,JSON.stringify(x)),(b instanceof Blob?[{name:null,file:b}]:b).forEach(function(Re){Me.append(f,Re.file,Re.name===null?Re.file.name:""+Re.name+Re.file.name)});var _t=_r(pe(Me),rr(c,u.url),Ye);return _t.onload=function(Re){w(un("load",Re.status,X(Re.response),Re.getAllResponseHeaders()))},_t.onerror=function(Re){M(un("error",Re.status,Ee(Re.response)||Re.statusText,Re.getAllResponseHeaders()))},_t.ontimeout=vr(M),_t.onprogress=A,_t.onabort=k,_t}}},xa=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,_=arguments.length>3?arguments[3]:void 0;return typeof u=="function"?function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];return u.apply(void 0,[f].concat(x,[_]))}:!u||!Ot(u.url)?null:kp(c,u,f,_)},Is=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=arguments.length>1?arguments[1]:void 0;if(typeof u=="function")return u;if(!u||!Ot(u.url))return function(b,x){return x()};var f=u.onload||function(b){return b},_=u.onerror||function(b){return null};return function(b,x,w){var M=_r(b,c+u.url,u);return M.onload=function(A){x(un("load",A.status,f(A.response),A.getAllResponseHeaders()))},M.onerror=function(A){w(un("error",A.status,_(A.response)||A.statusText,A.getAllResponseHeaders()))},M.ontimeout=vr(w),M}},Ll=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return c+Math.random()*(u-c)},Pp=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:25,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:250,x=null,w=Date.now(),M=function A(){var k=Date.now()-w,U=Ll(_,b);k+U>u&&(U=k+U-u);var q=k/u;if(q>=1||document.hidden){c(1);return}c(q),x=setTimeout(A,U)};return u>0&&M(),{clear:function(){clearTimeout(x)}}},eu=function(c,u){var f={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},_=u.allowMinimumUploadDuration,b=function(q,ne){var ue=function(){f.duration===0||f.progress===null||k.fire("progress",k.getProgress())},pe=function(){f.complete=!0,k.fire("load-perceived",f.response.body)};k.fire("start"),f.timestamp=Date.now(),f.perceivedPerformanceUpdater=Pp(function(X){f.perceivedProgress=X,f.perceivedDuration=Date.now()-f.timestamp,ue(),f.response&&f.perceivedProgress===1&&!f.complete&&pe()},_?Ll(750,1500):0),f.request=c(q,ne,function(X){f.response=At(X)?X:{type:"load",code:200,body:""+X,headers:{}},f.duration=Date.now()-f.timestamp,f.progress=1,k.fire("load",f.response.body),(!_||_&&f.perceivedProgress===1)&&pe()},function(X){f.perceivedPerformanceUpdater.clear(),k.fire("error",At(X)?X:{type:"error",code:0,body:""+X})},function(X,Ee,qe){f.duration=Date.now()-f.timestamp,f.progress=X?Ee/qe:null,ue()},function(){f.perceivedPerformanceUpdater.clear(),k.fire("abort",f.response?f.response.body:null)},function(X){k.fire("transfer",X)})},x=function(){f.request&&(f.perceivedPerformanceUpdater.clear(),f.request.abort&&f.request.abort(),f.complete=!0)},w=function(){x(),f.complete=!1,f.perceivedProgress=0,f.progress=0,f.timestamp=null,f.perceivedDuration=0,f.duration=0,f.request=null,f.response=null},M=_?function(){return f.progress?Math.min(f.progress,f.perceivedProgress):null}:function(){return f.progress||null},A=_?function(){return Math.min(f.duration,f.perceivedDuration)}:function(){return f.duration},k=Object.assign({},Cs(),{process:b,abort:x,getProgress:M,getDuration:A,reset:w});return k},tu=function(c){return c.substring(0,c.lastIndexOf("."))||c},or=function(c){var u=[c.name,c.size,c.type];return c instanceof Blob||kl(c)?u[0]=c.name||qo():kl(c)?(u[1]=c.length,u[2]=Ss(c)):Ot(c)&&(u[0]=ci(c),u[1]=0,u[2]="application/octet-stream"),{name:u[0],size:u[1],type:u[2]}},sr=function(c){return!!(c instanceof File||c instanceof Blob&&c.name)},Dp=function v(c){if(!At(c))return c;var u=Dt(c)?[]:{};for(var f in c)if(c.hasOwnProperty(f)){var _=c[f];u[f]=_&&At(_)?v(_):_}return u},wa=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_=H(),b={archived:!1,frozen:!1,released:!1,source:null,file:f,serverFileReference:u,transferId:null,processingAborted:!1,status:u?nt.PROCESSING_COMPLETE:nt.INIT,activeLoader:null,activeProcessor:null},x=null,w={},M=function(Xe){return b.status=Xe},A=function(Xe){if(!(b.released||b.frozen)){for(var tt=arguments.length,Ne=new Array(tt>1?tt-1:0),We=1;We<tt;We++)Ne[We-1]=arguments[We];Qt.fire.apply(Qt,[Xe].concat(Ne))}},k=function(){return ba(b.file.name)},U=function(){return b.file.type},q=function(){return b.file.size},ne=function(){return b.file},ue=function(Xe,tt,Ne){if(b.source=Xe,Qt.fireSync("init"),b.file){Qt.fireSync("load-skip");return}b.file=or(Xe),tt.on("init",function(){A("load-init")}),tt.on("meta",function(We){b.file.size=We.size,b.file.filename=We.filename,We.source&&(c=Mn.LIMBO,b.serverFileReference=We.source,b.status=nt.PROCESSING_COMPLETE),A("load-meta")}),tt.on("progress",function(We){M(nt.LOADING),A("load-progress",We)}),tt.on("error",function(We){M(nt.LOAD_ERROR),A("load-request-error",We)}),tt.on("abort",function(){M(nt.INIT),A("load-abort")}),tt.on("load",function(We){b.activeLoader=null;var it=function(ot){b.file=sr(ot)?ot:b.file,c===Mn.LIMBO&&b.serverFileReference?M(nt.PROCESSING_COMPLETE):M(nt.IDLE),A("load")},rn=function(ot){b.file=We,A("load-meta"),M(nt.LOAD_ERROR),A("load-file-error",ot)};if(b.serverFileReference){it(We);return}Ne(We,it,rn)}),tt.setSource(Xe),b.activeLoader=tt,tt.load()},pe=function(){b.activeLoader&&b.activeLoader.load()},X=function(){if(b.activeLoader){b.activeLoader.abort();return}M(nt.INIT),A("load-abort")},Ee=function ze(Xe,tt){if(b.processingAborted){b.processingAborted=!1;return}if(M(nt.PROCESSING),x=null,!(b.file instanceof Blob)){Qt.on("load",function(){ze(Xe,tt)});return}Xe.on("load",function(it){b.transferId=null,b.serverFileReference=it}),Xe.on("transfer",function(it){b.transferId=it}),Xe.on("load-perceived",function(it){b.activeProcessor=null,b.transferId=null,b.serverFileReference=it,M(nt.PROCESSING_COMPLETE),A("process-complete",it)}),Xe.on("start",function(){A("process-start")}),Xe.on("error",function(it){b.activeProcessor=null,M(nt.PROCESSING_ERROR),A("process-error",it)}),Xe.on("abort",function(it){b.activeProcessor=null,b.serverFileReference=it,M(nt.IDLE),A("process-abort"),x&&x()}),Xe.on("progress",function(it){A("process-progress",it)});var Ne=function(rn){b.archived||Xe.process(rn,Object.assign({},w))},We=console.error;tt(b.file,Ne,We),b.activeProcessor=Xe},qe=function(){b.processingAborted=!1,M(nt.PROCESSING_QUEUED)},Ye=function(){return new Promise(function(Xe){if(!b.activeProcessor){b.processingAborted=!0,M(nt.IDLE),A("process-abort"),Xe();return}x=function(){Xe()},b.activeProcessor.abort()})},Me=function(Xe,tt){return new Promise(function(Ne,We){var it=b.serverFileReference!==null?b.serverFileReference:b.transferId;if(it===null){Ne();return}Xe(it,function(){b.serverFileReference=null,b.transferId=null,Ne()},function(rn){if(!tt){Ne();return}M(nt.PROCESSING_REVERT_ERROR),A("process-revert-error"),We(rn)}),M(nt.IDLE),A("process-revert")})},_t=function(Xe,tt,Ne){var We=Xe.split("."),it=We[0],rn=We.pop(),Kt=w;We.forEach(function(ot){return Kt=Kt[ot]}),JSON.stringify(Kt[rn])!==JSON.stringify(tt)&&(Kt[rn]=tt,A("metadata-update",{key:it,value:w[it],silent:Ne}))},Re=function(Xe){return Dp(Xe?w[Xe]:w)},Qt=Object.assign({id:{get:function(){return _}},origin:{get:function(){return c},set:function(Xe){return c=Xe}},serverId:{get:function(){return b.serverFileReference}},transferId:{get:function(){return b.transferId}},status:{get:function(){return b.status}},filename:{get:function(){return b.file.name}},filenameWithoutExtension:{get:function(){return tu(b.file.name)}},fileExtension:{get:k},fileType:{get:U},fileSize:{get:q},file:{get:ne},relativePath:{get:function(){return b.file._relativePath}},source:{get:function(){return b.source}},getMetadata:Re,setMetadata:function(Xe,tt,Ne){if(At(Xe)){var We=Xe;return Object.keys(We).forEach(function(it){_t(it,We[it],tt)}),Xe}return _t(Xe,tt,Ne),tt},extend:function(Xe,tt){return $t[Xe]=tt},abortLoad:X,retryLoad:pe,requestProcessing:qe,abortProcessing:Ye,load:ue,process:Ee,revert:Me},Cs(),{freeze:function(){return b.frozen=!0},release:function(){return b.released=!0},released:{get:function(){return b.released}},archive:function(){return b.archived=!0},archived:{get:function(){return b.archived}},setFile:function(Xe){return b.file=Xe}}),$t=s(Qt);return $t},Lp=function(c,u){return gt(u)?0:Ot(u)?c.findIndex(function(f){return f.id===u}):-1},Rl=function(c,u){var f=Lp(c,u);if(!(f<0))return c[f]||null},nu=function(c,u,f,_,b,x){var w=_r(null,c,{method:"GET",responseType:"blob"});return w.onload=function(M){var A=M.getAllResponseHeaders(),k=qi(A).name||ci(c);u(un("load",M.status,fo(M.response,k),A))},w.onerror=function(M){f(un("error",M.status,M.statusText,M.getAllResponseHeaders()))},w.onheaders=function(M){x(un("headers",M.status,null,M.getAllResponseHeaders()))},w.ontimeout=vr(f),w.onprogress=_,w.onabort=b,w},Zo=function(c){return c.indexOf("//")===0&&(c=location.protocol+c),c.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},Rp=function(c){return(c.indexOf(":")>-1||c.indexOf("//")>-1)&&Zo(location.href)!==Zo(c)},yr=function(c){return function(){return qt(c)?c.apply(void 0,arguments):c}},iu=function(c){return!sr(c.file)},Sa=function(c,u){clearTimeout(u.listUpdateTimeout),u.listUpdateTimeout=setTimeout(function(){c("DID_UPDATE_ITEMS",{items:Qn(u.items)})},0)},ru=function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),_=1;_<u;_++)f[_-1]=arguments[_];return new Promise(function(b){if(!c)return b(!0);var x=c.apply(void 0,f);if(x==null)return b(!0);if(typeof x=="boolean")return b(x);typeof x.then=="function"&&x.then(b)})},Wi=function(c,u){c.items.sort(function(f,_){return u(Vn(f),Vn(_))})},ui=function(c,u){return function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=f.query,b=f.success,x=b===void 0?function(){}:b,w=f.failure,M=w===void 0?function(){}:w,A=Ro(f,["query","success","failure"]),k=Gr(c.items,_);if(!k){M({error:un("error",0,"Item not found"),file:null});return}u(k,x,M,A||{})}},ou=function(c,u,f){return{ABORT_ALL:function(){Qn(f.items).forEach(function(b){b.freeze(),b.abortLoad(),b.abortProcessing()})},DID_SET_FILES:function(b){var x=b.value,w=x===void 0?[]:x,M=w.map(function(k){return{source:k.source?k.source:k,options:k.options}}),A=Qn(f.items);A.forEach(function(k){M.find(function(U){return U.source===k.source||U.source===k.file})||c("REMOVE_ITEM",{query:k,remove:!1})}),A=Qn(f.items),M.forEach(function(k,U){A.find(function(q){return q.source===k.source||q.file===k.source})||c("ADD_ITEM",Object.assign({},k,{interactionMethod:P.NONE,index:U}))})},DID_UPDATE_ITEM_METADATA:function(b){var x=b.id,w=b.action,M=b.change;M.silent||(clearTimeout(f.itemUpdateTimeout),f.itemUpdateTimeout=setTimeout(function(){var A=Rl(f.items,x);if(!u("IS_ASYNC")){Gi("SHOULD_PREPARE_OUTPUT",!1,{item:A,query:u,action:w,change:M}).then(function(ne){var ue=u("GET_BEFORE_PREPARE_FILE");ue&&(ne=ue(A,ne)),ne&&c("REQUEST_PREPARE_OUTPUT",{query:x,item:A,success:function(X){c("DID_PREPARE_OUTPUT",{id:x,file:X})}},!0)});return}A.origin===Mn.LOCAL&&c("DID_LOAD_ITEM",{id:A.id,error:null,serverFileReference:A.source});var k=function(){setTimeout(function(){c("REQUEST_ITEM_PROCESSING",{query:x})},32)},U=function(ue){A.revert(Is(f.options.server.url,f.options.server.revert),u("GET_FORCE_REVERT")).then(ue?k:function(){}).catch(function(){})},q=function(ue){A.abortProcessing().then(ue?k:function(){})};if(A.status===nt.PROCESSING_COMPLETE)return U(f.options.instantUpload);if(A.status===nt.PROCESSING)return q(f.options.instantUpload);f.options.instantUpload&&k()},0))},MOVE_ITEM:function(b){var x=b.query,w=b.index,M=Gr(f.items,x);if(M){var A=f.items.indexOf(M);w=Jc(w,0,f.items.length-1),A!==w&&f.items.splice(w,0,f.items.splice(A,1)[0])}},SORT:function(b){var x=b.compare;Wi(f,x),c("DID_SORT_ITEMS",{items:u("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(b){var x=b.items,w=b.index,M=b.interactionMethod,A=b.success,k=A===void 0?function(){}:A,U=b.failure,q=U===void 0?function(){}:U,ne=w;if(w===-1||typeof w>"u"){var ue=u("GET_ITEM_INSERT_LOCATION"),pe=u("GET_TOTAL_ITEMS");ne=ue==="before"?0:pe}var X=u("GET_IGNORED_FILES"),Ee=function(_t){return sr(_t)?!X.includes(_t.name.toLowerCase()):!gt(_t)},qe=x.filter(Ee),Ye=qe.map(function(Me){return new Promise(function(_t,Re){c("ADD_ITEM",{interactionMethod:M,source:Me.source||Me,success:_t,failure:Re,index:ne++,options:Me.options||{}})})});Promise.all(Ye).then(k).catch(q)},ADD_ITEM:function(b){var x=b.source,w=b.index,M=w===void 0?-1:w,A=b.interactionMethod,k=b.success,U=k===void 0?function(){}:k,q=b.failure,ne=q===void 0?function(){}:q,ue=b.options,pe=ue===void 0?{}:ue;if(gt(x)){ne({error:un("error",0,"No source"),file:null});return}if(!(sr(x)&&f.options.ignoredFiles.includes(x.name.toLowerCase()))){if(!Xc(f)){if(f.options.allowMultiple||!f.options.allowMultiple&&!f.options.allowReplace){var X=un("warning",0,"Max files");c("DID_THROW_MAX_FILES",{source:x,error:X}),ne({error:X,file:null});return}var Ee=Qn(f.items)[0];if(Ee.status===nt.PROCESSING_COMPLETE||Ee.status===nt.PROCESSING_REVERT_ERROR){var qe=u("GET_FORCE_REVERT");if(Ee.revert(Is(f.options.server.url,f.options.server.revert),qe).then(function(){qe&&c("ADD_ITEM",{source:x,index:M,interactionMethod:A,success:U,failure:ne,options:pe})}).catch(function(){}),qe)return}c("REMOVE_ITEM",{query:Ee.id})}var Ye=pe.type==="local"?Mn.LOCAL:pe.type==="limbo"?Mn.LIMBO:Mn.INPUT,Me=wa(Ye,Ye===Mn.INPUT?null:x,pe.file);Object.keys(pe.metadata||{}).forEach(function(Ne){Me.setMetadata(Ne,pe.metadata[Ne])}),Hr("DID_CREATE_ITEM",Me,{query:u,dispatch:c});var _t=u("GET_ITEM_INSERT_LOCATION");f.options.itemInsertLocationFreedom||(M=_t==="before"?-1:f.items.length),Go(f.items,Me,M),qt(_t)&&x&&Wi(f,_t);var Re=Me.id;Me.on("init",function(){c("DID_INIT_ITEM",{id:Re})}),Me.on("load-init",function(){c("DID_START_ITEM_LOAD",{id:Re})}),Me.on("load-meta",function(){c("DID_UPDATE_ITEM_META",{id:Re})}),Me.on("load-progress",function(Ne){c("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:Re,progress:Ne})}),Me.on("load-request-error",function(Ne){var We=yr(f.options.labelFileLoadError)(Ne);if(Ne.code>=400&&Ne.code<500){c("DID_THROW_ITEM_INVALID",{id:Re,error:Ne,status:{main:We,sub:Ne.code+" ("+Ne.body+")"}}),ne({error:Ne,file:Vn(Me)});return}c("DID_THROW_ITEM_LOAD_ERROR",{id:Re,error:Ne,status:{main:We,sub:f.options.labelTapToRetry}})}),Me.on("load-file-error",function(Ne){c("DID_THROW_ITEM_INVALID",{id:Re,error:Ne.status,status:Ne.status}),ne({error:Ne.status,file:Vn(Me)})}),Me.on("load-abort",function(){c("REMOVE_ITEM",{query:Re})}),Me.on("load-skip",function(){Me.on("metadata-update",function(Ne){sr(Me.file)&&c("DID_UPDATE_ITEM_METADATA",{id:Re,change:Ne})}),c("COMPLETE_LOAD_ITEM",{query:Re,item:Me,data:{source:x,success:U}})}),Me.on("load",function(){var Ne=function(it){if(!it){c("REMOVE_ITEM",{query:Re});return}Me.on("metadata-update",function(rn){c("DID_UPDATE_ITEM_METADATA",{id:Re,change:rn})}),Gi("SHOULD_PREPARE_OUTPUT",!1,{item:Me,query:u}).then(function(rn){var Kt=u("GET_BEFORE_PREPARE_FILE");Kt&&(rn=Kt(Me,rn));var ot=function(){c("COMPLETE_LOAD_ITEM",{query:Re,item:Me,data:{source:x,success:U}}),Sa(c,f)};if(rn){c("REQUEST_PREPARE_OUTPUT",{query:Re,item:Me,success:function(K){c("DID_PREPARE_OUTPUT",{id:Re,file:K}),ot()}},!0);return}ot()})};Gi("DID_LOAD_ITEM",Me,{query:u,dispatch:c}).then(function(){ru(u("GET_BEFORE_ADD_FILE"),Vn(Me)).then(Ne)}).catch(function(We){if(!We||!We.error||!We.status)return Ne(!1);c("DID_THROW_ITEM_INVALID",{id:Re,error:We.error,status:We.status})})}),Me.on("process-start",function(){c("DID_START_ITEM_PROCESSING",{id:Re})}),Me.on("process-progress",function(Ne){c("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:Re,progress:Ne})}),Me.on("process-error",function(Ne){c("DID_THROW_ITEM_PROCESSING_ERROR",{id:Re,error:Ne,status:{main:yr(f.options.labelFileProcessingError)(Ne),sub:f.options.labelTapToRetry}})}),Me.on("process-revert-error",function(Ne){c("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:Re,error:Ne,status:{main:yr(f.options.labelFileProcessingRevertError)(Ne),sub:f.options.labelTapToRetry}})}),Me.on("process-complete",function(Ne){c("DID_COMPLETE_ITEM_PROCESSING",{id:Re,error:null,serverFileReference:Ne}),c("DID_DEFINE_VALUE",{id:Re,value:Ne})}),Me.on("process-abort",function(){c("DID_ABORT_ITEM_PROCESSING",{id:Re})}),Me.on("process-revert",function(){c("DID_REVERT_ITEM_PROCESSING",{id:Re}),c("DID_DEFINE_VALUE",{id:Re,value:null})}),c("DID_ADD_ITEM",{id:Re,index:M,interactionMethod:A}),Sa(c,f);var Qt=f.options.server||{},$t=Qt.url,ze=Qt.load,Xe=Qt.restore,tt=Qt.fetch;Me.load(x,Ea(Ye===Mn.INPUT?Ot(x)&&Rp(x)&&tt?jo($t,tt):nu:Ye===Mn.LIMBO?jo($t,Xe):jo($t,ze)),function(Ne,We,it){Gi("LOAD_FILE",Ne,{query:u}).then(We).catch(it)})}},REQUEST_PREPARE_OUTPUT:function(b){var x=b.item,w=b.success,M=b.failure,A=M===void 0?function(){}:M,k={error:un("error",0,"Item not found"),file:null};if(x.archived)return A(k);Gi("PREPARE_OUTPUT",x.file,{query:u,item:x}).then(function(U){Gi("COMPLETE_PREPARE_OUTPUT",U,{query:u,item:x}).then(function(q){if(x.archived)return A(k);w(q)})})},COMPLETE_LOAD_ITEM:function(b){var x=b.item,w=b.data,M=w.success,A=w.source,k=u("GET_ITEM_INSERT_LOCATION");if(qt(k)&&A&&Wi(f,k),c("DID_LOAD_ITEM",{id:x.id,error:null,serverFileReference:x.origin===Mn.INPUT?null:A}),M(Vn(x)),x.origin===Mn.LOCAL){c("DID_LOAD_LOCAL_ITEM",{id:x.id});return}if(x.origin===Mn.LIMBO){c("DID_COMPLETE_ITEM_PROCESSING",{id:x.id,error:null,serverFileReference:A}),c("DID_DEFINE_VALUE",{id:x.id,value:x.serverId||A});return}u("IS_ASYNC")&&f.options.instantUpload&&c("REQUEST_ITEM_PROCESSING",{query:x.id})},RETRY_ITEM_LOAD:ui(f,function(_){_.retryLoad()}),REQUEST_ITEM_PREPARE:ui(f,function(_,b,x){c("REQUEST_PREPARE_OUTPUT",{query:_.id,item:_,success:function(M){c("DID_PREPARE_OUTPUT",{id:_.id,file:M}),b({file:_,output:M})},failure:x},!0)}),REQUEST_ITEM_PROCESSING:ui(f,function(_,b,x){var w=_.status===nt.IDLE||_.status===nt.PROCESSING_ERROR;if(!w){var M=function(){return c("REQUEST_ITEM_PROCESSING",{query:_,success:b,failure:x})},A=function(){return document.hidden?M():setTimeout(M,32)};_.status===nt.PROCESSING_COMPLETE||_.status===nt.PROCESSING_REVERT_ERROR?_.revert(Is(f.options.server.url,f.options.server.revert),u("GET_FORCE_REVERT")).then(A).catch(function(){}):_.status===nt.PROCESSING&&_.abortProcessing().then(A);return}_.status!==nt.PROCESSING_QUEUED&&(_.requestProcessing(),c("DID_REQUEST_ITEM_PROCESSING",{id:_.id}),c("PROCESS_ITEM",{query:_,success:b,failure:x},!0))}),PROCESS_ITEM:ui(f,function(_,b,x){var w=u("GET_MAX_PARALLEL_UPLOADS"),M=u("GET_ITEMS_BY_STATUS",nt.PROCESSING).length;if(M===w){f.processingQueue.push({id:_.id,success:b,failure:x});return}if(_.status!==nt.PROCESSING){var A=function U(){var q=f.processingQueue.shift();if(q){var ne=q.id,ue=q.success,pe=q.failure,X=Gr(f.items,ne);if(!X||X.archived){U();return}c("PROCESS_ITEM",{query:ne,success:ue,failure:pe},!0)}};_.onOnce("process-complete",function(){b(Vn(_)),A();var U=f.options.server,q=f.options.instantUpload;if(q&&_.origin===Mn.LOCAL&&qt(U.remove)){var ne=function(){};_.origin=Mn.LIMBO,f.options.server.remove(_.source,ne,ne)}var ue=u("GET_ITEMS_BY_STATUS",nt.PROCESSING_COMPLETE).length===f.items.length;ue&&c("DID_COMPLETE_ITEM_PROCESSING_ALL")}),_.onOnce("process-error",function(U){x({error:U,file:Vn(_)}),A()});var k=f.options;_.process(eu(xa(k.server.url,k.server.process,k.name,{chunkTransferId:_.transferId,chunkServer:k.server.patch,chunkUploads:k.chunkUploads,chunkForce:k.chunkForce,chunkSize:k.chunkSize,chunkRetryDelays:k.chunkRetryDelays}),{allowMinimumUploadDuration:u("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),function(U,q,ne){Gi("PREPARE_OUTPUT",U,{query:u,item:_}).then(function(ue){c("DID_PREPARE_OUTPUT",{id:_.id,file:ue}),q(ue)}).catch(ne)})}}),RETRY_ITEM_PROCESSING:ui(f,function(_){c("REQUEST_ITEM_PROCESSING",{query:_})}),REQUEST_REMOVE_ITEM:ui(f,function(_){ru(u("GET_BEFORE_REMOVE_FILE"),Vn(_)).then(function(b){b&&c("REMOVE_ITEM",{query:_})})}),RELEASE_ITEM:ui(f,function(_){_.release()}),REMOVE_ITEM:ui(f,function(_,b,x,w){var M=function(){var U=_.id;Rl(f.items,U).archive(),c("DID_REMOVE_ITEM",{error:null,id:U,item:_}),Sa(c,f),b(Vn(_))},A=f.options.server;_.origin===Mn.LOCAL&&A&&qt(A.remove)&&w.remove!==!1?(c("DID_START_ITEM_REMOVE",{id:_.id}),A.remove(_.source,function(){return M()},function(k){c("DID_THROW_ITEM_REMOVE_ERROR",{id:_.id,error:un("error",0,k,null),status:{main:yr(f.options.labelFileRemoveError)(k),sub:f.options.labelTapToRetry}})})):((w.revert&&_.origin!==Mn.LOCAL&&_.serverId!==null||f.options.chunkUploads&&_.file.size>f.options.chunkSize||f.options.chunkUploads&&f.options.chunkForce)&&_.revert(Is(f.options.server.url,f.options.server.revert),u("GET_FORCE_REVERT")),M())}),ABORT_ITEM_LOAD:ui(f,function(_){_.abortLoad()}),ABORT_ITEM_PROCESSING:ui(f,function(_){if(_.serverId){c("REVERT_ITEM_PROCESSING",{id:_.id});return}_.abortProcessing().then(function(){var b=f.options.instantUpload;b&&c("REMOVE_ITEM",{query:_.id})})}),REQUEST_REVERT_ITEM_PROCESSING:ui(f,function(_){if(!f.options.instantUpload){c("REVERT_ITEM_PROCESSING",{query:_});return}var b=function(A){A&&c("REVERT_ITEM_PROCESSING",{query:_})},x=u("GET_BEFORE_REMOVE_FILE");if(!x)return b(!0);var w=x(Vn(_));if(w==null)return b(!0);if(typeof w=="boolean")return b(w);typeof w.then=="function"&&w.then(b)}),REVERT_ITEM_PROCESSING:ui(f,function(_){_.revert(Is(f.options.server.url,f.options.server.revert),u("GET_FORCE_REVERT")).then(function(){var b=f.options.instantUpload||iu(_);b&&c("REMOVE_ITEM",{query:_.id})}).catch(function(){})}),SET_OPTIONS:function(b){var x=b.options,w=Object.keys(x),M=Os.filter(function(k){return w.includes(k)}),A=[].concat(zr(M),zr(Object.keys(x).filter(function(k){return!M.includes(k)})));A.forEach(function(k){c("SET_"+Ei(k,"_").toUpperCase(),{value:x[k]})})}}},Os=["server"],Nl=function(c){return c},Ti=function(c){return document.createElement(c)},ln=function(c,u){var f=c.childNodes[0];f?u!==f.nodeValue&&(f.nodeValue=u):(f=document.createTextNode(u),c.appendChild(f))},Fl=function(c,u,f,_){var b=(_%360-90)*Math.PI/180;return{x:c+f*Math.cos(b),y:u+f*Math.sin(b)}},su=function(c,u,f,_,b,x){var w=Fl(c,u,f,b),M=Fl(c,u,f,_);return["M",w.x,w.y,"A",f,f,0,x,0,M.x,M.y].join(" ")},Np=function(c,u,f,_,b){var x=1;return b>_&&b-_<=.5&&(x=0),_>b&&_-b>=.5&&(x=0),su(c,u,f,Math.min(.9999,_)*360,Math.min(.9999,b)*360,x)},au=function(c){var u=c.root,f=c.props;f.spin=!1,f.progress=0,f.opacity=0;var _=y("svg");u.ref.path=y("path",{"stroke-width":2,"stroke-linecap":"round"}),_.appendChild(u.ref.path),u.ref.svg=_,u.appendChild(_)},lu=function(c){var u=c.root,f=c.props;if(f.opacity!==0){f.align&&(u.element.dataset.align=f.align);var _=parseInt(a(u.ref.path,"stroke-width"),10),b=u.rect.element.width*.5,x=0,w=0;f.spin?(x=0,w=.5):(x=0,w=f.progress);var M=Np(b,b,b-_,x,w);a(u.ref.path,"d",M),a(u.ref.path,"stroke-opacity",f.spin||f.progress>0?1:0)}},Bl=ie({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:au,write:lu,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),cu=function(c){var u=c.root,f=c.props;u.element.innerHTML=(f.icon||"")+("<span>"+f.label+"</span>"),f.isDisabled=!1},uu=function(c){var u=c.root,f=c.props,_=f.isDisabled,b=u.query("GET_DISABLED")||f.opacity===0;b&&!_?(f.isDisabled=!0,a(u.element,"disabled","disabled")):!b&&_&&(f.isDisabled=!1,u.element.removeAttribute("disabled"))},du=ie({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:cu,write:uu}),Vl=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},b=_.labelBytes,x=b===void 0?"bytes":b,w=_.labelKilobytes,M=w===void 0?"KB":w,A=_.labelMegabytes,k=A===void 0?"MB":A,U=_.labelGigabytes,q=U===void 0?"GB":U;c=Math.round(Math.abs(c));var ne=f,ue=f*f,pe=f*f*f;return c<ne?c+" "+x:c<ue?Math.floor(c/ne)+" "+M:c<pe?zl(c/ue,1,u)+" "+k:zl(c/pe,2,u)+" "+q},zl=function(c,u,f){return c.toFixed(u).split(".").filter(function(_){return _!=="0"}).join(f)},Fp=function(c){var u=c.root,f=c.props,_=Ti("span");_.className="filepond--file-info-main",a(_,"aria-hidden","true"),u.appendChild(_),u.ref.fileName=_;var b=Ti("span");b.className="filepond--file-info-sub",u.appendChild(b),u.ref.fileSize=b,ln(b,u.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),ln(_,Nl(u.query("GET_ITEM_NAME",f.id)))},o=function(c){var u=c.root,f=c.props;ln(u.ref.fileSize,Vl(u.query("GET_ITEM_SIZE",f.id),".",u.query("GET_FILE_SIZE_BASE"),u.query("GET_FILE_SIZE_LABELS",u.query))),ln(u.ref.fileName,Nl(u.query("GET_ITEM_NAME",f.id)))},l=function(c){var u=c.root,f=c.props;if(xt(u.query("GET_ITEM_SIZE",f.id))){o({root:u,props:f});return}ln(u.ref.fileSize,u.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},p=ie({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Oe({DID_LOAD_ITEM:o,DID_UPDATE_ITEM_META:o,DID_THROW_ITEM_LOAD_ERROR:l,DID_THROW_ITEM_INVALID:l}),didCreateView:function(c){Hr("CREATE_VIEW",Object.assign({},c,{view:c}))},create:Fp,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),g=function(c){return Math.round(c*100)},C=function(c){var u=c.root,f=Ti("span");f.className="filepond--file-status-main",u.appendChild(f),u.ref.main=f;var _=Ti("span");_.className="filepond--file-status-sub",u.appendChild(_),u.ref.sub=_,I({root:u,action:{progress:null}})},I=function(c){var u=c.root,f=c.action,_=f.progress===null?u.query("GET_LABEL_FILE_LOADING"):u.query("GET_LABEL_FILE_LOADING")+" "+g(f.progress)+"%";ln(u.ref.main,_),ln(u.ref.sub,u.query("GET_LABEL_TAP_TO_CANCEL"))},R=function(c){var u=c.root,f=c.action,_=f.progress===null?u.query("GET_LABEL_FILE_PROCESSING"):u.query("GET_LABEL_FILE_PROCESSING")+" "+g(f.progress)+"%";ln(u.ref.main,_),ln(u.ref.sub,u.query("GET_LABEL_TAP_TO_CANCEL"))},Z=function(c){var u=c.root;ln(u.ref.main,u.query("GET_LABEL_FILE_PROCESSING")),ln(u.ref.sub,u.query("GET_LABEL_TAP_TO_CANCEL"))},Y=function(c){var u=c.root;ln(u.ref.main,u.query("GET_LABEL_FILE_PROCESSING_ABORTED")),ln(u.ref.sub,u.query("GET_LABEL_TAP_TO_RETRY"))},le=function(c){var u=c.root;ln(u.ref.main,u.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),ln(u.ref.sub,u.query("GET_LABEL_TAP_TO_UNDO"))},Ve=function(c){var u=c.root;ln(u.ref.main,""),ln(u.ref.sub,"")},rt=function(c){var u=c.root,f=c.action;ln(u.ref.main,f.status.main),ln(u.ref.sub,f.status.sub)},Tt=ie({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Oe({DID_LOAD_ITEM:Ve,DID_REVERT_ITEM_PROCESSING:Ve,DID_REQUEST_ITEM_PROCESSING:Z,DID_ABORT_ITEM_PROCESSING:Y,DID_COMPLETE_ITEM_PROCESSING:le,DID_UPDATE_ITEM_PROCESS_PROGRESS:R,DID_UPDATE_ITEM_LOAD_PROGRESS:I,DID_THROW_ITEM_LOAD_ERROR:rt,DID_THROW_ITEM_INVALID:rt,DID_THROW_ITEM_PROCESSING_ERROR:rt,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:rt,DID_THROW_ITEM_REMOVE_ERROR:rt}),didCreateView:function(c){Hr("CREATE_VIEW",Object.assign({},c,{view:c}))},create:C,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Dn={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Sn=[];r(Dn,function(v){Sn.push(v)});var dn=function(c){if(Ta(c)==="right")return 0;var u=c.ref.buttonRemoveItem.rect.element;return u.hidden?null:u.width+u.left},ei=function(c){var u=c.ref.buttonAbortItemLoad.rect.element;return u.width},br=function(c){return Math.floor(c.ref.buttonRemoveItem.rect.element.height/4)},Bp=function(c){return Math.floor(c.ref.buttonRemoveItem.rect.element.left/2)},Vp=function(c){return c.query("GET_STYLE_LOAD_INDICATOR_POSITION")},zp=function(c){return c.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},Ta=function(c){return c.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},Hp={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Vp},processProgressIndicator:{opacity:0,align:zp},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Hl={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:dn},status:{translateX:dn}},yn={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Cr={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:dn},status:{translateX:dn,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:dn},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Ta},info:{translateX:dn},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Ta},buttonRemoveItem:{opacity:1},info:{translateX:dn},status:{opacity:1,translateX:dn}},DID_LOAD_ITEM:Hl,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:dn},status:{translateX:dn}},DID_START_ITEM_PROCESSING:yn,DID_REQUEST_ITEM_PROCESSING:yn,DID_UPDATE_ITEM_PROCESS_PROGRESS:yn,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:dn}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:dn},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Hl},Gp=ie({create:function(c){var u=c.root;u.element.innerHTML=u.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Up=function(c){var u=c.root,f=c.props,_=Object.keys(Dn).reduce(function(qe,Ye){return qe[Ye]=Object.assign({},Dn[Ye]),qe},{}),b=f.id,x=u.query("GET_ALLOW_REVERT"),w=u.query("GET_ALLOW_REMOVE"),M=u.query("GET_ALLOW_PROCESS"),A=u.query("GET_INSTANT_UPLOAD"),k=u.query("IS_ASYNC"),U=u.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN"),q;k?M&&!x?q=function(Ye){return!/RevertItemProcessing/.test(Ye)}:!M&&x?q=function(Ye){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(Ye)}:!M&&!x&&(q=function(Ye){return!/Process/.test(Ye)}):q=function(Ye){return!/Process/.test(Ye)};var ne=q?Sn.filter(q):Sn.concat();if(A&&x&&(_.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",_.RevertItemProcessing.icon="GET_ICON_REMOVE"),k&&!x){var ue=Cr.DID_COMPLETE_ITEM_PROCESSING;ue.info.translateX=Bp,ue.info.translateY=br,ue.status.translateY=br,ue.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(k&&!M&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(function(qe){Cr[qe].status.translateY=br}),Cr.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=ei),U&&x){_.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var pe=Cr.DID_COMPLETE_ITEM_PROCESSING;pe.info.translateX=dn,pe.status.translateY=br,pe.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}w||(_.RemoveItem.disabled=!0),r(_,function(qe,Ye){var Me=u.createChildView(du,{label:u.query(Ye.label),icon:u.query(Ye.icon),opacity:0});ne.includes(qe)&&u.appendChildView(Me),Ye.disabled&&(Me.element.setAttribute("disabled","disabled"),Me.element.setAttribute("hidden","hidden")),Me.element.dataset.align=u.query("GET_STYLE_"+Ye.align),Me.element.classList.add(Ye.className),Me.on("click",function(_t){_t.stopPropagation(),!Ye.disabled&&u.dispatch(Ye.action,{query:b})}),u.ref["button"+qe]=Me}),u.ref.processingCompleteIndicator=u.appendChildView(u.createChildView(Gp)),u.ref.processingCompleteIndicator.element.dataset.align=u.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),u.ref.info=u.appendChildView(u.createChildView(p,{id:b})),u.ref.status=u.appendChildView(u.createChildView(Tt,{id:b}));var X=u.appendChildView(u.createChildView(Bl,{opacity:0,align:u.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));X.element.classList.add("filepond--load-indicator"),u.ref.loadProgressIndicator=X;var Ee=u.appendChildView(u.createChildView(Bl,{opacity:0,align:u.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));Ee.element.classList.add("filepond--process-indicator"),u.ref.processProgressIndicator=Ee,u.ref.activeStyles=[]},qp=function(c){var u=c.root,f=c.actions,_=c.props;Gl({root:u,actions:f,props:_});var b=f.concat().filter(function(w){return/^DID_/.test(w.type)}).reverse().find(function(w){return Cr[w.type]});if(b){u.ref.activeStyles=[];var x=Cr[b.type];r(Hp,function(w,M){var A=u.ref[w];r(M,function(k,U){var q=x[w]&&typeof x[w][k]<"u"?x[w][k]:U;u.ref.activeStyles.push({control:A,key:k,value:q})})})}u.ref.activeStyles.forEach(function(w){var M=w.control,A=w.key,k=w.value;M[A]=typeof k=="function"?k(u):k})},Gl=Oe({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(c){var u=c.root,f=c.action;u.ref.buttonAbortItemProcessing.label=f.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(c){var u=c.root,f=c.action;u.ref.buttonAbortItemLoad.label=f.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(c){var u=c.root,f=c.action;u.ref.buttonAbortItemRemoval.label=f.value},DID_REQUEST_ITEM_PROCESSING:function(c){var u=c.root;u.ref.processProgressIndicator.spin=!0,u.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(c){var u=c.root;u.ref.loadProgressIndicator.spin=!0,u.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(c){var u=c.root;u.ref.processProgressIndicator.spin=!0,u.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(c){var u=c.root,f=c.action;u.ref.loadProgressIndicator.spin=!1,u.ref.loadProgressIndicator.progress=f.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(c){var u=c.root,f=c.action;u.ref.processProgressIndicator.spin=!1,u.ref.processProgressIndicator.progress=f.progress}}),pu=ie({create:Up,write:qp,didCreateView:function(c){Hr("CREATE_VIEW",Object.assign({},c,{view:c}))},name:"file"}),Wp=function(c){var u=c.root,f=c.props;u.ref.fileName=Ti("legend"),u.appendChild(u.ref.fileName),u.ref.file=u.appendChildView(u.createChildView(pu,{id:f.id})),u.ref.data=!1},W1=function(c){var u=c.root,f=c.props;ln(u.ref.fileName,Nl(u.query("GET_ITEM_NAME",f.id)))},j1=ie({create:Wp,ignoreRect:!0,write:Oe({DID_LOAD_ITEM:W1}),didCreateView:function(c){Hr("CREATE_VIEW",Object.assign({},c,{view:c}))},tag:"fieldset",name:"file-wrapper"}),km={type:"spring",damping:.6,mass:7},Z1=function(c){var u=c.root,f=c.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:km},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:km},styles:["translateY"]}}].forEach(function(_){K1(u,_,f.name)}),u.element.classList.add("filepond--"+f.name),u.ref.scalable=null},K1=function(c,u,f){var _=ie({name:"panel-"+u.name+" filepond--"+f,mixins:u.mixins,ignoreRectUpdate:!0}),b=c.createChildView(_,u.props);c.ref[u.name]=c.appendChildView(b)},Y1=function(c){var u=c.root,f=c.props;if((u.ref.scalable===null||f.scalable!==u.ref.scalable)&&(u.ref.scalable=pn(f.scalable)?f.scalable:!0,u.element.dataset.scalable=u.ref.scalable),!!f.height){var _=u.ref.top.rect.element,b=u.ref.bottom.rect.element,x=Math.max(_.height+b.height,f.height);u.ref.center.translateY=_.height,u.ref.center.scaleY=(x-_.height-b.height)/100,u.ref.bottom.translateY=x-b.height}},Pm=ie({name:"panel",read:function(c){var u=c.root,f=c.props;return f.heightCurrent=u.ref.bottom.translateY},write:Y1,create:Z1,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),X1=function(c){var u=c.map(function(_){return _.id}),f=void 0;return{setIndex:function(b){f=b},getIndex:function(){return f},getItemIndex:function(b){return u.indexOf(b.id)}}},Dm={type:"spring",stiffness:.75,damping:.45,mass:10},Lm="spring",Rm={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},J1=function(c){var u=c.root,f=c.props;if(u.ref.handleClick=function(b){return u.dispatch("DID_ACTIVATE_ITEM",{id:f.id})},u.element.id="filepond--item-"+f.id,u.element.addEventListener("click",u.ref.handleClick),u.ref.container=u.appendChildView(u.createChildView(j1,{id:f.id})),u.ref.panel=u.appendChildView(u.createChildView(Pm,{name:"item-panel"})),u.ref.panel.height=null,f.markedForRemoval=!1,!!u.query("GET_ALLOW_REORDER")){u.element.dataset.dragState="idle";var _=function(x){if(x.isPrimary){var w=!1,M={x:x.pageX,y:x.pageY};f.dragOrigin={x:u.translateX,y:u.translateY},f.dragCenter={x:x.offsetX,y:x.offsetY};var A=X1(u.query("GET_ACTIVE_ITEMS"));u.dispatch("DID_GRAB_ITEM",{id:f.id,dragState:A});var k=function(pe){if(pe.isPrimary){pe.stopPropagation(),pe.preventDefault(),f.dragOffset={x:pe.pageX-M.x,y:pe.pageY-M.y};var X=f.dragOffset.x*f.dragOffset.x+f.dragOffset.y*f.dragOffset.y;X>16&&!w&&(w=!0,u.element.removeEventListener("click",u.ref.handleClick)),u.dispatch("DID_DRAG_ITEM",{id:f.id,dragState:A})}},U=function(pe){pe.isPrimary&&(f.dragOffset={x:pe.pageX-M.x,y:pe.pageY-M.y},ne())},q=function(){ne()},ne=function(){document.removeEventListener("pointercancel",q),document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",U),u.dispatch("DID_DROP_ITEM",{id:f.id,dragState:A}),w&&setTimeout(function(){return u.element.addEventListener("click",u.ref.handleClick)},0)};document.addEventListener("pointercancel",q),document.addEventListener("pointermove",k),document.addEventListener("pointerup",U)}};u.element.addEventListener("pointerdown",_)}},Q1=Oe({DID_UPDATE_PANEL_HEIGHT:function(c){var u=c.root,f=c.action;u.height=f.height}}),$1=Oe({DID_GRAB_ITEM:function(c){var u=c.root,f=c.props;f.dragOrigin={x:u.translateX,y:u.translateY}},DID_DRAG_ITEM:function(c){var u=c.root;u.element.dataset.dragState="drag"},DID_DROP_ITEM:function(c){var u=c.root,f=c.props;f.dragOffset=null,f.dragOrigin=null,u.element.dataset.dragState="drop"}},function(v){var c=v.root,u=v.actions,f=v.props,_=v.shouldOptimize;c.element.dataset.dragState==="drop"&&c.scaleX<=1&&(c.element.dataset.dragState="idle");var b=u.concat().filter(function(w){return/^DID_/.test(w.type)}).reverse().find(function(w){return Rm[w.type]});b&&b.type!==f.currentState&&(f.currentState=b.type,c.element.dataset.filepondItemState=Rm[f.currentState]||"");var x=c.query("GET_ITEM_PANEL_ASPECT_RATIO")||c.query("GET_PANEL_ASPECT_RATIO");x?_||(c.height=c.rect.element.width*x):(Q1({root:c,actions:u,props:f}),!c.height&&c.ref.container.rect.element.height>0&&(c.height=c.ref.container.rect.element.height)),_&&(c.ref.panel.height=null),c.ref.panel.height=c.height}),eb=ie({create:J1,write:$1,destroy:function(c){var u=c.root,f=c.props;u.element.removeEventListener("click",u.ref.handleClick),u.dispatch("RELEASE_ITEM",{query:f.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Lm,scaleY:Lm,translateX:Dm,translateY:Dm,opacity:{type:"tween",duration:150}}}}),jp=function(v,c){return Math.max(1,Math.floor((v+1)/c))},Zp=function(c,u,f){if(f){var _=c.rect.element.width,b=u.length,x=null;if(b===0||f.top<u[0].rect.element.top)return-1;var w=u[0],M=w.rect.element,A=M.marginLeft+M.marginRight,k=M.width+A,U=jp(_,k);if(U===1){for(var q=0;q<b;q++){var ne=u[q],ue=ne.rect.outer.top+ne.rect.element.height*.5;if(f.top<ue)return q}return b}for(var pe=M.marginTop+M.marginBottom,X=M.height+pe,Ee=0;Ee<b;Ee++){var qe=Ee%U,Ye=Math.floor(Ee/U),Me=qe*k,_t=Ye*X,Re=_t-M.marginTop,Qt=Me+k,$t=_t+X+M.marginBottom;if(f.top<$t&&f.top>Re){if(f.left<Qt)return Ee;Ee!==b-1?x=Ee:x=null}}return x!==null?x:b}},fu={height:0,width:0,get getHeight(){return this.height},set setHeight(v){(this.height===0||v===0)&&(this.height=v)},get getWidth(){return this.width},set setWidth(v){(this.width===0||v===0)&&(this.width=v)},setDimensions:function(c,u){(this.height===0||c===0)&&(this.height=c),(this.width===0||u===0)&&(this.width=u)}},tb=function(c){var u=c.root;a(u.element,"role","list"),u.ref.lastItemSpanwDate=Date.now()},nb=function(c){var u=c.root,f=c.action,_=f.id,b=f.index,x=f.interactionMethod;u.ref.addIndex=b;var w=Date.now(),M=w,A=1;if(x!==P.NONE){A=0;var k=u.query("GET_ITEM_INSERT_INTERVAL"),U=w-u.ref.lastItemSpanwDate;M=U<k?w+(k-U):w}u.ref.lastItemSpanwDate=M,u.appendChildView(u.createChildView(eb,{spawnDate:M,id:_,opacity:A,interactionMethod:x}),b)},Nm=function(c,u,f){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;c.dragOffset?(c.translateX=null,c.translateY=null,c.translateX=c.dragOrigin.x+c.dragOffset.x,c.translateY=c.dragOrigin.y+c.dragOffset.y,c.scaleX=1.025,c.scaleY=1.025):(c.translateX=u,c.translateY=f,Date.now()>c.spawnDate&&(c.opacity===0&&ib(c,u,f,_,b),c.scaleX=1,c.scaleY=1,c.opacity=1))},ib=function(c,u,f,_,b){c.interactionMethod===P.NONE?(c.translateX=null,c.translateX=u,c.translateY=null,c.translateY=f):c.interactionMethod===P.DROP?(c.translateX=null,c.translateX=u-_*20,c.translateY=null,c.translateY=f-b*10,c.scaleX=.8,c.scaleY=.8):c.interactionMethod===P.BROWSE?(c.translateY=null,c.translateY=f-30):c.interactionMethod===P.API&&(c.translateX=null,c.translateX=u-30,c.translateY=null)},rb=function(c){var u=c.root,f=c.action,_=f.id,b=u.childViews.find(function(x){return x.id===_});b&&(b.scaleX=.9,b.scaleY=.9,b.opacity=0,b.markedForRemoval=!0)},Kp=function(c){return c.rect.element.height+c.rect.element.marginBottom*.5+c.rect.element.marginTop*.5},ob=function(c){return c.rect.element.width+c.rect.element.marginLeft*.5+c.rect.element.marginRight*.5},sb=function(c){var u=c.root,f=c.action,_=f.id,b=f.dragState,x=u.query("GET_ITEM",{id:_}),w=u.childViews.find(function(qe){return qe.id===_}),M=u.childViews.length,A=b.getItemIndex(x);if(w){var k={x:w.dragOrigin.x+w.dragOffset.x+w.dragCenter.x,y:w.dragOrigin.y+w.dragOffset.y+w.dragCenter.y},U=Kp(w),q=ob(w),ne=Math.floor(u.rect.outer.width/q);ne>M&&(ne=M);var ue=Math.floor(M/ne+1);fu.setHeight=U*ue,fu.setWidth=q*ne;var pe={y:Math.floor(k.y/U),x:Math.floor(k.x/q),getGridIndex:function(){return k.y>fu.getHeight||k.y<0||k.x>fu.getWidth||k.x<0?A:this.y*ne+this.x},getColIndex:function(){for(var Ye=u.query("GET_ACTIVE_ITEMS"),Me=u.childViews.filter(function(it){return it.rect.element.height}),_t=Ye.map(function(it){return Me.find(function(rn){return rn.id===it.id})}),Re=_t.findIndex(function(it){return it===w}),Qt=Kp(w),$t=_t.length,ze=$t,Xe=0,tt=0,Ne=0,We=0;We<$t;We++)if(Xe=Kp(_t[We]),Ne=tt,tt=Ne+Xe,k.y<tt){if(Re>We){if(k.y<Ne+Qt){ze=We;break}continue}ze=We;break}return ze}},X=ne>1?pe.getGridIndex():pe.getColIndex();u.dispatch("MOVE_ITEM",{query:w,index:X});var Ee=b.getIndex();if(Ee===void 0||Ee!==X){if(b.setIndex(X),Ee===void 0)return;u.dispatch("DID_REORDER_ITEMS",{items:u.query("GET_ACTIVE_ITEMS"),origin:A,target:X})}}},ab=Oe({DID_ADD_ITEM:nb,DID_REMOVE_ITEM:rb,DID_DRAG_ITEM:sb}),lb=function(c){var u=c.root,f=c.props,_=c.actions,b=c.shouldOptimize;ab({root:u,props:f,actions:_});var x=f.dragCoordinates,w=u.rect.element.width,M=u.childViews.filter(function(ze){return ze.rect.element.height}),A=u.query("GET_ACTIVE_ITEMS").map(function(ze){return M.find(function(Xe){return Xe.id===ze.id})}).filter(function(ze){return ze}),k=x?Zp(u,A,x):null,U=u.ref.addIndex||null;u.ref.addIndex=null;var q=0,ne=0,ue=0;if(A.length!==0){var pe=A[0].rect.element,X=pe.marginTop+pe.marginBottom,Ee=pe.marginLeft+pe.marginRight,qe=pe.width+Ee,Ye=pe.height+X,Me=jp(w,qe);if(Me===1){var _t=0,Re=0;A.forEach(function(ze,Xe){if(k){var tt=Xe-k;tt===-2?Re=-X*.25:tt===-1?Re=-X*.75:tt===0?Re=X*.75:tt===1?Re=X*.25:Re=0}b&&(ze.translateX=null,ze.translateY=null),ze.markedForRemoval||Nm(ze,0,_t+Re);var Ne=ze.rect.element.height+X,We=Ne*(ze.markedForRemoval?ze.opacity:1);_t+=We})}else{var Qt=0,$t=0;A.forEach(function(ze,Xe){Xe===k&&(q=1),Xe===U&&(ue+=1),ze.markedForRemoval&&ze.opacity<.5&&(ne-=1);var tt=Xe+ue+q+ne,Ne=tt%Me,We=Math.floor(tt/Me),it=Ne*qe,rn=We*Ye,Kt=Math.sign(it-Qt),ot=Math.sign(rn-$t);Qt=it,$t=rn,!ze.markedForRemoval&&(b&&(ze.translateX=null,ze.translateY=null),Nm(ze,it,rn,Kt,ot))})}}},cb=function(c,u){return u.filter(function(f){return f.data&&f.data.id?c.id===f.data.id:!0})},ub=ie({create:tb,write:lb,tag:"ul",name:"list",didWriteView:function(c){var u=c.root;u.childViews.filter(function(f){return f.markedForRemoval&&f.opacity===0&&f.resting}).forEach(function(f){f._destroy(),u.removeChildView(f)})},filterFrameActionsForChild:cb,mixins:{apis:["dragCoordinates"]}}),db=function(c){var u=c.root,f=c.props;u.ref.list=u.appendChildView(u.createChildView(ub)),f.dragCoordinates=null,f.overflowing=!1},pb=function(c){var u=c.root,f=c.props,_=c.action;u.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(f.dragCoordinates={left:_.position.scopeLeft-u.ref.list.rect.element.left,top:_.position.scopeTop-(u.rect.outer.top+u.rect.element.marginTop+u.rect.element.scrollTop)})},fb=function(c){var u=c.props;u.dragCoordinates=null},hb=Oe({DID_DRAG:pb,DID_END_DRAG:fb}),mb=function(c){var u=c.root,f=c.props,_=c.actions;if(hb({root:u,props:f,actions:_}),u.ref.list.dragCoordinates=f.dragCoordinates,f.overflowing&&!f.overflow&&(f.overflowing=!1,u.element.dataset.state="",u.height=null),f.overflow){var b=Math.round(f.overflow);b!==u.height&&(f.overflowing=!0,u.element.dataset.state="overflow",u.height=b)}},gb=ie({create:db,write:mb,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Er=function(c,u,f){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";f?a(c,u,_):c.removeAttribute(u)},_b=function(c){if(!(!c||c.value==="")){try{c.value=""}catch{}if(c.value){var u=Ti("form"),f=c.parentNode,_=c.nextSibling;u.appendChild(c),u.reset(),_?f.insertBefore(c,_):f.appendChild(c)}}},vb=function(c){var u=c.root,f=c.props;u.element.id="filepond--browser-"+f.id,a(u.element,"name",u.query("GET_NAME")),a(u.element,"aria-controls","filepond--assistant-"+f.id),a(u.element,"aria-labelledby","filepond--drop-label-"+f.id),Fm({root:u,action:{value:u.query("GET_ACCEPTED_FILE_TYPES")}}),Bm({root:u,action:{value:u.query("GET_ALLOW_MULTIPLE")}}),Vm({root:u,action:{value:u.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Yp({root:u}),zm({root:u,action:{value:u.query("GET_REQUIRED")}}),Hm({root:u,action:{value:u.query("GET_CAPTURE_METHOD")}}),u.ref.handleChange=function(_){if(u.element.value){var b=Array.from(u.element.files).map(function(x){return x._relativePath=x.webkitRelativePath,x});setTimeout(function(){f.onload(b),_b(u.element)},250)}},u.element.addEventListener("change",u.ref.handleChange)},Fm=function(c){var u=c.root,f=c.action;u.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Er(u.element,"accept",!!f.value,f.value?f.value.join(","):"")},Bm=function(c){var u=c.root,f=c.action;Er(u.element,"multiple",f.value)},Vm=function(c){var u=c.root,f=c.action;Er(u.element,"webkitdirectory",f.value)},Yp=function(c){var u=c.root,f=u.query("GET_DISABLED"),_=u.query("GET_ALLOW_BROWSE"),b=f||!_;Er(u.element,"disabled",b)},zm=function(c){var u=c.root,f=c.action;f.value?u.query("GET_TOTAL_ITEMS")===0&&Er(u.element,"required",!0):Er(u.element,"required",!1)},Hm=function(c){var u=c.root,f=c.action;Er(u.element,"capture",!!f.value,f.value===!0?"":f.value)},Gm=function(c){var u=c.root,f=u.element;if(u.query("GET_TOTAL_ITEMS")>0){Er(f,"required",!1),Er(f,"name",!1);for(var _=u.query("GET_ACTIVE_ITEMS"),b=!1,x=0;x<_.length;x++)_[x].status===nt.LOAD_ERROR&&(b=!0);u.element.setCustomValidity(b?u.query("GET_LABEL_INVALID_FIELD"):"")}else{Er(f,"name",!0,u.query("GET_NAME"));var w=u.query("GET_CHECK_VALIDITY");w&&f.setCustomValidity(""),u.query("GET_REQUIRED")&&Er(f,"required",!0)}},yb=function(c){var u=c.root,f=u.query("GET_CHECK_VALIDITY");f&&u.element.setCustomValidity(u.query("GET_LABEL_INVALID_FIELD"))},bb=ie({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:vb,destroy:function(c){var u=c.root;u.element.removeEventListener("change",u.ref.handleChange)},write:Oe({DID_LOAD_ITEM:Gm,DID_REMOVE_ITEM:Gm,DID_THROW_ITEM_INVALID:yb,DID_SET_DISABLED:Yp,DID_SET_ALLOW_BROWSE:Yp,DID_SET_ALLOW_DIRECTORIES_ONLY:Vm,DID_SET_ALLOW_MULTIPLE:Bm,DID_SET_ACCEPTED_FILE_TYPES:Fm,DID_SET_CAPTURE_METHOD:Hm,DID_SET_REQUIRED:zm})}),Um={ENTER:13,SPACE:32},Cb=function(c){var u=c.root,f=c.props,_=Ti("label");a(_,"for","filepond--browser-"+f.id),a(_,"id","filepond--drop-label-"+f.id),u.ref.handleKeyDown=function(b){var x=b.keyCode===Um.ENTER||b.keyCode===Um.SPACE;x&&(b.preventDefault(),u.ref.label.click())},u.ref.handleClick=function(b){var x=b.target===_||_.contains(b.target);x||u.ref.label.click()},_.addEventListener("keydown",u.ref.handleKeyDown),u.element.addEventListener("click",u.ref.handleClick),qm(_,f.caption),u.appendChild(_),u.ref.label=_},qm=function(c,u){c.innerHTML=u;var f=c.querySelector(".filepond--label-action");return f&&a(f,"tabindex","0"),u},Eb=ie({name:"drop-label",ignoreRect:!0,create:Cb,destroy:function(c){var u=c.root;u.ref.label.addEventListener("keydown",u.ref.handleKeyDown),u.element.removeEventListener("click",u.ref.handleClick)},write:Oe({DID_SET_LABEL_IDLE:function(c){var u=c.root,f=c.action;qm(u.ref.label,f.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),xb=ie({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),wb=function(c){var u=c.root,f=u.rect.element.width*.5,_=u.rect.element.height*.5;u.ref.blob=u.appendChildView(u.createChildView(xb,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:f,translateY:_}))},Sb=function(c){var u=c.root,f=c.action;if(!u.ref.blob){wb({root:u});return}u.ref.blob.translateX=f.position.scopeLeft,u.ref.blob.translateY=f.position.scopeTop,u.ref.blob.scaleX=1,u.ref.blob.scaleY=1,u.ref.blob.opacity=1},Tb=function(c){var u=c.root;u.ref.blob&&(u.ref.blob.opacity=0)},Ib=function(c){var u=c.root;u.ref.blob&&(u.ref.blob.scaleX=2.5,u.ref.blob.scaleY=2.5,u.ref.blob.opacity=0)},Ob=function(c){var u=c.root,f=c.props,_=c.actions;Mb({root:u,props:f,actions:_});var b=u.ref.blob;_.length===0&&b&&b.opacity===0&&(u.removeChildView(b),u.ref.blob=null)},Mb=Oe({DID_DRAG:Sb,DID_DROP:Ib,DID_END_DRAG:Tb}),Ab=ie({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Ob}),Wm=function(c,u){try{var f=new DataTransfer;u.forEach(function(_){_ instanceof File?f.items.add(_):f.items.add(new File([_],_.name,{type:_.type}))}),c.files=f.files}catch{return!1}return!0},kb=function(c){var u=c.root;u.ref.fields={};var f=document.createElement("legend");f.textContent="Files",u.element.appendChild(f)},hu=function(c,u){return c.ref.fields[u]},Xp=function(c){c.query("GET_ACTIVE_ITEMS").forEach(function(u){c.ref.fields[u.id]&&c.element.appendChild(c.ref.fields[u.id])})},jm=function(c){var u=c.root;return Xp(u)},Pb=function(c){var u=c.root,f=c.action,_=u.query("GET_ITEM",f.id),b=_.origin===Mn.LOCAL,x=!b&&u.query("SHOULD_UPDATE_FILE_INPUT"),w=Ti("input");w.type=x?"file":"hidden",w.name=u.query("GET_NAME"),u.ref.fields[f.id]=w,Xp(u)},Db=function(c){var u=c.root,f=c.action,_=hu(u,f.id);if(_&&(f.serverFileReference!==null&&(_.value=f.serverFileReference),!!u.query("SHOULD_UPDATE_FILE_INPUT"))){var b=u.query("GET_ITEM",f.id);Wm(_,[b.file])}},Lb=function(c){var u=c.root,f=c.action;u.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(function(){var _=hu(u,f.id);_&&Wm(_,[f.file])},0)},Rb=function(c){var u=c.root;u.element.disabled=u.query("GET_DISABLED")},Nb=function(c){var u=c.root,f=c.action,_=hu(u,f.id);_&&(_.parentNode&&_.parentNode.removeChild(_),delete u.ref.fields[f.id])},Fb=function(c){var u=c.root,f=c.action,_=hu(u,f.id);_&&(f.value===null?_.removeAttribute("value"):_.type!="file"&&(_.value=f.value),Xp(u))},Bb=Oe({DID_SET_DISABLED:Rb,DID_ADD_ITEM:Pb,DID_LOAD_ITEM:Db,DID_REMOVE_ITEM:Nb,DID_DEFINE_VALUE:Fb,DID_PREPARE_OUTPUT:Lb,DID_REORDER_ITEMS:jm,DID_SORT_ITEMS:jm}),Vb=ie({tag:"fieldset",name:"data",create:kb,write:Bb,ignoreRect:!0}),zb=function(c){return"getRootNode"in c?c.getRootNode():document},Hb=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Gb=["css","csv","html","txt"],Ub={zip:"zip|compressed",epub:"application/epub+zip"},Zm=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return c=c.toLowerCase(),Hb.includes(c)?"image/"+(c==="jpg"?"jpeg":c==="svg"?"svg+xml":c):Gb.includes(c)?"text/"+c:Ub[c]||""},Jp=function(c){return new Promise(function(u,f){var _=Jb(c);if(_.length&&!qb(c))return u(_);Wb(c).then(u)})},qb=function(c){return c.files?c.files.length>0:!1},Wb=function(c){return new Promise(function(u,f){var _=(c.items?Array.from(c.items):[]).filter(function(b){return jb(b)}).map(function(b){return Zb(b)});if(!_.length){u(c.files?Array.from(c.files):[]);return}Promise.all(_).then(function(b){var x=[];b.forEach(function(w){x.push.apply(x,w)}),u(x.filter(function(w){return w}).map(function(w){return w._relativePath||(w._relativePath=w.webkitRelativePath),w}))}).catch(console.error)})},jb=function(c){if(Km(c)){var u=Qp(c);if(u)return u.isFile||u.isDirectory}return c.kind==="file"},Zb=function(c){return new Promise(function(u,f){if(Xb(c)){Kb(Qp(c)).then(u).catch(f);return}u([c.getAsFile()])})},Kb=function(c){return new Promise(function(u,f){var _=[],b=0,x=0,w=function(){x===0&&b===0&&u(_)},M=function A(k){b++;var U=k.createReader(),q=function ne(){U.readEntries(function(ue){if(ue.length===0){b--,w();return}ue.forEach(function(pe){pe.isDirectory?A(pe):(x++,pe.file(function(X){var Ee=Yb(X);pe.fullPath&&(Ee._relativePath=pe.fullPath),_.push(Ee),x--,w()}))}),ne()},f)};q()};M(c)})},Yb=function(c){if(c.type.length)return c;var u=c.lastModifiedDate,f=c.name,_=Zm(ba(c.name));return _.length&&(c=c.slice(0,c.size,_),c.name=f,c.lastModifiedDate=u),c},Xb=function(c){return Km(c)&&(Qp(c)||{}).isDirectory},Km=function(c){return"webkitGetAsEntry"in c},Qp=function(c){return c.webkitGetAsEntry()},Jb=function(c){var u=[];try{if(u=$b(c),u.length)return u;u=Qb(c)}catch{}return u},Qb=function(c){var u=c.getData("url");return typeof u=="string"&&u.length?[u]:[]},$b=function(c){var u=c.getData("text/html");if(typeof u=="string"&&u.length){var f=u.match(/src\s*=\s*"(.+?)"/);if(f)return[f[1]]}return[]},mu=[],Ms=function(c){return{pageLeft:c.pageX,pageTop:c.pageY,scopeLeft:c.offsetX||c.layerX,scopeTop:c.offsetY||c.layerY}},eC=function(c,u,f){var _=tC(u),b={element:c,filterElement:f,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return b.destroy=_.addListener(b),b},tC=function(c){var u=mu.find(function(_){return _.element===c});if(u)return u;var f=nC(c);return mu.push(f),f},nC=function(c){var u=[],f={dragenter:rC,dragover:oC,dragleave:aC,drop:sC},_={};r(f,function(x,w){_[x]=w(c,u),c.addEventListener(x,_[x],!1)});var b={element:c,addListener:function(w){return u.push(w),function(){u.splice(u.indexOf(w),1),u.length===0&&(mu.splice(mu.indexOf(b),1),r(f,function(M){c.removeEventListener(M,_[M],!1)}))}}};return b},iC=function(c,u){return"elementFromPoint"in c||(c=document),c.elementFromPoint(u.x,u.y)},$p=function(c,u){var f=zb(u),_=iC(f,{x:c.pageX-window.pageXOffset,y:c.pageY-window.pageYOffset});return _===u||u.contains(_)},Ym=null,gu=function(c,u){try{c.dropEffect=u}catch{}},rC=function(c,u){return function(f){f.preventDefault(),Ym=f.target,u.forEach(function(_){var b=_.element,x=_.onenter;$p(f,b)&&(_.state="enter",x(Ms(f)))})}},oC=function(c,u){return function(f){f.preventDefault();var _=f.dataTransfer;Jp(_).then(function(b){var x=!1;u.some(function(w){var M=w.filterElement,A=w.element,k=w.onenter,U=w.onexit,q=w.ondrag,ne=w.allowdrop;gu(_,"copy");var ue=ne(b);if(!ue){gu(_,"none");return}if($p(f,A)){if(x=!0,w.state===null){w.state="enter",k(Ms(f));return}if(w.state="over",M&&!ue){gu(_,"none");return}q(Ms(f))}else M&&!x&&gu(_,"none"),w.state&&(w.state=null,U(Ms(f)))})})}},sC=function(c,u){return function(f){f.preventDefault();var _=f.dataTransfer;Jp(_).then(function(b){u.forEach(function(x){var w=x.filterElement,M=x.element,A=x.ondrop,k=x.onexit,U=x.allowdrop;if(x.state=null,!(w&&!$p(f,M))){if(!U(b))return k(Ms(f));A(Ms(f),b)}})})}},aC=function(c,u){return function(f){Ym===f.target&&u.forEach(function(_){var b=_.onexit;_.state=null,b(Ms(f))})}},lC=function(c,u,f){c.classList.add("filepond--hopper");var _=f.catchesDropsOnPage,b=f.requiresDropOnElement,x=f.filterItems,w=x===void 0?function(q){return q}:x,M=eC(c,_?document.documentElement:c,b),A="",k="";M.allowdrop=function(q){return u(w(q))},M.ondrop=function(q,ne){var ue=w(ne);if(!u(ue)){U.ondragend(q);return}k="drag-drop",U.onload(ue,q)},M.ondrag=function(q){U.ondrag(q)},M.onenter=function(q){k="drag-over",U.ondragstart(q)},M.onexit=function(q){k="drag-exit",U.ondragend(q)};var U={updateHopperState:function(){A!==k&&(c.dataset.hopperState=k,A=k)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){M.destroy()}};return U},ef=!1,Ia=[],Xm=function(c){var u=document.activeElement,f=u&&(/textarea|input/i.test(u.nodeName)||u.getAttribute("contenteditable")==="true"||u.getAttribute("contenteditable")==="");if(f){for(var _=!1,b=u;b!==document.body;){if(b.classList.contains("filepond--root")){_=!0;break}b=b.parentNode}if(!_)return}Jp(c.clipboardData).then(function(x){x.length&&Ia.forEach(function(w){return w(x)})})},cC=function(c){Ia.includes(c)||(Ia.push(c),!ef&&(ef=!0,document.addEventListener("paste",Xm)))},uC=function(c){bs(Ia,Ia.indexOf(c)),Ia.length===0&&(document.removeEventListener("paste",Xm),ef=!1)},dC=function(){var c=function(_){u.onload(_)},u={destroy:function(){uC(c)},onload:function(){}};return cC(c),u},pC=function(c){var u=c.root,f=c.props;u.element.id="filepond--assistant-"+f.id,a(u.element,"role","alert"),a(u.element,"aria-live","polite"),a(u.element,"aria-relevant","additions")},Jm=null,Qm=null,tf=[],_u=function(c,u){c.element.textContent=u},fC=function(c){c.element.textContent=""},$m=function(c,u,f){var _=c.query("GET_TOTAL_ITEMS");_u(c,f+" "+u+", "+_+" "+(_===1?c.query("GET_LABEL_FILE_COUNT_SINGULAR"):c.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(Qm),Qm=setTimeout(function(){fC(c)},1500)},eg=function(c){return c.element.parentNode.contains(document.activeElement)},hC=function(c){var u=c.root,f=c.action;if(eg(u)){u.element.textContent="";var _=u.query("GET_ITEM",f.id);tf.push(_.filename),clearTimeout(Jm),Jm=setTimeout(function(){$m(u,tf.join(", "),u.query("GET_LABEL_FILE_ADDED")),tf.length=0},750)}},mC=function(c){var u=c.root,f=c.action;if(eg(u)){var _=f.item;$m(u,_.filename,u.query("GET_LABEL_FILE_REMOVED"))}},gC=function(c){var u=c.root,f=c.action,_=u.query("GET_ITEM",f.id),b=_.filename,x=u.query("GET_LABEL_FILE_PROCESSING_COMPLETE");_u(u,b+" "+x)},tg=function(c){var u=c.root,f=c.action,_=u.query("GET_ITEM",f.id),b=_.filename,x=u.query("GET_LABEL_FILE_PROCESSING_ABORTED");_u(u,b+" "+x)},vu=function(c){var u=c.root,f=c.action,_=u.query("GET_ITEM",f.id),b=_.filename;_u(u,f.status.main+" "+b+" "+f.status.sub)},_C=ie({create:pC,ignoreRect:!0,ignoreRectUpdate:!0,write:Oe({DID_LOAD_ITEM:hC,DID_REMOVE_ITEM:mC,DID_COMPLETE_ITEM_PROCESSING:gC,DID_ABORT_ITEM_PROCESSING:tg,DID_REVERT_ITEM_PROCESSING:tg,DID_THROW_ITEM_REMOVE_ERROR:vu,DID_THROW_ITEM_LOAD_ERROR:vu,DID_THROW_ITEM_INVALID:vu,DID_THROW_ITEM_PROCESSING_ERROR:vu}),tag:"span",name:"assistant"}),ng=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return c.replace(new RegExp(u+".","g"),function(f){return f.charAt(1).toUpperCase()})},ig=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,_=Date.now(),b=null;return function(){for(var x=arguments.length,w=new Array(x),M=0;M<x;M++)w[M]=arguments[M];clearTimeout(b);var A=Date.now()-_,k=function(){_=Date.now(),c.apply(void 0,w)};A<u?f||(b=setTimeout(k,u-A)):k()}},vC=1e6,yu=function(c){return c.preventDefault()},yC=function(c){var u=c.root,f=c.props,_=u.query("GET_ID");_&&(u.element.id=_);var b=u.query("GET_CLASS_NAME");b&&b.split(" ").filter(function(U){return U.length}).forEach(function(U){u.element.classList.add(U)}),u.ref.label=u.appendChildView(u.createChildView(Eb,Object.assign({},f,{translateY:null,caption:u.query("GET_LABEL_IDLE")}))),u.ref.list=u.appendChildView(u.createChildView(gb,{translateY:null})),u.ref.panel=u.appendChildView(u.createChildView(Pm,{name:"panel-root"})),u.ref.assistant=u.appendChildView(u.createChildView(_C,Object.assign({},f))),u.ref.data=u.appendChildView(u.createChildView(Vb,Object.assign({},f))),u.ref.measure=Ti("div"),u.ref.measure.style.height="100%",u.element.appendChild(u.ref.measure),u.ref.bounds=null,u.query("GET_STYLES").filter(function(U){return!gt(U.value)}).map(function(U){var q=U.name,ne=U.value;u.element.dataset[q]=ne}),u.ref.widthPrevious=null,u.ref.widthUpdated=ig(function(){u.ref.updateHistory=[],u.dispatch("DID_RESIZE_ROOT")},250),u.ref.previousAspectRatio=null,u.ref.updateHistory=[];var x=window.matchMedia("(pointer: fine) and (hover: hover)").matches,w="PointerEvent"in window;u.query("GET_ALLOW_REORDER")&&w&&!x&&(u.element.addEventListener("touchmove",yu,{passive:!1}),u.element.addEventListener("gesturestart",yu));var M=u.query("GET_CREDITS"),A=M.length===2;if(A){var k=document.createElement("a");k.className="filepond--credits",k.href=M[0],k.tabIndex=-1,k.target="_blank",k.rel="noopener noreferrer nofollow",k.textContent=M[1],u.element.appendChild(k),u.ref.credits=k}},bC=function(c){var u=c.root,f=c.props,_=c.actions;if(SC({root:u,props:f,actions:_}),_.filter(function(Ut){return/^DID_SET_STYLE_/.test(Ut.type)}).filter(function(Ut){return!gt(Ut.data.value)}).map(function(Ut){var bn=Ut.type,Tn=Ut.data,Oa=ng(bn.substring(8).toLowerCase(),"_");u.element.dataset[Oa]=Tn.value,u.invalidateLayout()}),!u.rect.element.hidden){u.rect.element.width!==u.ref.widthPrevious&&(u.ref.widthPrevious=u.rect.element.width,u.ref.widthUpdated());var b=u.ref.bounds;b||(b=u.ref.bounds=xC(u),u.element.removeChild(u.ref.measure),u.ref.measure=null);var x=u.ref,w=x.hopper,M=x.label,A=x.list,k=x.panel;w&&w.updateHopperState();var U=u.query("GET_PANEL_ASPECT_RATIO"),q=u.query("GET_ALLOW_MULTIPLE"),ne=u.query("GET_TOTAL_ITEMS"),ue=q?u.query("GET_MAX_FILES")||vC:1,pe=ne===ue,X=_.find(function(Ut){return Ut.type==="DID_ADD_ITEM"});if(pe&&X){var Ee=X.data.interactionMethod;M.opacity=0,q?M.translateY=-40:Ee===P.API?M.translateX=40:Ee===P.BROWSE?M.translateY=40:M.translateY=30}else pe||(M.opacity=1,M.translateX=0,M.translateY=0);var qe=CC(u),Ye=EC(u),Me=M.rect.element.height,_t=!q||pe?0:Me,Re=pe?A.rect.element.marginTop:0,Qt=ne===0?0:A.rect.element.marginBottom,$t=_t+Re+Ye.visual+Qt,ze=_t+Re+Ye.bounds+Qt;if(A.translateY=Math.max(0,_t-A.rect.element.marginTop)-qe.top,U){var Xe=u.rect.element.width,tt=Xe*U;U!==u.ref.previousAspectRatio&&(u.ref.previousAspectRatio=U,u.ref.updateHistory=[]);var Ne=u.ref.updateHistory;Ne.push(Xe);var We=2;if(Ne.length>We*2){for(var it=Ne.length,rn=it-10,Kt=0,ot=it;ot>=rn;ot--)if(Ne[ot]===Ne[ot-2]&&Kt++,Kt>=We)return}k.scalable=!1,k.height=tt;var fe=tt-_t-(Qt-qe.bottom)-(pe?Re:0);Ye.visual>fe?A.overflow=fe:A.overflow=null,u.height=tt}else if(b.fixedHeight){k.scalable=!1;var K=b.fixedHeight-_t-(Qt-qe.bottom)-(pe?Re:0);Ye.visual>K?A.overflow=K:A.overflow=null}else if(b.cappedHeight){var Ke=$t>=b.cappedHeight,mt=Math.min(b.cappedHeight,$t);k.scalable=!0,k.height=Ke?mt:mt-qe.top-qe.bottom;var Ct=mt-_t-(Qt-qe.bottom)-(pe?Re:0);$t>b.cappedHeight&&Ye.visual>Ct?A.overflow=Ct:A.overflow=null,u.height=Math.min(b.cappedHeight,ze-qe.top-qe.bottom)}else{var Lt=ne>0?qe.top+qe.bottom:0;k.scalable=!0,k.height=Math.max(Me,$t-Lt),u.height=Math.max(Me,ze-Lt)}u.ref.credits&&k.heightCurrent&&(u.ref.credits.style.transform="translateY("+k.heightCurrent+"px)")}},CC=function(c){var u=c.ref.list.childViews[0].childViews[0];return u?{top:u.rect.element.marginTop,bottom:u.rect.element.marginBottom}:{top:0,bottom:0}},EC=function(c){var u=0,f=0,_=c.ref.list,b=_.childViews[0],x=b.childViews.filter(function(Ye){return Ye.rect.element.height}),w=c.query("GET_ACTIVE_ITEMS").map(function(Ye){return x.find(function(Me){return Me.id===Ye.id})}).filter(function(Ye){return Ye});if(w.length===0)return{visual:u,bounds:f};var M=b.rect.element.width,A=Zp(b,w,_.dragCoordinates),k=w[0].rect.element,U=k.marginTop+k.marginBottom,q=k.marginLeft+k.marginRight,ne=k.width+q,ue=k.height+U,pe=typeof A<"u"&&A>=0?1:0,X=w.find(function(Ye){return Ye.markedForRemoval&&Ye.opacity<.45})?-1:0,Ee=w.length+pe+X,qe=jp(M,ne);return qe===1?w.forEach(function(Ye){var Me=Ye.rect.element.height+U;f+=Me,u+=Me*Ye.opacity}):(f=Math.ceil(Ee/qe)*ue,u=f),{visual:u,bounds:f}},xC=function(c){var u=c.ref.measureHeight||null,f=parseInt(c.style.maxHeight,10)||null,_=u===0?null:u;return{cappedHeight:f,fixedHeight:_}},nf=function(c,u){var f=c.query("GET_ALLOW_REPLACE"),_=c.query("GET_ALLOW_MULTIPLE"),b=c.query("GET_TOTAL_ITEMS"),x=c.query("GET_MAX_FILES"),w=u.length;if(!_&&w>1)return c.dispatch("DID_THROW_MAX_FILES",{source:u,error:un("warning",0,"Max files")}),!0;if(x=_?x:1,!_&&f)return!1;var M=xt(x);return M&&b+w>x?(c.dispatch("DID_THROW_MAX_FILES",{source:u,error:un("warning",0,"Max files")}),!0):!1},wC=function(c,u,f){var _=c.childViews[0];return Zp(_,u,{left:f.scopeLeft-_.rect.element.left,top:f.scopeTop-(c.rect.outer.top+c.rect.element.marginTop+c.rect.element.scrollTop)})},rg=function(c){var u=c.query("GET_ALLOW_DROP"),f=c.query("GET_DISABLED"),_=u&&!f;if(_&&!c.ref.hopper){var b=lC(c.element,function(x){var w=c.query("GET_BEFORE_DROP_FILE")||function(){return!0},M=c.query("GET_DROP_VALIDATION");return M?x.every(function(A){return Hr("ALLOW_HOPPER_ITEM",A,{query:c.query}).every(function(k){return k===!0})&&w(A)}):!0},{filterItems:function(w){var M=c.query("GET_IGNORED_FILES");return w.filter(function(A){return sr(A)?!M.includes(A.name.toLowerCase()):!0})},catchesDropsOnPage:c.query("GET_DROP_ON_PAGE"),requiresDropOnElement:c.query("GET_DROP_ON_ELEMENT")});b.onload=function(x,w){var M=c.ref.list.childViews[0],A=M.childViews.filter(function(U){return U.rect.element.height}),k=c.query("GET_ACTIVE_ITEMS").map(function(U){return A.find(function(q){return q.id===U.id})}).filter(function(U){return U});Gi("ADD_ITEMS",x,{dispatch:c.dispatch}).then(function(U){if(nf(c,U))return!1;c.dispatch("ADD_ITEMS",{items:U,index:wC(c.ref.list,k,w),interactionMethod:P.DROP})}),c.dispatch("DID_DROP",{position:w}),c.dispatch("DID_END_DRAG",{position:w})},b.ondragstart=function(x){c.dispatch("DID_START_DRAG",{position:x})},b.ondrag=ig(function(x){c.dispatch("DID_DRAG",{position:x})}),b.ondragend=function(x){c.dispatch("DID_END_DRAG",{position:x})},c.ref.hopper=b,c.ref.drip=c.appendChildView(c.createChildView(Ab))}else!_&&c.ref.hopper&&(c.ref.hopper.destroy(),c.ref.hopper=null,c.removeChildView(c.ref.drip))},og=function(c,u){var f=c.query("GET_ALLOW_BROWSE"),_=c.query("GET_DISABLED"),b=f&&!_;b&&!c.ref.browser?c.ref.browser=c.appendChildView(c.createChildView(bb,Object.assign({},u,{onload:function(w){Gi("ADD_ITEMS",w,{dispatch:c.dispatch}).then(function(M){if(nf(c,M))return!1;c.dispatch("ADD_ITEMS",{items:M,index:-1,interactionMethod:P.BROWSE})})}})),0):!b&&c.ref.browser&&(c.removeChildView(c.ref.browser),c.ref.browser=null)},sg=function(c){var u=c.query("GET_ALLOW_PASTE"),f=c.query("GET_DISABLED"),_=u&&!f;_&&!c.ref.paster?(c.ref.paster=dC(),c.ref.paster.onload=function(b){Gi("ADD_ITEMS",b,{dispatch:c.dispatch}).then(function(x){if(nf(c,x))return!1;c.dispatch("ADD_ITEMS",{items:x,index:-1,interactionMethod:P.PASTE})})}):!_&&c.ref.paster&&(c.ref.paster.destroy(),c.ref.paster=null)},SC=Oe({DID_SET_ALLOW_BROWSE:function(c){var u=c.root,f=c.props;og(u,f)},DID_SET_ALLOW_DROP:function(c){var u=c.root;rg(u)},DID_SET_ALLOW_PASTE:function(c){var u=c.root;sg(u)},DID_SET_DISABLED:function(c){var u=c.root,f=c.props;rg(u),sg(u),og(u,f);var _=u.query("GET_DISABLED");_?u.element.dataset.disabled="disabled":u.element.removeAttribute("data-disabled")}}),TC=ie({name:"root",read:function(c){var u=c.root;u.ref.measure&&(u.ref.measureHeight=u.ref.measure.offsetHeight)},create:yC,write:bC,destroy:function(c){var u=c.root;u.ref.paster&&u.ref.paster.destroy(),u.ref.hopper&&u.ref.hopper.destroy(),u.element.removeEventListener("touchmove",yu),u.element.removeEventListener("gesturestart",yu)},mixins:{styles:["height"]}}),IC=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=null,f=va(),_=e(ir(f),[Tp,Vr(f)],[ou,Do(f)]);_.dispatch("SET_OPTIONS",{options:c});var b=function(){document.hidden||_.dispatch("KICK")};document.addEventListener("visibilitychange",b);var x=null,w=!1,M=!1,A=null,k=null,U=function(){w||(w=!0),clearTimeout(x),x=setTimeout(function(){w=!1,A=null,k=null,M&&(M=!1,_.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",U);var q=TC(_,{id:H()}),ne=!1,ue=!1,pe={_read:function(){w&&(k=window.innerWidth,A||(A=k),!M&&k!==A&&(_.dispatch("DID_START_RESIZE"),M=!0)),ue&&ne&&(ne=q.element.offsetParent===null),!ne&&(q._read(),ue=q.rect.element.hidden)},_write:function(fe){var K=_.processActionQueue().filter(function(Ke){return!/^SET_/.test(Ke.type)});ne&&!K.length||(Ye(K),ne=q._write(fe,K,M),xp(_.query("GET_ITEMS")),ne&&_.processDispatchQueue())}},X=function(fe){return function(K){var Ke={type:fe};if(!K)return Ke;if(K.hasOwnProperty("error")&&(Ke.error=K.error?Object.assign({},K.error):null),K.status&&(Ke.status=Object.assign({},K.status)),K.file&&(Ke.output=K.file),K.source)Ke.file=K.source;else if(K.item||K.id){var mt=K.item?K.item:_.query("GET_ITEM",K.id);Ke.file=mt?Vn(mt):null}return K.items&&(Ke.items=K.items.map(Vn)),/progress/.test(fe)&&(Ke.progress=K.progress),K.hasOwnProperty("origin")&&K.hasOwnProperty("target")&&(Ke.origin=K.origin,Ke.target=K.target),Ke}},Ee={DID_DESTROY:X("destroy"),DID_INIT:X("init"),DID_THROW_MAX_FILES:X("warning"),DID_INIT_ITEM:X("initfile"),DID_START_ITEM_LOAD:X("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:X("addfileprogress"),DID_LOAD_ITEM:X("addfile"),DID_THROW_ITEM_INVALID:[X("error"),X("addfile")],DID_THROW_ITEM_LOAD_ERROR:[X("error"),X("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[X("error"),X("removefile")],DID_PREPARE_OUTPUT:X("preparefile"),DID_START_ITEM_PROCESSING:X("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:X("processfileprogress"),DID_ABORT_ITEM_PROCESSING:X("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:X("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:X("processfiles"),DID_REVERT_ITEM_PROCESSING:X("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[X("error"),X("processfile")],DID_REMOVE_ITEM:X("removefile"),DID_UPDATE_ITEMS:X("updatefiles"),DID_ACTIVATE_ITEM:X("activatefile"),DID_REORDER_ITEMS:X("reorderfiles")},qe=function(fe){var K=Object.assign({pond:Kt},fe);delete K.type,q.element.dispatchEvent(new CustomEvent("FilePond:"+fe.type,{detail:K,bubbles:!0,cancelable:!0,composed:!0}));var Ke=[];fe.hasOwnProperty("error")&&Ke.push(fe.error),fe.hasOwnProperty("file")&&Ke.push(fe.file);var mt=["type","error","file"];Object.keys(fe).filter(function(Lt){return!mt.includes(Lt)}).forEach(function(Lt){return Ke.push(fe[Lt])}),Kt.fire.apply(Kt,[fe.type].concat(Ke));var Ct=_.query("GET_ON"+fe.type.toUpperCase());Ct&&Ct.apply(void 0,Ke)},Ye=function(fe){fe.length&&fe.filter(function(K){return Ee[K.type]}).forEach(function(K){var Ke=Ee[K.type];(Array.isArray(Ke)?Ke:[Ke]).forEach(function(mt){K.type==="DID_INIT_ITEM"?qe(mt(K.data)):setTimeout(function(){qe(mt(K.data))},0)})})},Me=function(fe){return _.dispatch("SET_OPTIONS",{options:fe})},_t=function(fe){return _.query("GET_ACTIVE_ITEM",fe)},Re=function(fe){return new Promise(function(K,Ke){_.dispatch("REQUEST_ITEM_PREPARE",{query:fe,success:function(Ct){K(Ct)},failure:function(Ct){Ke(Ct)}})})},Qt=function(fe){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ke,mt){Xe([{source:fe,options:K}],{index:K.index}).then(function(Ct){return Ke(Ct&&Ct[0])}).catch(mt)})},$t=function(fe){return fe.file&&fe.id},ze=function(fe,K){return typeof fe=="object"&&!$t(fe)&&!K&&(K=fe,fe=void 0),_.dispatch("REMOVE_ITEM",Object.assign({},K,{query:fe})),_.query("GET_ACTIVE_ITEM",fe)===null},Xe=function(){for(var fe=arguments.length,K=new Array(fe),Ke=0;Ke<fe;Ke++)K[Ke]=arguments[Ke];return new Promise(function(mt,Ct){var Lt=[],Ut={};if(Dt(K[0]))Lt.push.apply(Lt,K[0]),Object.assign(Ut,K[1]||{});else{var bn=K[K.length-1];typeof bn=="object"&&!(bn instanceof Blob)&&Object.assign(Ut,K.pop()),Lt.push.apply(Lt,K)}_.dispatch("ADD_ITEMS",{items:Lt,index:Ut.index,interactionMethod:P.API,success:mt,failure:Ct})})},tt=function(){return _.query("GET_ACTIVE_ITEMS")},Ne=function(fe){return new Promise(function(K,Ke){_.dispatch("REQUEST_ITEM_PROCESSING",{query:fe,success:function(Ct){K(Ct)},failure:function(Ct){Ke(Ct)}})})},We=function(){for(var fe=arguments.length,K=new Array(fe),Ke=0;Ke<fe;Ke++)K[Ke]=arguments[Ke];var mt=Array.isArray(K[0])?K[0]:K,Ct=mt.length?mt:tt();return Promise.all(Ct.map(Re))},it=function(){for(var fe=arguments.length,K=new Array(fe),Ke=0;Ke<fe;Ke++)K[Ke]=arguments[Ke];var mt=Array.isArray(K[0])?K[0]:K;if(!mt.length){var Ct=tt().filter(function(Lt){return!(Lt.status===nt.IDLE&&Lt.origin===Mn.LOCAL)&&Lt.status!==nt.PROCESSING&&Lt.status!==nt.PROCESSING_COMPLETE&&Lt.status!==nt.PROCESSING_REVERT_ERROR});return Promise.all(Ct.map(Ne))}return Promise.all(mt.map(Ne))},rn=function(){for(var fe=arguments.length,K=new Array(fe),Ke=0;Ke<fe;Ke++)K[Ke]=arguments[Ke];var mt=Array.isArray(K[0])?K[0]:K,Ct;typeof mt[mt.length-1]=="object"?Ct=mt.pop():Array.isArray(K[0])&&(Ct=K[1]);var Lt=tt();if(!mt.length)return Promise.all(Lt.map(function(bn){return ze(bn,Ct)}));var Ut=mt.map(function(bn){return ye(bn)?Lt[bn]?Lt[bn].id:null:bn}).filter(function(bn){return bn});return Ut.map(function(bn){return ze(bn,Ct)})},Kt=Object.assign({},Cs(),{},pe,{},Br(_,f),{setOptions:Me,addFile:Qt,addFiles:Xe,getFile:_t,processFile:Ne,prepareFile:Re,removeFile:ze,moveFile:function(fe,K){return _.dispatch("MOVE_ITEM",{query:fe,index:K})},getFiles:tt,processFiles:it,removeFiles:rn,prepareFiles:We,sort:function(fe){return _.dispatch("SORT",{compare:fe})},browse:function(){var fe=q.element.querySelector("input[type=file]");fe&&fe.click()},destroy:function(){Kt.fire("destroy",q.element),_.dispatch("ABORT_ALL"),q._destroy(),window.removeEventListener("resize",U),document.removeEventListener("visibilitychange",b),_.dispatch("DID_DESTROY")},insertBefore:function(fe){return st(q.element,fe)},insertAfter:function(fe){return ut(q.element,fe)},appendTo:function(fe){return fe.appendChild(q.element)},replaceElement:function(fe){st(q.element,fe),fe.parentNode.removeChild(fe),u=fe},restoreElement:function(){u&&(ut(u,q.element),q.element.parentNode.removeChild(q.element),u=null)},isAttachedTo:function(fe){return q.element===fe||u===fe},element:{get:function(){return q.element}},status:{get:function(){return _.query("GET_STATUS")}}});return _.dispatch("DID_INIT"),s(Kt)},ag=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u={};r(va(),function(_,b){u[_]=b[0]});var f=IC(Object.assign({},u,{},c));return f},OC=function(c){return c.charAt(0).toLowerCase()+c.slice(1)},MC=function(c){return ng(c.replace(/^data-/,""))},AC=function v(c,u){r(u,function(f,_){r(c,function(b,x){var w=new RegExp(f),M=w.test(b);if(M&&(delete c[b],_!==!1)){if(Ot(_)){c[_]=x;return}var A=_.group;At(_)&&!c[A]&&(c[A]={}),c[A][OC(b.replace(w,""))]=x}}),_.mapping&&v(c[_.group],_.mapping)})},kC=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=[];r(c.attributes,function(b){f.push(c.attributes[b])});var _=f.filter(function(b){return b.name}).reduce(function(b,x){var w=a(c,x.name);return b[MC(x.name)]=w===x.name?!0:w,b},{});return AC(_,u),_},PC=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Hr("SET_ATTRIBUTE_TO_OPTION_MAP",f);var _=Object.assign({},u),b=kC(c.nodeName==="FIELDSET"?c.querySelector("input[type=file]"):c,f);Object.keys(b).forEach(function(w){At(b[w])?(At(_[w])||(_[w]={}),Object.assign(_[w],b[w])):_[w]=b[w]}),_.files=(u.files||[]).concat(Array.from(c.querySelectorAll("input:not([type=file])")).map(function(w){return{source:w.value,options:{type:w.dataset.type}}}));var x=ag(_);return c.files&&Array.from(c.files).forEach(function(w){x.addFile(w)}),x.replaceElement(c),x},DC=function(){return t(arguments.length<=0?void 0:arguments[0])?PC.apply(void 0,arguments):ag.apply(void 0,arguments)},LC=["fire","_read","_write"],lg=function(c){var u={};return qc(c,u,LC),u},RC=function(c,u){return c.replace(/(?:{([a-zA-Z]+)})/g,function(f,_){return u[_]})},NC=function(c){var u=new Blob(["(",c.toString(),")()"],{type:"application/javascript"}),f=URL.createObjectURL(u),_=new Worker(f);return{transfer:function(x,w){},post:function(x,w,M){var A=H();_.onmessage=function(k){k.data.id===A&&w(k.data.message)},_.postMessage({id:A,message:x},M)},terminate:function(){_.terminate(),URL.revokeObjectURL(f)}}},FC=function(c){return new Promise(function(u,f){var _=new Image;_.onload=function(){u(_)},_.onerror=function(b){f(b)},_.src=c})},cg=function(c,u){var f=c.slice(0,c.size,c.type);return f.lastModifiedDate=c.lastModifiedDate,f.name=u,f},BC=function(c){return cg(c,c.name)},ug=[],VC=function(c){if(!ug.includes(c)){ug.push(c);var u=c({addFilter:jc,utils:{Type:re,forin:r,isString:Ot,isFile:sr,toNaturalFileSize:Vl,replaceInString:RC,getExtensionFromFilename:ba,getFilenameWithoutExtension:tu,guesstimateMimeType:Zm,getFileFromBlob:fo,getFilenameFromURL:ci,createRoute:Oe,createWorker:NC,createView:ie,createItemAPI:Vn,loadImage:FC,copyFile:BC,renameFile:cg,createBlob:Qc,applyFilterChain:Gi,text:ln,getNumericAspectRatioFromString:Ol},views:{fileActionButton:du}});wp(u.options)}},zC=function(){return Object.prototype.toString.call(window.operamini)==="[object OperaMini]"},HC=function(){return"Promise"in window},GC=function(){return"slice"in Blob.prototype},UC=function(){return"URL"in window&&"createObjectURL"in window.URL},qC=function(){return"visibilityState"in document},WC=function(){return"performance"in window},jC=function(){return"supports"in(window.CSS||{})},ZC=function(){return/MSIE|Trident/.test(window.navigator.userAgent)},rf=function(){var v=F()&&!zC()&&qC()&&HC()&&GC()&&UC()&&WC()&&(jC()||ZC());return function(){return v}}(),Ko={apps:[]},KC="filepond",As=function(){};if(n.Status={},n.FileStatus={},n.FileOrigin={},n.OptionTypes={},n.create=As,n.destroy=As,n.parse=As,n.find=As,n.registerPlugin=As,n.getOptions=As,n.setOptions=As,rf()){Ge(function(){Ko.apps.forEach(function(v){return v._read()})},function(v){Ko.apps.forEach(function(c){return c._write(v)})});var dg=function v(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:rf,create:n.create,destroy:n.destroy,parse:n.parse,find:n.find,registerPlugin:n.registerPlugin,setOptions:n.setOptions}})),document.removeEventListener("DOMContentLoaded",v)};document.readyState!=="loading"?setTimeout(function(){return dg()},0):document.addEventListener("DOMContentLoaded",dg);var pg=function(){return r(va(),function(c,u){n.OptionTypes[c]=u[1]})};n.Status=Object.assign({},wi),n.FileOrigin=Object.assign({},Mn),n.FileStatus=Object.assign({},nt),n.OptionTypes={},pg(),n.create=function(){var c=DC.apply(void 0,arguments);return c.on("destroy",n.destroy),Ko.apps.push(c),lg(c)},n.destroy=function(c){var u=Ko.apps.findIndex(function(_){return _.isAttachedTo(c)});if(u>=0){var f=Ko.apps.splice(u,1)[0];return f.restoreElement(),!0}return!1},n.parse=function(c){var u=Array.from(c.querySelectorAll("."+KC)),f=u.filter(function(_){return!Ko.apps.find(function(b){return b.isAttachedTo(_)})});return f.map(function(_){return n.create(_)})},n.find=function(c){var u=Ko.apps.find(function(f){return f.isAttachedTo(c)});return u?lg(u):null},n.registerPlugin=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];u.forEach(VC),pg()},n.getOptions=function(){var c={};return r(va(),function(u,f){c[u]=f[0]}),c},n.setOptions=function(c){return At(c)&&(Ko.apps.forEach(function(u){u.setOptions(c)}),Il(c)),n.getOptions()}}n.supported=rf,Object.defineProperty(n,"__esModule",{value:!0})})});var N1=Ul((Em,xm)=>{"use strict";(function(n,t){typeof Em=="object"&&typeof xm<"u"?xm.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self,n.FilePondPluginFileValidateType=t())})(Em,function(){"use strict";var n=function(i){var r=i.addFilter,s=i.utils,a=s.Type,d=s.isString,h=s.replaceInString,m=s.guesstimateMimeType,y=s.getExtensionFromFilename,E=s.getFilenameFromURL,O=function(oe,ve){var ee=(/^[^/]+/.exec(oe)||[]).pop(),ye=ve.slice(0,-2);return ee===ye},T=function(oe,ve){return oe.some(function(ee){return/\*$/.test(ee)?O(ve,ee):ee===ve})},S=function(oe){var ve="";if(d(oe)){var ee=E(oe),ye=y(ee);ye&&(ve=m(ye))}else ve=oe.type;return ve},F=function(oe,ve,ee){if(ve.length===0)return!0;var ye=S(oe);return ee?new Promise(function(Ae,Ze){ee(oe,ye).then(function(je){T(ve,je)?Ae():Ze()}).catch(Ze)}):T(ve,ye)},G=function(oe){return function(ve){return oe[ve]===null?!1:oe[ve]||ve}};return r("SET_ATTRIBUTE_TO_OPTION_MAP",function(j){return Object.assign(j,{accept:"acceptedFileTypes"})}),r("ALLOW_HOPPER_ITEM",function(j,oe){var ve=oe.query;return ve("GET_ALLOW_FILE_TYPE_VALIDATION")?F(j,ve("GET_ACCEPTED_FILE_TYPES")):!0}),r("LOAD_FILE",function(j,oe){var ve=oe.query;return new Promise(function(ee,ye){if(!ve("GET_ALLOW_FILE_TYPE_VALIDATION")){ee(j);return}var Ae=ve("GET_ACCEPTED_FILE_TYPES"),Ze=ve("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),je=F(j,Ae,Ze),se=function(){var Le=Ae.map(G(ve("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(function(et){return et!==!1}),Ie=Le.filter(function(et,Qe){return Le.indexOf(et)===Qe});ye({status:{main:ve("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:h(ve("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:Ie.join(", "),allButLastType:Ie.slice(0,-1).join(", "),lastType:Ie[Ie.length-1]})}})};if(typeof je=="boolean")return je?ee(j):se();je.then(function(){ee(j)}).catch(se)})}),{options:{allowFileTypeValidation:[!0,a.BOOLEAN],acceptedFileTypes:[[],a.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",a.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",a.STRING],fileValidateTypeLabelExpectedTypesMap:[{},a.OBJECT],fileValidateTypeDetectType:[null,a.FUNCTION]}}},t=typeof window<"u"&&typeof window.document<"u";return t&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:n})),n})});var F1=Ul((wm,Sm)=>{"use strict";(function(n,t){typeof wm=="object"&&typeof Sm<"u"?Sm.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self,n.FilePondPluginImageValidateSize=t())})(wm,function(){"use strict";var n=function(s){return/^image/.test(s.type)},t=function(s){return new Promise(function(a,d){var h=document.createElement("img");h.src=URL.createObjectURL(s),h.onerror=function(y){clearInterval(m),d(y)};var m=setInterval(function(){h.naturalWidth&&h.naturalHeight&&(clearInterval(m),URL.revokeObjectURL(h.src),a({width:h.naturalWidth,height:h.naturalHeight}))},1)})},e=function(s){var a=s.addFilter,d=s.utils,h=d.Type,m=d.replaceInString,y=d.isFile,E=function(T,S,F){return new Promise(function(G,j){var oe=function(ee){var ye=ee.width,Ae=ee.height,Ze=S.minWidth,je=S.minHeight,se=S.maxWidth,ge=S.maxHeight,Le=S.minResolution,Ie=S.maxResolution,et=ye*Ae;ye<Ze||Ae<je?j("TOO_SMALL"):ye>se||Ae>ge?j("TOO_BIG"):Le!==null&&et<Le?j("TOO_LOW_RES"):Ie!==null&&et>Ie&&j("TOO_HIGH_RES"),G()};t(T).then(oe).catch(function(){if(!F){j();return}F(T,S).then(oe).catch(function(){return j()})})})};return a("LOAD_FILE",function(O,T){var S=T.query;return new Promise(function(F,G){if(!y(O)||!n(O)||!S("GET_ALLOW_IMAGE_VALIDATE_SIZE")){F(O);return}var j={minWidth:S("GET_IMAGE_VALIDATE_SIZE_MIN_WIDTH"),minHeight:S("GET_IMAGE_VALIDATE_SIZE_MIN_HEIGHT"),maxWidth:S("GET_IMAGE_VALIDATE_SIZE_MAX_WIDTH"),maxHeight:S("GET_IMAGE_VALIDATE_SIZE_MAX_HEIGHT"),minResolution:S("GET_IMAGE_VALIDATE_SIZE_MIN_RESOLUTION"),maxResolution:S("GET_IMAGE_VALIDATE_SIZE_MAX_RESOLUTION")},oe=S("GET_IMAGE_VALIDATE_SIZE_MEASURE");E(O,j,oe).then(function(){F(O)}).catch(function(ve){var ee=ve?{TOO_SMALL:{label:S("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_SMALL"),details:S("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_SIZE")},TOO_BIG:{label:S("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_BIG"),details:S("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_SIZE")},TOO_LOW_RES:{label:S("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_LOW"),details:S("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_RESOLUTION")},TOO_HIGH_RES:{label:S("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_HIGH"),details:S("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_RESOLUTION")}}[ve]:{label:S("GET_IMAGE_VALIDATE_SIZE_LABEL_FORMAT_ERROR"),details:O.type};G({status:{main:ee.label,sub:ve?m(ee.details,j):ee.details}})})})}),{options:{allowImageValidateSize:[!0,h.BOOLEAN],imageValidateSizeLabelFormatError:["Image type not supported",h.STRING],imageValidateSizeMeasure:[null,h.FUNCTION],imageValidateSizeMinResolution:[null,h.INT],imageValidateSizeMaxResolution:[null,h.INT],imageValidateSizeLabelImageResolutionTooLow:["Resolution is too low",h.STRING],imageValidateSizeLabelImageResolutionTooHigh:["Resolution is too high",h.STRING],imageValidateSizeLabelExpectedMinResolution:["Minimum resolution is {minResolution}",h.STRING],imageValidateSizeLabelExpectedMaxResolution:["Maximum resolution is {maxResolution}",h.STRING],imageValidateSizeMinWidth:[1,h.INT],imageValidateSizeMinHeight:[1,h.INT],imageValidateSizeMaxWidth:[65535,h.INT],imageValidateSizeMaxHeight:[65535,h.INT],imageValidateSizeLabelImageSizeTooSmall:["Image is too small",h.STRING],imageValidateSizeLabelImageSizeTooBig:["Image is too big",h.STRING],imageValidateSizeLabelExpectedMinSize:["Minimum size is {minWidth} \xD7 {minHeight}",h.STRING],imageValidateSizeLabelExpectedMaxSize:["Maximum size is {maxWidth} \xD7 {maxHeight}",h.STRING]}}},i=typeof window<"u"&&typeof window.document<"u";return i&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e})});var B1=Ul((Tm,Im)=>{"use strict";(function(n,t){typeof Tm=="object"&&typeof Im<"u"?Im.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self,n.FilePondPluginFileValidateSize=t())})(Tm,function(){"use strict";var n=function(i){var r=i.addFilter,s=i.utils,a=s.Type,d=s.replaceInString,h=s.toNaturalFileSize;return r("ALLOW_HOPPER_ITEM",function(m,y){var E=y.query;if(!E("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;var O=E("GET_MAX_FILE_SIZE");if(O!==null&&m.size>O)return!1;var T=E("GET_MIN_FILE_SIZE");return!(T!==null&&m.size<T)}),r("LOAD_FILE",function(m,y){var E=y.query;return new Promise(function(O,T){if(!E("GET_ALLOW_FILE_SIZE_VALIDATION"))return O(m);var S=E("GET_FILE_VALIDATE_SIZE_FILTER");if(S&&!S(m))return O(m);var F=E("GET_MAX_FILE_SIZE");if(F!==null&&m.size>F){T({status:{main:E("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:d(E("GET_LABEL_MAX_FILE_SIZE"),{filesize:h(F,".",E("GET_FILE_SIZE_BASE"),E("GET_FILE_SIZE_LABELS",E))})}});return}var G=E("GET_MIN_FILE_SIZE");if(G!==null&&m.size<G){T({status:{main:E("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:d(E("GET_LABEL_MIN_FILE_SIZE"),{filesize:h(G,".",E("GET_FILE_SIZE_BASE"),E("GET_FILE_SIZE_LABELS",E))})}});return}var j=E("GET_MAX_TOTAL_FILE_SIZE");if(j!==null){var oe=E("GET_ACTIVE_ITEMS").reduce(function(ve,ee){return ve+ee.fileSize},0);if(oe>j){T({status:{main:E("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:d(E("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:h(j,".",E("GET_FILE_SIZE_BASE"),E("GET_FILE_SIZE_LABELS",E))})}});return}}O(m)})}),{options:{allowFileSizeValidation:[!0,a.BOOLEAN],maxFileSize:[null,a.INT],minFileSize:[null,a.INT],maxTotalFileSize:[null,a.INT],fileValidateSizeFilter:[null,a.FUNCTION],labelMinFileSizeExceeded:["File is too small",a.STRING],labelMinFileSize:["Minimum file size is {filesize}",a.STRING],labelMaxFileSizeExceeded:["File is too large",a.STRING],labelMaxFileSize:["Maximum file size is {filesize}",a.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",a.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",a.STRING]}}},t=typeof window<"u"&&typeof window.document<"u";return t&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:n})),n})});var z1=Ul((cp,V1)=>{"use strict";(function(n,t){typeof cp=="object"&&typeof V1<"u"?t(cp):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.leaflet={}))})(cp,function(n){"use strict";var t="1.9.4";function e(o){var l,p,g,C;for(p=1,g=arguments.length;p<g;p++){C=arguments[p];for(l in C)o[l]=C[l]}return o}var i=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function r(o,l){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var g=p.call(arguments,2);return function(){return o.apply(l,g.length?g.concat(p.call(arguments)):arguments)}}var s=0;function a(o){return"_leaflet_id"in o||(o._leaflet_id=++s),o._leaflet_id}function d(o,l,p){var g,C,I,R;return R=function(){g=!1,C&&(I.apply(p,C),C=!1)},I=function(){g?C=arguments:(o.apply(p,arguments),setTimeout(R,l),g=!0)},I}function h(o,l,p){var g=l[1],C=l[0],I=g-C;return o===g&&p?o:((o-C)%I+I)%I+C}function m(){return!1}function y(o,l){if(l===!1)return o;var p=Math.pow(10,l===void 0?6:l);return Math.round(o*p)/p}function E(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function O(o){return E(o).split(/\s+/)}function T(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?i(o.options):{});for(var p in l)o.options[p]=l[p];return o.options}function S(o,l,p){var g=[];for(var C in o)g.push(encodeURIComponent(p?C.toUpperCase():C)+"="+encodeURIComponent(o[C]));return(!l||l.indexOf("?")===-1?"?":"&")+g.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function G(o,l){return o.replace(F,function(p,g){var C=l[g];if(C===void 0)throw new Error("No value provided for variable "+p);return typeof C=="function"&&(C=C(l)),C})}var j=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function oe(o,l){for(var p=0;p<o.length;p++)if(o[p]===l)return p;return-1}var ve="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var ye=0;function Ae(o){var l=+new Date,p=Math.max(0,16-(l-ye));return ye=l+p,window.setTimeout(o,p)}var Ze=window.requestAnimationFrame||ee("RequestAnimationFrame")||Ae,je=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function se(o,l,p){if(p&&Ze===Ae)o.call(l);else return Ze.call(window,r(o,l))}function ge(o){o&&je.call(window,o)}var Le={__proto__:null,extend:e,create:i,bind:r,get lastId(){return s},stamp:a,throttle:d,wrapNum:h,falseFn:m,formatNum:y,trim:E,splitWords:O,setOptions:T,getParamString:S,template:G,isArray:j,indexOf:oe,emptyImageUrl:ve,requestFn:Ze,cancelFn:je,requestAnimFrame:se,cancelAnimFrame:ge};function Ie(){}Ie.extend=function(o){var l=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=l.__super__=this.prototype,g=i(p);g.constructor=l,l.prototype=g;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(l[C]=this[C]);return o.statics&&e(l,o.statics),o.includes&&(et(o.includes),e.apply(null,[g].concat(o.includes))),e(g,o),delete g.statics,delete g.includes,g.options&&(g.options=p.options?i(p.options):{},e(g.options,o.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,R=g._initHooks.length;I<R;I++)g._initHooks[I].call(this)}},l},Ie.include=function(o){var l=this.prototype.options;return e(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},Ie.mergeOptions=function(o){return e(this.prototype.options,o),this},Ie.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function et(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=j(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Qe={on:function(o,l,p){if(typeof o=="object")for(var g in o)this._on(g,o[g],l);else{o=O(o);for(var C=0,I=o.length;C<I;C++)this._on(o[C],l,p)}return this},off:function(o,l,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var g in o)this._off(g,o[g],l);else{o=O(o);for(var C=arguments.length===1,I=0,R=o.length;I<R;I++)C?this._off(o[I]):this._off(o[I],l,p)}return this},_on:function(o,l,p,g){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,p)===!1){p===this&&(p=void 0);var C={fn:l,ctx:p};g&&(C.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(C)}},_off:function(o,l,p){var g,C,I;if(this._events&&(g=this._events[o],!!g)){if(arguments.length===1){if(this._firingCount)for(C=0,I=g.length;C<I;C++)g[C].fn=m;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var R=this._listens(o,l,p);if(R!==!1){var Z=g[R];this._firingCount&&(Z.fn=m,this._events[o]=g=g.slice()),g.splice(R,1)}}},fire:function(o,l,p){if(!this.listens(o,p))return this;var g=e({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var C=this._events[o];if(C){this._firingCount=this._firingCount+1||1;for(var I=0,R=C.length;I<R;I++){var Z=C[I],Y=Z.fn;Z.once&&this.off(o,Y,Z.ctx),Y.call(Z.ctx||this,g)}this._firingCount--}}return p&&this._propagateEvent(g),this},listens:function(o,l,p,g){typeof o!="string"&&console.warn('"string" type argument expected');var C=l;typeof l!="function"&&(g=!!l,C=void 0,p=void 0);var I=this._events&&this._events[o];if(I&&I.length&&this._listens(o,C,p)!==!1)return!0;if(g){for(var R in this._eventParents)if(this._eventParents[R].listens(o,l,p,g))return!0}return!1},_listens:function(o,l,p){if(!this._events)return!1;var g=this._events[o]||[];if(!l)return!!g.length;p===this&&(p=void 0);for(var C=0,I=g.length;C<I;C++)if(g[C].fn===l&&g[C].ctx===p)return C;return!1},once:function(o,l,p){if(typeof o=="object")for(var g in o)this._on(g,o[g],l,!0);else{o=O(o);for(var C=0,I=o.length;C<I;C++)this._on(o[C],l,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[a(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[a(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,e({layer:o.target,propagatedFrom:o.target},o),!0)}};Qe.addEventListener=Qe.on,Qe.removeEventListener=Qe.clearAllEventListeners=Qe.off,Qe.addOneTimeEventListener=Qe.once,Qe.fireEvent=Qe.fire,Qe.hasEventListeners=Qe.listens;var pt=Ie.extend(Qe);function Pe(o,l,p){this.x=p?Math.round(o):o,this.y=p?Math.round(l):l}var Et=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};Pe.prototype={clone:function(){return new Pe(this.x,this.y)},add:function(o){return this.clone()._add(ke(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ke(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new Pe(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new Pe(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Et(this.x),this.y=Et(this.y),this},distanceTo:function(o){o=ke(o);var l=o.x-this.x,p=o.y-this.y;return Math.sqrt(l*l+p*p)},equals:function(o){return o=ke(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ke(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function ke(o,l,p){return o instanceof Pe?o:j(o)?new Pe(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new Pe(o.x,o.y):new Pe(o,l,p)}function De(o,l){if(o)for(var p=l?[o,l]:o,g=0,C=p.length;g<C;g++)this.extend(p[g])}De.prototype={extend:function(o){var l,p;if(!o)return this;if(o instanceof Pe||typeof o[0]=="number"||"x"in o)l=p=ke(o);else if(o=vt(o),l=o.min,p=o.max,!l||!p)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=p.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return ke((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ke(this.min.x,this.max.y)},getTopRight:function(){return ke(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,p;return typeof o[0]=="number"||o instanceof Pe?o=ke(o):o=vt(o),o instanceof De?(l=o.min,p=o.max):l=p=o,l.x>=this.min.x&&p.x<=this.max.x&&l.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=vt(o);var l=this.min,p=this.max,g=o.min,C=o.max,I=C.x>=l.x&&g.x<=p.x,R=C.y>=l.y&&g.y<=p.y;return I&&R},overlaps:function(o){o=vt(o);var l=this.min,p=this.max,g=o.min,C=o.max,I=C.x>l.x&&g.x<p.x,R=C.y>l.y&&g.y<p.y;return I&&R},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,p=this.max,g=Math.abs(l.x-p.x)*o,C=Math.abs(l.y-p.y)*o;return vt(ke(l.x-g,l.y-C),ke(p.x+g,p.y+C))},equals:function(o){return o?(o=vt(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function vt(o,l){return!o||o instanceof De?o:new De(o,l)}function He(o,l){if(o)for(var p=l?[o,l]:o,g=0,C=p.length;g<C;g++)this.extend(p[g])}He.prototype={extend:function(o){var l=this._southWest,p=this._northEast,g,C;if(o instanceof J)g=o,C=o;else if(o instanceof He){if(g=o._southWest,C=o._northEast,!g||!C)return this}else return o?this.extend(ae(o)||de(o)):this;return!l&&!p?(this._southWest=new J(g.lat,g.lng),this._northEast=new J(C.lat,C.lng)):(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),p.lat=Math.max(C.lat,p.lat),p.lng=Math.max(C.lng,p.lng)),this},pad:function(o){var l=this._southWest,p=this._northEast,g=Math.abs(l.lat-p.lat)*o,C=Math.abs(l.lng-p.lng)*o;return new He(new J(l.lat-g,l.lng-C),new J(p.lat+g,p.lng+C))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof J||"lat"in o?o=ae(o):o=de(o);var l=this._southWest,p=this._northEast,g,C;return o instanceof He?(g=o.getSouthWest(),C=o.getNorthEast()):g=C=o,g.lat>=l.lat&&C.lat<=p.lat&&g.lng>=l.lng&&C.lng<=p.lng},intersects:function(o){o=de(o);var l=this._southWest,p=this._northEast,g=o.getSouthWest(),C=o.getNorthEast(),I=C.lat>=l.lat&&g.lat<=p.lat,R=C.lng>=l.lng&&g.lng<=p.lng;return I&&R},overlaps:function(o){o=de(o);var l=this._southWest,p=this._northEast,g=o.getSouthWest(),C=o.getNorthEast(),I=C.lat>l.lat&&g.lat<p.lat,R=C.lng>l.lng&&g.lng<p.lng;return I&&R},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=de(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function de(o,l){return o instanceof He?o:new He(o,l)}function J(o,l,p){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,p!==void 0&&(this.alt=+p)}J.prototype={equals:function(o,l){if(!o)return!1;o=ae(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+y(this.lat,o)+", "+y(this.lng,o)+")"},distanceTo:function(o){return ie.distance(this,ae(o))},wrap:function(){return ie.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,p=l/Math.cos(Math.PI/180*this.lat);return de([this.lat-l,this.lng-p],[this.lat+l,this.lng+p])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function ae(o,l,p){return o instanceof J?o:j(o)&&typeof o[0]!="object"?o.length===3?new J(o[0],o[1],o[2]):o.length===2?new J(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new J(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new J(o,l,p)}var me={latLngToPoint:function(o,l){var p=this.projection.project(o),g=this.scale(l);return this.transformation._transform(p,g)},pointToLatLng:function(o,l){var p=this.scale(l),g=this.transformation.untransform(o,p);return this.projection.unproject(g)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,p=this.scale(o),g=this.transformation.transform(l.min,p),C=this.transformation.transform(l.max,p);return new De(g,C)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?h(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?h(o.lat,this.wrapLat,!0):o.lat,g=o.alt;return new J(p,l,g)},wrapLatLngBounds:function(o){var l=o.getCenter(),p=this.wrapLatLng(l),g=l.lat-p.lat,C=l.lng-p.lng;if(g===0&&C===0)return o;var I=o.getSouthWest(),R=o.getNorthEast(),Z=new J(I.lat-g,I.lng-C),Y=new J(R.lat-g,R.lng-C);return new He(Z,Y)}},ie=e({},me,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var p=Math.PI/180,g=o.lat*p,C=l.lat*p,I=Math.sin((l.lat-o.lat)*p/2),R=Math.sin((l.lng-o.lng)*p/2),Z=I*I+Math.cos(g)*Math.cos(C)*R*R,Y=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*Y}}),Ge=6378137,Oe={R:Ge,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,p=this.MAX_LATITUDE,g=Math.max(Math.min(p,o.lat),-p),C=Math.sin(g*l);return new Pe(this.R*o.lng*l,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(o){var l=180/Math.PI;return new J((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=Ge*Math.PI;return new De([-o,-o],[o,o])}()};function st(o,l,p,g){if(j(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=p,this._d=g}st.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new Pe((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function ut(o,l,p,g){return new st(o,l,p,g)}var Dt=e({},ie,{code:"EPSG:3857",projection:Oe,transformation:function(){var o=.5/(Math.PI*Oe.R);return ut(o,.5,-o,.5)}()}),gt=e({},Dt,{code:"EPSG:900913"});function Zt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function at(o,l){var p="",g,C,I,R,Z,Y;for(g=0,I=o.length;g<I;g++){for(Z=o[g],C=0,R=Z.length;C<R;C++)Y=Z[C],p+=(C?"L":"M")+Y.x+" "+Y.y;p+=l?Ce.svg?"z":"x":""}return p||"M0 0"}var Yt=document.documentElement.style,pn="ActiveXObject"in window,fn=pn&&!document.addEventListener,Ot="msLaunchUri"in navigator&&!("documentMode"in document),zt=we("webkit"),Bt=we("android"),Xt=we("android 2")||we("android 3"),xt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ft=Bt&&we("Google")&&xt<537&&!("AudioNode"in window),qt=!!window.opera,bi=!Ot&&we("chrome"),Fi=we("gecko")&&!zt&&!qt&&!pn,pr=!bi&&we("safari"),fr=we("phantom"),Bi="OTransition"in Yt,Jn=navigator.platform.indexOf("Win")===0,At=pn&&"transition"in Yt,Ci="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Xt,li="MozPerspective"in Yt,so=!window.L_DISABLE_3D&&(At||Ci||li)&&!Bi&&!fr,Vi=typeof orientation<"u"||we("mobile"),Fr=Vi&&zt,Fn=Vi&&Ci,nr=!window.PointerEvent&&window.MSPointerEvent,zi=!!(window.PointerEvent||nr),ir="ontouchstart"in window||!!window.TouchEvent,Ei=!window.L_NO_TOUCH&&(ir||zi),Br=Vi&&qt,Do=Vi&&Fi,Vr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,P=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",m,l),window.removeEventListener("testPassiveEventSupport",m,l)}catch{}return o}(),H=function(){return!!document.createElement("canvas").getContext}(),W=!!(document.createElementNS&&Zt("svg").createSVGRect),ce=!!W&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Te=!W&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),xe=navigator.platform.indexOf("Mac")===0,Je=navigator.platform.indexOf("Linux")===0;function we(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ce={ie:pn,ielt9:fn,edge:Ot,webkit:zt,android:Bt,android23:Xt,androidStock:ft,opera:qt,chrome:bi,gecko:Fi,safari:pr,phantom:fr,opera12:Bi,win:Jn,ie3d:At,webkit3d:Ci,gecko3d:li,any3d:so,mobile:Vi,mobileWebkit:Fr,mobileWebkit3d:Fn,msPointer:nr,pointer:zi,touch:Ei,touchNative:ir,mobileOpera:Br,mobileGecko:Do,retina:Vr,passiveEvents:P,canvas:H,svg:W,vml:Te,inlineSvg:ce,mac:xe,linux:Je},Ht=Ce.msPointer?"MSPointerDown":"pointerdown",Jt=Ce.msPointer?"MSPointerMove":"pointermove",nn=Ce.msPointer?"MSPointerUp":"pointerup",Vt=Ce.msPointer?"MSPointerCancel":"pointercancel",hn={touchstart:Ht,touchmove:Jt,touchend:nn,touchcancel:Vt},wn={touchstart:Om,touchmove:co,touchend:co,touchcancel:co},cn={},In=!1;function aa(o,l,p){return l==="touchstart"&&ml(),wn[l]?(p=wn[l].bind(this,p),o.addEventListener(hn[l],p,!1),p):(console.warn("wrong event specified:",l),m)}function ao(o,l,p){if(!hn[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(hn[l],p,!1)}function Lo(o){cn[o.pointerId]=o}function hl(o){cn[o.pointerId]&&(cn[o.pointerId]=o)}function lo(o){delete cn[o.pointerId]}function ml(){In||(document.addEventListener(Ht,Lo,!0),document.addEventListener(Jt,hl,!0),document.addEventListener(nn,lo,!0),document.addEventListener(Vt,lo,!0),In=!0)}function co(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var p in cn)l.touches.push(cn[p]);l.changedTouches=[l],o(l)}}function Om(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Bn(l),co(o,l)}function la(o){var l={},p,g;for(g in o)p=o[g],l[g]=p&&p.bind?p.bind(o):p;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var _s=200;function pp(o,l){o.addEventListener("dblclick",l);var p=0,g;function C(I){if(I.detail!==1){g=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var R=_p(I);if(!(R.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!R.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var Z=Date.now();Z-p<=_s?(g++,g===2&&l(la(I))):g=1,p=Z}}}return o.addEventListener("click",C),{dblclick:l,simDblclick:C}}function ca(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var gl=vl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),uo=vl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fp=uo==="webkitTransition"||uo==="OTransition"?uo+"End":"transitionend";function hp(o){return typeof o=="string"?document.getElementById(o):o}function ua(o,l){var p=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!p||p==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(o,null);p=g?g[l]:null}return p==="auto"?null:p}function Gt(o,l,p){var g=document.createElement(o);return g.className=l||"",p&&p.appendChild(g),g}function vn(o){var l=o.parentNode;l&&l.removeChild(o)}function da(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Ro(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function No(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function Nc(o,l){if(o.classList!==void 0)return o.classList.contains(l);var p=_l(o);return p.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(p)}function yt(o,l){if(o.classList!==void 0)for(var p=O(l),g=0,C=p.length;g<C;g++)o.classList.add(p[g]);else if(!Nc(o,l)){var I=_l(o);Fo(o,(I?I+" ":"")+l)}}function mn(o,l){o.classList!==void 0?o.classList.remove(l):Fo(o,E((" "+_l(o)+" ").replace(" "+l+" "," ")))}function Fo(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function _l(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Hi(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&Mm(o,l)}function Mm(o,l){var p=!1,g="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(g)}catch{if(l===1)return}l=Math.round(l*100),p?(p.Enabled=l!==100,p.Opacity=l):o.style.filter+=" progid:"+g+"(opacity="+l+")"}function vl(o){for(var l=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in l)return o[p];return!1}function Bo(o,l,p){var g=l||new Pe(0,0);o.style[gl]=(Ce.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(p?" scale("+p+")":"")}function On(o,l){o._leaflet_pos=l,Ce.any3d?Bo(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function po(o){return o._leaflet_pos||new Pe(0,0)}var pa,fa,yl;if("onselectstart"in document)pa=function(){ht(window,"selectstart",Bn)},fa=function(){an(window,"selectstart",Bn)};else{var zr=vl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pa=function(){if(zr){var o=document.documentElement.style;yl=o[zr],o[zr]="none"}},fa=function(){zr&&(document.documentElement.style[zr]=yl,yl=void 0)}}function bl(){ht(window,"dragstart",Bn)}function vs(){an(window,"dragstart",Bn)}var ys,Cl;function El(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(ha(),ys=o,Cl=o.style.outlineStyle,o.style.outlineStyle="none",ht(window,"keydown",ha))}function ha(){ys&&(ys.style.outlineStyle=Cl,ys=void 0,Cl=void 0,an(window,"keydown",ha))}function ma(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Fc(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var mp={__proto__:null,TRANSFORM:gl,TRANSITION:uo,TRANSITION_END:fp,get:hp,getStyle:ua,create:Gt,remove:vn,empty:da,toFront:Ro,toBack:No,hasClass:Nc,addClass:yt,removeClass:mn,setClass:Fo,getClass:_l,setOpacity:Hi,testProp:vl,setTransform:Bo,setPosition:On,getPosition:po,get disableTextSelection(){return pa},get enableTextSelection(){return fa},disableImageDrag:bl,enableImageDrag:vs,preventOutline:El,restoreOutline:ha,getSizedParentNode:ma,getScale:Fc};function ht(o,l,p,g){if(l&&typeof l=="object")for(var C in l)Bc(o,C,l[C],p);else{l=O(l);for(var I=0,R=l.length;I<R;I++)Bc(o,l[I],p,g)}return this}var hr="_leaflet_events";function an(o,l,p,g){if(arguments.length===1)gp(o),delete o[hr];else if(l&&typeof l=="object")for(var C in l)Vc(o,C,l[C],p);else if(l=O(l),arguments.length===2)gp(o,function(Z){return oe(l,Z)!==-1});else for(var I=0,R=l.length;I<R;I++)Vc(o,l[I],p,g);return this}function gp(o,l){for(var p in o[hr]){var g=p.split(/\d/)[0];(!l||l(g))&&Vc(o,g,null,null,p)}}var xl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bc(o,l,p,g){var C=l+a(p)+(g?"_"+a(g):"");if(o[hr]&&o[hr][C])return this;var I=function(Z){return p.call(g||o,Z||window.event)},R=I;!Ce.touchNative&&Ce.pointer&&l.indexOf("touch")===0?I=aa(o,l,I):Ce.touch&&l==="dblclick"?I=pp(o,I):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(xl[l]||l,I,Ce.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(I=function(Z){Z=Z||window.event,Sl(o,Z)&&R(Z)},o.addEventListener(xl[l],I,!1)):o.addEventListener(l,R,!1):o.attachEvent("on"+l,I),o[hr]=o[hr]||{},o[hr][C]=I}function Vc(o,l,p,g,C){C=C||l+a(p)+(g?"_"+a(g):"");var I=o[hr]&&o[hr][C];if(!I)return this;!Ce.touchNative&&Ce.pointer&&l.indexOf("touch")===0?ao(o,l,I):Ce.touch&&l==="dblclick"?ca(o,I):"removeEventListener"in o?o.removeEventListener(xl[l]||l,I,!1):o.detachEvent("on"+l,I),o[hr][C]=null}function Vo(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function zc(o){return Bc(o,"wheel",Vo),this}function ga(o){return ht(o,"mousedown touchstart dblclick contextmenu",Vo),o._leaflet_disable_click=!0,this}function Bn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function zo(o){return Bn(o),Vo(o),this}function _p(o){if(o.composedPath)return o.composedPath();for(var l=[],p=o.target;p;)l.push(p),p=p.parentNode;return l}function vp(o,l){if(!l)return new Pe(o.clientX,o.clientY);var p=Fc(l),g=p.boundingClientRect;return new Pe((o.clientX-g.left)/p.x-l.clientLeft,(o.clientY-g.top)/p.y-l.clientTop)}var Am=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wl(o){return Ce.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Am:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Sl(o,l){var p=l.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var yp={__proto__:null,on:ht,off:an,stopPropagation:Vo,disableScrollPropagation:zc,disableClickPropagation:ga,preventDefault:Bn,stop:zo,getPropagationPath:_p,getMousePosition:vp,getWheelDelta:wl,isExternalTarget:Sl,addListener:ht,removeListener:an},Hc=pt.extend({run:function(o,l,p,g){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=po(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=se(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,p=this._duration*1e3;l<p?this._runFrame(this._easeOut(l/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var p=this._startPos.add(this._offset.multiplyBy(o));l&&p._round(),On(this._el,p),this.fire("step")},_complete:function(){ge(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),St=pt.extend({options:{crs:Dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=T(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ae(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=uo&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,fp,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,p){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(ae(o),l,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=e({animate:p.animate},p.zoom),p.pan=e({animate:p.animate,duration:p.duration},p.pan));var g=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,p.zoom):this._tryAnimatedPan(o,p.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,p){var g=this.getZoomScale(l),C=this.getSize().divideBy(2),I=o instanceof Pe?o:this.latLngToContainerPoint(o),R=I.subtract(C).multiplyBy(1-1/g),Z=this.containerPointToLatLng(C.add(R));return this.setView(Z,l,{zoom:p})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():de(o);var p=ke(l.paddingTopLeft||l.padding||[0,0]),g=ke(l.paddingBottomRight||l.padding||[0,0]),C=this.getBoundsZoom(o,!1,p.add(g));if(C=typeof l.maxZoom=="number"?Math.min(l.maxZoom,C):C,C===1/0)return{center:o.getCenter(),zoom:C};var I=g.subtract(p).divideBy(2),R=this.project(o.getSouthWest(),C),Z=this.project(o.getNorthEast(),C),Y=this.unproject(R.add(Z).divideBy(2).add(I),C);return{center:Y,zoom:C}},fitBounds:function(o,l){if(o=de(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,l);return this.setView(p.center,p.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=ke(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Hc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){yt(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,p){if(p=p||{},p.animate===!1||!Ce.any3d)return this.setView(o,l,p);this._stop();var g=this.project(this.getCenter()),C=this.project(o),I=this.getSize(),R=this._zoom;o=ae(o),l=l===void 0?R:l;var Z=Math.max(I.x,I.y),Y=Z*this.getZoomScale(R,l),le=C.distanceTo(g)||1,Ve=1.42,rt=Ve*Ve;function Tt(yn){var Cr=yn?-1:1,Gp=yn?Y:Z,Up=Y*Y-Z*Z+Cr*rt*rt*le*le,qp=2*Gp*rt*le,Gl=Up/qp,pu=Math.sqrt(Gl*Gl+1)-Gl,Wp=pu<1e-9?-18:Math.log(pu);return Wp}function Dn(yn){return(Math.exp(yn)-Math.exp(-yn))/2}function Sn(yn){return(Math.exp(yn)+Math.exp(-yn))/2}function dn(yn){return Dn(yn)/Sn(yn)}var ei=Tt(0);function br(yn){return Z*(Sn(ei)/Sn(ei+Ve*yn))}function Bp(yn){return Z*(Sn(ei)*dn(ei+Ve*yn)-Dn(ei))/rt}function Vp(yn){return 1-Math.pow(1-yn,1.5)}var zp=Date.now(),Ta=(Tt(1)-ei)/Ve,Hp=p.duration?1e3*p.duration:1e3*Ta*.8;function Hl(){var yn=(Date.now()-zp)/Hp,Cr=Vp(yn)*Ta;yn<=1?(this._flyToFrame=se(Hl,this),this._move(this.unproject(g.add(C.subtract(g).multiplyBy(Bp(Cr)/le)),R),this.getScaleZoom(Z/br(Cr),R),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Hl.call(this),this},flyToBounds:function(o,l){var p=this._getBoundsCenterZoom(o,l);return this.flyTo(p.center,p.zoom,l)},setMaxBounds:function(o){return o=de(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var p=this.getCenter(),g=this._limitCenter(p,this._zoom,de(o));return p.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var p=ke(l.paddingTopLeft||l.padding||[0,0]),g=ke(l.paddingBottomRight||l.padding||[0,0]),C=this.project(this.getCenter()),I=this.project(o),R=this.getPixelBounds(),Z=vt([R.min.add(p),R.max.subtract(g)]),Y=Z.getSize();if(!Z.contains(I)){this._enforcingBounds=!0;var le=I.subtract(Z.getCenter()),Ve=Z.extend(I).getSize().subtract(Y);C.x+=le.x<0?-Ve.x:Ve.x,C.y+=le.y<0?-Ve.y:Ve.y,this.panTo(this.unproject(C),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=e({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),g=l.divideBy(2).round(),C=p.divideBy(2).round(),I=g.subtract(C);return!I.x&&!I.y?this:(o.animate&&o.pan?this.panBy(I):(o.pan&&this._rawPanBy(I),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=e({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=r(this._handleGeolocationResponse,this),p=r(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,p,o):navigator.geolocation.getCurrentPosition(l,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,p=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,p=o.coords.longitude,g=new J(l,p),C=g.toBounds(o.coords.accuracy*2),I=this._locateOptions;if(I.setView){var R=this.getBoundsZoom(C);this.setView(g,I.maxZoom?Math.min(R,I.maxZoom):R)}var Z={latlng:g,bounds:C,timestamp:o.timestamp};for(var Y in o.coords)typeof o.coords[Y]=="number"&&(Z[Y]=o.coords[Y]);this.fire("locationfound",Z)}},addHandler:function(o,l){if(!l)return this;var p=this[o]=new l(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),vn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ge(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)vn(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),g=Gt("div",p,l||this._mapPane);return o&&(this._panes[o]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new He(l,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,p){o=de(o),p=ke(p||[0,0]);var g=this.getZoom()||0,C=this.getMinZoom(),I=this.getMaxZoom(),R=o.getNorthWest(),Z=o.getSouthEast(),Y=this.getSize().subtract(p),le=vt(this.project(Z,g),this.project(R,g)).getSize(),Ve=Ce.any3d?this.options.zoomSnap:1,rt=Y.x/le.x,Tt=Y.y/le.y,Dn=l?Math.max(rt,Tt):Math.min(rt,Tt);return g=this.getScaleZoom(Dn,g),Ve&&(g=Math.round(g/(Ve/100))*(Ve/100),g=l?Math.ceil(g/Ve)*Ve:Math.floor(g/Ve)*Ve),Math.max(C,Math.min(I,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Pe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var p=this._getTopLeftPoint(o,l);return new De(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var p=this.options.crs;return l=l===void 0?this._zoom:l,p.scale(o)/p.scale(l)},getScaleZoom:function(o,l){var p=this.options.crs;l=l===void 0?this._zoom:l;var g=p.zoom(o*p.scale(l));return isNaN(g)?1/0:g},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ae(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ke(o),l)},layerPointToLatLng:function(o){var l=ke(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(ae(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ae(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(de(o))},distance:function(o,l){return this.options.crs.distance(ae(o),ae(l))},containerPointToLayerPoint:function(o){return ke(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ke(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(ke(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(o)))},mouseEventToContainerPoint:function(o){return vp(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=hp(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(l,"scroll",this._onScroll,this),this._containerId=a(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,yt(o,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=ua(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),On(this._mapPane,new Pe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(yt(o.markerPane,"leaflet-zoom-hide"),yt(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,p){On(this._mapPane,new Pe(0,0));var g=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var C=this._zoom!==l;this._moveStart(C,p)._move(o,l)._moveEnd(C),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,p,g){l===void 0&&(l=this._zoom);var C=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),g?p&&p.pinch&&this.fire("zoom",p):((C||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ge(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){On(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[a(this._container)]=this;var l=o?an:ht;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ge(this._resizeRequest),this._resizeRequest=se(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var p=[],g,C=l==="mouseout"||l==="mouseover",I=o.target||o.srcElement,R=!1;I;){if(g=this._targets[a(I)],g&&(l==="click"||l==="preclick")&&this._draggableMoved(g)){R=!0;break}if(g&&g.listens(l,!0)&&(C&&!Sl(I,o)||(p.push(g),C))||I===this._container)break;I=I.parentNode}return!p.length&&!R&&!C&&this.listens(l,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var p=o.type;p==="mousedown"&&El(l),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,p){if(o.type==="click"){var g=e({},o);g.type="preclick",this._fireDOMEvent(g,g.type,p)}var C=this._findEventTargets(o,l);if(p){for(var I=[],R=0;R<p.length;R++)p[R].listens(l,!0)&&I.push(p[R]);C=I.concat(C)}if(C.length){l==="contextmenu"&&Bn(o);var Z=C[0],Y={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var le=Z.getLatLng&&(!Z._radius||Z._radius<=10);Y.containerPoint=le?this.latLngToContainerPoint(Z.getLatLng()):this.mouseEventToContainerPoint(o),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=le?Z.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(R=0;R<C.length;R++)if(C[R].fire(l,Y,!0),Y.originalEvent._stopped||C[R].options.bubblingMouseEvents===!1&&oe(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return po(this._mapPane)||new Pe(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var p=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var p=this.getSize()._divideBy(2);return this.project(o,l)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,p){var g=this._getNewPixelOrigin(p,l);return this.project(o,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(o,l,p){var g=this._getNewPixelOrigin(p,l);return vt([this.project(o.getSouthWest(),l)._subtract(g),this.project(o.getNorthWest(),l)._subtract(g),this.project(o.getSouthEast(),l)._subtract(g),this.project(o.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,p){if(!p)return o;var g=this.project(o,l),C=this.getSize().divideBy(2),I=new De(g.subtract(C),g.add(C)),R=this._getBoundsOffset(I,p,l);return Math.abs(R.x)<=1&&Math.abs(R.y)<=1?o:this.unproject(g.add(R),l)},_limitOffset:function(o,l){if(!l)return o;var p=this.getPixelBounds(),g=new De(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(o,l,p){var g=vt(this.project(l.getNorthEast(),p),this.project(l.getSouthWest(),p)),C=g.min.subtract(o.min),I=g.max.subtract(o.max),R=this._rebound(C.x,-I.x),Z=this._rebound(C.y,-I.y);return new Pe(R,Z)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),p=this.getMaxZoom(),g=Ce.any3d?this.options.zoomSnap:1;return g&&(o=Math.round(o/g)*g),Math.max(l,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var p=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,l),!0)},_createAnimProxy:function(){var o=this._proxy=Gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var p=gl,g=this._proxy.style[p];Bo(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){vn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();Bo(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),C=this._getCenterOffset(o)._divideBy(1-1/g);return p.animate!==!0&&!this.getSize().contains(C)?!1:(se(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,p,g){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,yt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Gc(o,l){return new St(o,l)}var xi=Ie.extend({options:{position:"topright"},initialize:function(o){T(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),p=this.getPosition(),g=o._controlCorners[p];return yt(l,"leaflet-control"),p.indexOf("bottom")!==-1?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(vn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),_a=function(o){return new xi(o)};St.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",p=this._controlContainer=Gt("div",l+"control-container",this._container);function g(C,I){var R=l+C+" "+l+I;o[C+I]=Gt("div",R,p)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)vn(this._controlCorners[o]);vn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var bp=xi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,p,g){return p<g?-1:g<p?1:0}},initialize:function(o,l,p){T(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in o)this._addLayer(o[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return xi.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(a(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){yt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(yt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):mn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=Gt("div",o),p=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ga(l),zc(l);var g=this._section=Gt("section",o+"-list");p&&(this._map.on("click",this.collapse,this),ht(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=Gt("a",o+"-toggle",l);C.href="#",C.title="Layers",C.setAttribute("role","button"),ht(C,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){Bn(I),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Gt("div",o+"-base",g),this._separator=Gt("div",o+"-separator",g),this._overlaysList=Gt("div",o+"-overlays",g),l.appendChild(g)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&a(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:p}),this.options.sortLayers&&this._layers.sort(r(function(g,C){return this.options.sortFunction(g.layer,C.layer,g.name,C.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;da(this._baseLayersList),da(this._overlaysList),this._layerControlInputs=[];var o,l,p,g,C=0;for(p=0;p<this._layers.length;p++)g=this._layers[p],this._addItem(g),l=l||g.overlay,o=o||!g.overlay,C+=g.overlay?0:1;return this.options.hideSingleBase&&(o=o&&C>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(a(o.target)),p=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,l)},_createRadioElement:function(o,l){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=p,g.firstChild},_addItem:function(o){var l=document.createElement("label"),p=this._map.hasLayer(o.layer),g;o.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=p):g=this._createRadioElement("leaflet-base-layers_"+a(this),p),this._layerControlInputs.push(g),g.layerId=a(o.layer),ht(g,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+o.name;var I=document.createElement("span");l.appendChild(I),I.appendChild(g),I.appendChild(C);var R=o.overlay?this._overlaysList:this._baseLayersList;return R.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,l,p,g=[],C=[];this._handlingClick=!0;for(var I=o.length-1;I>=0;I--)l=o[I],p=this._getLayer(l.layerId).layer,l.checked?g.push(p):l.checked||C.push(p);for(I=0;I<C.length;I++)this._map.hasLayer(C[I])&&this._map.removeLayer(C[I]);for(I=0;I<g.length;I++)this._map.hasLayer(g[I])||this._map.addLayer(g[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,p,g=this._map.getZoom(),C=o.length-1;C>=0;C--)l=o[C],p=this._getLayer(l.layerId).layer,l.disabled=p.options.minZoom!==void 0&&g<p.options.minZoom||p.options.maxZoom!==void 0&&g>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ht(o,"click",Bn),this.expand();var l=this;setTimeout(function(){an(o,"click",Bn),l._preventClick=!1})}}),Uc=function(o,l,p){return new bp(o,l,p)},bs=xi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",p=Gt("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,p,g,C){var I=Gt("a",p,g);return I.innerHTML=o,I.href="#",I.title=l,I.setAttribute("role","button"),I.setAttribute("aria-label",l),ga(I),ht(I,"click",zo),ht(I,"click",C,this),ht(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";mn(this._zoomInButton,l),mn(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(yt(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(yt(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new bs,this.addControl(this.zoomControl))});var Cp=function(o){return new bs(o)},Cs=xi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",p=Gt("div",l),g=this.options;return this._addScales(g,l+"-line",p),o.on(g.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,p){o.metric&&(this._mScale=Gt("div",l,p)),o.imperial&&(this._iScale=Gt("div",l,p))},_update:function(){var o=this._map,l=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),p=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,p,l/o)},_updateImperial:function(o){var l=o*3.2808399,p,g,C;l>5280?(p=l/5280,g=this._getRoundNum(p),this._updateScale(this._iScale,g+" mi",g/p)):(C=this._getRoundNum(l),this._updateScale(this._iScale,C+" ft",C/l))},_updateScale:function(o,l,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),p=o/l;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,l*p}}),qc=function(o){return new Cs(o)},Ep='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Vn=xi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?Ep+" ":"")+"Leaflet</a>"},initialize:function(o){T(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Gt("div","leaflet-control-attribution"),ga(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new Vn().addTo(this)});var xp=function(o){return new Vn(o)};xi.Layers=bp,xi.Zoom=bs,xi.Scale=Cs,xi.Attribution=Vn,_a.layers=Uc,_a.zoom=Cp,_a.scale=qc,_a.attribution=xp;var nt=Ie.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nt.addTo=function(o,l){return o.addHandler(l,this),this};var Mn={Events:Qe},Tl=Ce.touch?"touchstart mousedown":"mousedown",mr=pt.extend({options:{clickTolerance:3},initialize:function(o,l,p,g){T(this,g),this._element=o,this._dragStartTarget=l||o,this._preventOutline=p},enable:function(){this._enabled||(ht(this._dragStartTarget,Tl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(mr._dragging===this&&this.finishDrag(!0),an(this._dragStartTarget,Tl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Nc(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){mr._dragging===this&&this.finishDrag();return}if(!(mr._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(mr._dragging=this,this._preventOutline&&El(this._element),bl(),pa(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,p=ma(this._element);this._startPoint=new Pe(l.clientX,l.clientY),this._startPos=po(this._element),this._parentScale=Fc(p);var g=o.type==="mousedown";ht(document,g?"mousemove":"touchmove",this._onMove,this),ht(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,p=new Pe(l.clientX,l.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Bn(o),this._moved||(this.fire("dragstart"),this._moved=!0,yt(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),yt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),On(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){mn(document.body,"leaflet-dragging"),this._lastTarget&&(mn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),an(document,"mousemove touchmove",this._onMove,this),an(document,"mouseup touchend touchcancel",this._onUp,this),vs(),fa();var l=this._moved&&this._moving;this._moving=!1,mr._dragging=!1,l&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Wc(o,l,p){var g,C=[1,4,2,8],I,R,Z,Y,le,Ve,rt,Tt;for(I=0,Ve=o.length;I<Ve;I++)o[I]._code=wi(o[I],l);for(Z=0;Z<4;Z++){for(rt=C[Z],g=[],I=0,Ve=o.length,R=Ve-1;I<Ve;R=I++)Y=o[I],le=o[R],Y._code&rt?le._code&rt||(Tt=Qn(le,Y,rt,l,p),Tt._code=wi(Tt,l),g.push(Tt)):(le._code&rt&&(Tt=Qn(le,Y,rt,l,p),Tt._code=wi(Tt,l),g.push(Tt)),g.push(Y));o=g}return o}function re(o,l){var p,g,C,I,R,Z,Y,le,Ve;if(!o||o.length===0)throw new Error("latlngs not passed");Si(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var rt=ae([0,0]),Tt=de(o),Dn=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());Dn<1700&&(rt=Es(o));var Sn=o.length,dn=[];for(p=0;p<Sn;p++){var ei=ae(o[p]);dn.push(l.project(ae([ei.lat-rt.lat,ei.lng-rt.lng])))}for(Z=Y=le=0,p=0,g=Sn-1;p<Sn;g=p++)C=dn[p],I=dn[g],R=C.y*I.x-I.y*C.x,Y+=(C.x+I.x)*R,le+=(C.y+I.y)*R,Z+=R*3;Z===0?Ve=dn[0]:Ve=[Y/Z,le/Z];var br=l.unproject(ke(Ve));return ae([br.lat+rt.lat,br.lng+rt.lng])}function Es(o){for(var l=0,p=0,g=0,C=0;C<o.length;C++){var I=ae(o[C]);l+=I.lat,p+=I.lng,g++}return ae([l/g,p/g])}var Gi={__proto__:null,clipPolygon:Wc,polygonCenter:re,centroid:Es};function Hr(o,l){if(!l||!o.length)return o.slice();var p=l*l;return o=Ho(o,p),o=va(o,p),o}function jc(o,l,p){return Math.sqrt(xs(o,l,p,!0))}function wp(o,l,p){return xs(o,l,p)}function va(o,l){var p=o.length,g=typeof Uint8Array<"u"?Uint8Array:Array,C=new g(p);C[0]=C[p-1]=1,Il(o,C,l,0,p-1);var I,R=[];for(I=0;I<p;I++)C[I]&&R.push(o[I]);return R}function Il(o,l,p,g,C){var I=0,R,Z,Y;for(Z=g+1;Z<=C-1;Z++)Y=xs(o[Z],o[g],o[C],!0),Y>I&&(R=Z,I=Y);I>p&&(l[R]=1,Il(o,l,p,g,R),Il(o,l,p,R,C))}function Ho(o,l){for(var p=[o[0]],g=1,C=0,I=o.length;g<I;g++)ya(o[g],o[C])>l&&(p.push(o[g]),C=g);return C<I-1&&p.push(o[I-1]),p}var Gr;function Ol(o,l,p,g,C){var I=g?Gr:wi(o,p),R=wi(l,p),Z,Y,le;for(Gr=R;;){if(!(I|R))return[o,l];if(I&R)return!1;Z=I||R,Y=Qn(o,l,Z,p,C),le=wi(Y,p),Z===I?(o=Y,I=le):(l=Y,R=le)}}function Qn(o,l,p,g,C){var I=l.x-o.x,R=l.y-o.y,Z=g.min,Y=g.max,le,Ve;return p&8?(le=o.x+I*(Y.y-o.y)/R,Ve=Y.y):p&4?(le=o.x+I*(Z.y-o.y)/R,Ve=Z.y):p&2?(le=Y.x,Ve=o.y+R*(Y.x-o.x)/I):p&1&&(le=Z.x,Ve=o.y+R*(Z.x-o.x)/I),new Pe(le,Ve,C)}function wi(o,l){var p=0;return o.x<l.min.x?p|=1:o.x>l.max.x&&(p|=2),o.y<l.min.y?p|=4:o.y>l.max.y&&(p|=8),p}function ya(o,l){var p=l.x-o.x,g=l.y-o.y;return p*p+g*g}function xs(o,l,p,g){var C=l.x,I=l.y,R=p.x-C,Z=p.y-I,Y=R*R+Z*Z,le;return Y>0&&(le=((o.x-C)*R+(o.y-I)*Z)/Y,le>1?(C=p.x,I=p.y):le>0&&(C+=R*le,I+=Z*le)),R=o.x-C,Z=o.y-I,g?R*R+Z*Z:new Pe(C,I)}function Si(o){return!j(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Zc(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Si(o)}function Kc(o,l){var p,g,C,I,R,Z,Y,le;if(!o||o.length===0)throw new Error("latlngs not passed");Si(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ve=ae([0,0]),rt=de(o),Tt=rt.getNorthWest().distanceTo(rt.getSouthWest())*rt.getNorthEast().distanceTo(rt.getNorthWest());Tt<1700&&(Ve=Es(o));var Dn=o.length,Sn=[];for(p=0;p<Dn;p++){var dn=ae(o[p]);Sn.push(l.project(ae([dn.lat-Ve.lat,dn.lng-Ve.lng])))}for(p=0,g=0;p<Dn-1;p++)g+=Sn[p].distanceTo(Sn[p+1])/2;if(g===0)le=Sn[0];else for(p=0,I=0;p<Dn-1;p++)if(R=Sn[p],Z=Sn[p+1],C=R.distanceTo(Z),I+=C,I>g){Y=(I-g)/C,le=[Z.x-Y*(Z.x-R.x),Z.y-Y*(Z.y-R.y)];break}var ei=l.unproject(ke(le));return ae([ei.lat+Ve.lat,ei.lng+Ve.lng])}var Sp={__proto__:null,simplify:Hr,pointToSegmentDistance:jc,closestPointOnSegment:wp,clipSegment:Ol,_getEdgeIntersection:Qn,_getBitCode:wi,_sqClosestPointOnSegment:xs,isFlat:Si,_flat:Zc,polylineCenter:Kc},Ml={project:function(o){return new Pe(o.lng,o.lat)},unproject:function(o){return new J(o.y,o.x)},bounds:new De([-180,-90],[180,90])},Al={R:6378137,R_MINOR:6356752314245179e-9,bounds:new De([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,p=this.R,g=o.lat*l,C=this.R_MINOR/p,I=Math.sqrt(1-C*C),R=I*Math.sin(g),Z=Math.tan(Math.PI/4-g/2)/Math.pow((1-R)/(1+R),I/2);return g=-p*Math.log(Math.max(Z,1e-10)),new Pe(o.lng*l*p,g)},unproject:function(o){for(var l=180/Math.PI,p=this.R,g=this.R_MINOR/p,C=Math.sqrt(1-g*g),I=Math.exp(-o.y/p),R=Math.PI/2-2*Math.atan(I),Z=0,Y=.1,le;Z<15&&Math.abs(Y)>1e-7;Z++)le=C*Math.sin(R),le=Math.pow((1-le)/(1+le),C/2),Y=Math.PI/2-2*Math.atan(I*le)-R,R+=Y;return new J(R*l,o.x*l/p)}},Yc={__proto__:null,LonLat:Ml,Mercator:Al,SphericalMercator:Oe},Tp=e({},ie,{code:"EPSG:3395",projection:Al,transformation:function(){var o=.5/(Math.PI*Al.R);return ut(o,.5,-o,.5)}()}),Xc=e({},ie,{code:"EPSG:4326",projection:Ml,transformation:ut(1/180,1,-1/180,.5)}),Jc=e({},me,{projection:Ml,transformation:ut(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var p=l.lng-o.lng,g=l.lat-o.lat;return Math.sqrt(p*p+g*g)},infinite:!0});me.Earth=ie,me.EPSG3395=Tp,me.EPSG3857=Dt,me.EPSG900913=gt,me.EPSG4326=Xc,me.Simple=Jc;var Ui=pt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[a(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[a(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var p=this.getEvents();l.on(p,this),this.once("remove",function(){l.off(p,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});St.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=a(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=a(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return a(o)in this._layers},eachLayer:function(o,l){for(var p in this._layers)o.call(l,this._layers[p]);return this},_addLayers:function(o){o=o?j(o)?o:[o]:[];for(var l=0,p=o.length;l<p;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[a(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=a(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,p=this._getZoomSpan();for(var g in this._zoomBoundLayers){var C=this._zoomBoundLayers[g].options;o=C.minZoom===void 0?o:Math.min(o,C.minZoom),l=C.maxZoom===void 0?l:Math.max(l,C.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Go=Ui.extend({initialize:function(o,l){T(this,l),this._layers={};var p,g;if(o)for(p=0,g=o.length;p<g;p++)this.addLayer(o[p])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),p,g;for(p in this._layers)g=this._layers[p],g[o]&&g[o].apply(g,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var p in this._layers)o.call(l,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return a(o)}}),kl=function(o,l){return new Go(o,l)},ci=Go.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Go.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Go.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new He;for(var l in this._layers){var p=this._layers[l];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),ba=function(o,l){return new ci(o,l)},Uo=Ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){T(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(p,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(g,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(o,l){var p=this.options,g=p[l+"Size"];typeof g=="number"&&(g=[g,g]);var C=ke(g),I=ke(l==="shadow"&&p.shadowAnchor||p.iconAnchor||C&&C.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(p.className||""),I&&(o.style.marginLeft=-I.x+"px",o.style.marginTop=-I.y+"px"),C&&(o.style.width=C.x+"px",o.style.height=C.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return Ce.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function ws(o){return new Uo(o)}var qo=Uo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof qo.imagePath!="string"&&(qo.imagePath=this._detectIconPath()),(this.options.imagePath||qo.imagePath)+Uo.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(p,g,C){var I=g.exec(p);return I&&I[C]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Gt("div","leaflet-default-icon-path",document.body),l=ua(o,"background-image")||ua(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),fo=nt.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new mr(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),yt(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,p=l._map,g=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,I=po(l._icon),R=p.getPixelBounds(),Z=p.getPixelOrigin(),Y=vt(R.min._subtract(Z).add(C),R.max._subtract(Z).subtract(C));if(!Y.contains(I)){var le=ke((Math.max(Y.max.x,I.x)-Y.max.x)/(R.max.x-Y.max.x)-(Math.min(Y.min.x,I.x)-Y.min.x)/(R.min.x-Y.min.x),(Math.max(Y.max.y,I.y)-Y.max.y)/(R.max.y-Y.max.y)-(Math.min(Y.min.y,I.y)-Y.min.y)/(R.min.y-Y.min.y)).multiplyBy(g);p.panBy(le,{animate:!1}),this._draggable._newPos._add(le),this._draggable._startPos._add(le),On(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=se(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(ge(this._panRequest),this._panRequest=se(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,p=l._shadow,g=po(l._icon),C=l._map.layerPointToLatLng(g);p&&On(p,g),l._latlng=C,o.latlng=C,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){ge(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Ca=Ui.extend({options:{icon:new qo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){T(this,l),this._latlng=ae(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=ae(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),g=!1;p!==this._icon&&(this._icon&&this._removeIcon(),g=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),yt(p,l),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(p,"focus",this._panOnFocus,this);var C=o.icon.createShadow(this._shadow),I=!1;C!==this._shadow&&(this._removeShadow(),I=!0),C&&(yt(C,l),C.alt=""),this._shadow=C,o.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&I&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&an(this._icon,"focus",this._panOnFocus,this),vn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&vn(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&On(this._icon,o),this._shadow&&On(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(yt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fo)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fo(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Hi(this._icon,o),this._shadow&&Hi(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,p=l.iconSize?ke(l.iconSize):ke(0,0),g=l.iconAnchor?ke(l.iconAnchor):ke(0,0);o.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:p.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qc(o,l){return new Ca(o,l)}var Ur=Ui.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return T(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ss=Ur.extend({options:{fill:!0,radius:10},initialize:function(o,l){T(this,l),this._latlng=ae(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=ae(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return Ur.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,p=this._clickTolerance(),g=[o+p,l+p];this._pxBounds=new De(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ip(o,l){return new Ss(o,l)}var Pl=Ss.extend({initialize:function(o,l,p){if(typeof l=="number"&&(l=e({},p,{radius:l})),T(this,l),this._latlng=ae(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new He(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Ur.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,p=this._map,g=p.options.crs;if(g.distance===ie.distance){var C=Math.PI/180,I=this._mRadius/ie.R/C,R=p.project([l+I,o]),Z=p.project([l-I,o]),Y=R.add(Z).divideBy(2),le=p.unproject(Y).lat,Ve=Math.acos((Math.cos(I*C)-Math.sin(l*C)*Math.sin(le*C))/(Math.cos(l*C)*Math.cos(le*C)))/C;(isNaN(Ve)||Ve===0)&&(Ve=I/Math.cos(Math.PI/180*l)),this._point=Y.subtract(p.getPixelOrigin()),this._radius=isNaN(Ve)?0:Y.x-p.project([le,o-Ve]).x,this._radiusY=Y.y-R.y}else{var rt=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(rt).x}this._updateBounds()}});function Op(o,l,p){return new Pl(o,l,p)}var gr=Ur.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){T(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,p=null,g=xs,C,I,R=0,Z=this._parts.length;R<Z;R++)for(var Y=this._parts[R],le=1,Ve=Y.length;le<Ve;le++){C=Y[le-1],I=Y[le];var rt=g(o,C,I,!0);rt<l&&(l=rt,p=g(o,C,I))}return p&&(p.distance=Math.sqrt(l)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Kc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=ae(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new He,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Si(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],p=Si(o),g=0,C=o.length;g<C;g++)p?(l[g]=ae(o[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(o[g]);return l},_project:function(){var o=new De;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new Pe(o,o);this._rawPxBounds&&(this._pxBounds=new De([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,p){var g=o[0]instanceof J,C=o.length,I,R;if(g){for(R=[],I=0;I<C;I++)R[I]=this._map.latLngToLayerPoint(o[I]),p.extend(R[I]);l.push(R)}else for(I=0;I<C;I++)this._projectLatlngs(o[I],l,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,p,g,C,I,R,Z,Y;for(p=0,C=0,I=this._rings.length;p<I;p++)for(Y=this._rings[p],g=0,R=Y.length;g<R-1;g++)Z=Ol(Y[g],Y[g+1],o,g,!0),Z&&(l[C]=l[C]||[],l[C].push(Z[0]),(Z[1]!==Y[g+1]||g===R-2)&&(l[C].push(Z[1]),C++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,p=0,g=o.length;p<g;p++)o[p]=Hr(o[p],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var p,g,C,I,R,Z,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,I=this._parts.length;p<I;p++)for(Z=this._parts[p],g=0,R=Z.length,C=R-1;g<R;C=g++)if(!(!l&&g===0)&&jc(o,Z[C],Z[g])<=Y)return!0;return!1}});function Mp(o,l){return new gr(o,l)}gr._flat=Zc;var Wo=gr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return re(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=gr.prototype._convertLatLngs.call(this,o),p=l.length;return p>=2&&l[0]instanceof J&&l[0].equals(l[p-1])&&l.pop(),l},_setLatLngs:function(o){gr.prototype._setLatLngs.call(this,o),Si(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Si(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,p=new Pe(l,l);if(o=new De(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,C=this._rings.length,I;g<C;g++)I=Wc(this._rings[g],o,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,p,g,C,I,R,Z,Y,le;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(I=0,Y=this._parts.length;I<Y;I++)for(p=this._parts[I],R=0,le=p.length,Z=le-1;R<le;Z=R++)g=p[R],C=p[Z],g.y>o.y!=C.y>o.y&&o.x<(C.x-g.x)*(o.y-g.y)/(C.y-g.y)+g.x&&(l=!l);return l||gr.prototype._containsPoint.call(this,o,!0)}});function Ap(o,l){return new Wo(o,l)}var qi=ci.extend({initialize:function(o,l){T(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=j(o)?o:o.features,p,g,C;if(l){for(p=0,g=l.length;p<g;p++)C=l[p],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var I=this.options;if(I.filter&&!I.filter(o))return this;var R=Ea(o,I);return R?(R.feature=jo(o),R.defaultOptions=R.options,this.resetStyle(R),I.onEachFeature&&I.onEachFeature(o,R),this.addLayer(R)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=e({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function Ea(o,l){var p=o.type==="Feature"?o.geometry:o,g=p?p.coordinates:null,C=[],I=l&&l.pointToLayer,R=l&&l.coordsToLatLng||_r,Z,Y,le,Ve;if(!g&&!p)return null;switch(p.type){case"Point":return Z=R(g),Dl(I,o,Z,l);case"MultiPoint":for(le=0,Ve=g.length;le<Ve;le++)Z=R(g[le]),C.push(Dl(I,o,Z,l));return new ci(C);case"LineString":case"MultiLineString":return Y=un(g,p.type==="LineString"?0:1,R),new gr(Y,l);case"Polygon":case"MultiPolygon":return Y=un(g,p.type==="Polygon"?1:2,R),new Wo(Y,l);case"GeometryCollection":for(le=0,Ve=p.geometries.length;le<Ve;le++){var rt=Ea({geometry:p.geometries[le],type:"Feature",properties:o.properties},l);rt&&C.push(rt)}return new ci(C);case"FeatureCollection":for(le=0,Ve=p.features.length;le<Ve;le++){var Tt=Ea(p.features[le],l);Tt&&C.push(Tt)}return new ci(C);default:throw new Error("Invalid GeoJSON object.")}}function Dl(o,l,p,g){return o?o(l,p):new Ca(p,g&&g.markersInheritOptions&&g)}function _r(o){return new J(o[1],o[0],o[2])}function un(o,l,p){for(var g=[],C=0,I=o.length,R;C<I;C++)R=l?un(o[C],l-1,p):(p||_r)(o[C]),g.push(R);return g}function vr(o,l){return o=ae(o),o.alt!==void 0?[y(o.lng,l),y(o.lat,l),y(o.alt,l)]:[y(o.lng,l),y(o.lat,l)]}function Ts(o,l,p,g){for(var C=[],I=0,R=o.length;I<R;I++)C.push(l?Ts(o[I],Si(o[I])?0:l-1,p,g):vr(o[I],g));return!l&&p&&C.length>0&&C.push(C[0].slice()),C}function rr(o,l){return o.feature?e({},o.feature,{geometry:l}):jo(l)}function jo(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var $n={toGeoJSON:function(o){return rr(this,{type:"Point",coordinates:vr(this.getLatLng(),o)})}};Ca.include($n),Pl.include($n),Ss.include($n),gr.include({toGeoJSON:function(o){var l=!Si(this._latlngs),p=Ts(this._latlngs,l?1:0,!1,o);return rr(this,{type:(l?"Multi":"")+"LineString",coordinates:p})}}),Wo.include({toGeoJSON:function(o){var l=!Si(this._latlngs),p=l&&!Si(this._latlngs[0]),g=Ts(this._latlngs,p?2:l?1:0,!0,o);return l||(g=[g]),rr(this,{type:(p?"Multi":"")+"Polygon",coordinates:g})}}),Go.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(p){l.push(p.toGeoJSON(o).geometry.coordinates)}),rr(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var p=l==="GeometryCollection",g=[];return this.eachLayer(function(C){if(C.toGeoJSON){var I=C.toGeoJSON(o);if(p)g.push(I.geometry);else{var R=jo(I);R.type==="FeatureCollection"?g.push.apply(g,R.features):g.push(R)}}}),p?rr(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function $c(o,l){return new qi(o,l)}var kp=$c,xa=Ui.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,p){this._url=o,this._bounds=de(l),T(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(yt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){vn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Ro(this._image),this},bringToBack:function(){return this._map&&No(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=de(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:Gt("img");if(yt(l,"leaflet-image-layer"),this._zoomAnimated&&yt(l,"leaflet-zoom-animated"),this.options.className&&yt(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onload=r(this.fire,this,"load"),l.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Bo(this._image,p,l)},_reset:function(){var o=this._image,l=new De(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=l.getSize();On(o,l.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){Hi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Is=function(o,l,p){return new xa(o,l,p)},Ll=xa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:Gt("video");if(yt(l,"leaflet-image-layer"),this._zoomAnimated&&yt(l,"leaflet-zoom-animated"),this.options.className&&yt(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onloadeddata=r(this.fire,this,"load"),o){for(var p=l.getElementsByTagName("source"),g=[],C=0;C<p.length;C++)g.push(p[C].src);this._url=p.length>0?g:[l.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var R=Gt("source");R.src=this._url[I],l.appendChild(R)}}});function Pp(o,l,p){return new Ll(o,l,p)}var eu=xa.extend({_initImage:function(){var o=this._image=this._url;yt(o,"leaflet-image-layer"),this._zoomAnimated&&yt(o,"leaflet-zoom-animated"),this.options.className&&yt(o,this.options.className),o.onselectstart=m,o.onmousemove=m}});function tu(o,l,p){return new eu(o,l,p)}var or=Ui.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof J||j(o))?(this._latlng=ae(o),T(this,l)):(T(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Hi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Hi(this._container,1),this.bringToFront(),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Hi(this._container,0),this._removeTimeout=setTimeout(r(vn,void 0,this._container),200)):vn(this._container),this.options.interactive&&(mn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ae(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ro(this._container),this},bringToBack:function(){return this._map&&No(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof ci){l=null;var p=this._source._layers;for(var g in p)if(p[g]._map){l=p[g];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=ke(this.options.offset),p=this._getAnchor();this._zoomAnimated?On(this._container,o.add(p)):l=l.add(o).add(p);var g=this._containerBottom=-l.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(o,l,p,g){var C=l;return C instanceof o||(C=new o(g).setContent(l)),p&&C.setLatLng(p),C}}),Ui.include({_initOverlay:function(o,l,p,g){var C=p;return C instanceof o?(T(C,g),C._source=this):(C=l&&!g?l:new o(g,this),C.setContent(p)),C}});var sr=or.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,or.prototype.openOn.call(this,o)},onAdd:function(o){or.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ur||this._source.on("preclick",Vo))},onRemove:function(o){or.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ur||this._source.off("preclick",Vo))},getEvents:function(){var o=or.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=Gt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Gt("div",o+"-content-wrapper",l);if(this._contentNode=Gt("div",o+"-content",p),ga(l),zc(this._contentNode),ht(l,"contextmenu",Vo),this._tipContainer=Gt("div",o+"-tip-container",l),this._tip=Gt("div",o+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=Gt("a",o+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',ht(g,"click",function(C){Bn(C),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),l.width=p+1+"px",l.whiteSpace="",l.height="";var g=o.offsetHeight,C=this.options.maxHeight,I="leaflet-popup-scrolled";C&&g>C?(l.height=C+"px",yt(o,I)):mn(o,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();On(this._container,l.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(ua(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+l,g=this._containerWidth,C=new Pe(this._containerLeft,-p-this._containerBottom);C._add(po(this._container));var I=o.layerPointToContainerPoint(C),R=ke(this.options.autoPanPadding),Z=ke(this.options.autoPanPaddingTopLeft||R),Y=ke(this.options.autoPanPaddingBottomRight||R),le=o.getSize(),Ve=0,rt=0;I.x+g+Y.x>le.x&&(Ve=I.x+g-le.x+Y.x),I.x-Ve-Z.x<0&&(Ve=I.x-Z.x),I.y+p+Y.y>le.y&&(rt=I.y+p-le.y+Y.y),I.y-rt-Z.y<0&&(rt=I.y-Z.y),(Ve||rt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Ve,rt]))}},_getAnchor:function(){return ke(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Dp=function(o,l){return new sr(o,l)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(o,l,p){return this._initOverlay(sr,o,l,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Ui.include({bindPopup:function(o,l){return this._popup=this._initOverlay(sr,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof ci||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){zo(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof Ur)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var wa=or.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){or.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){or.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=or.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Gt("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,p,g=this._map,C=this._container,I=g.latLngToContainerPoint(g.getCenter()),R=g.layerPointToContainerPoint(o),Z=this.options.direction,Y=C.offsetWidth,le=C.offsetHeight,Ve=ke(this.options.offset),rt=this._getAnchor();Z==="top"?(l=Y/2,p=le):Z==="bottom"?(l=Y/2,p=0):Z==="center"?(l=Y/2,p=le/2):Z==="right"?(l=0,p=le/2):Z==="left"?(l=Y,p=le/2):R.x<I.x?(Z="right",l=0,p=le/2):(Z="left",l=Y+(Ve.x+rt.x)*2,p=le/2),o=o.subtract(ke(l,p,!0)).add(Ve).add(rt),mn(C,"leaflet-tooltip-right"),mn(C,"leaflet-tooltip-left"),mn(C,"leaflet-tooltip-top"),mn(C,"leaflet-tooltip-bottom"),yt(C,"leaflet-tooltip-"+Z),On(C,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Hi(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return ke(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Lp=function(o,l){return new wa(o,l)};St.include({openTooltip:function(o,l,p){return this._initOverlay(wa,o,l,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Ui.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wa,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[l](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof ci||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&(ht(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ht(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var l=o.latlng,p,g;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),g=this._map.containerPointToLayerPoint(p),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var Rl=Uo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(da(l),l.appendChild(p.html)):l.innerHTML=p.html!==!1?p.html:"",p.bgPos){var g=ke(p.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function nu(o){return new Rl(o)}Uo.Default=qo;var Zo=Ui.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){T(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),vn(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ro(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(No(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof Pe?o:new Pe(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,p=-o(-1/0,1/0),g=0,C=l.length,I;g<C;g++)I=l[g].style.zIndex,l[g]!==this._container&&I&&(p=o(p,+I));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){Hi(this._container,this.options.opacity);var o=+new Date,l=!1,p=!1;for(var g in this._tiles){var C=this._tiles[g];if(!(!C.current||!C.loaded)){var I=Math.min(1,(o-C.loaded)/200);Hi(C.el,I),I<1?l=!0:(C.active?p=!0:this._onOpaqueTile(C),C.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),l&&(ge(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=l-Math.abs(o-p),this._onUpdateLevel(p)):(vn(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var g=this._levels[o],C=this._map;return g||(g=this._levels[o]={},g.el=Gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=C.project(C.unproject(C.getPixelOrigin()),o).round(),g.zoom=o,this._setZoomTransform(g,C.getCenter(),C.getZoom()),m(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var o,l,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)vn(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,p,g){var C=Math.floor(o/2),I=Math.floor(l/2),R=p-1,Z=new Pe(+C,+I);Z.z=+R;var Y=this._tileCoordsToKey(Z),le=this._tiles[Y];return le&&le.active?(le.retain=!0,!0):(le&&le.loaded&&(le.retain=!0),R>g?this._retainParent(C,I,R,g):!1)},_retainChildren:function(o,l,p,g){for(var C=2*o;C<2*o+2;C++)for(var I=2*l;I<2*l+2;I++){var R=new Pe(C,I);R.z=p+1;var Z=this._tileCoordsToKey(R),Y=this._tiles[Z];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);p+1<g&&this._retainChildren(C,I,p+1,g)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,p,g){var C=Math.round(l);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var I=this.options.updateWhenZooming&&C!==this._tileZoom;(!g||I)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,l)},_setZoomTransform:function(o,l,p){var g=this._map.getZoomScale(p,o.zoom),C=o.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,p)).round();Ce.any3d?Bo(o.el,C,g):On(o.el,C)},_resetGrid:function(){var o=this._map,l=o.options.crs,p=this._tileSize=this.getTileSize(),g=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],g).x/p.x),Math.ceil(o.project([0,l.wrapLng[1]],g).x/p.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],g).y/p.x),Math.ceil(o.project([l.wrapLat[1],0],g).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,p=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(p,this._tileZoom),C=l.project(o,this._tileZoom).floor(),I=l.getSize().divideBy(g*2);return new De(C.subtract(I),C.add(I))},_update:function(o){var l=this._map;if(l){var p=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(o),C=this._pxBoundsToTileRange(g),I=C.getCenter(),R=[],Z=this.options.keepBuffer,Y=new De(C.getBottomLeft().subtract([Z,-Z]),C.getTopRight().add([Z,-Z]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var le in this._tiles){var Ve=this._tiles[le].coords;(Ve.z!==this._tileZoom||!Y.contains(new Pe(Ve.x,Ve.y)))&&(this._tiles[le].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var rt=C.min.y;rt<=C.max.y;rt++)for(var Tt=C.min.x;Tt<=C.max.x;Tt++){var Dn=new Pe(Tt,rt);if(Dn.z=this._tileZoom,!!this._isValidTile(Dn)){var Sn=this._tiles[this._tileCoordsToKey(Dn)];Sn?Sn.current=!0:R.push(Dn)}}if(R.sort(function(ei,br){return ei.distanceTo(I)-br.distanceTo(I)}),R.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var dn=document.createDocumentFragment();for(Tt=0;Tt<R.length;Tt++)this._addTile(R[Tt],dn);this._level.el.appendChild(dn)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var p=this._globalTileRange;if(!l.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!l.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(o);return de(this.options.bounds).overlaps(g)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,p=this.getTileSize(),g=o.scaleBy(p),C=g.add(p),I=l.unproject(g,o.z),R=l.unproject(C,o.z);return[I,R]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),p=new He(l[0],l[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),p=new Pe(+l[0],+l[1]);return p.z=+l[2],p},_removeTile:function(o){var l=this._tiles[o];l&&(vn(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){yt(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=m,o.onmousemove=m,Ce.ielt9&&this.options.opacity<1&&Hi(o,this.options.opacity)},_addTile:function(o,l){var p=this._getTilePos(o),g=this._tileCoordsToKey(o),C=this.createTile(this._wrapCoords(o),r(this._tileReady,this,o));this._initTile(C),this.createTile.length<2&&se(r(this._tileReady,this,o,null,C)),On(C,p),this._tiles[g]={el:C,coords:o,current:!0},l.appendChild(C),this.fire("tileloadstart",{tile:C,coords:o})},_tileReady:function(o,l,p){l&&this.fire("tileerror",{error:l,tile:p,coords:o});var g=this._tileCoordsToKey(o);p=this._tiles[g],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Hi(p.el,0),ge(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),l||(yt(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?se(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new Pe(this._wrapX?h(o.x,this._wrapX):o.x,this._wrapY?h(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new De(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Rp(o){return new Zo(o)}var yr=Zo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=T(this,l),l.detectRetina&&Ce.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var p=document.createElement("img");return ht(p,"load",r(this._tileOnLoad,this,l,p)),ht(p,"error",r(this._tileOnError,this,l,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var l={r:Ce.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=p),l["-y"]=p}return G(this._url,e(l,this.options))},_tileOnLoad:function(o,l){Ce.ielt9?setTimeout(r(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,p){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),o(p,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,p=this.options.zoomReverse,g=this.options.zoomOffset;return p&&(o=l-o),o+g},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=m,l.onerror=m,!l.complete)){l.src=ve;var p=this._tiles[o].coords;vn(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:p})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",ve),Zo.prototype._removeTile.call(this,o)},_tileReady:function(o,l,p){if(!(!this._map||p&&p.getAttribute("src")===ve))return Zo.prototype._tileReady.call(this,o,l,p)}});function iu(o,l){return new yr(o,l)}var Sa=yr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var p=e({},this.defaultWmsParams);for(var g in l)g in this.options||(p[g]=l[g]);l=T(this,l);var C=l.detectRetina&&Ce.retina?2:1,I=this.getTileSize();p.width=I.x*C,p.height=I.y*C,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,yr.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),p=this._crs,g=vt(p.project(l[0]),p.project(l[1])),C=g.min,I=g.max,R=(this._wmsVersion>=1.3&&this._crs===Xc?[C.y,C.x,I.y,I.x]:[C.x,C.y,I.x,I.y]).join(","),Z=yr.prototype.getTileUrl.call(this,o);return Z+S(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+R},setParams:function(o,l){return e(this.wmsParams,o),l||this.redraw(),this}});function ru(o,l){return new Sa(o,l)}yr.WMS=Sa,iu.wms=ru;var Wi=Ui.extend({options:{padding:.1},initialize:function(o){T(this,o),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),yt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var p=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,l),I=g.multiplyBy(-p).add(C).subtract(this._map._getNewPixelOrigin(o,l));Ce.any3d?Bo(this._container,I,p):On(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),p=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new De(p,p.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ui=Wi.extend({options:{tolerance:0},getEvents:function(){var o=Wi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ht(o,"mousemove",this._onMouseMove,this),ht(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){ge(this._redrawRequest),delete this._ctx,vn(this._container),an(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wi.prototype._update.call(this);var o=this._bounds,l=this._container,p=o.getSize(),g=Ce.retina?2:1;On(l,o.min),l.width=g*p.x,l.height=g*p.y,l.style.width=p.x+"px",l.style.height=p.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Wi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[a(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,p=l.next,g=l.prev;p?p.prev=g:this._drawLast=g,g?g.next=p:this._drawFirst=p,delete o._order,delete this._layers[a(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),p=[],g,C;for(C=0;C<l.length;C++){if(g=Number(l[C]),isNaN(g))return;p.push(g)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||se(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new De,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var p=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)o=g.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var p,g,C,I,R=o._parts,Z=R.length,Y=this._ctx;if(Z){for(Y.beginPath(),p=0;p<Z;p++){for(g=0,C=R[p].length;g<C;g++)I=R[p][g],Y[g?"lineTo":"moveTo"](I.x,I.y);l&&Y.closePath()}this._fillStroke(Y,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,p=this._ctx,g=Math.max(Math.round(o._radius),1),C=(Math.max(Math.round(o._radiusY),1)||g)/g;C!==1&&(p.save(),p.scale(1,C)),p.beginPath(),p.arc(l.x,l.y/C,g,0,Math.PI*2,!1),C!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,l){var p=l.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),p,g,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(g=p);this._fireEvent(g?[g]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(mn(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var p,g,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(l)&&(g=p);g!==this._hoveredLayer&&(this._handleMouseOut(o),g&&(yt(this._container,"leaflet-interactive"),this._fireEvent([g],o,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,p){this._map._fireDOMEvent(l,p||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var p=l.next,g=l.prev;if(p)p.prev=g;else return;g?g.next=p:p&&(this._drawFirst=p),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var p=l.next,g=l.prev;if(g)g.next=p;else return;p?p.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function ou(o){return Ce.canvas?new ui(o):null}var Os=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Nl={_initContainer:function(){this._container=Gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=Os("shape");yt(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=Os("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[a(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;vn(l),o.removeInteractiveTarget(l),delete this._layers[a(o)]},_updateStyle:function(o){var l=o._stroke,p=o._fill,g=o.options,C=o._container;C.stroked=!!g.stroke,C.filled=!!g.fill,g.stroke?(l||(l=o._stroke=Os("stroke")),C.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,g.dashArray?l.dashStyle=j(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(C.removeChild(l),o._stroke=null),g.fill?(p||(p=o._fill=Os("fill")),C.appendChild(p),p.color=g.fillColor||g.color,p.opacity=g.fillOpacity):p&&(C.removeChild(p),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),p=Math.round(o._radius),g=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+p+","+g+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){Ro(o._container)},_bringToBack:function(o){No(o._container)}},Ti=Ce.vml?Os:Zt,ln=Wi.extend({_initContainer:function(){this._container=Ti("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ti("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){vn(this._container),an(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wi.prototype._update.call(this);var o=this._bounds,l=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,p.setAttribute("width",l.x),p.setAttribute("height",l.y)),On(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=Ti("path");o.options.className&&yt(l,o.options.className),o.options.interactive&&yt(l,"leaflet-interactive"),this._updateStyle(o),this._layers[a(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){vn(o._path),o.removeInteractiveTarget(o._path),delete this._layers[a(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,p=o.options;l&&(p.stroke?(l.setAttribute("stroke",p.color),l.setAttribute("stroke-opacity",p.opacity),l.setAttribute("stroke-width",p.weight),l.setAttribute("stroke-linecap",p.lineCap),l.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?l.setAttribute("stroke-dasharray",p.dashArray):l.removeAttribute("stroke-dasharray"),p.dashOffset?l.setAttribute("stroke-dashoffset",p.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),p.fill?(l.setAttribute("fill",p.fillColor||p.color),l.setAttribute("fill-opacity",p.fillOpacity),l.setAttribute("fill-rule",p.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,at(o._parts,l))},_updateCircle:function(o){var l=o._point,p=Math.max(Math.round(o._radius),1),g=Math.max(Math.round(o._radiusY),1)||p,C="a"+p+","+g+" 0 1,0 ",I=o._empty()?"M0 0":"M"+(l.x-p)+","+l.y+C+p*2+",0 "+C+-p*2+",0 ";this._setPath(o,I)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){Ro(o._path)},_bringToBack:function(o){No(o._path)}});Ce.vml&&ln.include(Nl);function Fl(o){return Ce.svg||Ce.vml?new ln(o):null}St.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&ou(o)||Fl(o)}});var su=Wo.extend({initialize:function(o,l){Wo.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=de(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Np(o,l){return new su(o,l)}ln.create=Ti,ln.pointsToPath=at,qi.geometryToLayer=Ea,qi.coordsToLatLng=_r,qi.coordsToLatLngs=un,qi.latLngToCoords=vr,qi.latLngsToCoords=Ts,qi.getFeature=rr,qi.asFeature=jo,St.mergeOptions({boxZoom:!0});var au=nt.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){an(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){vn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),pa(),bl(),this._startPoint=this._map.mouseEventToContainerPoint(o),ht(document,{contextmenu:zo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Gt("div","leaflet-zoom-box",this._container),yt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new De(this._point,this._startPoint),p=l.getSize();On(this._box,l.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(vn(this._box),mn(this._container,"leaflet-crosshair")),fa(),vs(),an(document,{contextmenu:zo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var l=new He(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",au),St.mergeOptions({doubleClickZoom:!0});var lu=nt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,p=l.getZoom(),g=l.options.zoomDelta,C=o.originalEvent.shiftKey?p-g:p+g;l.options.doubleClickZoom==="center"?l.setZoom(C):l.setZoomAround(o.containerPoint,C)}});St.addInitHook("addHandler","doubleClickZoom",lu),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Bl=nt.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new mr(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}yt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mn(this._map._container,"leaflet-grab"),mn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=de(this._map.options.maxBounds);this._offsetLimit=vt(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),p=this._initialWorldOffset,g=this._draggable._newPos.x,C=(g-l+p)%o+l-p,I=(g+l+p)%o-l-p,R=Math.abs(C+p)<Math.abs(I+p)?C:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=R},_onDragEnd:function(o){var l=this._map,p=l.options,g=!p.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),g)l.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,R=p.easeLinearity,Z=C.multiplyBy(R/I),Y=Z.distanceTo([0,0]),le=Math.min(p.inertiaMaxSpeed,Y),Ve=Z.multiplyBy(le/Y),rt=le/(p.inertiaDeceleration*R),Tt=Ve.multiplyBy(-rt/2).round();!Tt.x&&!Tt.y?l.fire("moveend"):(Tt=l._limitOffset(Tt,l.options.maxBounds),se(function(){l.panBy(Tt,{duration:rt,easeLinearity:R,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",Bl),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var cu=nt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ht(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),an(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,p=o.scrollTop||l.scrollTop,g=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},p=this.keyCodes,g,C;for(g=0,C=p.left.length;g<C;g++)l[p.left[g]]=[-1*o,0];for(g=0,C=p.right.length;g<C;g++)l[p.right[g]]=[o,0];for(g=0,C=p.down.length;g<C;g++)l[p.down[g]]=[0,o];for(g=0,C=p.up.length;g<C;g++)l[p.up[g]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},p=this.keyCodes,g,C;for(g=0,C=p.zoomIn.length;g<C;g++)l[p.zoomIn[g]]=o;for(g=0,C=p.zoomOut.length;g<C;g++)l[p.zoomOut[g]]=-o},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){an(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,p=this._map,g;if(l in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(g=this._panKeys[l],o.shiftKey&&(g=ke(g).multiplyBy(3)),p.options.maxBounds&&(g=p._limitOffset(ke(g),p.options.maxBounds)),p.options.worldCopyJump){var C=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(g)));p.panTo(C)}else p.panBy(g)}else if(l in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;zo(o)}}});St.addInitHook("addHandler","keyboard",cu),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var uu=nt.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){an(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=wl(o),p=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var g=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),g),zo(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,I=p?Math.ceil(C/p)*p:C,R=o._limitZoom(l+(this._delta>0?I:-I))-l;this._delta=0,this._startTime=null,R&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+R):o.setZoomAround(this._lastMousePos,l+R))}});St.addInitHook("addHandler","scrollWheelZoom",uu);var du=600;St.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var Vl=nt.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){an(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new Pe(l.clientX,l.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",Bn),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),du),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){an(document,"touchend",Bn),an(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),an(document,"touchend touchcancel contextmenu",this._cancel,this),an(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new Pe(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});p._simulated=!0,l.target.dispatchEvent(p)}});St.addInitHook("addHandler","tapHold",Vl),St.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var zl=nt.extend({addHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mn(this._map._container,"leaflet-touch-zoom"),an(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var p=l.mouseEventToContainerPoint(o.touches[0]),g=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(p.add(g)._divideBy(2))),this._startDist=p.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),Bn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,p=l.mouseEventToContainerPoint(o.touches[0]),g=l.mouseEventToContainerPoint(o.touches[1]),C=p.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(C,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&C<1||this._zoom>l.getMaxZoom()&&C>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var I=p._add(g)._divideBy(2)._subtract(this._centerPoint);if(C===1&&I.x===0&&I.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),ge(this._animRequest);var R=r(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=se(R,this,!0),Bn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ge(this._animRequest),an(document,"touchmove",this._onTouchMove,this),an(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",zl),St.BoxZoom=au,St.DoubleClickZoom=lu,St.Drag=Bl,St.Keyboard=cu,St.ScrollWheelZoom=uu,St.TapHold=Vl,St.TouchZoom=zl,n.Bounds=De,n.Browser=Ce,n.CRS=me,n.Canvas=ui,n.Circle=Pl,n.CircleMarker=Ss,n.Class=Ie,n.Control=xi,n.DivIcon=Rl,n.DivOverlay=or,n.DomEvent=yp,n.DomUtil=mp,n.Draggable=mr,n.Evented=pt,n.FeatureGroup=ci,n.GeoJSON=qi,n.GridLayer=Zo,n.Handler=nt,n.Icon=Uo,n.ImageOverlay=xa,n.LatLng=J,n.LatLngBounds=He,n.Layer=Ui,n.LayerGroup=Go,n.LineUtil=Sp,n.Map=St,n.Marker=Ca,n.Mixin=Mn,n.Path=Ur,n.Point=Pe,n.PolyUtil=Gi,n.Polygon=Wo,n.Polyline=gr,n.Popup=sr,n.PosAnimation=Hc,n.Projection=Yc,n.Rectangle=su,n.Renderer=Wi,n.SVG=ln,n.SVGOverlay=eu,n.TileLayer=yr,n.Tooltip=wa,n.Transformation=st,n.Util=Le,n.VideoOverlay=Ll,n.bind=r,n.bounds=vt,n.canvas=ou,n.circle=Op,n.circleMarker=Ip,n.control=_a,n.divIcon=nu,n.extend=e,n.featureGroup=ba,n.geoJSON=$c,n.geoJson=kp,n.gridLayer=Rp,n.icon=ws,n.imageOverlay=Is,n.latLng=ae,n.latLngBounds=de,n.layerGroup=kl,n.map=Gc,n.marker=Qc,n.point=ke,n.polygon=Ap,n.polyline=Mp,n.popup=Dp,n.rectangle=Np,n.setOptions=T,n.stamp=a,n.svg=Fl,n.svgOverlay=tu,n.tileLayer=iu,n.tooltip=Lp,n.transformation=ut,n.version=t,n.videoOverlay=Pp;var Fp=window.L;n.noConflict=function(){return window.L=Fp,this},window.L=n})});var Yi=(n,t)=>{let{o:e,i,u:r}=n,s=e,a,d=(y,E)=>{let O=s,T=y,S=E||(i?!i(O,T):O!==T);return(S||r)&&(s=T,a=O),[s,S,a]};return[t?y=>d(t(s,a),y):d,y=>[s,!!y,a]]},nE=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,Pi=nE?window:{},T_=Math.max,iE=Math.min,ff=Math.round,Vu=Math.abs,a_=Math.sign,I_=Pi.cancelAnimationFrame,Tf=Pi.requestAnimationFrame,If=Pi.setTimeout,O_=Pi.clearTimeout,Zu=n=>typeof Pi[n]<"u"?Pi[n]:void 0,rE=Zu("MutationObserver"),l_=Zu("IntersectionObserver"),Na=Zu("ResizeObserver"),nc=Zu("ScrollTimeline"),Of=n=>n===void 0,Ku=n=>n===null,Eo=n=>typeof n=="number",ac=n=>typeof n=="string",Yu=n=>typeof n=="boolean",Dr=n=>typeof n=="function",Ar=n=>Array.isArray(n),zu=n=>typeof n=="object"&&!Ar(n)&&!Ku(n),Mf=n=>{let t=!!n&&n.length,e=Eo(t)&&t>-1&&t%1==0;return Ar(n)||!Dr(n)&&e?t>0&&zu(n)?t-1 in n:!0:!1},Hu=n=>!!n&&n.constructor===Object,Gu=n=>n instanceof HTMLElement,Xu=n=>n instanceof Element;function sn(n,t){if(Mf(n))for(let e=0;e<n.length&&t(n[e],e,n)!==!1;e++);else n&&sn(Object.keys(n),e=>t(n[e],e,n));return n}var M_=(n,t)=>n.indexOf(t)>=0,ic=(n,t)=>n.concat(t),En=(n,t,e)=>(!ac(t)&&Mf(t)?Array.prototype.push.apply(n,t):n.push(t),n),ts=n=>Array.from(n||[]),Af=n=>Ar(n)?n:!ac(n)&&Mf(n)?ts(n):[n],Uu=n=>!!n&&!n.length,hf=n=>ts(new Set(n)),Ji=(n,t,e)=>{sn(n,r=>r?r.apply(void 0,t||[]):!0),e||(n.length=0)},A_="paddingTop",k_="paddingRight",P_="paddingLeft",D_="paddingBottom",L_="marginLeft",R_="marginRight",N_="marginBottom",kf="overflowX",Pf="overflowY",Ju="width",Qu="height",Co="visible",Mr="hidden",Ga="scroll",oE=n=>{let t=String(n||"");return t?t[0].toUpperCase()+t.slice(1):""},$u=(n,t,e,i)=>{if(n&&t){let r=!0;return sn(e,s=>{let a=n[s],d=t[s];a!==d&&(r=!1)}),r}return!1},F_=(n,t)=>$u(n,t,["w","h"]),Nu=(n,t)=>$u(n,t,["x","y"]),sE=(n,t)=>$u(n,t,["t","r","b","l"]),dt=(n,...t)=>n.bind(0,...t),Fa=n=>{let t,e=n?If:Tf,i=n?O_:I_;return[r=>{i(t),t=e(()=>r(),Dr(n)?n():n)},()=>i(t)]},c_=n=>{let t=Dr(n)?n():n;if(Eo(t)){let e=t?If:Tf,i=t?O_:I_;return r=>{let s=e(()=>r(),t);return()=>{i(s)}}}return t&&t._},qu=(n,t)=>{let{p:e,v:i,S:r,m:s}=t||{},a,d,h,m,y,E=function(G){d&&d(),a&&a(),y=d=a=h=void 0,n.apply(this,G)},O=F=>s&&h?s(h,F):F,T=()=>{d&&E(O(m)||m)},S=function(){let G=ts(arguments),j=c_(e);if(j){let oe=c_(i),ee=O(G)||G,ye=E.bind(0,ee);d&&d(),r&&!y?(ye(),y=!0,d=j(()=>y=void 0)):(d=j(ye),oe&&!a&&(a=oe(T))),h=m=ee}else E(G)};return S.O=T,S},B_=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),kr=n=>n?Object.keys(n):[],jt=(n,t,e,i,r,s,a)=>{let d=[t,e,i,r,s,a];return(typeof n!="object"||Ku(n))&&!Dr(n)&&(n={}),sn(d,h=>{sn(h,(m,y)=>{let E=h[y];if(n===E)return!0;let O=Ar(E);if(E&&Hu(E)){let T=n[y],S=T;O&&!Ar(T)?S=[]:!O&&!Hu(T)&&(S={}),n[y]=jt(S,E)}else n[y]=O?E.slice():E})}),n},V_=(n,t)=>sn(jt({},n),(e,i,r)=>{e===void 0?delete r[i]:e&&Hu(e)&&(r[i]=V_(e))}),Df=n=>!kr(n).length,rc=()=>{},z_=(n,t,e)=>T_(n,iE(t,e)),Ns=n=>hf((Ar(n)?n:(n||"").split(" ")).filter(t=>t)),Lf=(n,t)=>n&&n.getAttribute(t),u_=(n,t)=>n&&n.hasAttribute(t),yo=(n,t,e)=>{sn(Ns(t),i=>{n&&n.setAttribute(i,String(e||""))})},Yr=(n,t)=>{sn(Ns(t),e=>n&&n.removeAttribute(e))},ed=(n,t)=>{let e=Ns(Lf(n,t)),i=dt(yo,n,t),r=(s,a)=>{let d=new Set(e);return sn(Ns(s),h=>{d[a](h)}),ts(d).join(" ")};return{$:s=>i(r(s,"delete")),C:s=>i(r(s,"add")),H:s=>{let a=Ns(s);return a.reduce((d,h)=>d&&e.includes(h),a.length>0)}}},H_=(n,t,e)=>(ed(n,t).$(e),dt(Rf,n,t,e)),Rf=(n,t,e)=>(ed(n,t).C(e),dt(H_,n,t,e)),Wu=(n,t,e,i)=>(i?Rf:H_)(n,t,e),Nf=(n,t,e)=>ed(n,t).H(e),G_=n=>ed(n,"class"),U_=(n,t)=>{G_(n).$(t)},Ff=(n,t)=>(G_(n).C(t),dt(U_,n,t)),q_=(n,t)=>{let e=t?Xu(t)&&t:document;return e?ts(e.querySelectorAll(n)):[]},aE=(n,t)=>{let e=t?Xu(t)&&t:document;return e&&e.querySelector(n)},mf=(n,t)=>Xu(n)&&n.matches(t),W_=n=>mf(n,"body"),gf=n=>n?ts(n.childNodes):[],oc=n=>n&&n.parentElement,Ba=(n,t)=>Xu(n)&&n.closest(t),_f=n=>document.activeElement,lE=(n,t,e)=>{let i=Ba(n,t),r=n&&aE(e,i),s=Ba(r,t)===i;return i&&r?i===n||r===n||s&&Ba(Ba(n,e),t)!==i:!1},Ua=n=>{sn(Af(n),t=>{let e=oc(t);t&&e&&e.removeChild(t)})},ki=(n,t)=>dt(Ua,n&&t&&sn(Af(t),e=>{e&&n.appendChild(e)})),j_,cE=()=>j_,uE=n=>{j_=n},za=n=>{let t=document.createElement("div");return yo(t,"class",n),t},Z_=n=>{let t=za(),e=cE(),i=n.trim();return t.innerHTML=e?e.createHTML(i):i,sn(gf(t),r=>Ua(r))},d_=(n,t)=>n.getPropertyValue(t)||n[t]||"",K_=n=>{let t=n||0;return isFinite(t)?t:0},Lu=n=>K_(parseFloat(n||"")),vf=n=>Math.round(n*1e4)/1e4,Y_=n=>`${vf(K_(n))}px`;function sc(n,t){n&&t&&sn(t,(e,i)=>{try{let r=n.style,s=Ku(e)||Yu(e)?"":Eo(e)?Y_(e):e;i.indexOf("--")===0?r.setProperty(i,s):r[i]=s}catch{}})}function Jr(n,t,e){let i=ac(t),r=i?"":{};if(n){let s=Pi.getComputedStyle(n,e)||n.style;r=i?d_(s,t):ts(t).reduce((a,d)=>(a[d]=d_(s,d),a),r)}return r}var p_=(n,t,e)=>{let i=t?`${t}-`:"",r=e?`-${e}`:"",s=`${i}top${r}`,a=`${i}right${r}`,d=`${i}bottom${r}`,h=`${i}left${r}`,m=Jr(n,[s,a,d,h]);return{t:Lu(m[s]),r:Lu(m[a]),b:Lu(m[d]),l:Lu(m[h])}},lf=(n,t)=>`translate${zu(n)?`(${n.x},${n.y})`:`${t?"X":"Y"}(${n})`}`,dE=n=>!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length),pE={w:0,h:0},td=(n,t)=>t?{w:t[`${n}Width`],h:t[`${n}Height`]}:pE,fE=n=>td("inner",n||Pi),Ha=dt(td,"offset"),X_=dt(td,"client"),ju=dt(td,"scroll"),Bf=n=>{let t=parseFloat(Jr(n,Ju))||0,e=parseFloat(Jr(n,Qu))||0;return{w:t-ff(t),h:e-ff(e)}},cf=n=>n.getBoundingClientRect(),hE=n=>!!n&&dE(n),yf=n=>!!(n&&(n[Qu]||n[Ju])),J_=(n,t)=>{let e=yf(n);return!yf(t)&&e},f_=(n,t,e,i)=>{sn(Ns(t),r=>{n&&n.removeEventListener(r,e,i)})},_n=(n,t,e,i)=>{var r;let s=(r=i&&i.T)!=null?r:!0,a=i&&i.I||!1,d=i&&i.A||!1,h={passive:s,capture:a};return dt(Ji,Ns(t).map(m=>{let y=d?E=>{f_(n,m,y,a),e&&e(E)}:e;return n&&n.addEventListener(m,y,h),dt(f_,n,m,y,a)}))},Q_=n=>n.stopPropagation(),bf=n=>n.preventDefault(),$_=n=>Q_(n)||bf(n),Xr=(n,t)=>{let{x:e,y:i}=Eo(t)?{x:t,y:t}:t||{};Eo(e)&&(n.scrollLeft=e),Eo(i)&&(n.scrollTop=i)},Xi=n=>({x:n.scrollLeft,y:n.scrollTop}),e0=()=>({D:{x:0,y:0},M:{x:0,y:0}}),mE=(n,t)=>{let{D:e,M:i}=n,{w:r,h:s}=t,a=(E,O,T)=>{let S=a_(E)*T,F=a_(O)*T;if(S===F){let G=Vu(E),j=Vu(O);F=G>j?0:F,S=G<j?0:S}return S=S===F?0:S,[S+0,F+0]},[d,h]=a(e.x,i.x,r),[m,y]=a(e.y,i.y,s);return{D:{x:d,y:m},M:{x:h,y}}},uf=({D:n,M:t})=>{let e=(i,r)=>i===0&&i<=r;return{x:e(n.x,t.x),y:e(n.y,t.y)}},h_=({D:n,M:t},e)=>{let i=(r,s,a)=>z_(0,1,(r-a)/(r-s)||0);return{x:i(n.x,t.x,e.x),y:i(n.y,t.y,e.y)}},Cf=n=>{n&&n.focus&&n.focus({preventScroll:!0})},m_=(n,t)=>{sn(Af(t),n)},Ef=n=>{let t=new Map,e=(s,a)=>{if(s){let d=t.get(s);m_(h=>{d&&d[h?"delete":"clear"](h)},a)}else t.forEach(d=>{d.clear()}),t.clear()},i=(s,a)=>{if(ac(s)){let m=t.get(s)||new Set;return t.set(s,m),m_(y=>{Dr(y)&&m.add(y)},a),dt(e,s,a)}Yu(a)&&a&&e();let d=kr(s),h=[];return sn(d,m=>{let y=s[m];y&&En(h,i(m,y))}),dt(Ji,h)},r=(s,a)=>{sn(ts(t.get(s)),d=>{a&&!Uu(a)?d.apply(0,a):d()})};return i(n||{}),[i,e,r]},t0={},n0={},gE=n=>{sn(n,t=>sn(t,(e,i)=>{t0[i]=t[i]}))},i0=(n,t,e)=>kr(n).map(i=>{let{static:r,instance:s}=n[i],[a,d,h]=e||[],m=e?s:r;if(m){let y=e?m(a,d,t):m(t);return(h||n0)[i]=y}}),lc=n=>n0[n],_E="__osOptionsValidationPlugin",qa="data-overlayscrollbars",Fu="os-environment",Ru=`${Fu}-scrollbar-hidden`,df=`${qa}-initialize`,Bu="noClipping",g_=`${qa}-body`,es=qa,vE="host",bo=`${qa}-viewport`,yE=kf,bE=Pf,CE="arrange",r0="measuring",EE="scrolling",o0="scrollbarHidden",xE="noContent",xf=`${qa}-padding`,__=`${qa}-content`,Vf="os-size-observer",wE=`${Vf}-appear`,zf=`${Vf}-listener`,DP=`${zf}-scroll`,SE=`${zf}-item`,LP=`${SE}-final`,TE="os-trinsic-observer",IE="os-theme-none",Qi="os-scrollbar",OE=`${Qi}-rtl`,ME=`${Qi}-horizontal`,AE=`${Qi}-vertical`,s0=`${Qi}-track`,Hf=`${Qi}-handle`,kE=`${Qi}-visible`,PE=`${Qi}-cornerless`,v_=`${Qi}-interaction`,y_=`${Qi}-unusable`,wf=`${Qi}-auto-hide`,b_=`${wf}-hidden`,C_=`${Qi}-wheel`,DE=`${s0}-interactive`,LE=`${Hf}-interactive`,RE="__osSizeObserverPlugin";var NE=(n,t)=>{let{k:e}=t,[i,r]=n("showNativeOverlaidScrollbars");return[i&&e.x&&e.y,r]},Va=n=>n.indexOf(Co)===0,FE=n=>n.replace(`${Co}-`,""),Sf=(n,t)=>{if(n==="auto")return t?Ga:Mr;let e=n||Mr;return[Mr,Ga,Co].includes(e)?e:Mr},BE=(n,t)=>{let{overflowX:e,overflowY:i}=Jr(n,[kf,Pf]);return{x:Sf(e,t.x),y:Sf(i,t.y)}},a0="__osScrollbarsHidingPlugin";var VE="__osClickScrollPlugin";var E_=n=>JSON.stringify(n,(t,e)=>{if(Dr(e))throw 0;return e}),x_=(n,t)=>n?`${t}`.split(".").reduce((e,i)=>e&&B_(e,i)?e[i]:void 0,n):void 0,zE={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},l0=(n,t)=>{let e={},i=ic(kr(t),kr(n));return sn(i,r=>{let s=n[r],a=t[r];if(zu(s)&&zu(a))jt(e[r]={},l0(s,a)),Df(e[r])&&delete e[r];else if(B_(t,r)&&a!==s){let d=!0;if(Ar(s)||Ar(a))try{E_(s)===E_(a)&&(d=!1)}catch{}d&&(e[r]=a)}}),e},w_=(n,t,e)=>i=>[x_(n,i),e||x_(t,i)!==void 0],c0,HE=()=>c0,GE=n=>{c0=n},pf,UE=()=>{let n=(ee,ye,Ae)=>{ki(document.body,ee),ki(document.body,ee);let Ze=X_(ee),je=Ha(ee),se=Bf(ye);return Ae&&Ua(ee),{x:je.h-Ze.h+se.h,y:je.w-Ze.w+se.w}},t=ee=>{let ye=!1,Ae=Ff(ee,Ru);try{ye=Jr(ee,"scrollbar-width")==="none"||Jr(ee,"display","::-webkit-scrollbar")==="none"}catch{}return Ae(),ye},e=`.${Fu}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${Fu} div{width:200%;height:200%;margin:10px 0}.${Ru}{scrollbar-width:none!important}.${Ru}::-webkit-scrollbar,.${Ru}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,r=Z_(`<div class="${Fu}"><div></div><style>${e}</style></div>`)[0],s=r.firstChild,a=r.lastChild,d=HE();d&&(a.nonce=d);let[h,,m]=Ef(),[y,E]=Yi({o:n(r,s),i:Nu},dt(n,r,s,!0)),[O]=E(),T=t(r),S={x:O.x===0,y:O.y===0},F={elements:{host:null,padding:!T,viewport:ee=>T&&W_(ee)&&ee,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},G=jt({},zE),j=dt(jt,{},G),oe=dt(jt,{},F),ve={P:O,k:S,U:T,J:!!nc,G:dt(h,"r"),K:oe,Z:ee=>jt(F,ee)&&oe(),tt:j,nt:ee=>jt(G,ee)&&j(),ot:jt({},F),st:jt({},G)};if(Yr(r,"style"),Ua(r),_n(Pi,"resize",()=>{m("r",[])}),Dr(Pi.matchMedia)&&!T&&(!S.x||!S.y)){let ee=ye=>{let Ae=Pi.matchMedia(`(resolution: ${Pi.devicePixelRatio}dppx)`);_n(Ae,"change",()=>{ye(),ee(ye)},{A:!0})};ee(()=>{let[ye,Ae]=y();jt(ve.P,ye),m("r",[Ae])})}return ve},Qr=()=>(pf||(pf=UE()),pf),qE=(n,t,e)=>{let i=!1,r=e?new WeakMap:!1,s=()=>{i=!0},a=d=>{if(r&&e){let h=e.map(m=>{let[y,E]=m||[];return[E&&y?(d||q_)(y,n):[],E]});sn(h,m=>sn(m[0],y=>{let E=m[1],O=r.get(y)||[];if(n.contains(y)&&E){let S=_n(y,E,F=>{i?(S(),r.delete(y)):t(F)});r.set(y,En(O,S))}else Ji(O),r.delete(y)}))}};return a(),[s,a]},S_=(n,t,e,i)=>{let r=!1,{et:s,ct:a,rt:d,it:h,lt:m,ut:y}=i||{},E=qu(()=>r&&e(!0),{p:33,v:99}),[O,T]=qE(n,E,d),S=s||[],F=a||[],G=ic(S,F),j=(ve,ee)=>{if(!Uu(ee)){let ye=m||rc,Ae=y||rc,Ze=[],je=[],se=!1,ge=!1;if(sn(ee,Le=>{let{attributeName:Ie,target:et,type:Qe,oldValue:pt,addedNodes:Pe,removedNodes:Et}=Le,ke=Qe==="attributes",De=Qe==="childList",vt=n===et,He=ke&&Ie,de=He&&Lf(et,Ie||""),J=ac(de)?de:null,ae=He&&pt!==J,me=M_(F,Ie)&&ae;if(t&&(De||!vt)){let ie=ke&&ae,Ge=ie&&h&&mf(et,h),st=(Ge?!ye(et,Ie,pt,J):!ke||ie)&&!Ae(Le,!!Ge,n,i);sn(Pe,ut=>En(Ze,ut)),sn(Et,ut=>En(Ze,ut)),ge=ge||st}!t&&vt&&ae&&!ye(et,Ie,pt,J)&&(En(je,Ie),se=se||me)}),T(Le=>hf(Ze).reduce((Ie,et)=>(En(Ie,q_(Le,et)),mf(et,Le)?En(Ie,et):Ie),[])),t)return!ve&&ge&&e(!1),[!1];if(!Uu(je)||se){let Le=[hf(je),se];return ve||e.apply(0,Le),Le}}},oe=new rE(dt(j,!1));return[()=>(oe.observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:G,subtree:t,childList:t,characterData:t}),r=!0,()=>{r&&(O(),oe.disconnect(),r=!1)}),()=>{if(r)return E.O(),j(!0,oe.takeRecords())}]},Rs=null,u0=(n,t,e)=>{let{ft:i}=e||{},r=lc(RE),[s]=Yi({o:!1,u:!0});return()=>{let a=[],h=Z_(`<div class="${Vf}"><div class="${zf}"></div></div>`)[0],m=h.firstChild,y=E=>{let O=Ar(E)&&!Uu(E),T=!1,S=!1;if(O){let F=E[0],[G,,j]=s(F.contentRect),oe=yf(G);S=J_(G,j),T=!S&&!oe}else S=E===!0;T||t({_t:!0,ft:S})};if(Na){if(!Yu(Rs)){let S=new Na(rc);S.observe(n,{get box(){Rs=!0}}),Rs=Rs||!1,S.disconnect()}let E=qu(y,{p:0,v:0}),O=S=>E(S),T=new Na(O);if(T.observe(Rs?n:m),En(a,[()=>{T.disconnect()},!Rs&&ki(n,h)]),Rs){let S=new Na(O);S.observe(n,{box:"border-box"}),En(a,()=>S.disconnect())}}else if(r){let[E,O]=r(m,y,i);En(a,ic([Ff(h,wE),_n(h,"animationstart",E),ki(n,h)],O))}else return rc;return dt(Ji,a)}},WE=(n,t)=>{let e,i=h=>h.h===0||h.isIntersecting||h.intersectionRatio>0,r=za(TE),[s]=Yi({o:!1}),a=(h,m)=>{if(h){let y=s(i(h)),[,E]=y;return E&&!m&&t(y)&&[y]}},d=(h,m)=>a(m.pop(),h);return[()=>{let h=[];if(l_)e=new l_(dt(d,!1),{root:n}),e.observe(r),En(h,()=>{e.disconnect()});else{let m=()=>{let y=Ha(r);a(y)};En(h,u0(r,m)()),m()}return dt(Ji,En(h,ki(n,r)))},()=>e&&d(!0,e.takeRecords())]},jE=(n,t,e,i)=>{let r,s,a,d,h,m,y=`[${es}]`,E=`[${bo}]`,O=["id","class","style","open","wrap","cols","rows"],{dt:T,vt:S,L:F,gt:G,ht:j,V:oe,bt:ve,wt:ee,yt:ye,St:Ae}=n,Ze=me=>Jr(me,"direction")==="rtl",je={Ot:!1,B:Ze(T)},se=Qr(),ge=lc(a0),[Le]=Yi({i:F_,o:{w:0,h:0}},()=>{let me=ge&&ge.R(n,t,je,se,e).Y,Ge=!(ve&&oe)&&Nf(S,es,Bu),Oe=!oe&&ee(CE),st=Oe&&Xi(G),ut=st&&Ae(),Dt=ye(r0,Ge),gt=Oe&&me&&me(),Zt=ju(F),at=Bf(F);return gt&&gt(),Xr(G,st),ut&&ut(),Ge&&Dt(),{w:Zt.w+at.w,h:Zt.h+at.h}}),Ie=qu(i,{p:()=>r,v:()=>s,m(me,ie){let[Ge]=me,[Oe]=ie;return[ic(kr(Ge),kr(Oe)).reduce((st,ut)=>(st[ut]=Ge[ut]||Oe[ut],st),{})]}}),et=me=>{let ie=Ze(T);jt(me,{$t:m!==ie}),jt(je,{B:ie}),m=ie},Qe=(me,ie)=>{let[Ge,Oe]=me,st={Ct:Oe};return jt(je,{Ot:Ge}),ie||i(st),st},pt=({_t:me,ft:ie})=>{let Oe=!(me&&!ie)&&se.U?Ie:i,st={_t:me||ie,ft:ie};et(st),Oe(st)},Pe=(me,ie)=>{let[,Ge]=Le(),Oe={xt:Ge};return et(Oe),Ge&&!ie&&(me?i:Ie)(Oe),Oe},Et=(me,ie,Ge)=>{let Oe={Ht:ie};return et(Oe),ie&&!Ge&&Ie(Oe),Oe},[ke,De]=j?WE(S,Qe):[],vt=!oe&&u0(S,pt,{ft:!0}),[He,de]=S_(S,!1,Et,{ct:O,et:O}),J=oe&&Na&&new Na(me=>{let ie=me[me.length-1].contentRect;pt({_t:!0,ft:J_(ie,h)}),h=ie}),ae=qu(()=>{let[,me]=Le();i({xt:me})},{p:222,S:!0});return[()=>{J&&J.observe(S);let me=vt&&vt(),ie=ke&&ke(),Ge=He(),Oe=se.G(st=>{st?Ie({Et:st}):ae()});return()=>{J&&J.disconnect(),me&&me(),ie&&ie(),d&&d(),Ge(),Oe()}},({zt:me,Tt:ie,It:Ge})=>{let Oe={},[st]=me("update.ignoreMutation"),[ut,Dt]=me("update.attributes"),[gt,Zt]=me("update.elementEvents"),[at,Yt]=me("update.debounce"),pn=Zt||Dt,fn=ie||Ge,Ot=zt=>Dr(st)&&st(zt);if(pn){a&&a(),d&&d();let[zt,Bt]=S_(j||F,!0,Pe,{et:ic(O,ut||[]),rt:gt,it:y,ut:(Xt,xt)=>{let{target:ft,attributeName:qt}=Xt;return(!xt&&qt&&!oe?lE(ft,y,E):!1)||!!Ba(ft,`.${Qi}`)||!!Ot(Xt)}});d=zt(),a=Bt}if(Yt)if(Ie.O(),Ar(at)){let zt=at[0],Bt=at[1];r=Eo(zt)&&zt,s=Eo(Bt)&&Bt}else Eo(at)?(r=at,s=!1):(r=!1,s=!1);if(fn){let zt=de(),Bt=De&&De(),Xt=a&&a();zt&&jt(Oe,Et(zt[0],zt[1],fn)),Bt&&jt(Oe,Qe(Bt[0],fn)),Xt&&jt(Oe,Pe(Xt[0],fn))}return et(Oe),Oe},je]},d0=(n,t)=>Dr(t)?t.apply(0,n):t,ZE=(n,t,e,i)=>{let r=Of(i)?e:i;return d0(n,r)||t.apply(0,n)},p0=(n,t,e,i)=>{let r=Of(i)?e:i,s=d0(n,r);return!!s&&(Gu(s)?s:t.apply(0,n))},KE=(n,t)=>{let{nativeScrollbarsOverlaid:e,body:i}=t||{},{k:r,U:s,K:a}=Qr(),{nativeScrollbarsOverlaid:d,body:h}=a().cancel,m=e??d,y=Of(i)?h:i,E=(r.x||r.y)&&m,O=n&&(Ku(y)?!s:y);return!!E||!!O},YE=(n,t,e,i)=>{let r="--os-viewport-percent",s="--os-scroll-percent",a="--os-scroll-direction",{K:d}=Qr(),{scrollbars:h}=d(),{slot:m}=h,{dt:y,vt:E,L:O,At:T,gt:S,bt:F,V:G}=t,{scrollbars:j}=T?{}:n,{slot:oe}=j||{},ve=[],ee=[],ye=[],Ae=p0([y,E,O],()=>G&&F?y:E,m,oe),Ze=He=>{if(nc){let de=null,J=[],ae=new nc({source:S,axis:He}),me=()=>{de&&de.cancel(),de=null};return{kt:Ge=>{let{Dt:Oe}=e,st=uf(Oe)[He],ut=He==="x",Dt=[lf(0,ut),lf(`calc(100cq${ut?"w":"h"} + -100%)`,ut)],gt=st?Dt:Dt.reverse();return J[0]===gt[0]&&J[1]===gt[1]||(me(),J=gt,de=Ge.Mt.animate({clear:["left"],transform:gt},{timeline:ae})),me}}}},je={x:Ze("x"),y:Ze("y")},se=()=>{let{Rt:He,Vt:de}=e,J=(ae,me)=>z_(0,1,ae/(ae+me)||0);return{x:J(de.x,He.x),y:J(de.y,He.y)}},ge=(He,de,J)=>{let ae=J?Ff:U_;sn(He,me=>{ae(me.Lt,de)})},Le=(He,de)=>{sn(He,J=>{let[ae,me]=de(J);sc(ae,me)})},Ie=(He,de,J)=>{let ae=Yu(J),me=ae?J:!0,ie=ae?!J:!0;me&&ge(ee,He,de),ie&&ge(ye,He,de)},et=()=>{let He=se(),de=J=>ae=>[ae.Lt,{[r]:vf(J)+""}];Le(ee,de(He.x)),Le(ye,de(He.y))},Qe=()=>{if(!nc){let{Dt:He}=e,de=h_(He,Xi(S)),J=ae=>me=>[me.Lt,{[s]:vf(ae)+""}];Le(ee,J(de.x)),Le(ye,J(de.y))}},pt=()=>{let{Dt:He}=e,de=uf(He),J=ae=>me=>[me.Lt,{[a]:ae?"0":"1"}];Le(ee,J(de.x)),Le(ye,J(de.y)),nc&&(ee.forEach(je.x.kt),ye.forEach(je.y.kt))},Pe=()=>{if(G&&!F){let{Rt:He,Dt:de}=e,J=uf(de),ae=h_(de,Xi(S)),me=ie=>{let{Lt:Ge}=ie,Oe=oc(Ge)===O&&Ge,st=(ut,Dt,gt)=>{let Zt=Dt*ut;return Y_(gt?Zt:-Zt)};return[Oe,Oe&&{transform:lf({x:st(ae.x,He.x,J.x),y:st(ae.y,He.y,J.y)})}]};Le(ee,me),Le(ye,me)}},Et=He=>{let de=He?"x":"y",ae=za(`${Qi} ${He?ME:AE}`),me=za(s0),ie=za(Hf),Ge={Lt:ae,Ut:me,Mt:ie},Oe=je[de];return En(He?ee:ye,Ge),En(ve,[ki(ae,me),ki(me,ie),dt(Ua,ae),Oe&&Oe.kt(Ge),i(Ge,Ie,He)]),Ge},ke=dt(Et,!0),De=dt(Et,!1),vt=()=>(ki(Ae,ee[0].Lt),ki(Ae,ye[0].Lt),dt(Ji,ve));return ke(),De(),[{Pt:et,Nt:Qe,qt:pt,Bt:Pe,Ft:Ie,jt:{Xt:ee,Yt:ke,Wt:dt(Le,ee)},Jt:{Xt:ye,Yt:De,Wt:dt(Le,ye)}},vt]},XE=(n,t,e,i)=>(r,s,a)=>{let{vt:d,L:h,V:m,gt:y,Gt:E,St:O}=t,{Lt:T,Ut:S,Mt:F}=r,[G,j]=Fa(333),[oe,ve]=Fa(444),ee=Ze=>{Dr(y.scrollBy)&&y.scrollBy({behavior:"smooth",left:Ze.x,top:Ze.y})},ye=()=>{let Ze="pointerup pointercancel lostpointercapture",je=`client${a?"X":"Y"}`,se=a?Ju:Qu,ge=a?"left":"top",Le=a?"w":"h",Ie=a?"x":"y",et=(pt,Pe)=>Et=>{let{Rt:ke}=e,De=Ha(S)[Le]-Ha(F)[Le],He=Pe*Et/De*ke[Ie];Xr(y,{[Ie]:pt+He})},Qe=[];return _n(S,"pointerdown",pt=>{let Pe=Ba(pt.target,`.${Hf}`)===F,Et=Pe?F:S,ke=n.scrollbars,De=ke[Pe?"dragScroll":"clickScroll"],{button:vt,isPrimary:He,pointerType:de}=pt,{pointers:J}=ke;if(vt===0&&He&&De&&(J||[]).includes(de)){Ji(Qe),ve();let me=!Pe&&(pt.shiftKey||De==="instant"),ie=dt(cf,F),Ge=dt(cf,S),Oe=(xt,ft)=>(xt||ie())[ge]-(ft||Ge())[ge],st=ff(cf(y)[se])/Ha(y)[Le]||1,ut=et(Xi(y)[Ie],1/st),Dt=pt[je],gt=ie(),Zt=Ge(),at=gt[se],Yt=Oe(gt,Zt)+at/2,pn=Dt-Zt[ge],fn=Pe?0:pn-Yt,Ot=xt=>{Ji(Xt),Et.releasePointerCapture(xt.pointerId)},zt=Pe||me,Bt=O(),Xt=[_n(E,Ze,Ot),_n(E,"selectstart",xt=>bf(xt),{T:!1}),_n(S,Ze,Ot),zt&&_n(S,"pointermove",xt=>ut(fn+(xt[je]-Dt))),zt&&(()=>{let xt=Xi(y);Bt();let ft=Xi(y),qt={x:ft.x-xt.x,y:ft.y-xt.y};(Vu(qt.x)>3||Vu(qt.y)>3)&&(O(),Xr(y,xt),ee(qt),oe(Bt))})];if(Et.setPointerCapture(pt.pointerId),me)ut(fn);else if(!Pe){let xt=lc(VE);if(xt){let ft=xt(ut,fn,at,qt=>{qt?Bt():En(Xt,Bt)});En(Xt,ft),En(Qe,dt(ft,!0))}}}})},Ae=!0;return dt(Ji,[_n(F,"pointermove pointerleave",i),_n(T,"pointerenter",()=>{s(v_,!0)}),_n(T,"pointerleave pointercancel",()=>{s(v_,!1)}),!m&&_n(T,"mousedown",()=>{let Ze=_f();(u_(Ze,bo)||u_(Ze,es)||Ze===document.body)&&If(dt(Cf,h),25)}),_n(T,"wheel",Ze=>{let{deltaX:je,deltaY:se,deltaMode:ge}=Ze;Ae&&ge===0&&oc(T)===d&&ee({x:je,y:se}),Ae=!1,s(C_,!0),G(()=>{Ae=!0,s(C_)}),bf(Ze)},{T:!1,I:!0}),_n(T,"pointerdown",()=>{let Ze=_n(E,"click",se=>{je(),$_(se)},{A:!0,I:!0,T:!1}),je=_n(E,"pointerup pointercancel",()=>{je(),setTimeout(Ze,150)},{I:!0,T:!0})},{I:!0,T:!0}),ye(),j,ve])},JE=(n,t,e,i,r,s)=>{let a,d,h,m,y,E=rc,O=0,T=["mouse","pen"],S=de=>T.includes(de.pointerType),[F,G]=Fa(),[j,oe]=Fa(100),[ve,ee]=Fa(100),[ye,Ae]=Fa(()=>O),[Ze,je]=YE(n,r,i,XE(t,r,i,de=>S(de)&&ke())),{vt:se,Kt:ge,bt:Le}=r,{Ft:Ie,Pt:et,Nt:Qe,qt:pt,Bt:Pe}=Ze,Et=(de,J)=>{if(Ae(),de)Ie(b_);else{let ae=dt(Ie,b_,!0);O>0&&!J?ye(ae):ae()}},ke=()=>{(h?!a:!m)&&(Et(!0),j(()=>{Et(!1)}))},De=de=>{Ie(wf,de,!0),Ie(wf,de,!1)},vt=de=>{S(de)&&(a=h,h&&Et(!0))},He=[Ae,oe,ee,G,()=>E(),_n(se,"pointerover",vt,{A:!0}),_n(se,"pointerenter",vt),_n(se,"pointerleave",de=>{S(de)&&(a=!1,h&&Et(!1))}),_n(se,"pointermove",de=>{S(de)&&d&&ke()}),_n(ge,"scroll",de=>{F(()=>{Qe(),ke()}),s(de),Pe()})];return[()=>dt(Ji,En(He,je())),({zt:de,It:J,Qt:ae,Zt:me})=>{let{tn:ie,nn:Ge,sn:Oe,en:st}=me||{},{$t:ut,ft:Dt}=ae||{},{B:gt}=e,{k:Zt}=Qr(),{cn:at,j:Yt}=i,[pn,fn]=de("showNativeOverlaidScrollbars"),[Ot,zt]=de("scrollbars.theme"),[Bt,Xt]=de("scrollbars.visibility"),[xt,ft]=de("scrollbars.autoHide"),[qt,bi]=de("scrollbars.autoHideSuspend"),[Fi]=de("scrollbars.autoHideDelay"),[pr,fr]=de("scrollbars.dragScroll"),[Bi,Jn]=de("scrollbars.clickScroll"),[At,Ci]=de("overflow"),li=Dt&&!J,so=Yt.x||Yt.y,Vi=ie||Ge||st||ut||J,Fr=Oe||Xt||Ci,Fn=pn&&Zt.x&&Zt.y,nr=(zi,ir,Ei)=>{let Br=zi.includes(Ga)&&(Bt===Co||Bt==="auto"&&ir===Ga);return Ie(kE,Br,Ei),Br};if(O=Fi,li&&(qt&&so?(De(!1),E(),ve(()=>{E=_n(ge,"scroll",dt(De,!0),{A:!0})})):De(!0)),fn&&Ie(IE,Fn),zt&&(Ie(y),Ie(Ot,!0),y=Ot),bi&&!qt&&De(!0),ft&&(d=xt==="move",h=xt==="leave",m=xt==="never",Et(m,!0)),fr&&Ie(LE,pr),Jn&&Ie(DE,!!Bi),Fr){let zi=nr(At.x,at.x,!0),ir=nr(At.y,at.y,!1);Ie(PE,!(zi&&ir))}Vi&&(Qe(),et(),Pe(),st&&pt(),Ie(y_,!Yt.x,!0),Ie(y_,!Yt.y,!1),Ie(OE,gt&&!Le))},{},Ze]},QE=n=>{let t=Qr(),{K:e,U:i}=t,{elements:r}=e(),{padding:s,viewport:a,content:d}=r,h=Gu(n),m=h?{}:n,{elements:y}=m,{padding:E,viewport:O,content:T}=y||{},S=h?n:m.target,F=W_(S),G=S.ownerDocument,j=G.documentElement,oe=()=>G.defaultView||Pi,ve=dt(ZE,[S]),ee=dt(p0,[S]),ye=dt(za,""),Ae=dt(ve,ye,a),Ze=dt(ee,ye,d),je=at=>{let Yt=Ha(at),pn=ju(at),fn=Jr(at,kf),Ot=Jr(at,Pf);return pn.w-Yt.w>0&&!Va(fn)||pn.h-Yt.h>0&&!Va(Ot)},se=Ae(O),ge=se===S,Le=ge&&F,Ie=!ge&&Ze(T),et=!ge&&se===Ie,Qe=Le?j:se,pt=Le?Qe:S,Pe=!ge&&ee(ye,s,E),Et=!et&&Ie,ke=[Et,Qe,Pe,pt].map(at=>Gu(at)&&!oc(at)&&at),De=at=>at&&M_(ke,at),vt=!De(Qe)&&je(Qe)?Qe:S,He=Le?j:Qe,J={dt:S,vt:pt,L:Qe,rn:Pe,ht:Et,gt:He,Kt:Le?G:Qe,ln:F?j:vt,Gt:G,bt:F,At:h,V:ge,an:oe,wt:at=>Nf(Qe,bo,at),yt:(at,Yt)=>Wu(Qe,bo,at,Yt),St:()=>Wu(He,bo,EE,!0)},{dt:ae,vt:me,rn:ie,L:Ge,ht:Oe}=J,st=[()=>{Yr(me,[es,df]),Yr(ae,df),F&&Yr(j,[df,es])}],ut=gf([Oe,Ge,ie,me,ae].find(at=>at&&!De(at))),Dt=Le?ae:Oe||Ge,gt=dt(Ji,st);return[J,()=>{let at=oe(),Yt=_f(),pn=Xt=>{ki(oc(Xt),gf(Xt)),Ua(Xt)},fn=Xt=>_n(Xt,"focusin focusout focus blur",$_,{I:!0,T:!1}),Ot="tabindex",zt=Lf(Ge,Ot),Bt=fn(Yt);return yo(me,es,ge?"":vE),yo(ie,xf,""),yo(Ge,bo,""),yo(Oe,__,""),ge||(yo(Ge,Ot,zt||"-1"),F&&yo(j,g_,"")),ki(Dt,ut),ki(me,ie),ki(ie||me,!ge&&Ge),ki(Ge,Oe),En(st,[Bt,()=>{let Xt=_f(),xt=De(Ge),ft=xt&&Xt===Ge?ae:Xt,qt=fn(ft);Yr(ie,xf),Yr(Oe,__),Yr(Ge,bo),F&&Yr(j,g_),zt?yo(Ge,Ot,zt):Yr(Ge,Ot),De(Oe)&&pn(Oe),xt&&pn(Ge),De(ie)&&pn(ie),Cf(ft),qt()}]),i&&!ge&&(Rf(Ge,bo,o0),En(st,dt(Yr,Ge,bo))),Cf(!ge&&F&&Yt===ae&&at.top===at?Ge:Yt),Bt(),ut=0,gt},gt]},$E=({ht:n})=>({Qt:t,un:e,It:i})=>{let{Ct:r}=t||{},{Ot:s}=e;n&&(r||i)&&sc(n,{[Qu]:s&&"100%"})},ex=({vt:n,rn:t,L:e,V:i},r)=>{let[s,a]=Yi({i:sE,o:p_()},dt(p_,n,"padding",""));return({zt:d,Qt:h,un:m,It:y})=>{let[E,O]=a(y),{U:T}=Qr(),{_t:S,xt:F,$t:G}=h||{},{B:j}=m,[oe,ve]=d("paddingAbsolute");(S||O||(y||F))&&([E,O]=s(y));let ye=!i&&(ve||G||O);if(ye){let Ae=!oe||!t&&!T,Ze=E.r+E.l,je=E.t+E.b,se={[R_]:Ae&&!j?-Ze:0,[N_]:Ae?-je:0,[L_]:Ae&&j?-Ze:0,top:Ae?-E.t:0,right:Ae?j?-E.r:"auto":0,left:Ae?j?"auto":-E.l:0,[Ju]:Ae&&`calc(100% + ${Ze}px)`},ge={[A_]:Ae?E.t:0,[k_]:Ae?E.r:0,[D_]:Ae?E.b:0,[P_]:Ae?E.l:0};sc(t||e,se),sc(e,ge),jt(r,{rn:E,fn:!Ae,F:t?ge:jt({},se,ge)})}return{_n:ye}}},tx=(n,t)=>{let e=Qr(),{vt:i,rn:r,L:s,V:a,Kt:d,gt:h,bt:m,yt:y,an:E}=n,{U:O}=e,T=m&&a,S=dt(T_,0),F={display:()=>!1,direction:J=>J!=="ltr",flexDirection:J=>J.endsWith("-reverse"),writingMode:J=>J!=="horizontal-tb"},G=kr(F),j={i:F_,o:{w:0,h:0}},oe={i:Nu,o:{}},ve=J=>{y(r0,!T&&J)},ee=J=>{if(!G.some(gt=>{let Zt=J[gt];return Zt&&F[gt](Zt)}))return{D:{x:0,y:0},M:{x:1,y:1}};ve(!0);let me=Xi(h),ie=y(xE,!0),Ge=_n(d,Ga,gt=>{let Zt=Xi(h);gt.isTrusted&&Zt.x===me.x&&Zt.y===me.y&&Q_(gt)},{I:!0,A:!0});Xr(h,{x:0,y:0}),ie();let Oe=Xi(h),st=ju(h);Xr(h,{x:st.w,y:st.h});let ut=Xi(h);Xr(h,{x:ut.x-Oe.x<1&&-st.w,y:ut.y-Oe.y<1&&-st.h});let Dt=Xi(h);return Xr(h,me),Tf(()=>Ge()),{D:Oe,M:Dt}},ye=(J,ae)=>{let me=Pi.devicePixelRatio%1!==0?1:0,ie={w:S(J.w-ae.w),h:S(J.h-ae.h)};return{w:ie.w>me?ie.w:0,h:ie.h>me?ie.h:0}},Ae=(J,ae)=>{let me=(ie,Ge,Oe,st)=>{let ut=ie===Co?Mr:FE(ie),Dt=Va(ie),gt=Va(Oe);return!Ge&&!st?Mr:Dt&&gt?Co:Dt?Ge&&st?ut:Ge?Co:Mr:Ge?ut:gt&&st?Co:Mr};return{x:me(ae.x,J.x,ae.y,J.y),y:me(ae.y,J.y,ae.x,J.x)}},Ze=J=>{let ae=ie=>[Co,Mr,Ga].map(Ge=>de(Sf(Ge),ie)),me=ae(!0).concat(ae()).join(" ");y(me),y(kr(J).map(ie=>de(J[ie],ie==="x")).join(" "),!0)},[je,se]=Yi(j,dt(Bf,s)),[ge,Le]=Yi(j,dt(ju,s)),[Ie,et]=Yi(j),[Qe]=Yi(oe),[pt,Pe]=Yi(j),[Et]=Yi(oe),[ke]=Yi({i:(J,ae)=>$u(J,ae,G),o:{}},()=>hE(s)?Jr(s,G):{}),[De,vt]=Yi({i:(J,ae)=>Nu(J.D,ae.D)&&Nu(J.M,ae.M),o:e0()}),He=lc(a0),de=(J,ae)=>`${ae?yE:bE}${oE(J)}`;return({zt:J,Qt:ae,un:me,It:ie},{_n:Ge})=>{let{_t:Oe,Ht:st,xt:ut,$t:Dt,ft:gt,Et:Zt}=ae||{},at=He&&He.R(n,t,me,e,J),{X:Yt,Y:pn,W:fn}=at||{},[Ot,zt]=NE(J,e),[Bt,Xt]=J("overflow"),xt=Va(Bt.x),ft=Va(Bt.y),qt=Oe||Ge||ut||Dt||Zt||zt,bi=se(ie),Fi=Le(ie),pr=et(ie),fr=Pe(ie);if(zt&&O&&y(o0,!Ot),qt){Nf(i,es,Bu)&&ve(!0);let Te=pn&&pn(),[xe]=bi=je(ie),[Je]=Fi=ge(ie),we=X_(s),Ce=T&&fE(E()),Ht={w:S(Je.w+xe.w),h:S(Je.h+xe.h)},Jt={w:S((Ce?Ce.w:we.w+S(we.w-Je.w))+xe.w),h:S((Ce?Ce.h:we.h+S(we.h-Je.h))+xe.h)};Te&&Te(),fr=pt(Jt),pr=Ie(ye(Ht,Jt),ie)}let[Bi,Jn]=fr,[At,Ci]=pr,[li,so]=Fi,[Vi,Fr]=bi,[Fn,nr]=Qe({x:At.w>0,y:At.h>0}),zi=xt&&ft&&(Fn.x||Fn.y)||xt&&Fn.x&&!Fn.y||ft&&Fn.y&&!Fn.x,ir=Ge||Dt||Zt||Fr||so||Jn||Ci||Xt||zt||qt||st&&T,[Ei,Br]=ke(ie),Do=Dt||gt||Br||nr||ie,[Vr,P]=Do?De(ee(Ei),ie):vt(),H=Ae(Fn,Bt);ve(!1),ir&&(Ze(H),H=BE(s,Fn),fn&&Yt&&(Yt(H,li,Vi),sc(s,fn(H))));let[W,ce]=Et(H);return Wu(i,es,Bu,zi),Wu(r,xf,Bu,zi),jt(t,{cn:W,Vt:{x:Bi.w,y:Bi.h},Rt:{x:At.w,y:At.h},j:Fn,Dt:mE(Vr,At)}),{sn:ce,tn:Jn,nn:Ci,en:P||Ci,dn:Do}}},nx=n=>{let[t,e,i]=QE(n),r={rn:{t:0,r:0,b:0,l:0},fn:!1,F:{[R_]:0,[N_]:0,[L_]:0,[A_]:0,[k_]:0,[D_]:0,[P_]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},cn:{x:Mr,y:Mr},j:{x:!1,y:!1},Dt:e0()},{dt:s,gt:a,V:d,St:h}=t,{U:m,k:y}=Qr(),E=!m&&(y.x||y.y),O=[$E(t),ex(t,r),tx(t,r)];return[e,T=>{let S={},G=E&&Xi(a),j=G&&h();return sn(O,oe=>{jt(S,oe(T,S)||{})}),Xr(a,G),j&&j(),d||Xr(s,0),S},r,t,i]},ix=(n,t,e,i,r)=>{let s=!1,a=w_(t,{}),[d,h,m,y,E]=nx(n),[O,T,S]=jE(y,m,a,ee=>{ve({},ee)}),[F,G,,j]=JE(n,t,S,m,y,r),oe=ee=>kr(ee).some(ye=>!!ee[ye]),ve=(ee,ye)=>{if(e())return!1;let{pn:Ae,It:Ze,Tt:je,vn:se}=ee,ge=Ae||{},Le=!!Ze||!s,Ie={zt:w_(t,ge,Le),pn:ge,It:Le};if(se)return G(Ie),!1;let et=ye||T(jt({},Ie,{Tt:je})),Qe=h(jt({},Ie,{un:S,Qt:et}));G(jt({},Ie,{Qt:et,Zt:Qe}));let pt=oe(et),Pe=oe(Qe),Et=pt||Pe||!Df(ge)||Le;return s=!0,Et&&i(ee,{Qt:et,Zt:Qe}),Et};return[()=>{let{ln:ee,gt:ye,St:Ae}=y,Ze=Xi(ee),je=[O(),d(),F()],se=Ae();return Xr(ye,Ze),se(),dt(Ji,je)},ve,()=>({gn:S,hn:m}),{bn:y,wn:j},E]},Gf=new WeakMap,rx=(n,t)=>{Gf.set(n,t)},ox=n=>{Gf.delete(n)},f0=n=>Gf.get(n),Pr=(n,t,e)=>{let{tt:i}=Qr(),r=Gu(n),s=r?n:n.target,a=f0(s);if(t&&!a){let d=!1,h=[],m={},y=ge=>{let Le=V_(ge),Ie=lc(_E);return Ie?Ie(Le,!0):Le},E=jt({},i(),y(t)),[O,T,S]=Ef(),[F,G,j]=Ef(e),oe=(ge,Le)=>{j(ge,Le),S(ge,Le)},[ve,ee,ye,Ae,Ze]=ix(n,E,()=>d,({pn:ge,It:Le},{Qt:Ie,Zt:et})=>{let{_t:Qe,$t:pt,Ct:Pe,xt:Et,Ht:ke,ft:De}=Ie,{tn:vt,nn:He,sn:de,en:J}=et;oe("updated",[se,{updateHints:{sizeChanged:!!Qe,directionChanged:!!pt,heightIntrinsicChanged:!!Pe,overflowEdgeChanged:!!vt,overflowAmountChanged:!!He,overflowStyleChanged:!!de,scrollCoordinatesChanged:!!J,contentMutation:!!Et,hostMutation:!!ke,appear:!!De},changedOptions:ge||{},force:!!Le}])},ge=>oe("scroll",[se,ge])),je=ge=>{ox(s),Ji(h),d=!0,oe("destroyed",[se,ge]),T(),G()},se={options(ge,Le){if(ge){let Ie=Le?i():{},et=l0(E,jt(Ie,y(ge)));Df(et)||(jt(E,et),ee({pn:et}))}return jt({},E)},on:F,off:(ge,Le)=>{ge&&Le&&G(ge,Le)},state(){let{gn:ge,hn:Le}=ye(),{B:Ie}=ge,{Vt:et,Rt:Qe,cn:pt,j:Pe,rn:Et,fn:ke,Dt:De}=Le;return jt({},{overflowEdge:et,overflowAmount:Qe,overflowStyle:pt,hasOverflow:Pe,scrollCoordinates:{start:De.D,end:De.M},padding:Et,paddingAbsolute:ke,directionRTL:Ie,destroyed:d})},elements(){let{dt:ge,vt:Le,rn:Ie,L:et,ht:Qe,gt:pt,Kt:Pe}=Ae.bn,{jt:Et,Jt:ke}=Ae.wn,De=He=>{let{Mt:de,Ut:J,Lt:ae}=He;return{scrollbar:ae,track:J,handle:de}},vt=He=>{let{Xt:de,Yt:J}=He,ae=De(de[0]);return jt({},ae,{clone:()=>{let me=De(J());return ee({vn:!0}),me}})};return jt({},{target:ge,host:Le,padding:Ie||et,viewport:et,content:Qe||et,scrollOffsetElement:pt,scrollEventElement:Pe,scrollbarHorizontal:vt(Et),scrollbarVertical:vt(ke)})},update:ge=>ee({It:ge,Tt:!0}),destroy:dt(je,!1),plugin:ge=>m[kr(ge)[0]]};return En(h,[Ze]),rx(s,se),i0(t0,Pr,[se,O,m]),KE(Ae.bn.bt,!r&&n.cancel)?(je(!0),se):(En(h,ve()),oe("initialized",[se]),se.update(),se)}return a};Pr.plugin=n=>{let t=Ar(n),e=t?n:[n],i=e.map(r=>i0(r,Pr)[0]);return gE(e),t?i:i[0]};Pr.valid=n=>{let t=n&&n.elements,e=Dr(t)&&t();return Hu(e)&&!!f0(e.target)};Pr.env=()=>{let{P:n,k:t,U:e,J:i,ot:r,st:s,K:a,Z:d,tt:h,nt:m}=Qr();return jt({},{scrollbarsSize:n,scrollbarsOverlaid:t,scrollbarsHiding:e,scrollTimeline:i,staticDefaultInitialization:r,staticDefaultOptions:s,getDefaultInitialization:a,setDefaultInitialization:d,getDefaultOptions:h,setDefaultOptions:m})};Pr.nonce=GE;Pr.trustedTypePolicy=uE;var h0=["content"],sx=["*"],ax=()=>{if(typeof window>"u"){let m=()=>{};return[m,m]}let n,t,e=window,i=typeof e.requestIdleCallback=="function",r=e.requestAnimationFrame,s=e.cancelAnimationFrame,a=i?e.requestIdleCallback:r,d=i?e.cancelIdleCallback:s,h=()=>{d(n),s(t)};return[(m,y)=>{h(),n=a(i?()=>{h(),t=r(m)}:m,typeof y=="object"?y:{timeout:2233})},h]},m0=(()=>{class n{constructor(e){this.ngZone=e,this.instanceRef=null;let[i,r]=ax();this.requestDefer=i,this.cancelDefer=r}osInitialize(e){this.ngZone.runOutsideAngular(()=>{let i=()=>{this.instanceRef=Pr(e,this.options||{},this.events||{})};this.defer?this.requestDefer(i,this.defer):i()})}osInstance(){return this.instanceRef}ngOnChanges(e){let i=e.options,r=e.events;if(i){let s=i.currentValue;this.options=s,Pr.valid(this.instanceRef)&&this.instanceRef.options(s||{},!0)}if(r){let s=r.currentValue;this.events=s,Pr.valid(this.instanceRef)&&this.instanceRef.on(s||{},!0)}}ngOnDestroy(){this.cancelDefer()}}return n.\u0275fac=function(e){return new(e||n)(Fe(Wr))},n.\u0275dir=Zr({type:n,selectors:[["","overlayScrollbars",""]],inputs:{options:"options",events:"events",defer:"defer"},standalone:!1,features:[An]}),n})(),lx=(n,t)=>Object.keys(n).reduce((e,i)=>{let r=n[i],s=t[i];return e[i]=[r,...(Array.isArray(s)?s:[s]).filter(Boolean)],e},{}),qP=(()=>{class n{constructor(e,i){this.ngZone=e,this.targetRef=i,this.onInitialized=new be,this.onUpdated=new be,this.onDestroyed=new be,this.onScroll=new be}osInstance(){return this.osDirective.osInstance()}getElement(){return this.targetRef.nativeElement}ngAfterViewInit(){let e=this.getElement(),i=this.contentRef.nativeElement;e&&i&&this.osDirective.osInitialize({target:e,elements:{viewport:i,content:i}})}ngOnDestroy(){this.osDirective?.osInstance()?.destroy()}mergeEvents(e){return lx({initialized:(...i)=>this.dispatchEventIfHasObservers(this.onInitialized,i),updated:(...i)=>this.dispatchEventIfHasObservers(this.onUpdated,i),destroyed:(...i)=>this.dispatchEventIfHasObservers(this.onDestroyed,i),scroll:(...i)=>this.dispatchEventIfHasObservers(this.onScroll,i)},e||{})}dispatchEventIfHasObservers(e,i){(e.observed||e.observers.length>0)&&this.ngZone.run(()=>e.emit(i))}}return n.\u0275fac=function(e){return new(e||n)(Fe(Wr),Fe(kn))},n.\u0275cmp=lt({type:n,selectors:[["overlay-scrollbars"],["","overlay-scrollbars",""]],viewQuery:function(e,i){if(e&1&&(ti(h0,5),ti(h0,5,m0)),e&2){let r;Hn(r=Gn())&&(i.contentRef=r.first),Hn(r=Gn())&&(i.osDirective=r.first)}},hostAttrs:["data-overlayscrollbars-initialize",""],inputs:{options:"options",events:"events",defer:"defer"},outputs:{onInitialized:"osInitialized",onUpdated:"osUpdated",onDestroyed:"osDestroyed",onScroll:"osScroll"},standalone:!1,ngContentSelectors:sx,decls:3,vars:3,consts:[["content",""],["overlayScrollbars","","data-overlayscrollbars-contents","",3,"options","events","defer"]],template:function(e,i){e&1&&(_o(),V(0,"div",1,0),wr(2),B()),e&2&&N("options",i.options)("events",i.mergeEvents(i.events))("defer",i.defer)},dependencies:[m0],encapsulation:2}),n})(),g0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jn({type:n}),n.\u0275inj=Wn({}),n})();var Wa=class n{class;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=lt({type:n,selectors:[["app-skeleton"]],inputs:{class:"class"},decls:2,vars:3,template:function(e,i){e&1&&(V(0,"div"),te(1,"\xA0"),B()),e&2&&zn("skeleton-box ",i.class,"")},encapsulation:2})};var dx=/[&<>"']/g,vD=RegExp(dx.source);function px(){return new Uf}var Uf=class{constructor(){this._selected=[]}get value(){return this._selected}select(t,e,i){if(t.selected=!0,(!t.children||!e&&i)&&this._selected.push(t),e)if(t.parent){let r=t.parent.children.length,s=t.parent.children.filter(a=>a.selected).length;t.parent.selected=r===s}else t.children&&(this._setChildrenSelectedState(t.children,!0),this._removeChildren(t),i&&this._activeChildren(t)?this._selected=[...this._selected.filter(r=>r.parent!==t),t]:this._selected=[...this._selected,...t.children.filter(r=>!r.disabled)])}unselect(t,e){if(this._selected=this._selected.filter(i=>i!==t),t.selected=!1,e)if(t.parent&&t.parent.selected){let i=t.parent.children;this._removeParent(t.parent),this._removeChildren(t.parent),this._selected.push(...i.filter(r=>r!==t&&!r.disabled)),t.parent.selected=!1}else t.children&&(this._setChildrenSelectedState(t.children,!1),this._removeChildren(t))}clear(t){this._selected=t?this._selected.filter(e=>e.disabled):[]}_setChildrenSelectedState(t,e){for(let i of t)i.disabled||(i.selected=e)}_removeChildren(t){this._selected=[...this._selected.filter(e=>e.parent!==t),...t.children.filter(e=>e.parent===t&&e.disabled&&e.selected)]}_removeParent(t){this._selected=this._selected.filter(e=>e!==t)}_activeChildren(t){return t.children.every(e=>!e.disabled||e.selected)}};var fx=new Aa("ng-select-selection-model");var nd=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=jn({type:n})}static{this.\u0275inj=Wn({providers:[{provide:fx,useValue:px}]})}}return n})();var gx=["searchSelectInput"],_x=["innerSelectSearch"],vx=[[["",8,"mat-select-search-custom-header-content"]],[["","ngxMatSelectSearchClear",""]],[["","ngxMatSelectNoEntriesFound",""]]],yx=[".mat-select-search-custom-header-content","[ngxMatSelectSearchClear]","[ngxMatSelectNoEntriesFound]"],bx=(n,t)=>({"mat-select-search-inner-multiple":n,"mat-select-search-inner-toggle-all":t});function Cx(n,t){if(n&1){let e=$e();V(0,"mat-checkbox",12),he("change",function(r){Q(e);let s=z();return $(s._emitSelectAllBooleanToParent(r.checked))}),B()}if(n&2){let e=z();N("color",e.matFormField==null?null:e.matFormField.color)("checked",e.toggleAllCheckboxChecked)("indeterminate",e.toggleAllCheckboxIndeterminate)("matTooltip",e.toggleAllCheckboxTooltipMessage)("matTooltipPosition",e.toggleAllCheckboxTooltipPosition)}}function Ex(n,t){n&1&&Be(0,"mat-spinner",13)}function xx(n,t){n&1&&wr(0,1,["*ngIf","clearIcon; else defaultIcon"])}function wx(n,t){if(n&1&&(V(0,"mat-icon",16),te(1),B()),n&2){let e=z(2);N("svgIcon",e.closeSvgIcon),D(),bt(" ",e.closeSvgIcon?null:e.closeIcon," ")}}function Sx(n,t){if(n&1){let e=$e();V(0,"button",14),he("click",function(){Q(e);let r=z();return $(r._reset(!0))}),_e(1,xx,1,0,"ng-content",15)(2,wx,2,2,"ng-template",null,2,Pa),B()}if(n&2){let e=Sr(3),i=z();D(),N("ngIf",i.clearIcon)("ngIfElse",e)}}function Tx(n,t){n&1&&wr(0,2,["*ngIf","noEntriesFound; else defaultNoEntriesFound"])}function Ix(n,t){if(n&1&&te(0),n&2){let e=z(2);Wt(e.noEntriesFoundLabel)}}function Ox(n,t){if(n&1&&(V(0,"div",17),_e(1,Tx,1,0,"ng-content",15)(2,Ix,1,1,"ng-template",null,3,Pa),B()),n&2){let e=Sr(3),i=z();D(),N("ngIf",i.noEntriesFound)("ngIfElse",e)}}var Mx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Zr({type:n,selectors:[["","ngxMatSelectSearchClear",""]],standalone:!1})}return n})(),Ax=["ariaLabel","clearSearchInput","closeIcon","closeSvgIcon","disableInitialFocus","disableScrollToActiveOnOptionsChanged","enableClearOnEscapePressed","hideClearSearchButton","noEntriesFoundLabel","placeholderLabel","preventHomeEndKeyPropagation","searching"],kx=new Aa("mat-selectsearch-default-options"),Px=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Zr({type:n,selectors:[["","ngxMatSelectNoEntriesFound",""]],standalone:!1})}return n})(),_0=(()=>{class n{matSelect;changeDetectorRef;_viewportRuler;matOption;matFormField;placeholderLabel="Suche";type="text";closeIcon="close";closeSvgIcon;noEntriesFoundLabel="Keine Optionen gefunden";clearSearchInput=!0;searching=!1;disableInitialFocus=!1;enableClearOnEscapePressed=!1;preventHomeEndKeyPropagation=!1;disableScrollToActiveOnOptionsChanged=!1;ariaLabel="dropdown search";showToggleAllCheckbox=!1;toggleAllCheckboxChecked=!1;toggleAllCheckboxIndeterminate=!1;toggleAllCheckboxTooltipMessage="";toggleAllCheckboxTooltipPosition="below";hideClearSearchButton=!1;alwaysRestoreSelectedOptionsMulti=!1;recreateValuesArray=!1;toggleAll=new be;searchSelectInput;innerSelectSearch;clearIcon;noEntriesFound;get value(){return this._formControl.value}_lastExternalInputValue;onTouched=e=>{};set _options(e){this._options$.next(e)}get _options(){return this._options$.getValue()}_options$=new vg(null);optionsList$=this._options$.pipe(of(e=>e?e.changes.pipe(bu(i=>i.toArray()),Tg(e.toArray())):ql(null)));optionsLength$=this.optionsList$.pipe(bu(e=>e?e.length:0));previousSelectedValues;_formControl=new Ir("",{nonNullable:!0});_showNoEntriesFound$=bg([this._formControl.valueChanges,this.optionsLength$]).pipe(bu(([e,i])=>!!(this.noEntriesFoundLabel&&e&&i===this.getOptionsLengthOffset())));_onDestroy=new Ds;activeDescendant;constructor(e,i,r,s,a,d){this.matSelect=e,this.changeDetectorRef=i,this._viewportRuler=r,this.matOption=s,this.matFormField=a,this.applyDefaultOptions(d)}applyDefaultOptions(e){if(e)for(let i of Ax)e.hasOwnProperty(i)&&(this[i]=e[i])}ngOnInit(){this.matOption?(this.matOption.disabled=!0,this.matOption._getHostElement().classList.add("contains-mat-select-search"),this.matOption._getHostElement().setAttribute("role","presentation")):console.error("<ngx-mat-select-search> must be placed inside a <mat-option> element"),this.matSelect.openedChange.pipe(wg(1),qr(this._onDestroy)).subscribe(e=>{e?(this.updateInputWidth(),this.disableInitialFocus||this._focus()):this.clearSearchInput&&this._reset()}),this.matSelect.openedChange.pipe(xg(1),of(e=>{this._options=this.matSelect.options;let i=this._options.toArray()[this.getOptionsLengthOffset()];return this._options.changes.pipe(sf(()=>{setTimeout(()=>{let r=this._options.toArray(),s=r[this.getOptionsLengthOffset()],a=this.matSelect._keyManager;a&&this.matSelect.panelOpen&&s&&((!i||!this.matSelect.compareWith(i.value,s.value)||!a.activeItem||!r.find(h=>this.matSelect.compareWith(h.value,a.activeItem?.value)))&&a.setActiveItem(this.getOptionsLengthOffset()),setTimeout(()=>{this.updateInputWidth()})),i=s})}))})).pipe(qr(this._onDestroy)).subscribe(),this._showNoEntriesFound$.pipe(qr(this._onDestroy)).subscribe(e=>{this.matOption&&(e?this.matOption._getHostElement().classList.add("mat-select-search-no-entries-found"):this.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"))}),this._viewportRuler.change().pipe(qr(this._onDestroy)).subscribe(()=>{this.matSelect.panelOpen&&this.updateInputWidth()}),this.initMultipleHandling(),this.optionsList$.pipe(qr(this._onDestroy)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}_emitSelectAllBooleanToParent(e){this.toggleAll.emit(e)}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}_isToggleAllCheckboxVisible(){return this.matSelect.multiple&&this.showToggleAllCheckbox}_handleKeydown(e){(e.key&&e.key.length===1||this.preventHomeEndKeyPropagation&&(e.key==="Home"||e.key==="End"))&&e.stopPropagation(),this.matSelect.multiple&&e.key&&e.key==="Enter"&&setTimeout(()=>this._focus()),this.enableClearOnEscapePressed&&e.key==="Escape"&&this.value&&(this._reset(!0),e.stopPropagation())}_handleKeyup(e){if(e.key==="ArrowUp"||e.key==="ArrowDown"){let i=this.matSelect._getAriaActiveDescendant(),r=this._options.toArray().findIndex(s=>s.id===i);r!==-1&&(this.unselectActiveDescendant(),this.activeDescendant=this._options.toArray()[r]._getHostElement(),this.activeDescendant.setAttribute("aria-selected","true"),this.searchSelectInput.nativeElement.setAttribute("aria-activedescendant",i))}}writeValue(e){this._lastExternalInputValue=e,this._formControl.setValue(e),this.changeDetectorRef.markForCheck()}onBlur(){this.unselectActiveDescendant(),this.onTouched()}registerOnChange(e){this._formControl.valueChanges.pipe(Cg(i=>i!==this._lastExternalInputValue),sf(()=>this._lastExternalInputValue=void 0),qr(this._onDestroy)).subscribe(e)}registerOnTouched(e){this.onTouched=e}_focus(){if(!this.searchSelectInput||!this.matSelect.panel)return;let e=this.matSelect.panel.nativeElement,i=e.scrollTop;this.searchSelectInput.nativeElement.focus(),e.scrollTop=i}_reset(e){this._formControl.setValue(""),e&&this._focus()}initMultipleHandling(){if(!this.matSelect.ngControl){this.matSelect.multiple&&console.error("the mat-select containing ngx-mat-select-search must have a ngModel or formControl directive when multiple=true");return}this.previousSelectedValues=this.matSelect.ngControl.value,this.matSelect.ngControl.valueChanges&&this.matSelect.ngControl.valueChanges.pipe(qr(this._onDestroy)).subscribe(e=>{let i=!1;if(this.matSelect.multiple&&(this.alwaysRestoreSelectedOptionsMulti||this._formControl.value&&this._formControl.value.length)&&this.previousSelectedValues&&Array.isArray(this.previousSelectedValues)){(!e||!Array.isArray(e))&&(e=[]);let r=this.matSelect.options.map(s=>s.value);this.previousSelectedValues.forEach(s=>{!e.some(a=>this.matSelect.compareWith(a,s))&&!r.some(a=>this.matSelect.compareWith(a,s))&&(this.recreateValuesArray?e=[...e,s]:e.push(s),i=!0)})}this.previousSelectedValues=e,i&&this.matSelect._onChange(e)})}updateInputWidth(){if(!this.innerSelectSearch||!this.innerSelectSearch.nativeElement)return;let e=this.innerSelectSearch.nativeElement,i=null;for(;e&&e.parentElement;)if(e=e.parentElement,e.classList.contains("mat-select-panel")){i=e;break}i&&(this.innerSelectSearch.nativeElement.style.width=i.clientWidth+"px")}getOptionsLengthOffset(){return this.matOption?1:0}unselectActiveDescendant(){this.activeDescendant?.removeAttribute("aria-selected"),this.searchSelectInput.nativeElement.removeAttribute("aria-activedescendant")}static \u0275fac=function(i){return new(i||n)(Fe(Du),Fe(Tr),Fe(jg),Fe(Ou,8),Fe(Kr,8),Fe(kx,8))};static \u0275cmp=lt({type:n,selectors:[["ngx-mat-select-search"]],contentQueries:function(i,r,s){if(i&1&&(Su(s,Mx,5),Su(s,Px,5)),i&2){let a;Hn(a=Gn())&&(r.clearIcon=a.first),Hn(a=Gn())&&(r.noEntriesFound=a.first)}},viewQuery:function(i,r){if(i&1&&(ti(gx,7,kn),ti(_x,7,kn)),i&2){let s;Hn(s=Gn())&&(r.searchSelectInput=s.first),Hn(s=Gn())&&(r.innerSelectSearch=s.first)}},inputs:{placeholderLabel:"placeholderLabel",type:"type",closeIcon:"closeIcon",closeSvgIcon:"closeSvgIcon",noEntriesFoundLabel:"noEntriesFoundLabel",clearSearchInput:"clearSearchInput",searching:"searching",disableInitialFocus:"disableInitialFocus",enableClearOnEscapePressed:"enableClearOnEscapePressed",preventHomeEndKeyPropagation:"preventHomeEndKeyPropagation",disableScrollToActiveOnOptionsChanged:"disableScrollToActiveOnOptionsChanged",ariaLabel:"ariaLabel",showToggleAllCheckbox:"showToggleAllCheckbox",toggleAllCheckboxChecked:"toggleAllCheckboxChecked",toggleAllCheckboxIndeterminate:"toggleAllCheckboxIndeterminate",toggleAllCheckboxTooltipMessage:"toggleAllCheckboxTooltipMessage",toggleAllCheckboxTooltipPosition:"toggleAllCheckboxTooltipPosition",hideClearSearchButton:"hideClearSearchButton",alwaysRestoreSelectedOptionsMulti:"alwaysRestoreSelectedOptionsMulti",recreateValuesArray:"recreateValuesArray"},outputs:{toggleAll:"toggleAll"},standalone:!1,features:[Oi([{provide:ar,useExisting:Zi(()=>n),multi:!0}])],ngContentSelectors:yx,decls:13,vars:14,consts:[["innerSelectSearch",""],["searchSelectInput",""],["defaultIcon",""],["defaultNoEntriesFound",""],["matInput","",1,"mat-select-search-input","mat-select-search-hidden"],[1,"mat-select-search-inner","mat-typography","mat-datepicker-content","mat-tab-header",3,"ngClass"],[1,"mat-select-search-inner-row"],["class","mat-select-search-toggle-all-checkbox","matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change",4,"ngIf"],["autocomplete","off",1,"mat-select-search-input",3,"keydown","keyup","blur","type","formControl","placeholder"],["class","mat-select-search-spinner","diameter","16",4,"ngIf"],["mat-icon-button","","aria-label","Clear","class","mat-select-search-clear",3,"click",4,"ngIf"],["class","mat-select-search-no-entries-found",4,"ngIf"],["matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",1,"mat-select-search-toggle-all-checkbox",3,"change","color","checked","indeterminate","matTooltip","matTooltipPosition"],["diameter","16",1,"mat-select-search-spinner"],["mat-icon-button","","aria-label","Clear",1,"mat-select-search-clear",3,"click"],[4,"ngIf","ngIfElse"],[3,"svgIcon"],[1,"mat-select-search-no-entries-found"]],template:function(i,r){if(i&1){let s=$e();_o(vx),Be(0,"input",4),V(1,"div",5,0)(3,"div",6),_e(4,Cx,1,5,"mat-checkbox",7),V(5,"input",8,1),he("keydown",function(d){return Q(s),$(r._handleKeydown(d))})("keyup",function(d){return Q(s),$(r._handleKeyup(d))})("blur",function(){return Q(s),$(r.onBlur())}),B(),_e(7,Ex,1,0,"mat-spinner",9)(8,Sx,4,2,"button",10),wr(9),B(),Be(10,"mat-divider"),B(),_e(11,Ox,4,2,"div",11),wt(12,"async")}i&2&&(D(),N("ngClass",Ls(11,bx,r.matSelect.multiple,r._isToggleAllCheckboxVisible())),D(3),N("ngIf",r._isToggleAllCheckboxVisible()),D(),N("type",r.type)("formControl",r._formControl)("placeholder",r.placeholderLabel),xr("aria-label",r.ariaLabel),D(2),N("ngIf",r.searching),D(),N("ngIf",!r.hideClearSearchButton&&r.value&&!r.searching),D(3),N("ngIf",kt(12,9,r._showNoEntriesFound$)))},dependencies:[Rn,Mt,Zn,Nn,$o,Au,Kg,ku,o_,r_,n_,vo],styles:[".mat-select-search-hidden[_ngcontent-%COMP%]{visibility:hidden}.mat-select-search-inner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;z-index:100;font-size:inherit;box-shadow:none;background-color:var(--mat-select-panel-background-color)}.mat-select-search-inner.mat-select-search-inner-multiple.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]   .mat-select-search-inner-row[_ngcontent-%COMP%]{display:flex;align-items:center}.mat-select-search-input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;border:none;font-family:inherit;font-size:inherit;color:currentColor;outline:none;background-color:var(--mat-select-panel-background-color);padding:0 44px 0 16px;height:calc(3em - 1px);line-height:calc(3em - 1px)}[dir=rtl][_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-right:16px;padding-left:44px}.mat-select-search-input[_ngcontent-%COMP%]::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-left:5px}.mat-select-search-no-entries-found[_ngcontent-%COMP%]{padding-top:8px}.mat-select-search-clear[_ngcontent-%COMP%]{position:absolute;right:4px;top:0}[dir=rtl][_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%]{right:auto;left:4px}.mat-select-search-spinner[_ngcontent-%COMP%]{position:absolute;right:16px;top:calc(50% - 8px)}[dir=rtl][_nghost-%COMP%]   .mat-select-search-spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-spinner[_ngcontent-%COMP%]{right:auto;left:16px}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search{position:sticky;top:-8px;z-index:1;opacity:1;margin-top:-8px;pointer-events:all}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search .mat-icon{margin-right:0;margin-left:0}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search mat-pseudo-checkbox{display:none}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search .mdc-list-item__primary-text{opacity:1}.mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:5px}[dir=rtl][_nghost-%COMP%]   .mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:0;padding-right:5px}"],changeDetection:0})}return n})();var cc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=jn({type:n});static \u0275inj=Wn({imports:[Pt,fi,Zg,Yg,Xg,s_,tc,i_]})}return n})();var Lx=n=>({"remove-space":n});function Rx(n,t){n&1&&(V(0,"span",7),te(1,"*"),B())}function Nx(n,t){if(n&1&&(V(0,"mat-option"),Be(1,"ngx-mat-select-search",8),B()),n&2){let e=z();D(),N("formControl",e.searchControl)("noEntriesFoundLabel","No Data Found")}}function Fx(n,t){if(n&1&&(V(0,"mat-option",9),te(1),B()),n&2){let e=t.$implicit;N("value",e.value),D(),bt(" ",e.label," ")}}function Bx(n,t){if(n&1&&(Nt(0),te(1),Ft()),n&2){let e=z(2);D(),bt(" ",e.label," is required ")}}function Vx(n,t){if(n&1&&(V(0,"mat-hint",10),_e(1,Bx,2,1,"ng-container",4),B()),n&2){let e=z();D(),N("ngIf",e.control.hasError("required"))}}var ja=class n{constructor(t,e){this.formGroupDirective=t;this.date=e}label;fieldReq=!1;search=!1;options=[];disabled=!1;multiple=!1;placeholder="";change=new be;control;formControlName;selected="";selectedChange=new be;searchChanged=new be;searchFn;searchControl=new Ir;onTouched=()=>{};onChange=()=>{};isUpdating=!1;ngOnInit(){this.formGroupDirective.form&&this.formControlName&&(this.control=this.formGroupDirective.form.get(this.formControlName)),this.searchControl.valueChanges.pipe(Eg(300),Sg()).subscribe(t=>{this.searchChanged.emit(t)})}onSelectionChange(t){this.selectedChange.emit(t)}writeValue(t){t!==void 0&&this.control.value!==t&&(this.isUpdating=!0,this.control.setValue(t,{emitEvent:!1}),this.isUpdating=!1)}registerOnChange(t){this.onChange=t,this.control.valueChanges.subscribe(e=>{this.isUpdating||(this.isUpdating=!0,this.onChange(e),this.isUpdating=!1)})}registerOnTouched(t){this.onTouched=t}onBlur(){this.onTouched()}static \u0275fac=function(e){return new(e||n)(Fe(Or),Fe(Ra))};static \u0275cmp=lt({type:n,selectors:[["spk-ng-select"]],inputs:{label:"label",fieldReq:"fieldReq",search:"search",options:"options",disabled:"disabled",multiple:"multiple",placeholder:"placeholder",control:"control",formControlName:"formControlName",searchFn:"searchFn"},outputs:{change:"change",selectedChange:"selectedChange",searchChanged:"searchChanged"},features:[Oi([{provide:ar,useExisting:Zi(()=>n),multi:!0}])],decls:8,vars:11,consts:[[1,"form-label"],["class","text-red-500",4,"ngIf"],[1,"mat-custom-field",3,"ngClass"],["placeholder","Select an option",3,"selectionChange","formControl","multiple","disabled"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["align","end","class","mt-1 text-xs text-red-500 text-right",4,"ngIf"],[1,"text-red-500"],["placeholderLabel","Search...",3,"formControl","noEntriesFoundLabel"],[3,"value"],["align","end",1,"mt-1","text-xs","text-red-500","text-right"]],template:function(e,i){e&1&&(V(0,"label",0),te(1),_e(2,Rx,2,0,"span",1),B(),V(3,"mat-form-field",2)(4,"mat-select",3),he("selectionChange",function(s){return i.onSelectionChange(s.value)}),_e(5,Nx,2,2,"mat-option",4)(6,Fx,2,2,"mat-option",5),B(),_e(7,Vx,2,1,"mat-hint",6),B()),e&2&&(D(),bt("",i.label," "),D(),N("ngIf",i.fieldReq),D(),N("ngClass",Mi(9,Lx,i.label=="")),D(),N("formControl",i.control)("multiple",i.multiple)("disabled",i.disabled),D(),N("ngIf",i.search),D(),N("ngForOf",i.options),D(),N("ngIf",i.control.invalid&&(i.control.touched||i.control.dirty)))},dependencies:[nd,pi,Nn,Pt,Rn,ni,Mt,Ai,Ou,Kr,Da,Du,fi,$o,cc,_0],encapsulation:2})};function zx(n,t){n&1&&(V(0,"span",8),te(1,"*"),B())}function Hx(n,t){if(n&1&&(V(0,"label",6),te(1),_e(2,zx,2,0,"span",7),B()),n&2){let e=z();D(),bt("",e.label," "),D(),N("ngIf",e.fieldReq)}}function Gx(n,t){if(n&1&&(Nt(0),te(1),Ft()),n&2){let e=z(2);D(),bt(" ",e.label," is required ")}}function Ux(n,t){if(n&1&&(Nt(0),te(1),wt(2,"date"),Ft()),n&2){let e=z(2);D(),bt(" Minimum allowed date is ",Xl(2,1,e.min,"shortDate")," ")}}function qx(n,t){if(n&1&&(Nt(0),te(1),wt(2,"date"),Ft()),n&2){let e=z(2);D(),bt(" Maximum allowed date is ",Xl(2,1,e.max,"shortDate")," ")}}function Wx(n,t){n&1&&(Nt(0),te(1," End date must be on or after start date "),Ft())}function jx(n,t){if(n&1&&(V(0,"mat-hint",9),_e(1,Gx,2,1,"ng-container",10)(2,Ux,3,4,"ng-container",10)(3,qx,3,4,"ng-container",10)(4,Wx,2,0,"ng-container",10),B()),n&2){let e=z();D(),N("ngIf",e.control.hasError("required")),D(),N("ngIf",e.control.hasError("minDate")),D(),N("ngIf",e.control.hasError("maxDate")),D(),N("ngIf",e.control.hasError("dateOrderInvalid"))}}var id=class n{constructor(t,e){this.formGroupDirective=t;this.date=e}disablePicker=!1;fieldReq=!1;label;class="";dateFormat="";min;max;placeholder="";mode;dateChange=new be;control;formControlName;isUpdating=!1;onChange=()=>{};onTouched=()=>{};ngOnInit(){this.formGroupDirective.form&&(this.control=this.formGroupDirective.form.get(this.formControlName))}emitDateChange(){this.dateChange.emit(this.control.value)}registerOnTouched(t){this.onTouched=t}writeValue(t){t!==void 0&&this.control.value!==t&&(this.isUpdating=!0,this.control.setValue(t,{emitEvent:!1}),this.isUpdating=!1)}registerOnChange(t){this.onChange=t,this.control.valueChanges.subscribe(e=>{this.isUpdating||this.onChange(e)})}onBlur(){this.onTouched()}onDateSelected(t){if(t.value){let e=t.value;this.control.setValue(t.value),this.control.markAsTouched(),this.emitDateChange()}}static \u0275fac=function(e){return new(e||n)(Fe(Or),Fe(Ra))};static \u0275cmp=lt({type:n,selectors:[["spk-flatpickr"]],inputs:{fieldReq:"fieldReq",label:"label",class:"class",dateFormat:"dateFormat",min:"min",max:"max",placeholder:"placeholder",mode:"mode",control:"control",formControlName:"formControlName"},outputs:{dateChange:"dateChange"},features:[Oi([{provide:ar,useExisting:Zi(()=>n),multi:!0}])],decls:7,vars:12,consts:[["picker",""],["class","form-label",4,"ngIf"],[1,"mat-custom-field"],["matInput","","readonly","",3,"dateChange","min","max","placeholder","matDatepicker","formControl","value"],["matSuffix","",3,"for"],["aign","end","lass","mt-1 text-xs text-red-500 text-right",4,"ngIf"],[1,"form-label"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],["aign","end","lass","mt-1 text-xs text-red-500 text-right"],[4,"ngIf"]],template:function(e,i){if(e&1){let r=$e();_e(0,Hx,3,2,"label",1),V(1,"mat-form-field",2)(2,"input",3),he("dateChange",function(a){return Q(r),$(i.onDateSelected(a))}),B(),Be(3,"mat-datepicker-toggle",4)(4,"mat-datepicker",null,0),_e(6,jx,5,4,"mat-hint",5),B()}if(e&2){let r=Sr(5);N("ngIf",i.label),D(2),zn("",i.class," form-control"),N("min",i.min)("max",i.max)("placeholder",i.label)("matDatepicker",r)("formControl",i.control)("value",i.control.value),D(),N("for",r),D(3),N("ngIf",i.control.invalid&&(i.control.dirty||i.control.touched))}},dependencies:[Wg,Ai,Jg,Qg,$g,La,Kr,Da,Mu,Pt,Mt,Iu,pi,Zn,Nn,fi,$o],encapsulation:2})};var sd=Ps(od(),1),Xx=Ps(od(),1);var Zx=(0,sd.supported)(),Kx=["id","name","class","multiple","required","disabled","capture","accept"],Yx=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],C0=["oninit","onwarning","onerror","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onactivatefile","onreorderfiles"],L2=(()=>{class n{constructor(e,i){this.options={},this.oninit=new be,this.onwarning=new be,this.onerror=new be,this.oninitfile=new be,this.onactivatefile=new be,this.onaddfilestart=new be,this.onaddfileprogress=new be,this.onaddfile=new be,this.onprocessfilestart=new be,this.onprocessfileprogress=new be,this.onprocessfileabort=new be,this.onprocessfilerevert=new be,this.onprocessfile=new be,this.onprocessfiles=new be,this.onremovefile=new be,this.onpreparefile=new be,this.onupdatefiles=new be,this.onreorderfiles=new be,this.pond=null,this.handleEvent=null,this.root=e,this.zone=i}ngAfterViewInit(){let e=this.root.nativeElement.querySelector("input"),i=this.root.nativeElement.attributes;Kx.forEach(r=>{let s=i[r]?i[r].value:this.options[r];s&&e.setAttribute(r,s)}),Zx&&(this.handleEvent=r=>{let s=`on${r.type.split(":")[1]}`;this[s].emit(Cn({},r.detail))},C0.forEach(r=>{this.root.nativeElement.addEventListener(`FilePond:${r.substring(2)}`,this.handleEvent)}),this.zone.runOutsideAngular(()=>{this.pond=(0,sd.create)(e,ji(Cn({},this.options),{files:this.files}))}),this.pond&&Object.keys(this.pond).filter(r=>Yx.indexOf(r)===-1).forEach(r=>{this[r]=this.pond[r]}))}ngOnChanges(e){if(e.firstChange||!this.pond)return;let i=e.options?e.options.currentValue:this.options;e.files&&JSON.stringify(e.files.previousValue)!==JSON.stringify(e.files.currentValue)&&(i.files=e.files.currentValue),this.pond.setOptions(i)}ngOnDestroy(){this.pond&&(C0.forEach(e=>{this.root.nativeElement.removeEventListener(`FilePond:${e.substring(2)}`,this.handleEvent)}),this.pond.destroy())}}return n.\u0275fac=function(e){return new(e||n)(Fe(kn),Fe(Wr))},n.\u0275cmp=lt({type:n,selectors:[["file-pond"]],inputs:{options:"options",files:"files"},outputs:{oninit:"oninit",onwarning:"onwarning",onerror:"onerror",oninitfile:"oninitfile",onactivatefile:"onactivatefile",onaddfilestart:"onaddfilestart",onaddfileprogress:"onaddfileprogress",onaddfile:"onaddfile",onprocessfilestart:"onprocessfilestart",onprocessfileprogress:"onprocessfileprogress",onprocessfileabort:"onprocessfileabort",onprocessfilerevert:"onprocessfilerevert",onprocessfile:"onprocessfile",onprocessfiles:"onprocessfiles",onremovefile:"onremovefile",onpreparefile:"onpreparefile",onupdatefiles:"onupdatefiles",onreorderfiles:"onreorderfiles"},standalone:!1,features:[An],decls:2,vars:0,consts:[[1,"filepond--wrapper"],["type","file"]],template:function(e,i){e&1&&(V(0,"div",0),Be(1,"input",1),B())},encapsulation:2}),n})(),E0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jn({type:n}),n.\u0275inj=Wn({imports:[Pt]}),n})();var x0=n=>typeof n>"u"||n===null,Jx=n=>n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`),Qx=n=>{let t={};return Object.keys(n).forEach(e=>{n[e]&&(t[e]=n[e])}),t},ad=n=>{let t=Qx(n);return Object.entries(t).map(([e,i])=>`${Jx(e)}:${i}`).join(";")},Za=class extends Error{constructor(t){super(t),this.name=this.constructor.name}},Wf=()=>{let n=Date.now().toString(36),t=Math.random().toString(36).substring(2,7);return`${n}${t}`},w0=(n,t,e)=>Math.min(Math.max(n,t),e);function ii(n){this.content=n}ii.prototype={constructor:ii,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var i=e&&e!=n?this.remove(e):this,r=i.find(n),s=i.content.slice();return r==-1?s.push(e||n,t):(s[r+1]=t,e&&(s[r]=e)),new ii(s)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new ii(e)},addToStart:function(n,t){return new ii([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new ii(e)},addBefore:function(n,t,e){var i=this.remove(t),r=i.content.slice(),s=i.find(n);return r.splice(s==-1?r.length:s,0,t,e),new ii(r)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=ii.from(n),n.size?new ii(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ii.from(n),n.size?new ii(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=ii.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};ii.from=function(n){if(n instanceof ii)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new ii(t)};var jf=ii;function L0(n,t,e){for(let i=0;;i++){if(i==n.childCount||i==t.childCount)return n.childCount==t.childCount?null:e;let r=n.child(i),s=t.child(i);if(r==s){e+=r.nodeSize;continue}if(!r.sameMarkup(s))return e;if(r.isText&&r.text!=s.text){for(let a=0;r.text[a]==s.text[a];a++)e++;return e}if(r.content.size||s.content.size){let a=L0(r.content,s.content,e+1);if(a!=null)return a}e+=r.nodeSize}}function R0(n,t,e,i){for(let r=n.childCount,s=t.childCount;;){if(r==0||s==0)return r==s?null:{a:e,b:i};let a=n.child(--r),d=t.child(--s),h=a.nodeSize;if(a==d){e-=h,i-=h;continue}if(!a.sameMarkup(d))return{a:e,b:i};if(a.isText&&a.text!=d.text){let m=0,y=Math.min(a.text.length,d.text.length);for(;m<y&&a.text[a.text.length-m-1]==d.text[d.text.length-m-1];)m++,e--,i--;return{a:e,b:i}}if(a.content.size||d.content.size){let m=R0(a.content,d.content,e-1,i-1);if(m)return m}e-=h,i-=h}}var Se=class n{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let i=0;i<t.length;i++)this.size+=t[i].nodeSize}nodesBetween(t,e,i,r=0,s){for(let a=0,d=0;d<e;a++){let h=this.content[a],m=d+h.nodeSize;if(m>t&&i(h,r+d,s||null,a)!==!1&&h.content.size){let y=d+1;h.nodesBetween(Math.max(0,t-y),Math.min(h.content.size,e-y),i,r+y)}d=m}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,r){let s="",a=!0;return this.nodesBetween(t,e,(d,h)=>{let m=d.isText?d.text.slice(Math.max(t,h)-h,e-h):d.isLeaf?r?typeof r=="function"?r(d):r:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&m||d.isTextblock)&&i&&(a?a=!1:s+=i),s+=m},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,r=this.content.slice(),s=0;for(e.isText&&e.sameMarkup(i)&&(r[r.length-1]=e.withText(e.text+i.text),s=1);s<t.content.length;s++)r.push(t.content[s]);return new n(r,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let i=[],r=0;if(e>t)for(let s=0,a=0;a<e;s++){let d=this.content[s],h=a+d.nodeSize;h>t&&((a<t||h>e)&&(d.isText?d=d.cut(Math.max(0,t-a),Math.min(d.text.length,e-a)):d=d.cut(Math.max(0,t-a-1),Math.min(d.content.size,e-a-1))),i.push(d),r+=d.nodeSize),a=h}return new n(i,r)}cutByIndex(t,e){return t==e?n.empty:t==0&&e==this.content.length?this:new n(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let r=this.content.slice(),s=this.size+e.nodeSize-i.nodeSize;return r[t]=e,new n(r,s)}addToStart(t){return new n([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new n(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let r=this.content[e];t(r,i,e),i+=r.nodeSize}}findDiffStart(t,e=0){return L0(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return R0(this,t,e,i)}findIndex(t,e=-1){if(t==0)return ld(0,t);if(t==this.size)return ld(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,r=0;;i++){let s=this.child(i),a=r+s.nodeSize;if(a>=t)return a==t||e>0?ld(i+1,a):ld(i,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return n.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new n(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return n.empty;let e,i=0;for(let r=0;r<t.length;r++){let s=t[r];i+=s.nodeSize,r&&s.isText&&t[r-1].sameMarkup(s)?(e||(e=t.slice(0,r)),e[e.length-1]=s.withText(e[e.length-1].text+s.text)):e&&e.push(s)}return new n(e||t,i)}static from(t){if(!t)return n.empty;if(t instanceof n)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new n([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Se.empty=new Se([],0);var Zf={index:0,offset:0};function ld(n,t){return Zf.index=n,Zf.offset=t,Zf}function ud(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!ud(n[i],t[i]))return!1}else{for(let i in n)if(!(i in t)||!ud(n[i],t[i]))return!1;for(let i in t)if(!(i in n))return!1}return!0}var on=(()=>{class n{constructor(e,i){this.type=e,this.attrs=i}addToSet(e){let i,r=!1;for(let s=0;s<e.length;s++){let a=e[s];if(this.eq(a))return e;if(this.type.excludes(a.type))i||(i=e.slice(0,s));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(i||(i=e.slice(0,s)),i.push(this),r=!0),i&&i.push(a)}}return i||(i=e.slice()),r||i.push(this),i}removeFromSet(e){for(let i=0;i<e.length;i++)if(this.eq(e[i]))return e.slice(0,i).concat(e.slice(i+1));return e}isInSet(e){for(let i=0;i<e.length;i++)if(this.eq(e[i]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ud(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let i in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,i){if(!i)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[i.type];if(!r)throw new RangeError(`There is no mark type ${i.type} in this schema`);let s=r.create(i.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,i){if(e==i)return!0;if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(i[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return n.none;if(e instanceof n)return[e];let i=e.slice();return i.sort((r,s)=>r.type.rank-s.type.rank),i}}return n.none=[],n})(),Vs=class extends Error{},Ue=class n{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=F0(this.content,t+this.openStart,e);return i&&new n(i,this.openStart,this.openEnd)}removeBetween(t,e){return new n(N0(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return n.empty;let i=e.openStart||0,r=e.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new n(Se.fromJSON(t,e.content),i,r)}static maxOpen(t,e=!0){let i=0,r=0;for(let s=t.firstChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=t.lastChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.lastChild)r++;return new n(t,i,r)}};Ue.empty=new Ue(Se.empty,0,0);function N0(n,t,e){let{index:i,offset:r}=n.findIndex(t),s=n.maybeChild(i),{index:a,offset:d}=n.findIndex(e);if(r==t||s.isText){if(d!=e&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(i!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(N0(s.content,t-r-1,e-r-1)))}function F0(n,t,e,i){let{index:r,offset:s}=n.findIndex(t),a=n.maybeChild(r);if(s==t||a.isText)return i&&!i.canReplace(r,r,e)?null:n.cut(0,t).append(e).append(n.cut(t));let d=F0(a.content,t-s-1,e);return d&&n.replaceChild(r,a.copy(d))}function $x(n,t,e){if(e.openStart>n.depth)throw new Vs("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new Vs("Inconsistent open depths");return B0(n,t,e,0)}function B0(n,t,e,i){let r=n.index(i),s=n.node(i);if(r==t.index(i)&&i<n.depth-e.openStart){let a=B0(n,t,e,i+1);return s.copy(s.content.replaceChild(r,a))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==i&&t.depth==i){let a=n.parent,d=a.content;return Bs(a,d.cut(0,n.parentOffset).append(e.content).append(d.cut(t.parentOffset)))}else{let{start:a,end:d}=ew(e,n);return Bs(s,z0(n,a,d,t,i))}else return Bs(s,dd(n,t,i))}function V0(n,t){if(!t.type.compatibleContent(n.type))throw new Vs("Cannot join "+t.type.name+" onto "+n.type.name)}function Yf(n,t,e){let i=n.node(e);return V0(i,t.node(e)),i}function Fs(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function uc(n,t,e,i){let r=(t||n).node(e),s=0,a=t?t.index(e):r.childCount;n&&(s=n.index(e),n.depth>e?s++:n.textOffset&&(Fs(n.nodeAfter,i),s++));for(let d=s;d<a;d++)Fs(r.child(d),i);t&&t.depth==e&&t.textOffset&&Fs(t.nodeBefore,i)}function Bs(n,t){return n.type.checkContent(t),n.copy(t)}function z0(n,t,e,i,r){let s=n.depth>r&&Yf(n,t,r+1),a=i.depth>r&&Yf(e,i,r+1),d=[];return uc(null,n,r,d),s&&a&&t.index(r)==e.index(r)?(V0(s,a),Fs(Bs(s,z0(n,t,e,i,r+1)),d)):(s&&Fs(Bs(s,dd(n,t,r+1)),d),uc(t,e,r,d),a&&Fs(Bs(a,dd(e,i,r+1)),d)),uc(i,null,r,d),new Se(d)}function dd(n,t,e){let i=[];if(uc(null,n,e,i),n.depth>e){let r=Yf(n,t,e+1);Fs(Bs(r,dd(n,t,e+1)),i)}return uc(t,null,e,i),new Se(i)}function ew(n,t){let e=t.depth-n.openStart,r=t.node(e).copy(n.content);for(let s=e-1;s>=0;s--)r=t.node(s).copy(Se.from(r));return{start:r.resolveNoCache(n.openStart+e),end:r.resolveNoCache(r.content.size-n.openEnd-e)}}var pd=class n{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=t.child(e);return i?t.child(e).cut(i):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[e*3],r=e==0?0:this.path[e*3-1]+1;for(let s=0;s<t;s++)r+=i.child(s).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return on.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),r=t.maybeChild(e);if(!i){let d=i;i=r,r=d}let s=i.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!r||!s[a].isInSet(r.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,r=t.parent.maybeChild(t.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new zs(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],r=0,s=e;for(let a=t;;){let{index:d,offset:h}=a.content.findIndex(s),m=s-h;if(i.push(a,d,r+h),!m||(a=a.child(d),a.isText))break;s=m-1,r+=h+1}return new n(e,i,s)}static resolveCached(t,e){let i=S0.get(t);if(i)for(let s=0;s<i.elts.length;s++){let a=i.elts[s];if(a.pos==e)return a}else S0.set(t,i=new Xf);let r=i.elts[i.i]=n.resolve(t,e);return i.i=(i.i+1)%tw,r}},Xf=class{constructor(){this.elts=[],this.i=0}},tw=12,S0=new WeakMap,zs=class{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},nw=Object.create(null),$r=class n{constructor(t,e,i,r=on.none){this.type=t,this.attrs=e,this.marks=r,this.content=i||Se.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,r=0){this.content.nodesBetween(t,e,i,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,r){return this.content.textBetween(t,e,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&ud(this.attrs,e||t.defaultAttrs||nw)&&on.sameSet(this.marks,i||on.none)}copy(t=null){return t==this.content?this:new n(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new n(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return Ue.empty;let r=this.resolve(t),s=this.resolve(e),a=i?0:r.sharedDepth(e),d=r.start(a),m=r.node(a).content.cut(r.pos-d,s.pos-d);return new Ue(m,r.depth-a,s.depth-a)}replace(t,e,i){return $x(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let r=this.content.child(e-1);return{node:r,index:e-1,offset:i-r.nodeSize}}resolve(t){return pd.resolveCached(this,t)}resolveNoCache(t){return pd.resolve(this,t)}rangeHasMark(t,e,i){let r=!1;return e>t&&this.nodesBetween(t,e,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),H0(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=Se.empty,r=0,s=i.childCount){let a=this.contentMatchAt(t).matchFragment(i,r,s),d=a&&a.matchFragment(this.content,e);if(!d||!d.validEnd)return!1;for(let h=r;h<s;h++)if(!this.type.allowsMarks(i.child(h).marks))return!1;return!0}canReplaceWith(t,e,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(t).matchType(i),a=s&&s.matchFragment(this.content,e);return a?a.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=on.none;for(let e=0;e<this.marks.length;e++){let i=this.marks[e];i.type.checkAttrs(i.attrs),t=i.addToSet(t)}if(!on.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let r=Se.fromJSON(t,e.content),s=t.nodeType(e.type).create(e.attrs,r,i);return s.type.checkAttrs(s.attrs),s}};$r.prototype.text=void 0;var Jf=class n extends $r{constructor(t,e,i,r){if(super(t,e,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):H0(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new n(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new n(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}};function H0(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}var Hs=class n{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new Qf(t,e);if(i.next==null)return n.empty;let r=G0(i);i.next&&i.err("Unexpected trailing text");let s=cw(lw(r));return uw(s,i),s}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let r=this;for(let s=e;r&&s<i;s++)r=r.matchType(t.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let r=[this];function s(a,d){let h=a.matchFragment(t,i);if(h&&(!e||h.validEnd))return Se.from(d.map(m=>m.createAndFill()));for(let m=0;m<a.next.length;m++){let{type:y,next:E}=a.next[m];if(!(y.isText||y.hasRequiredAttrs())&&r.indexOf(E)==-1){r.push(E);let O=s(E,d.concat(y));if(O)return O}}return null}return s(this,[])}findWrapping(t){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==t)return this.wrapCache[i+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(t)){let a=[];for(let d=r;d.type;d=d.via)a.push(d.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:d,next:h}=s.next[a];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in e)&&(!r.type||h.validEnd)&&(i.push({match:d.contentMatch,type:d,via:r}),e[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(i){t.push(i);for(let r=0;r<i.next.length;r++)t.indexOf(i.next[r].next)==-1&&e(i.next[r].next)}return e(this),t.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let a=0;a<i.next.length;a++)s+=(a?", ":"")+i.next[a].type.name+"->"+t.indexOf(i.next[a].next);return s}).join(`
`)}};Hs.empty=new Hs(!0);var Qf=class{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}};function G0(n){let t=[];do t.push(iw(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function iw(n){let t=[];do t.push(rw(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function rw(n){let t=aw(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=ow(n,t);else break;return t}function T0(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function ow(n,t){let e=T0(n),i=e;return n.eat(",")&&(n.next!="}"?i=T0(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:i,expr:t}}function sw(n,t){let e=n.nodeTypes,i=e[t];if(i)return[i];let r=[];for(let s in e){let a=e[s];a.isInGroup(t)&&r.push(a)}return r.length==0&&n.err("No node type or group '"+t+"' found"),r}function aw(n){if(n.eat("(")){let t=G0(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=sw(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function lw(n){let t=[[]];return r(s(n,0),e()),t;function e(){return t.push([])-1}function i(a,d,h){let m={term:h,to:d};return t[a].push(m),m}function r(a,d){a.forEach(h=>h.to=d)}function s(a,d){if(a.type=="choice")return a.exprs.reduce((h,m)=>h.concat(s(m,d)),[]);if(a.type=="seq")for(let h=0;;h++){let m=s(a.exprs[h],d);if(h==a.exprs.length-1)return m;r(m,d=e())}else if(a.type=="star"){let h=e();return i(d,h),r(s(a.expr,h),h),[i(h)]}else if(a.type=="plus"){let h=e();return r(s(a.expr,d),h),r(s(a.expr,h),h),[i(h)]}else{if(a.type=="opt")return[i(d)].concat(s(a.expr,d));if(a.type=="range"){let h=d;for(let m=0;m<a.min;m++){let y=e();r(s(a.expr,h),y),h=y}if(a.max==-1)r(s(a.expr,h),h);else for(let m=a.min;m<a.max;m++){let y=e();i(h,y),r(s(a.expr,h),y),h=y}return[i(h)]}else{if(a.type=="name")return[i(d,void 0,a.value)];throw new Error("Unknown expr type")}}}}function U0(n,t){return t-n}function I0(n,t){let e=[];return i(t),e.sort(U0);function i(r){let s=n[r];if(s.length==1&&!s[0].term)return i(s[0].to);e.push(r);for(let a=0;a<s.length;a++){let{term:d,to:h}=s[a];!d&&e.indexOf(h)==-1&&i(h)}}}function cw(n){let t=Object.create(null);return e(I0(n,0));function e(i){let r=[];i.forEach(a=>{n[a].forEach(({term:d,to:h})=>{if(!d)return;let m;for(let y=0;y<r.length;y++)r[y][0]==d&&(m=r[y][1]);I0(n,h).forEach(y=>{m||r.push([d,m=[]]),m.indexOf(y)==-1&&m.push(y)})})});let s=t[i.join(",")]=new Hs(i.indexOf(n.length-1)>-1);for(let a=0;a<r.length;a++){let d=r[a][1].sort(U0);s.next.push({type:r[a][0],next:t[d.join(",")]||e(d)})}return s}}function uw(n,t){for(let e=0,i=[n];e<i.length;e++){let r=i[e],s=!r.validEnd,a=[];for(let d=0;d<r.next.length;d++){let{type:h,next:m}=r.next[d];a.push(h.name),s&&!(h.isText||h.hasRequiredAttrs())&&(s=!1),i.indexOf(m)==-1&&i.push(m)}s&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function q0(n){let t=Object.create(null);for(let e in n){let i=n[e];if(!i.hasDefault)return null;t[e]=i.default}return t}function W0(n,t){let e=Object.create(null);for(let i in n){let r=t&&t[i];if(r===void 0){let s=n[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}e[i]=r}return e}function j0(n,t,e,i){for(let r in t)if(!(r in n))throw new RangeError(`Unsupported attribute ${r} for ${e} of type ${r}`);for(let r in n){let s=n[r];s.validate&&s.validate(t[r])}}function Z0(n,t){let e=Object.create(null);if(t)for(let i in t)e[i]=new $f(n,i,t[i]);return e}var fd=class n{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=Z0(t,i.attrs),this.defaultAttrs=q0(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Hs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:W0(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $r(this,this.computeAttrs(t),Se.from(e),on.setFrom(i))}createChecked(t=null,e,i){return e=Se.from(e),this.checkContent(e),new $r(this,this.computeAttrs(t),e,on.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),e=Se.from(e),e.size){let a=this.contentMatch.fillBefore(e);if(!a)return null;e=a.append(e)}let r=this.contentMatch.matchFragment(e),s=r&&r.fillBefore(Se.empty,!0);return s?new $r(this,t,e.append(s),on.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){j0(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:on.none:t}static compile(t,e){let i=Object.create(null);t.forEach((s,a)=>i[s]=new n(s,e,a));let r=e.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function dw(n,t,e){let i=e.split("|");return r=>{let s=r===null?"null":typeof r;if(i.indexOf(s)<0)throw new RangeError(`Expected value of type ${i} for attribute ${t} on type ${n}, got ${s}`)}}var $f=class{constructor(t,e,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?dw(t,e,i.validate):i.validate}get isRequired(){return!this.hasDefault}},pc=class n{constructor(t,e,i,r){this.name=t,this.rank=e,this.schema=i,this.spec=r,this.attrs=Z0(t,r.attrs),this.excluded=null;let s=q0(this.attrs);this.instance=s?new on(this,s):null}create(t=null){return!t&&this.instance?this.instance:new on(this,W0(this.attrs,t))}static compile(t,e){let i=Object.create(null),r=0;return t.forEach((s,a)=>i[s]=new n(s,r++,e,a)),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){j0(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}},hd=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=jf.from(t.nodes),e.marks=jf.from(t.marks||{}),this.nodes=fd.compile(this.spec.nodes,this),this.marks=pc.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],a=s.spec.content||"",d=s.spec.marks;if(s.contentMatch=i[a]||(i[a]=Hs.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=d=="_"?null:d?O0(this,d.split(" ")):d==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:O0(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,r){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof fd){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,i,r)}text(t,e){let i=this.nodes.text;return new Jf(i,i.defaultAttrs,t,on.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return $r.fromJSON(this,t)}markFromJSON(t){return on.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}};function O0(n,t){let e=[];for(let i=0;i<t.length;i++){let r=t[i],s=n.marks[r],a=s;if(s)e.push(s);else for(let d in n.marks){let h=n.marks[d];(r=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(r)>-1)&&e.push(a=h)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return e}function pw(n){return n.tag!=null}function fw(n){return n.style!=null}var is=class n{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let i=this.matchedStyles=[];e.forEach(r=>{if(pw(r))this.tags.push(r);else if(fw(r)){let s=/[^=]*/.exec(r.style)[0];i.indexOf(s)<0&&i.push(s),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=t.nodes[r.node];return s.contentMatch.matchType(s)})}parse(t,e={}){let i=new md(this,e,!1);return i.addAll(t,on.none,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new md(this,e,!0);return i.addAll(t,on.none,e.from,e.to),Ue.maxOpen(i.finish())}matchTag(t,e,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(gw(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||e.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(t,e,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let a=this.styles[s],d=a.style;if(!(d.indexOf(t)!=0||a.context&&!i.matchesContext(a.context)||d.length>t.length&&(d.charCodeAt(t.length)!=61||d.slice(t.length+1)!=e))){if(a.getAttrs){let h=a.getAttrs(e);if(h===!1)continue;a.attrs=h||void 0}return a}}}static schemaRules(t){let e=[];function i(r){let s=r.priority==null?50:r.priority,a=0;for(;a<e.length;a++){let d=e[a];if((d.priority==null?50:d.priority)<s)break}e.splice(a,0,r)}for(let r in t.marks){let s=t.marks[r].spec.parseDOM;s&&s.forEach(a=>{i(a=A0(a)),a.mark||a.ignore||a.clearMark||(a.mark=r)})}for(let r in t.nodes){let s=t.nodes[r].spec.parseDOM;s&&s.forEach(a=>{i(a=A0(a)),a.node||a.ignore||a.mark||(a.node=r)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new n(t,n.schemaRules(t)))}},K0={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},hw={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Y0={ol:!0,ul:!0},fc=1,eh=2,dc=4;function M0(n,t,e){return t!=null?(t?fc:0)|(t==="full"?eh:0):n&&n.whitespace=="pre"?fc|eh:e&~dc}var Ka=class{constructor(t,e,i,r,s,a){this.type=t,this.attrs=e,this.marks=i,this.solid=r,this.options=a,this.content=[],this.activeMarks=on.none,this.match=s||(a&dc?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(Se.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(t.type))?(this.match=i,r):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&fc)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let e=Se.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(Se.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!K0.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}},md=class{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let r=e.topNode,s,a=M0(null,e.preserveWhitespace,0)|(i?dc:0);r?s=new Ka(r.type,r.attrs,on.none,!0,e.topMatch||r.type.contentMatch,a):i?s=new Ka(null,null,on.none,!0,null,a):s=new Ka(t.schema.topNodeType,null,on.none,!0,null,a),this.nodes=[s],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){t.nodeType==3?this.addTextNode(t,e):t.nodeType==1&&this.addElement(t,e)}addTextNode(t,e){let i=t.nodeValue,r=this.top,s=r.options&eh?"full":this.localPreserveWS||(r.options&fc)>0;if(s==="full"||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(i)){if(s)s!=="full"?i=i.replace(/\r?\n|\r/g," "):i=i.replace(/\r\n?/g,`
`);else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let a=r.content[r.content.length-1],d=t.previousSibling;(!a||d&&d.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),e),this.findInText(t)}else this.findInside(t)}addElement(t,e,i){let r=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let a=t.nodeName.toLowerCase(),d;Y0.hasOwnProperty(a)&&this.parser.normalizeLists&&mw(t);let h=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(d=this.parser.matchTag(t,this,i));e:if(h?h.ignore:hw.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,e);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(t=h.skip);let m,y=this.needsBlock;if(K0.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),m=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,e);break e}let E=h&&h.skip?e:this.readStyles(t,e);E&&this.addAll(t,E),m&&this.sync(s),this.needsBlock=y}else{let m=this.readStyles(t,e);m&&this.addElementByRule(t,h,m,h.consuming===!1?d:void 0)}this.localPreserveWS=r}leafFallback(t,e){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),e)}ignoreFallback(t,e){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e)}readStyles(t,e){let i=t.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let s=this.parser.matchedStyles[r],a=i.getPropertyValue(s);if(a)for(let d=void 0;;){let h=this.parser.matchStyle(s,a,this,d);if(!h)break;if(h.ignore)return null;if(h.clearMark?e=e.filter(m=>!h.clearMark(m)):e=e.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)d=h;else break}}return e}addElementByRule(t,e,i,r){let s,a;if(e.node)if(a=this.parser.schema.nodes[e.node],a.isLeaf)this.insertNode(a.create(e.attrs),i)||this.leafFallback(t,i);else{let h=this.enter(a,e.attrs||null,i,e.preserveWhitespace);h&&(s=!0,i=h)}else{let h=this.parser.schema.marks[e.mark];i=i.concat(h.create(e.attrs))}let d=this.top;if(a&&a.isLeaf)this.findInside(t);else if(r)this.addElement(t,i,r);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(h=>this.insertNode(h,i));else{let h=t;typeof e.contentElement=="string"?h=t.querySelector(e.contentElement):typeof e.contentElement=="function"?h=e.contentElement(t):e.contentElement&&(h=e.contentElement),this.findAround(t,h,!0),this.addAll(h,i),this.findAround(t,h,!1)}s&&this.sync(d)&&this.open--}addAll(t,e,i,r){let s=i||0;for(let a=i?t.childNodes[i]:t.firstChild,d=r==null?null:t.childNodes[r];a!=d;a=a.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(a,e);this.findAtPoint(t,s)}findPlace(t,e){let i,r;for(let s=this.open;s>=0;s--){let a=this.nodes[s],d=a.findWrapping(t);if(d&&(!i||i.length>d.length)&&(i=d,r=a,!d.length)||a.solid)break}if(!i)return null;this.sync(r);for(let s=0;s<i.length;s++)e=this.enterInner(i[s],null,e,!1);return e}insertNode(t,e){if(t.isInline&&this.needsBlock&&!this.top.type){let r=this.textblockFromContext();r&&(e=this.enterInner(r,null,e))}let i=this.findPlace(t,e);if(i){this.closeExtra();let r=this.top;r.match&&(r.match=r.match.matchType(t.type));let s=on.none;for(let a of i.concat(t.marks))(r.type?r.type.allowsMarkType(a.type):k0(a.type,t.type))&&(s=a.addToSet(s));return r.content.push(t.mark(s)),!0}return!1}enter(t,e,i,r){let s=this.findPlace(t.create(e),i);return s&&(s=this.enterInner(t,e,i,!0,r)),s}enterInner(t,e,i,r=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let d=M0(t,s,a.options);a.options&dc&&a.content.length==0&&(d|=dc);let h=on.none;return i=i.filter(m=>(a.type?a.type.allowsMarkType(m.type):k0(m.type,t))?(h=m.addToSet(h),!1):!0),this.nodes.push(new Ka(t,e,h,r,null,d)),this.open++,i}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let e=this.open;e>=0;e--){if(this.nodes[e]==t)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=fc)}return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let r=i.length-1;r>=0;r--)t+=i[r].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),a=(d,h)=>{for(;d>=0;d--){let m=e[d];if(m==""){if(d==e.length-1||d==0)continue;for(;h>=s;h--)if(a(d-1,h))return!0;return!1}else{let y=h>0||h==0&&r?this.nodes[h].type:i&&h>=s?i.node(h-s).type:null;if(!y||y.name!=m&&!y.isInGroup(m))return!1;h--}}return!0};return a(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let e in this.parser.schema.nodes){let i=this.parser.schema.nodes[e];if(i.isTextblock&&i.defaultAttrs)return i}}};function mw(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let i=t.nodeType==1?t.nodeName.toLowerCase():null;i&&Y0.hasOwnProperty(i)&&e?(e.appendChild(t),t=e):i=="li"?e=t:i&&(e=null)}}function gw(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function A0(n){let t={};for(let e in n)t[e]=n[e];return t}function k0(n,t){let e=t.schema.nodes;for(let i in e){let r=e[i];if(!r.allowsMarkType(n))continue;let s=[],a=d=>{s.push(d);for(let h=0;h<d.edgeCount;h++){let{type:m,next:y}=d.edge(h);if(m==t||s.indexOf(y)<0&&a(y))return!0}};if(a(r.contentMatch))return!0}}var xo=class n{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=Kf(e).createDocumentFragment());let r=i,s=[];return t.forEach(a=>{if(s.length||a.marks.length){let d=0,h=0;for(;d<s.length&&h<a.marks.length;){let m=a.marks[h];if(!this.marks[m.type.name]){h++;continue}if(!m.eq(s[d][0])||m.type.spec.spanning===!1)break;d++,h++}for(;d<s.length;)r=s.pop()[1];for(;h<a.marks.length;){let m=a.marks[h++],y=this.serializeMark(m,a.isInline,e);y&&(s.push([m,r]),r.appendChild(y.dom),r=y.contentDOM||y.dom)}}r.appendChild(this.serializeNodeInner(a,e))}),i}serializeNodeInner(t,e){let{dom:i,contentDOM:r}=cd(Kf(e),this.nodes[t.type.name](t),null,t.attrs);if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let s=this.serializeMark(t.marks[r],t.isInline,e);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(t,e,i={}){let r=this.marks[t.type.name];return r&&cd(Kf(i),r(t,e),null,t.attrs)}static renderSpec(t,e,i=null,r){return cd(t,e,i,r)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new n(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=P0(t.nodes);return e.text||(e.text=i=>i.text),e}static marksFromSchema(t){return P0(t.marks)}};function P0(n){let t={};for(let e in n){let i=n[e].spec.toDOM;i&&(t[e]=i)}return t}function Kf(n){return n.document||window.document}var D0=new WeakMap;function _w(n){let t=D0.get(n);return t===void 0&&D0.set(n,t=vw(n)),t}function vw(n){let t=null;function e(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")t||(t=[]),t.push(i);else for(let r=0;r<i.length;r++)e(i[r]);else for(let r in i)e(i[r])}return e(n),t}function cd(n,t,e,i){if(typeof t=="string")return{dom:n.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let r=t[0],s;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(s=_w(i))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=r.indexOf(" ");a>0&&(e=r.slice(0,a),r=r.slice(a+1));let d,h=e?n.createElementNS(e,r):n.createElement(r),m=t[1],y=1;if(m&&typeof m=="object"&&m.nodeType==null&&!Array.isArray(m)){y=2;for(let E in m)if(m[E]!=null){let O=E.indexOf(" ");O>0?h.setAttributeNS(E.slice(0,O),E.slice(O+1),m[E]):h.setAttribute(E,m[E])}}for(let E=y;E<t.length;E++){let O=t[E];if(O===0){if(E<t.length-1||E>y)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:T,contentDOM:S}=cd(n,O,e,i);if(h.appendChild(T),S){if(d)throw new RangeError("Multiple content holes");d=S}}}return{dom:h,contentDOM:d}}var Q0=65535,$0=Math.pow(2,16);function yw(n,t){return n+t*$0}function X0(n){return n&Q0}function bw(n){return(n-(n&Q0))/$0}var ev=1,tv=2,gd=4,nv=8,gc=class{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(this.delInfo&nv)>0}get deletedBefore(){return(this.delInfo&(ev|gd))>0}get deletedAfter(){return(this.delInfo&(tv|gd))>0}get deletedAcross(){return(this.delInfo&gd)>0}},wo=class n{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&n.empty)return n.empty}recover(t){let e=0,i=X0(t);if(!this.inverted)for(let r=0;r<i;r++)e+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+e+bw(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let r=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let h=this.ranges[d]-(this.inverted?r:0);if(h>t)break;let m=this.ranges[d+s],y=this.ranges[d+a],E=h+m;if(t<=E){let O=m?t==h?-1:t==E?1:e:e,T=h+r+(O<0?0:y);if(i)return T;let S=t==(e<0?h:E)?null:yw(d/3,t-h),F=t==h?tv:t==E?ev:gd;return(e<0?t!=h:t!=E)&&(F|=nv),new gc(T,F,S)}r+=y-m}return i?t+r:new gc(t+r,0,null)}touches(t,e){let i=0,r=X0(e),s=this.inverted?2:1,a=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let h=this.ranges[d]-(this.inverted?i:0);if(h>t)break;let m=this.ranges[d+s],y=h+m;if(t<=y&&d==r*3)return!0;i+=this.ranges[d+a]-m}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let a=this.ranges[r],d=a-(this.inverted?s:0),h=a+(this.inverted?0:s),m=this.ranges[r+e],y=this.ranges[r+i];t(d,d+m,h,h+y),s+=y-m}}invert(){return new n(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?n.empty:new n(t<0?[0,-t,0]:[0,0,t])}};wo.empty=new wo([]);var _c=class n{constructor(t=[],e,i=0,r=t.length){this.maps=t,this.mirror=e,this.from=i,this.to=r}slice(t=0,e=this.maps.length){return new n(this.maps,this.mirror,t,e)}copy(){return new n(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),e!=null&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,i=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],r!=null&&r<e?i+r:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),r!=null&&r>e?i-r-1:void 0)}}invert(){let t=new n;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let r=0;for(let s=this.from;s<this.to;s++){let a=this.maps[s],d=a.mapResult(t,e);if(d.recover!=null){let h=this.getMirror(s);if(h!=null&&h>s&&h<this.to){s=h,t=this.maps[h].recover(d.recover);continue}}r|=d.delInfo,t=d.pos}return i?t:new gc(t,r,null)}},th=Object.create(null),Un=class{getMap(){return wo.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=th[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in th)throw new RangeError("Duplicate use of step JSON ID "+t);return th[t]=e,e.prototype.jsonID=t,e}},Kn=class n{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new n(t,null)}static fail(t){return new n(null,t)}static fromReplace(t,e,i,r){try{return n.ok(t.replace(e,i,r))}catch(s){if(s instanceof Vs)return n.fail(s.message);throw s}}};function sh(n,t,e){let i=[];for(let r=0;r<n.childCount;r++){let s=n.child(r);s.content.size&&(s=s.copy(sh(s.content,t,s))),s.isInline&&(s=t(s,e,r)),i.push(s)}return Se.fromArray(i)}var vc=class n extends Un{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new Ue(sh(e.content,(a,d)=>!a.isAtom||!d.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),r),e.openStart,e.openEnd);return Kn.fromReplace(t,this.from,this.to,s)}invert(){return new Gs(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new n(e.pos,i.pos,this.mark)}merge(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}};Un.jsonID("addMark",vc);var Gs=class n extends Un{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new Ue(sh(e.content,r=>r.mark(this.mark.removeFromSet(r.marks)),t),e.openStart,e.openEnd);return Kn.fromReplace(t,this.from,this.to,i)}invert(){return new vc(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new n(e.pos,i.pos,this.mark)}merge(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}};Un.jsonID("removeMark",Gs);var yc=class n extends Un{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return Kn.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return Kn.fromReplace(t,this.pos,this.pos+1,new Ue(Se.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let i=this.mark.addToSet(e.marks);if(i.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(i))return new n(this.pos,e.marks[r]);return new n(this.pos,this.mark)}}return new bc(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(e.pos,t.markFromJSON(e.mark))}};Un.jsonID("addNodeMark",yc);var bc=class n extends Un{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return Kn.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return Kn.fromReplace(t,this.pos,this.pos+1,new Ue(Se.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new yc(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(e.pos,t.markFromJSON(e.mark))}};Un.jsonID("removeNodeMark",bc);var $i=class n extends Un{constructor(t,e,i,r=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=r}apply(t){return this.structure&&rh(t,this.from,this.to)?Kn.fail("Structure replace would overwrite content"):Kn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new wo([this.from,this.to-this.from,this.slice.size])}invert(t){return new n(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new n(e.pos,Math.max(e.pos,i.pos),this.slice)}merge(t){if(!(t instanceof n)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?Ue.empty:new Ue(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new n(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?Ue.empty:new Ue(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new n(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(e.from,e.to,Ue.fromJSON(t,e.slice),!!e.structure)}};Un.jsonID("replace",$i);var qn=class n extends Un{constructor(t,e,i,r,s,a,d=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=a,this.structure=d}apply(t){if(this.structure&&(rh(t,this.from,this.gapFrom)||rh(t,this.gapTo,this.to)))return Kn.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Kn.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?Kn.fromReplace(t,this.from,this.to,i):Kn.fail("Content does not fit in gap")}getMap(){return new wo([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),r=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?i.pos:t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||r<e.pos||s>i.pos?null:new n(e.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(e.from,e.to,e.gapFrom,e.gapTo,Ue.fromJSON(t,e.slice),e.insert,!!e.structure)}};Un.jsonID("replaceAround",qn);function rh(n,t,e){let i=n.resolve(t),r=e-t,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let a=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,r--}}return!1}function Cw(n,t,e,i){let r=[],s=[],a,d;n.doc.nodesBetween(t,e,(h,m,y)=>{if(!h.isInline)return;let E=h.marks;if(!i.isInSet(E)&&y.type.allowsMarkType(i.type)){let O=Math.max(m,t),T=Math.min(m+h.nodeSize,e),S=i.addToSet(E);for(let F=0;F<E.length;F++)E[F].isInSet(S)||(a&&a.to==O&&a.mark.eq(E[F])?a.to=T:r.push(a=new Gs(O,T,E[F])));d&&d.to==O?d.to=T:s.push(d=new vc(O,T,i))}}),r.forEach(h=>n.step(h)),s.forEach(h=>n.step(h))}function Ew(n,t,e,i){let r=[],s=0;n.doc.nodesBetween(t,e,(a,d)=>{if(!a.isInline)return;s++;let h=null;if(i instanceof pc){let m=a.marks,y;for(;y=i.isInSet(m);)(h||(h=[])).push(y),m=y.removeFromSet(m)}else i?i.isInSet(a.marks)&&(h=[i]):h=a.marks;if(h&&h.length){let m=Math.min(d+a.nodeSize,e);for(let y=0;y<h.length;y++){let E=h[y],O;for(let T=0;T<r.length;T++){let S=r[T];S.step==s-1&&E.eq(r[T].style)&&(O=S)}O?(O.to=m,O.step=s):r.push({style:E,from:Math.max(d,t),to:m,step:s})}}}),r.forEach(a=>n.step(new Gs(a.from,a.to,a.style)))}function ah(n,t,e,i=e.contentMatch,r=!0){let s=n.doc.nodeAt(t),a=[],d=t+1;for(let h=0;h<s.childCount;h++){let m=s.child(h),y=d+m.nodeSize,E=i.matchType(m.type);if(!E)a.push(new $i(d,y,Ue.empty));else{i=E;for(let O=0;O<m.marks.length;O++)e.allowsMarkType(m.marks[O].type)||n.step(new Gs(d,y,m.marks[O]));if(r&&m.isText&&e.whitespace!="pre"){let O,T=/\r?\n|\r/g,S;for(;O=T.exec(m.text);)S||(S=new Ue(Se.from(e.schema.text(" ",e.allowedMarks(m.marks))),0,0)),a.push(new $i(d+O.index,d+O.index+O[0].length,S))}}d=y}if(!i.validEnd){let h=i.fillBefore(Se.empty,!0);n.replace(d,d,new Ue(h,0,0))}for(let h=a.length-1;h>=0;h--)n.step(a[h])}function xw(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function Us(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let r=n.$from.node(i),s=n.$from.index(i),a=n.$to.indexAfter(i);if(i<n.depth&&r.canReplace(s,a,e))return i;if(i==0||r.type.spec.isolating||!xw(r,s,a))break}return null}function ww(n,t,e){let{$from:i,$to:r,depth:s}=t,a=i.before(s+1),d=r.after(s+1),h=a,m=d,y=Se.empty,E=0;for(let S=s,F=!1;S>e;S--)F||i.index(S)>0?(F=!0,y=Se.from(i.node(S).copy(y)),E++):h--;let O=Se.empty,T=0;for(let S=s,F=!1;S>e;S--)F||r.after(S+1)<r.end(S)?(F=!0,O=Se.from(r.node(S).copy(O)),T++):m++;n.step(new qn(h,m,a,d,new Ue(y.append(O),E,T),y.size-E,!0))}function Xa(n,t,e=null,i=n){let r=Sw(n,t),s=r&&Tw(i,t);return s?r.map(J0).concat({type:t,attrs:e}).concat(s.map(J0)):null}function J0(n){return{type:n,attrs:null}}function Sw(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.contentMatchAt(i).findWrapping(t);if(!s)return null;let a=s.length?s[0]:t;return e.canReplaceWith(i,r,a)?s:null}function Tw(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.child(i),a=t.contentMatch.findWrapping(s.type);if(!a)return null;let h=(a.length?a[a.length-1]:t).contentMatch;for(let m=i;h&&m<r;m++)h=h.matchType(e.child(m).type);return!h||!h.validEnd?null:a}function Iw(n,t,e){let i=Se.empty;for(let a=e.length-1;a>=0;a--){if(i.size){let d=e[a].type.contentMatch.matchFragment(i);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=Se.from(e[a].type.create(e[a].attrs,i))}let r=t.start,s=t.end;n.step(new qn(r,s,r,s,new Ue(i,0,0),e.length,!0))}function Ow(n,t,e,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(t,e,(a,d)=>{let h=typeof r=="function"?r(a):r;if(a.isTextblock&&!a.hasMarkup(i,h)&&Mw(n.doc,n.mapping.slice(s).map(d),i)){let m=null;if(i.schema.linebreakReplacement){let T=i.whitespace=="pre",S=!!i.contentMatch.matchType(i.schema.linebreakReplacement);T&&!S?m=!1:!T&&S&&(m=!0)}m===!1&&rv(n,a,d,s),ah(n,n.mapping.slice(s).map(d,1),i,void 0,m===null);let y=n.mapping.slice(s),E=y.map(d,1),O=y.map(d+a.nodeSize,1);return n.step(new qn(E,O,E+1,O-1,new Ue(Se.from(i.create(h,null,a.marks)),0,0),1,!0)),m===!0&&iv(n,a,d,s),!1}})}function iv(n,t,e,i){t.forEach((r,s)=>{if(r.isText){let a,d=/\r?\n|\r/g;for(;a=d.exec(r.text);){let h=n.mapping.slice(i).map(e+1+s+a.index);n.replaceWith(h,h+1,t.type.schema.linebreakReplacement.create())}}})}function rv(n,t,e,i){t.forEach((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let a=n.mapping.slice(i).map(e+1+s);n.replaceWith(a,a+1,t.type.schema.text(`
`))}})}function Mw(n,t,e){let i=n.resolve(t),r=i.index();return i.parent.canReplaceWith(r,r+1,e)}function Aw(n,t,e,i,r){let s=n.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");e||(e=s.type);let a=e.create(i,null,r||s.marks);if(s.isLeaf)return n.replaceWith(t,t+s.nodeSize,a);if(!e.validContent(s.content))throw new RangeError("Invalid content for node type "+e.name);n.step(new qn(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Ue(Se.from(a),0,0),1,!0))}function rs(n,t,e=1,i){let r=n.resolve(t),s=r.depth-e,a=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!a.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let m=r.depth-1,y=e-2;m>s;m--,y--){let E=r.node(m),O=r.index(m);if(E.type.spec.isolating)return!1;let T=E.content.cutByIndex(O,E.childCount),S=i&&i[y+1];S&&(T=T.replaceChild(0,S.type.create(S.attrs)));let F=i&&i[y]||E;if(!E.canReplace(O+1,E.childCount)||!F.type.validContent(T))return!1}let d=r.indexAfter(s),h=i&&i[0];return r.node(s).canReplaceWith(d,d,h?h.type:r.node(s+1).type)}function kw(n,t,e=1,i){let r=n.doc.resolve(t),s=Se.empty,a=Se.empty;for(let d=r.depth,h=r.depth-e,m=e-1;d>h;d--,m--){s=Se.from(r.node(d).copy(s));let y=i&&i[m];a=Se.from(y?y.type.create(y.attrs,a):r.node(d).copy(a))}n.step(new $i(t,t,new Ue(s.append(a),e,e),!0))}function qs(n,t){let e=n.resolve(t),i=e.index();return Dw(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(i,i+1)}function Pw(n,t){t.content.size||n.type.compatibleContent(t.type);let e=n.contentMatchAt(n.childCount),{linebreakReplacement:i}=n.type.schema;for(let r=0;r<t.childCount;r++){let s=t.child(r),a=s.type==i?n.type.schema.nodes.text:s.type;if(e=e.matchType(a),!e||!n.type.allowsMarks(s.marks))return!1}return e.validEnd}function Dw(n,t){return!!(n&&t&&!n.isLeaf&&Pw(n,t))}function Lw(n,t,e){let i=null,{linebreakReplacement:r}=n.doc.type.schema,s=n.doc.resolve(t-e),a=s.node().type;if(r&&a.inlineContent){let y=a.whitespace=="pre",E=!!a.contentMatch.matchType(r);y&&!E?i=!1:!y&&E&&(i=!0)}let d=n.steps.length;if(i===!1){let y=n.doc.resolve(t+e);rv(n,y.node(),y.before(),d)}a.inlineContent&&ah(n,t+e-1,a,s.node().contentMatchAt(s.index()),i==null);let h=n.mapping.slice(d),m=h.map(t-e);if(n.step(new $i(m,h.map(t+e,-1),Ue.empty,!0)),i===!0){let y=n.doc.resolve(m);iv(n,y.node(),y.before(),n.steps.length)}return n}function Rw(n,t,e){let i=n.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),e))return t;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,e))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,e))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function ov(n,t,e){let i=n.resolve(t);if(!e.content.size)return t;let r=e.content;for(let s=0;s<e.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(e.openStart==0&&e.size?2:1);s++)for(let a=i.depth;a>=0;a--){let d=a==i.depth?0:i.pos<=(i.start(a+1)+i.end(a+1))/2?-1:1,h=i.index(a)+(d>0?1:0),m=i.node(a),y=!1;if(s==1)y=m.canReplace(h,h,r);else{let E=m.contentMatchAt(h).findWrapping(r.firstChild.type);y=E&&m.canReplaceWith(h,h,E[0])}if(y)return d==0?i.pos:d<0?i.before(a+1):i.after(a+1)}return null}function bd(n,t,e=t,i=Ue.empty){if(t==e&&!i.size)return null;let r=n.resolve(t),s=n.resolve(e);return sv(r,s,i)?new $i(t,e,i):new oh(r,s,i).fit()}function sv(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}var oh=class{constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=Se.empty;for(let r=0;r<=t.depth;r++){let s=t.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(r))})}for(let r=t.depth;r>0;r--)this.placed=Se.from(t.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let m=this.findFittable();m?this.placeNodes(m):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;let s=this.placed,a=i.depth,d=r.depth;for(;a&&d&&s.childCount==1;)s=s.firstChild.content,a--,d--;let h=new Ue(s,a,d);return t>-1?new qn(i.pos,t,this.$to.pos,this.$to.end(),h,e):h.size||i.pos!=this.$to.pos?new $i(i.pos,r.pos,h):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<t;i++){let s=e.firstChild;if(e.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){t=i;break}e=s.content}for(let e=1;e<=2;e++)for(let i=e==1?t:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=nh(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let a=r.firstChild;for(let d=this.depth;d>=0;d--){let{type:h,match:m}=this.frontier[d],y,E=null;if(e==1&&(a?m.matchType(a.type)||(E=m.fillBefore(Se.from(a),!1)):s&&h.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:d,parent:s,inject:E};if(e==2&&a&&(y=m.findWrapping(a.type)))return{sliceDepth:i,frontierDepth:d,parent:s,wrap:y};if(s&&m.matchType(s.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=nh(t,e);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new Ue(t,e+1,Math.max(i,r.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=nh(t,e);if(r.childCount<=1&&e>0){let s=t.size-e<=e+r.size;this.unplaced=new Ue(hc(t,e-1,1),e-1,s?e-1:i)}else this.unplaced=new Ue(hc(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:r,wrap:s}){for(;this.depth>e;)this.closeFrontierNode();if(s)for(let F=0;F<s.length;F++)this.openFrontierNode(s[F]);let a=this.unplaced,d=i?i.content:a.content,h=a.openStart-t,m=0,y=[],{match:E,type:O}=this.frontier[e];if(r){for(let F=0;F<r.childCount;F++)y.push(r.child(F));E=E.matchFragment(r)}let T=d.size+t-(a.content.size-a.openEnd);for(;m<d.childCount;){let F=d.child(m),G=E.matchType(F.type);if(!G)break;m++,(m>1||h==0||F.content.size)&&(E=G,y.push(av(F.mark(O.allowedMarks(F.marks)),m==1?h:0,m==d.childCount?T:-1)))}let S=m==d.childCount;S||(T=-1),this.placed=mc(this.placed,e,Se.from(y)),this.frontier[e].match=E,S&&T<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let F=0,G=d;F<T;F++){let j=G.lastChild;this.frontier.push({type:j.type,match:j.contentMatchAt(j.childCount)}),G=j.content}this.unplaced=S?t==0?Ue.empty:new Ue(hc(a.content,t-1,1),t-1,T<0?a.openEnd:t-1):new Ue(hc(a.content,t,m),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!ih(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:r}=this.frontier[e],s=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=ih(t,e,r,i,s);if(a){for(let d=e-1;d>=0;d--){let{match:h,type:m}=this.frontier[d],y=ih(t,d,m,h,!0);if(!y||y.childCount)continue e}return{depth:e,fit:a,move:s?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=mc(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let r=t.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,t.index(i));this.openFrontierNode(r.type,r.attrs,s)}return t}openFrontierNode(t,e=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=mc(this.placed,this.depth,Se.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Se.empty,!0);e.childCount&&(this.placed=mc(this.placed,this.frontier.length,e))}};function hc(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(hc(n.firstChild.content,t-1,e)))}function mc(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(mc(n.lastChild.content,t-1,e)))}function nh(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function av(n,t,e){if(t<=0)return n;let i=n.content;return t>1&&(i=i.replaceChild(0,av(i.firstChild,t-1,i.childCount==1?e-1:0))),t>0&&(i=n.type.contentMatch.fillBefore(i).append(i),e<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(Se.empty,!0)))),n.copy(i)}function ih(n,t,e,i,r){let s=n.node(t),a=r?n.indexAfter(t):n.index(t);if(a==s.childCount&&!e.compatibleContent(s.type))return null;let d=i.fillBefore(s.content,!0,a);return d&&!Nw(e,s.content,a)?d:null}function Nw(n,t,e){for(let i=e;i<t.childCount;i++)if(!n.allowsMarks(t.child(i).marks))return!0;return!1}function Fw(n){return n.spec.defining||n.spec.definingForContent}function Bw(n,t,e,i){if(!i.size)return n.deleteRange(t,e);let r=n.doc.resolve(t),s=n.doc.resolve(e);if(sv(r,s,i))return n.step(new $i(t,e,i));let a=cv(r,n.doc.resolve(e));a[a.length-1]==0&&a.pop();let d=-(r.depth+1);a.unshift(d);for(let O=r.depth,T=r.pos-1;O>0;O--,T--){let S=r.node(O).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;a.indexOf(O)>-1?d=O:r.before(O)==T&&a.splice(1,0,-O)}let h=a.indexOf(d),m=[],y=i.openStart;for(let O=i.content,T=0;;T++){let S=O.firstChild;if(m.push(S),T==i.openStart)break;O=S.content}for(let O=y-1;O>=0;O--){let T=m[O],S=Fw(T.type);if(S&&!T.sameMarkup(r.node(Math.abs(d)-1)))y=O;else if(S||!T.type.isTextblock)break}for(let O=i.openStart;O>=0;O--){let T=(O+y+1)%(i.openStart+1),S=m[T];if(S)for(let F=0;F<a.length;F++){let G=a[(F+h)%a.length],j=!0;G<0&&(j=!1,G=-G);let oe=r.node(G-1),ve=r.index(G-1);if(oe.canReplaceWith(ve,ve,S.type,S.marks))return n.replace(r.before(G),j?s.after(G):e,new Ue(lv(i.content,0,i.openStart,T),T,i.openEnd))}}let E=n.steps.length;for(let O=a.length-1;O>=0&&(n.replace(t,e,i),!(n.steps.length>E));O--){let T=a[O];T<0||(t=r.before(T),e=s.after(T))}}function lv(n,t,e,i,r){if(t<e){let s=n.firstChild;n=n.replaceChild(0,s.copy(lv(s.content,t+1,e,i,s)))}if(t>i){let s=r.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(Se.empty,!0))}return n}function Vw(n,t,e,i){if(!i.isInline&&t==e&&n.doc.resolve(t).parent.content.size){let r=Rw(n.doc,t,i.type);r!=null&&(t=e=r)}n.replaceRange(t,e,new Ue(Se.from(i),0,0))}function zw(n,t,e){let i=n.doc.resolve(t),r=n.doc.resolve(e),s=cv(i,r);for(let a=0;a<s.length;a++){let d=s[a],h=a==s.length-1;if(h&&d==0||i.node(d).type.contentMatch.validEnd)return n.delete(i.start(d),r.end(d));if(d>0&&(h||i.node(d-1).canReplace(i.index(d-1),r.indexAfter(d-1))))return n.delete(i.before(d),r.after(d))}for(let a=1;a<=i.depth&&a<=r.depth;a++)if(t-i.start(a)==i.depth-a&&e>i.end(a)&&r.end(a)-e!=r.depth-a&&i.start(a-1)==r.start(a-1)&&i.node(a-1).canReplace(i.index(a-1),r.index(a-1)))return n.delete(i.before(a),e);n.delete(t,e)}function cv(n,t){let e=[],i=Math.min(n.depth,t.depth);for(let r=i;r>=0;r--){let s=n.start(r);if(s<n.pos-(n.depth-r)||t.end(r)>t.pos+(t.depth-r)||n.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==n.depth&&r==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&e.push(r)}return e}var _d=class n extends Un{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return Kn.fail("No node at attribute step's position");let i=Object.create(null);for(let s in e.attrs)i[s]=e.attrs[s];i[this.attr]=this.value;let r=e.type.create(i,null,e.marks);return Kn.fromReplace(t,this.pos,this.pos+1,new Ue(Se.from(r),0,e.isLeaf?0:1))}getMap(){return wo.empty}invert(t){return new n(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(e.pos,e.attr,e.value)}};Un.jsonID("attr",_d);var vd=class n extends Un{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let i=t.type.create(e,t.content,t.marks);return Kn.ok(i)}getMap(){return wo.empty}invert(t){return new n(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new n(e.attr,e.value)}};Un.jsonID("docAttr",vd);var Ya=class extends Error{};Ya=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};Ya.prototype=Object.create(Error.prototype);Ya.prototype.constructor=Ya;Ya.prototype.name="TransformError";var yd=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new _c}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new Ya(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,i=Ue.empty){let r=bd(this.doc,t,e,i);return r&&this.step(r),this}replaceWith(t,e,i){return this.replace(t,e,new Ue(Se.from(i),0,0))}delete(t,e){return this.replace(t,e,Ue.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,i){return Bw(this,t,e,i),this}replaceRangeWith(t,e,i){return Vw(this,t,e,i),this}deleteRange(t,e){return zw(this,t,e),this}lift(t,e){return ww(this,t,e),this}join(t,e=1){return Lw(this,t,e),this}wrap(t,e){return Iw(this,t,e),this}setBlockType(t,e=t,i,r=null){return Ow(this,t,e,i,r),this}setNodeMarkup(t,e,i=null,r){return Aw(this,t,e,i,r),this}setNodeAttribute(t,e,i){return this.step(new _d(t,e,i)),this}setDocAttribute(t,e){return this.step(new vd(t,e)),this}addNodeMark(t,e){return this.step(new yc(t,e)),this}removeNodeMark(t,e){if(!(e instanceof on)){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(e=e.isInSet(i.marks),!e)return this}return this.step(new bc(t,e)),this}split(t,e=1,i){return kw(this,t,e,i),this}addMark(t,e,i){return Cw(this,t,e,i),this}removeMark(t,e,i){return Ew(this,t,e,i),this}clearIncompatible(t,e,i){return ah(this,t,e,i),this}};var lh=Object.create(null),It=class{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new Qa(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=Ue.empty){let i=e.content.lastChild,r=null;for(let d=0;d<e.openEnd;d++)r=i,i=i.lastChild;let s=t.steps.length,a=this.ranges;for(let d=0;d<a.length;d++){let{$from:h,$to:m}=a[d],y=t.mapping.slice(s);t.replaceRange(y.map(h.pos),y.map(m.pos),d?Ue.empty:e),d==0&&pv(t,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:a,$to:d}=r[s],h=t.mapping.slice(i),m=h.map(a.pos),y=h.map(d.pos);s?t.deleteRange(m,y):(t.replaceRangeWith(m,y,e),pv(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let r=t.parent.inlineContent?new tn(t):Ja(t.node(0),t.parent,t.pos,t.index(),e,i);if(r)return r;for(let s=t.depth-1;s>=0;s--){let a=e<0?Ja(t.node(0),t.node(s),t.before(s+1),t.index(s),e,i):Ja(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,e,i);if(a)return a}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new er(t.node(0))}static atStart(t){return Ja(t,t,0,0,1)||new er(t)}static atEnd(t){return Ja(t,t,t.content.size,t.childCount,-1)||new er(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=lh[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in lh)throw new RangeError("Duplicate use of selection JSON ID "+t);return lh[t]=e,e.prototype.jsonID=t,e}getBookmark(){return tn.between(this.$anchor,this.$head).getBookmark()}};It.prototype.visible=!0;var Qa=class{constructor(t,e){this.$from=t,this.$to=e}},uv=!1;function dv(n){!uv&&!n.parent.inlineContent&&(uv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}var tn=class n extends It{constructor(t,e=t){dv(t),dv(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return It.near(i);let r=t.resolve(e.map(this.anchor));return new n(r.parent.inlineContent?r:i,i)}replace(t,e=Ue.empty){if(super.replace(t,e),e==Ue.empty){let i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}}eq(t){return t instanceof n&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Ed(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let r=t.resolve(e);return new this(r,i==e?r:t.resolve(i))}static between(t,e,i){let r=t.pos-e.pos;if((!i||r)&&(i=r>=0?1:-1),!e.parent.inlineContent){let s=It.findFrom(e,i,!0)||It.findFrom(e,-i,!0);if(s)e=s.$head;else return It.near(e,i)}return t.parent.inlineContent||(r==0?t=e:(t=(It.findFrom(t,-i,!0)||It.findFrom(t,i,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new n(t,e)}};It.jsonID("text",tn);var Ed=class n{constructor(t,e){this.anchor=t,this.head=e}map(t){return new n(t.map(this.anchor),t.map(this.head))}resolve(t){return tn.between(t.resolve(this.anchor),t.resolve(this.head))}},ct=class n extends It{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:r}=e.mapResult(this.anchor),s=t.resolve(r);return i?It.near(s):new n(s)}content(){return new Ue(Se.from(this.node),0,0)}eq(t){return t instanceof n&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new uh(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(t.resolve(e.anchor))}static create(t,e){return new n(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}};ct.prototype.visible=!1;It.jsonID("node",ct);var uh=class n{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new Ed(i,i):new n(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&ct.isSelectable(i)?new ct(e):It.near(e)}},er=class n extends It{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=Ue.empty){if(e==Ue.empty){t.delete(0,t.doc.content.size);let i=It.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new n(t)}map(t){return new n(t)}eq(t){return t instanceof n}getBookmark(){return Hw}};It.jsonID("all",er);var Hw={map(){return this},resolve(n){return new er(n)}};function Ja(n,t,e,i,r,s=!1){if(t.inlineContent)return tn.create(n,e);for(let a=i-(r>0?0:1);r>0?a<t.childCount:a>=0;a+=r){let d=t.child(a);if(d.isAtom){if(!s&&ct.isSelectable(d))return ct.create(n,e-(r<0?d.nodeSize:0))}else{let h=Ja(n,d,e+r,r<0?d.childCount:0,r,s);if(h)return h}e+=d.nodeSize*r}return null}function pv(n,t,e){let i=n.steps.length-1;if(i<t)return;let r=n.steps[i];if(!(r instanceof $i||r instanceof qn))return;let s=n.mapping.maps[i],a;s.forEach((d,h,m,y)=>{a==null&&(a=y)}),n.setSelection(It.near(n.doc.resolve(a),e))}var fv=1,Cd=2,hv=4,dh=class extends yd{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|fv)&~Cd,this.storedMarks=null,this}get selectionSet(){return(this.updated&fv)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Cd,this}ensureMarks(t){return on.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Cd)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~Cd,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let i=this.selection;return e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||on.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,i){let r=this.doc.type.schema;if(e==null)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(i==null&&(i=e),i=i??e,!t)return this.deleteRange(e,i);let s=this.storedMarks;if(!s){let a=this.doc.resolve(e);s=i==e?a.marks():a.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,r.text(t,s)),this.selection.empty||this.setSelection(It.near(this.selection.$to)),this}}setMeta(t,e){return this.meta[typeof t=="string"?t:t.key]=e,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=hv,this}get scrolledIntoView(){return(this.updated&hv)>0}};function mv(n,t){return!t||!n?n:n.bind(t)}var Ws=class{constructor(t,e,i){this.name=t,this.init=mv(e.init,i),this.apply=mv(e.apply,i)}},Gw=[new Ws("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Ws("selection",{init(n,t){return n.selection||It.atStart(t.doc)},apply(n){return n.selection}}),new Ws("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,i){return i.selection.$cursor?n.storedMarks:null}}),new Ws("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}})],Cc=class{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Gw.slice(),e&&e.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Ws(i.key,i.spec.state,i))})}},xd=class n{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=e){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],i=this.applyInner(t),r=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let d=this.config.plugins[a];if(d.spec.appendTransaction){let h=r?r[a].n:0,m=r?r[a].state:this,y=h<e.length&&d.spec.appendTransaction.call(d,h?e.slice(h):e,m,i);if(y&&i.filterTransaction(y,a)){if(y.setMeta("appendedTransaction",t),!r){r=[];for(let E=0;E<this.config.plugins.length;E++)r.push(E<a?{state:i,n:e.length}:{state:this,n:0})}e.push(y),i=i.applyInner(y),s=!0}r&&(r[a]={state:i,n:e.length})}}if(!s)return{state:i,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new n(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];e[s.name]=s.apply(t,this[s.name],this,e)}return e}get tr(){return new dh(this)}static create(t){let e=new Cc(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new n(e);for(let r=0;r<e.fields.length;r++)i[e.fields[r].name]=e.fields[r].init(t,i);return i}reconfigure(t){let e=new Cc(this.schema,t.plugins),i=e.fields,r=new n(e);for(let s=0;s<i.length;s++){let a=i[s].name;r[a]=this.hasOwnProperty(a)?this[a]:i[s].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(i=>i.toJSON())),t&&typeof t=="object")for(let i in t){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[i],s=r.spec.state;s&&s.toJSON&&(e[i]=s.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let r=new Cc(t.schema,t.plugins),s=new n(r);return r.fields.forEach(a=>{if(a.name=="doc")s.doc=$r.fromJSON(t.schema,e.doc);else if(a.name=="selection")s.selection=It.fromJSON(s.doc,e.selection);else if(a.name=="storedMarks")e.storedMarks&&(s.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let d in i){let h=i[d],m=h.spec.state;if(h.key==a.name&&m&&m.fromJSON&&Object.prototype.hasOwnProperty.call(e,d)){s[a.name]=m.fromJSON.call(h,t,e[d],s);return}}s[a.name]=a.init(t,s)}}),s}};function gv(n,t,e){for(let i in n){let r=n[i];r instanceof Function?r=r.bind(t):i=="handleDOMEvents"&&(r=gv(r,t,{})),e[i]=r}return e}var ri=class{constructor(t){this.spec=t,this.props={},t.props&&gv(t.props,this,this.props),this.key=t.key?t.key.key:_v("plugin")}getState(t){return t[this.key]}},ch=Object.create(null);function _v(n){return n in ch?n+"$"+ ++ch[n]:(ch[n]=0,n+"$")}var tr=class{constructor(t="key"){this.key=_v(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}};var Yn=function(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t},Sc=function(n){let t=n.assignedSlot||n.parentNode;return t&&t.nodeType==11?t.host:t},_h=null,To=function(n,t,e){let i=_h||(_h=document.createRange());return i.setEnd(n,e??n.nodeValue.length),i.setStart(n,t||0),i},Uw=function(){_h=null},Qs=function(n,t,e,i){return e&&(vv(n,t,e,i,-1)||vv(n,t,e,i,1))},qw=/^(img|br|input|textarea|hr)$/i;function vv(n,t,e,i,r){for(;;){if(n==e&&t==i)return!0;if(t==(r<0?0:cr(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Mc(n)||qw.test(n.nodeName)||n.contentEditable=="false")return!1;t=Yn(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[t+(r<0?-1:0)],n.contentEditable=="false")return!1;t=r<0?cr(n):0}else return!1}}function cr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ww(n,t){for(;;){if(n.nodeType==3&&t)return n;if(n.nodeType==1&&t>0){if(n.contentEditable=="false")return null;n=n.childNodes[t-1],t=cr(n)}else if(n.parentNode&&!Mc(n))t=Yn(n),n=n.parentNode;else return null}}function jw(n,t){for(;;){if(n.nodeType==3&&t<n.nodeValue.length)return n;if(n.nodeType==1&&t<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[t],t=0}else if(n.parentNode&&!Mc(n))t=Yn(n)+1,n=n.parentNode;else return null}}function Zw(n,t,e){for(let i=t==0,r=t==cr(n);i||r;){if(n==e)return!0;let s=Yn(n);if(n=n.parentNode,!n)return!1;i=i&&s==0,r=r&&s==cr(n)}}function Mc(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}var Rd=function(n){return n.focusNode&&Qs(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function js(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function Kw(n){let t=n.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Yw(n,t,e){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(t,e);if(i)return{node:i.offsetNode,offset:Math.min(cr(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(t,e);if(i)return{node:i.startContainer,offset:Math.min(cr(i.startContainer),i.startOffset)}}}var eo=typeof navigator<"u"?navigator:null,yv=typeof document<"u"?document:null,ds=eo&&eo.userAgent||"",vh=/Edge\/(\d+)/.exec(ds),Jv=/MSIE \d/.exec(ds),yh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ds),Li=!!(Jv||yh||vh),cs=Jv?document.documentMode:yh?+yh[1]:vh?+vh[1]:0,Lr=!Li&&/gecko\/(\d+)/i.test(ds);Lr&&+(/Firefox\/(\d+)/.exec(ds)||[0,0])[1];var bh=!Li&&/Chrome\/(\d+)/.exec(ds),si=!!bh,Qv=bh?+bh[1]:0,gi=!Li&&!!eo&&/Apple Computer/.test(eo.vendor),il=gi&&(/Mobile\/\w+/.test(ds)||!!eo&&eo.maxTouchPoints>2),lr=il||(eo?/Mac/.test(eo.platform):!1),Xw=eo?/Win/.test(eo.platform):!1,Io=/Android \d/.test(ds),Ac=!!yv&&"webkitFontSmoothing"in yv.documentElement.style,Jw=Ac?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Qw(n){let t=n.defaultView&&n.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function So(n,t){return typeof n=="number"?n:n[t]}function $w(n){let t=n.getBoundingClientRect(),e=t.width/n.offsetWidth||1,i=t.height/n.offsetHeight||1;return{left:t.left,right:t.left+n.clientWidth*e,top:t.top,bottom:t.top+n.clientHeight*i}}function bv(n,t,e){let i=n.someProp("scrollThreshold")||0,r=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=e||n.dom;a;a=Sc(a)){if(a.nodeType!=1)continue;let d=a,h=d==s.body,m=h?Qw(s):$w(d),y=0,E=0;if(t.top<m.top+So(i,"top")?E=-(m.top-t.top+So(r,"top")):t.bottom>m.bottom-So(i,"bottom")&&(E=t.bottom-t.top>m.bottom-m.top?t.top+So(r,"top")-m.top:t.bottom-m.bottom+So(r,"bottom")),t.left<m.left+So(i,"left")?y=-(m.left-t.left+So(r,"left")):t.right>m.right-So(i,"right")&&(y=t.right-m.right+So(r,"right")),y||E)if(h)s.defaultView.scrollBy(y,E);else{let O=d.scrollLeft,T=d.scrollTop;E&&(d.scrollTop+=E),y&&(d.scrollLeft+=y);let S=d.scrollLeft-O,F=d.scrollTop-T;t={left:t.left-S,top:t.top-F,right:t.right-S,bottom:t.bottom-F}}if(h||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function eS(n){let t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top),i,r;for(let s=(t.left+t.right)/2,a=e+1;a<Math.min(innerHeight,t.bottom);a+=5){let d=n.root.elementFromPoint(s,a);if(!d||d==n.dom||!n.dom.contains(d))continue;let h=d.getBoundingClientRect();if(h.top>=e-20){i=d,r=h.top;break}}return{refDOM:i,refTop:r,stack:$v(n.dom)}}function $v(n){let t=[],e=n.ownerDocument;for(let i=n;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=e);i=Sc(i));return t}function tS({refDOM:n,refTop:t,stack:e}){let i=n?n.getBoundingClientRect().top:0;ey(e,i==0?0:i-t)}function ey(n,t){for(let e=0;e<n.length;e++){let{dom:i,top:r,left:s}=n[e];i.scrollTop!=r+t&&(i.scrollTop=r+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var $a=null;function nS(n){if(n.setActive)return n.setActive();if($a)return n.focus($a);let t=$v(n);n.focus($a==null?{get preventScroll(){return $a={preventScroll:!0},!0}}:void 0),$a||($a=!1,ey(t,0))}function ty(n,t){let e,i=2e8,r,s=0,a=t.top,d=t.top,h,m;for(let y=n.firstChild,E=0;y;y=y.nextSibling,E++){let O;if(y.nodeType==1)O=y.getClientRects();else if(y.nodeType==3)O=To(y).getClientRects();else continue;for(let T=0;T<O.length;T++){let S=O[T];if(S.top<=a&&S.bottom>=d){a=Math.max(S.bottom,a),d=Math.min(S.top,d);let F=S.left>t.left?S.left-t.left:S.right<t.left?t.left-S.right:0;if(F<i){e=y,i=F,r=F&&e.nodeType==3?{left:S.right<t.left?S.right:S.left,top:t.top}:t,y.nodeType==1&&F&&(s=E+(t.left>=(S.left+S.right)/2?1:0));continue}}else S.top>t.top&&!h&&S.left<=t.left&&S.right>=t.left&&(h=y,m={left:Math.max(S.left,Math.min(S.right,t.left)),top:S.top});!e&&(t.left>=S.right&&t.top>=S.top||t.left>=S.left&&t.top>=S.bottom)&&(s=E+1)}}return!e&&h&&(e=h,r=m,i=0),e&&e.nodeType==3?iS(e,r):!e||i&&e.nodeType==1?{node:n,offset:s}:ty(e,r)}function iS(n,t){let e=n.nodeValue.length,i=document.createRange();for(let r=0;r<e;r++){i.setEnd(n,r+1),i.setStart(n,r);let s=ss(i,1);if(s.top!=s.bottom&&Rh(t,s))return{node:n,offset:r+(t.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Rh(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function rS(n,t){let e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}function oS(n,t,e){let{node:i,offset:r}=ty(t,e),s=-1;if(i.nodeType==1&&!i.firstChild){let a=i.getBoundingClientRect();s=a.left!=a.right&&e.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(i,r,s)}function sS(n,t,e,i){let r=-1;for(let s=t,a=!1;s!=n.dom;){let d=n.docView.nearestDesc(s,!0),h;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((h=d.dom.getBoundingClientRect()).width||h.height)&&(d.node.isBlock&&d.parent&&(!a&&h.left>i.left||h.top>i.top?r=d.posBefore:(!a&&h.right<i.left||h.bottom<i.top)&&(r=d.posAfter),a=!0),!d.contentDOM&&r<0&&!d.node.isText))return(d.node.isBlock?i.top<(h.top+h.bottom)/2:i.left<(h.left+h.right)/2)?d.posBefore:d.posAfter;s=d.dom.parentNode}return r>-1?r:n.docView.posFromDOM(t,e,-1)}function ny(n,t,e){let i=n.childNodes.length;if(i&&e.top<e.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-e.top)/(e.bottom-e.top))-2)),s=r;;){let a=n.childNodes[s];if(a.nodeType==1){let d=a.getClientRects();for(let h=0;h<d.length;h++){let m=d[h];if(Rh(t,m))return ny(a,t,m)}}if((s=(s+1)%i)==r)break}return n}function aS(n,t){let e=n.dom.ownerDocument,i,r=0,s=Yw(e,t.left,t.top);s&&({node:i,offset:r}=s);let a=(n.root.elementFromPoint?n.root:e).elementFromPoint(t.left,t.top),d;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let m=n.dom.getBoundingClientRect();if(!Rh(t,m)||(a=ny(n.dom,t,m),!a))return null}if(gi)for(let m=a;i&&m;m=Sc(m))m.draggable&&(i=void 0);if(a=rS(a,t),i){if(Lr&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let y=i.childNodes[r],E;y.nodeName=="IMG"&&(E=y.getBoundingClientRect()).right<=t.left&&E.bottom>t.top&&r++}let m;Ac&&r&&i.nodeType==1&&(m=i.childNodes[r-1]).nodeType==1&&m.contentEditable=="false"&&m.getBoundingClientRect().top>=t.top&&r--,i==n.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&t.top>i.lastChild.getBoundingClientRect().bottom?d=n.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(d=sS(n,i,r,t))}d==null&&(d=oS(n,a,t));let h=n.docView.nearestDesc(a,!0);return{pos:d,inside:h?h.posAtStart-h.border:-1}}function Cv(n){return n.top<n.bottom||n.left<n.right}function ss(n,t){let e=n.getClientRects();if(e.length){let i=e[t<0?0:e.length-1];if(Cv(i))return i}return Array.prototype.find.call(e,Cv)||n.getBoundingClientRect()}var lS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function iy(n,t,e){let{node:i,offset:r,atom:s}=n.docView.domFromPos(t,e<0?-1:1),a=Ac||Lr;if(i.nodeType==3)if(a&&(lS.test(i.nodeValue)||(e<0?!r:r==i.nodeValue.length))){let h=ss(To(i,r,r),e);if(Lr&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let m=ss(To(i,r-1,r-1),-1);if(m.top==h.top){let y=ss(To(i,r,r+1),-1);if(y.top!=h.top)return Ec(y,y.left<m.left)}}return h}else{let h=r,m=r,y=e<0?1:-1;return e<0&&!r?(m++,y=-1):e>=0&&r==i.nodeValue.length?(h--,y=1):e<0?h--:m++,Ec(ss(To(i,h,m),y),y<0)}if(!n.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&r&&(e<0||r==cr(i))){let h=i.childNodes[r-1];if(h.nodeType==1)return ph(h.getBoundingClientRect(),!1)}if(s==null&&r<cr(i)){let h=i.childNodes[r];if(h.nodeType==1)return ph(h.getBoundingClientRect(),!0)}return ph(i.getBoundingClientRect(),e>=0)}if(s==null&&r&&(e<0||r==cr(i))){let h=i.childNodes[r-1],m=h.nodeType==3?To(h,cr(h)-(a?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(m)return Ec(ss(m,1),!1)}if(s==null&&r<cr(i)){let h=i.childNodes[r];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let m=h?h.nodeType==3?To(h,0,a?0:1):h.nodeType==1?h:null:null;if(m)return Ec(ss(m,-1),!0)}return Ec(ss(i.nodeType==3?To(i):i,-e),e>=0)}function Ec(n,t){if(n.width==0)return n;let e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function ph(n,t){if(n.height==0)return n;let e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function ry(n,t,e){let i=n.state,r=n.root.activeElement;i!=t&&n.updateState(t),r!=n.dom&&n.focus();try{return e()}finally{i!=t&&n.updateState(i),r!=n.dom&&r&&r.focus()}}function cS(n,t,e){let i=t.selection,r=e=="up"?i.$from:i.$to;return ry(n,t,()=>{let{node:s}=n.docView.domFromPos(r.pos,e=="up"?-1:1);for(;;){let d=n.docView.nearestDesc(s,!0);if(!d)break;if(d.node.isBlock){s=d.contentDOM||d.dom;break}s=d.dom.parentNode}let a=iy(n,r.pos,1);for(let d=s.firstChild;d;d=d.nextSibling){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=To(d,0,d.nodeValue.length).getClientRects();else continue;for(let m=0;m<h.length;m++){let y=h[m];if(y.bottom>y.top+1&&(e=="up"?a.top-y.top>(y.bottom-a.top)*2:y.bottom-a.bottom>(a.bottom-y.top)*2))return!1}}return!0})}var uS=/[\u0590-\u08ac]/;function dS(n,t,e){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,a=r==i.parent.content.size,d=n.domSelection();return d?!uS.test(i.parent.textContent)||!d.modify?e=="left"||e=="backward"?s:a:ry(n,t,()=>{let{focusNode:h,focusOffset:m,anchorNode:y,anchorOffset:E}=n.domSelectionRange(),O=d.caretBidiLevel;d.modify("move",e,"character");let T=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:S,focusOffset:F}=n.domSelectionRange(),G=S&&!T.contains(S.nodeType==1?S:S.parentNode)||h==S&&m==F;try{d.collapse(y,E),h&&(h!=y||m!=E)&&d.extend&&d.extend(h,m)}catch{}return O!=null&&(d.caretBidiLevel=O),G}):i.pos==i.start()||i.pos==i.end()}var Ev=null,xv=null,wv=!1;function pS(n,t,e){return Ev==t&&xv==e?wv:(Ev=t,xv=e,wv=e=="up"||e=="down"?cS(n,t,e):dS(n,t,e))}var ur=0,Sv=1,Zs=2,to=3,$s=class{constructor(t,e,i,r){this.parent=t,this.children=e,this.dom=i,this.contentDOM=r,this.dirty=ur,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,i=this.posAtStart;;e++){let r=this.children[e];if(r==t)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,i){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(i<0){let s,a;if(t==this.contentDOM)s=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let r;if(t==this.dom&&this.contentDOM)r=e>Yn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&e==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let i=!0,r=t;r;r=r.parentNode){let s=this.getDesc(r),a;if(s&&(!e||s.node))if(i&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))i=!1;else return s}}getDesc(t){let e=t.pmViewDesc;for(let i=e;i;i=i.parent)if(i==this)return e}posFromDOM(t,e,i){for(let r=t;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(t,e,i)}return-1}descAt(t){for(let e=0,i=0;e<this.children.length;e++){let r=this.children[e],s=i+r.size;if(i==t&&s!=i){for(;!r.border&&r.children.length;)for(let a=0;a<r.children.length;a++){let d=r.children[a];if(d.size){r=d;break}}return r}if(t<s)return r.descAt(t-i-r.border);i=s}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let a=this.children[i],d=s+a.size;if(d>t||a instanceof Td){r=t-s;break}s=d}if(r)return this.children[i].domFromPos(r-this.children[i].border,e);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof wd&&s.side>=0;i--);if(e<=0){let s,a=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,a=!1);return s&&e&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,e):{node:this.contentDOM,offset:s?Yn(s.dom)+1:0}}else{let s,a=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,e):{node:this.contentDOM,offset:s?Yn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,i=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let a=i,d=0;;d++){let h=this.children[d],m=a+h.size;if(r==-1&&t<=m){let y=a+h.border;if(t>=y&&e<=m-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(t,e,y);t=a;for(let E=d;E>0;E--){let O=this.children[E-1];if(O.size&&O.dom.parentNode==this.contentDOM&&!O.emptyChildAt(1)){r=Yn(O.dom)+1;break}t-=O.size}r==-1&&(r=0)}if(r>-1&&(m>e||d==this.children.length-1)){e=m;for(let y=d+1;y<this.children.length;y++){let E=this.children[y];if(E.size&&E.dom.parentNode==this.contentDOM&&!E.emptyChildAt(-1)){s=Yn(E.dom);break}e+=E.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=m}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:i}=this.domFromPos(t,0);if(e.nodeType!=1||i==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[i]}setSelection(t,e,i,r=!1){let s=Math.min(t,e),a=Math.max(t,e);for(let T=0,S=0;T<this.children.length;T++){let F=this.children[T],G=S+F.size;if(s>S&&a<G)return F.setSelection(t-S-F.border,e-S-F.border,i,r);S=G}let d=this.domFromPos(t,t?-1:1),h=e==t?d:this.domFromPos(e,e?-1:1),m=i.root.getSelection(),y=i.domSelectionRange(),E=!1;if((Lr||gi)&&t==e){let{node:T,offset:S}=d;if(T.nodeType==3){if(E=!!(S&&T.nodeValue[S-1]==`
`),E&&S==T.nodeValue.length)for(let F=T,G;F;F=F.parentNode){if(G=F.nextSibling){G.nodeName=="BR"&&(d=h={node:G.parentNode,offset:Yn(G)+1});break}let j=F.pmViewDesc;if(j&&j.node&&j.node.isBlock)break}}else{let F=T.childNodes[S-1];E=F&&(F.nodeName=="BR"||F.contentEditable=="false")}}if(Lr&&y.focusNode&&y.focusNode!=h.node&&y.focusNode.nodeType==1){let T=y.focusNode.childNodes[y.focusOffset];T&&T.contentEditable=="false"&&(r=!0)}if(!(r||E&&gi)&&Qs(d.node,d.offset,y.anchorNode,y.anchorOffset)&&Qs(h.node,h.offset,y.focusNode,y.focusOffset))return;let O=!1;if((m.extend||t==e)&&!E){m.collapse(d.node,d.offset);try{t!=e&&m.extend(h.node,h.offset),O=!0}catch{}}if(!O){if(t>e){let S=d;d=h,h=S}let T=document.createRange();T.setEnd(h.node,h.offset),T.setStart(d.node,d.offset),m.removeAllRanges(),m.addRange(T)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(i==a?t<=a&&e>=i:t<a&&e>i){let d=i+s.border,h=a-s.border;if(t>=d&&e<=h){this.dirty=t==i||e==a?Zs:Sv,t==d&&e==h&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=to:s.markDirty(t-d,e-d);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Zs:to}i=a}this.dirty=Zs}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let i=t==1?Zs:Sv;e.dirty<i&&(e.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}},wd=class extends $s{constructor(t,e,i,r){let s,a=e.type.toDOM;if(typeof a=="function"&&(a=a(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!e.type.spec.raw){if(a.nodeType!=1){let d=document.createElement("span");d.appendChild(a),a=d}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(t,[],a,null),this.widget=e,this.widget=e,s=this}matchesWidget(t){return this.dirty==ur&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return e?e(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},Ch=class extends $s{constructor(t,e,i,r){super(t,[],e,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}},rl=class n extends $s{constructor(t,e,i,r,s){super(t,[],i,r),this.mark=e,this.spec=s}static create(t,e,i,r){let s=r.nodeViews[e.type.name],a=s&&s(e,r,i);return(!a||!a.dom)&&(a=xo.renderSpec(document,e.type.spec.toDOM(e,i),null,e.attrs)),new n(t,e,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&to||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=to&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=ur){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=ur}}slice(t,e,i){let r=n.create(this.parent,this.mark,!0,i),s=this.children,a=this.size;e<a&&(s=Sh(s,e,a,i)),t>0&&(s=Sh(s,0,t,i));for(let d=0;d<s.length;d++)s[d].parent=r;return r.children=s,r}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}},us=class n extends $s{constructor(t,e,i,r,s,a,d,h,m){super(t,[],s,a),this.node=e,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=d}static create(t,e,i,r,s,a){let d=s.nodeViews[e.type.name],h,m=d&&d(e,s,()=>{if(!h)return a;if(h.parent)return h.parent.posBeforeChild(h)},i,r),y=m&&m.dom,E=m&&m.contentDOM;if(e.isText){if(!y)y=document.createTextNode(e.text);else if(y.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else y||({dom:y,contentDOM:E}=xo.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs));!E&&!e.isText&&y.nodeName!="BR"&&(y.hasAttribute("contenteditable")||(y.contentEditable="false"),e.type.spec.draggable&&(y.draggable=!0));let O=y;return y=ay(y,i,e),m?h=new Eh(t,e,i,r,y,E||null,O,m,s,a+1):e.isText?new Sd(t,e,i,r,y,O,s):new n(t,e,i,r,y,E||null,O,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Se.empty)}return t}matchesNode(t,e,i){return this.dirty==ur&&t.eq(this.node)&&Id(e,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let i=this.node.inlineContent,r=e,s=t.composing?this.localCompositionInfo(t,e):null,a=s&&s.pos>-1?s:null,d=s&&s.pos<0,h=new wh(this,a&&a.node,t);gS(this.node,this.innerDeco,(m,y,E)=>{m.spec.marks?h.syncToMarks(m.spec.marks,i,t):m.type.side>=0&&!E&&h.syncToMarks(y==this.node.childCount?on.none:this.node.child(y).marks,i,t),h.placeWidget(m,t,r)},(m,y,E,O)=>{h.syncToMarks(m.marks,i,t);let T;h.findNodeMatch(m,y,E,O)||d&&t.state.selection.from>r&&t.state.selection.to<r+m.nodeSize&&(T=h.findIndexWithChild(s.node))>-1&&h.updateNodeAt(m,y,E,T,t)||h.updateNextNode(m,y,E,t,O,r)||h.addNode(m,y,E,t,r),r+=m.nodeSize}),h.syncToMarks([],i,t),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==Zs)&&(a&&this.protectLocalComposition(t,a),oy(this.contentDOM,this.children,t),il&&_S(this.dom))}localCompositionInfo(t,e){let{from:i,to:r}=t.state.selection;if(!(t.state.selection instanceof tn)||i<e||r>e+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,d=vS(this.node.content,a,i-e,r-e);return d<0?null:{node:s,pos:d,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:i,text:r}){if(this.getDesc(e))return;let s=e;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new Ch(this,s,e,r);t.input.compositionNodes.push(a),this.children=Sh(this.children,i,i+r.length,t,a)}update(t,e,i,r){return this.dirty==to||!t.sameMarkup(this.node)?!1:(this.updateInner(t,e,i,r),!0)}updateInner(t,e,i,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ur}updateOuterDeco(t){if(Id(t,this.outerDeco))return;let e=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=sy(this.dom,this.nodeDOM,xh(this.outerDeco,this.node,e),xh(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function Tv(n,t,e,i,r){ay(i,t,n);let s=new us(void 0,n,t,e,i,i,i,r,0);return s.contentDOM&&s.updateChildren(r,0),s}var Sd=class n extends us{constructor(t,e,i,r,s,a,d){super(t,e,i,r,s,null,a,d,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,i,r){return this.dirty==to||this.dirty!=ur&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(e),(this.dirty!=ur||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=ur,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,i){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,i)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,e,i){let r=this.node.cut(t,e),s=document.createTextNode(r.text);return new n(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(t==0||e==this.nodeDOM.nodeValue.length)&&(this.dirty=to)}get domAtom(){return!1}isText(t){return this.node.text==t}},Td=class extends $s{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==ur&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},Eh=class extends us{constructor(t,e,i,r,s,a,d,h,m,y){super(t,e,i,r,s,a,d,m,y),this.spec=h}update(t,e,i,r){if(this.dirty==to)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,e,i);return s&&this.updateInner(t,e,i,r),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,e,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,i,r){this.spec.setSelection?this.spec.setSelection(t,e,i.root):super.setSelection(t,e,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}};function oy(n,t,e){let i=n.firstChild,r=!1;for(let s=0;s<t.length;s++){let a=t[s],d=a.dom;if(d.parentNode==n){for(;d!=i;)i=Iv(i),r=!0;i=i.nextSibling}else r=!0,n.insertBefore(d,i);if(a instanceof rl){let h=i?i.previousSibling:n.lastChild;oy(a.contentDOM,a.children,e),i=h?h.nextSibling:n.firstChild}}for(;i;)i=Iv(i),r=!0;r&&e.trackWrites==n&&(e.trackWrites=null)}var xc=function(n){n&&(this.nodeName=n)};xc.prototype=Object.create(null);var Ks=[new xc];function xh(n,t,e){if(n.length==0)return Ks;let i=e?Ks[0]:new xc,r=[i];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&r.push(i=new xc(a.nodeName));for(let d in a){let h=a[d];h!=null&&(e&&r.length==1&&r.push(i=new xc(t.isInline?"span":"div")),d=="class"?i.class=(i.class?i.class+" ":"")+h:d=="style"?i.style=(i.style?i.style+";":"")+h:d!="nodeName"&&(i[d]=h))}}}return r}function sy(n,t,e,i){if(e==Ks&&i==Ks)return t;let r=t;for(let s=0;s<i.length;s++){let a=i[s],d=e[s];if(s){let h;d&&d.nodeName==a.nodeName&&r!=n&&(h=r.parentNode)&&h.nodeName.toLowerCase()==a.nodeName||(h=document.createElement(a.nodeName),h.pmIsDeco=!0,h.appendChild(r),d=Ks[0]),r=h}fS(r,d||Ks[0],a)}return r}function fS(n,t,e){for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&!(i in e)&&n.removeAttribute(i);for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&e[i]!=t[i]&&n.setAttribute(i,e[i]);if(t.class!=e.class){let i=t.class?t.class.split(" ").filter(Boolean):[],r=e.class?e.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.add(r[s]);n.classList.length==0&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(t.style);)n.style.removeProperty(r[1])}e.style&&(n.style.cssText+=e.style)}}function ay(n,t,e){return sy(n,n,Ks,xh(t,e,n.nodeType!=1))}function Id(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function Iv(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}var wh=class{constructor(t,e,i){this.lock=e,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=hS(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,i){let r=0,s=this.stack.length>>1,a=Math.min(s,t.length);for(;r<a&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&t[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=ur,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let h=this.index;h<Math.min(this.index+3,this.top.children.length);h++){let m=this.top.children[h];if(m.matchesMark(t[s])&&!this.isLocked(m.dom)){d=h;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let h=rl.create(this.top,t[s],e,i);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,s++}}findNodeMatch(t,e,i,r){let s=-1,a;if(r>=this.preMatch.index&&(a=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&a.matchesNode(t,e,i))s=this.top.children.indexOf(a,this.index);else for(let d=this.index,h=Math.min(this.top.children.length,d+5);d<h;d++){let m=this.top.children[d];if(m.matchesNode(t,e,i)&&!this.preMatch.matched.has(m)){s=d;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,e,i,r,s){let a=this.top.children[r];return a.dirty==to&&a.dom==a.contentDOM&&(a.dirty=Zs),a.update(t,e,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let i=t.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}t=e}}updateNextNode(t,e,i,r,s,a){for(let d=this.index;d<this.top.children.length;d++){let h=this.top.children[d];if(h instanceof us){let m=this.preMatch.matched.get(h);if(m!=null&&m!=s)return!1;let y=h.dom,E,O=this.isLocked(y)&&!(t.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==t.text&&h.dirty!=to&&Id(e,h.outerDeco));if(!O&&h.update(t,e,i,r))return this.destroyBetween(this.index,d),h.dom!=y&&(this.changed=!0),this.index++,!0;if(!O&&(E=this.recreateWrapper(h,t,e,i,r,a)))return this.destroyBetween(this.index,d),this.top.children[this.index]=E,E.contentDOM&&(E.dirty=Zs,E.updateChildren(r,a+1),E.dirty=ur),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,i,r,s,a){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content)||!Id(i,t.outerDeco)||!r.eq(t.innerDeco))return null;let d=us.create(this.top,e,i,r,s,a);if(d.contentDOM){d.children=t.children,t.children=[];for(let h of d.children)h.parent=d}return t.destroy(),d}addNode(t,e,i,r,s){let a=us.create(this.top,t,e,i,r,s);a.contentDOM&&a.updateChildren(r,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(t,e,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(t)&&(t==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new wd(this.top,t,e,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof rl;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof Sd)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((gi||si)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);t=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),t=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new Td(this.top,[],i,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}};function hS(n,t){let e=t,i=e.children.length,r=n.childCount,s=new Map,a=[];e:for(;r>0;){let d;for(;;)if(i){let m=e.children[i-1];if(m instanceof rl)e=m,i=m.children.length;else{d=m,i--;break}}else{if(e==t)break e;i=e.parent.children.indexOf(e),e=e.parent}let h=d.node;if(h){if(h!=n.child(r-1))break;--r,s.set(d,r),a.push(d)}}return{index:r,matched:s,matches:a.reverse()}}function mS(n,t){return n.type.side-t.type.side}function gS(n,t,e,i){let r=t.locals(n),s=0;if(r.length==0){for(let m=0;m<n.childCount;m++){let y=n.child(m);i(y,r,t.forChild(s,y),m),s+=y.nodeSize}return}let a=0,d=[],h=null;for(let m=0;;){let y,E;for(;a<r.length&&r[a].to==s;){let G=r[a++];G.widget&&(y?(E||(E=[y])).push(G):y=G)}if(y)if(E){E.sort(mS);for(let G=0;G<E.length;G++)e(E[G],m,!!h)}else e(y,m,!!h);let O,T;if(h)T=-1,O=h,h=null;else if(m<n.childCount)T=m,O=n.child(m++);else break;for(let G=0;G<d.length;G++)d[G].to<=s&&d.splice(G--,1);for(;a<r.length&&r[a].from<=s&&r[a].to>s;)d.push(r[a++]);let S=s+O.nodeSize;if(O.isText){let G=S;a<r.length&&r[a].from<G&&(G=r[a].from);for(let j=0;j<d.length;j++)d[j].to<G&&(G=d[j].to);G<S&&(h=O.cut(G-s),O=O.cut(0,G-s),S=G,T=-1)}else for(;a<r.length&&r[a].to<S;)a++;let F=O.isInline&&!O.isLeaf?d.filter(G=>!G.inline):d.slice();i(O,F,t.forChild(s,O),T),s=S}}function _S(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=t}}function vS(n,t,e,i){for(let r=0,s=0;r<n.childCount&&s<=i;){let a=n.child(r++),d=s;if(s+=a.nodeSize,!a.isText)continue;let h=a.text;for(;r<n.childCount;){let m=n.child(r++);if(s+=m.nodeSize,!m.isText)break;h+=m.text}if(s>=e){if(s>=i&&h.slice(i-t.length-d,i-d)==t)return i-t.length;let m=d<i?h.lastIndexOf(t,i-d-1):-1;if(m>=0&&m+t.length+d>=e)return d+m;if(e==i&&h.length>=i+t.length-d&&h.slice(i-d,i-d+t.length)==t)return i}}return-1}function Sh(n,t,e,i,r){let s=[];for(let a=0,d=0;a<n.length;a++){let h=n[a],m=d,y=d+=h.size;m>=e||y<=t?s.push(h):(m<t&&s.push(h.slice(0,t-m,i)),r&&(s.push(r),r=void 0),y>e&&s.push(h.slice(e-m,h.size,i)))}return s}function Nh(n,t=null){let e=n.domSelectionRange(),i=n.state.doc;if(!e.focusNode)return null;let r=n.docView.nearestDesc(e.focusNode),s=r&&r.size==0,a=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(a<0)return null;let d=i.resolve(a),h,m;if(Rd(e)){for(h=a;r&&!r.node;)r=r.parent;let E=r.node;if(r&&E.isAtom&&ct.isSelectable(E)&&r.parent&&!(E.isInline&&Zw(e.focusNode,e.focusOffset,r.dom))){let O=r.posBefore;m=new ct(a==O?d:i.resolve(O))}}else{if(e instanceof n.dom.ownerDocument.defaultView.Selection&&e.rangeCount>1){let E=a,O=a;for(let T=0;T<e.rangeCount;T++){let S=e.getRangeAt(T);E=Math.min(E,n.docView.posFromDOM(S.startContainer,S.startOffset,1)),O=Math.max(O,n.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(E<0)return null;[h,a]=O==n.state.selection.anchor?[O,E]:[E,O],d=i.resolve(a)}else h=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(h<0)return null}let y=i.resolve(h);if(!m){let E=t=="pointer"||n.state.selection.head<d.pos&&!s?1:-1;m=Fh(n,y,d,E)}return m}function ly(n){return n.editable?n.hasFocus():uy(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Oo(n,t=!1){let e=n.state.selection;if(cy(n,e),!!ly(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&si){let i=n.domSelectionRange(),r=n.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&Qs(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)bS(n);else{let{anchor:i,head:r}=e,s,a;Ov&&!(e instanceof tn)&&(e.$from.parent.inlineContent||(s=Mv(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(a=Mv(n,e.to))),n.docView.setSelection(i,r,n,t),Ov&&(s&&Av(s),a&&Av(a)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yS(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}var Ov=gi||si&&Qv<63;function Mv(n,t){let{node:e,offset:i}=n.docView.domFromPos(t,0),r=i<e.childNodes.length?e.childNodes[i]:null,s=i?e.childNodes[i-1]:null;if(gi&&r&&r.contentEditable=="false")return fh(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return fh(r);if(s)return fh(s)}}function fh(n){return n.contentEditable="true",gi&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Av(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function yS(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelectionRange(),i=e.anchorNode,r=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=i||e.anchorOffset!=r)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!ly(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function bS(n){let t=n.domSelection(),e=document.createRange();if(!t)return;let i=n.cursorWrapper.dom,r=i.nodeName=="IMG";r?e.setStart(i.parentNode,Yn(i)+1):e.setStart(i,0),e.collapse(!0),t.removeAllRanges(),t.addRange(e),!r&&!n.state.selection.visible&&Li&&cs<=11&&(i.disabled=!0,i.disabled=!1)}function cy(n,t){if(t instanceof ct){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(kv(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else kv(n)}function kv(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Fh(n,t,e,i){return n.someProp("createSelectionBetween",r=>r(n,t,e))||tn.between(t,e,i)}function Pv(n){return n.editable&&!n.hasFocus()?!1:uy(n)}function uy(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function CS(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.domSelectionRange();return Qs(t.node,t.offset,e.anchorNode,e.anchorOffset)}function Th(n,t){let{$anchor:e,$head:i}=n.selection,r=t>0?e.max(i):e.min(i),s=r.parent.inlineContent?r.depth?n.doc.resolve(t>0?r.after():r.before()):null:r;return s&&It.findFrom(s,t)}function as(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function Dv(n,t,e){let i=n.state.selection;if(i instanceof tn)if(e.indexOf("s")>-1){let{$head:r}=i,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(r.pos+s.nodeSize*(t<0?-1:1));return as(n,new tn(i.$anchor,a))}else if(i.empty){if(n.endOfTextblock(t>0?"forward":"backward")){let r=Th(n.state,t);return r&&r instanceof ct?as(n,r):!1}else if(!(lr&&e.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter,a;if(!s||s.isText)return!1;let d=t<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(a=n.docView.descAt(d))&&!a.contentDOM?ct.isSelectable(s)?as(n,new ct(t<0?n.state.doc.resolve(r.pos-s.nodeSize):r)):Ac?as(n,new tn(n.state.doc.resolve(t<0?d:d+s.nodeSize))):!1:!1}}else return!1;else{if(i instanceof ct&&i.node.isInline)return as(n,new tn(t>0?i.$to:i.$from));{let r=Th(n.state,t);return r?as(n,r):!1}}}function Od(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function wc(n,t){let e=n.pmViewDesc;return e&&e.size==0&&(t<0||n.nextSibling||n.nodeName!="BR")}function el(n,t){return t<0?ES(n):xS(n)}function ES(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r,s,a=!1;for(Lr&&e.nodeType==1&&i<Od(e)&&wc(e.childNodes[i],-1)&&(a=!0);;)if(i>0){if(e.nodeType!=1)break;{let d=e.childNodes[i-1];if(wc(d,-1))r=e,s=--i;else if(d.nodeType==3)e=d,i=e.nodeValue.length;else break}}else{if(dy(e))break;{let d=e.previousSibling;for(;d&&wc(d,-1);)r=e.parentNode,s=Yn(d),d=d.previousSibling;if(d)e=d,i=Od(e);else{if(e=e.parentNode,e==n.dom)break;i=0}}}a?Ih(n,e,i):r&&Ih(n,r,s)}function xS(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r=Od(e),s,a;for(;;)if(i<r){if(e.nodeType!=1)break;let d=e.childNodes[i];if(wc(d,1))s=e,a=++i;else break}else{if(dy(e))break;{let d=e.nextSibling;for(;d&&wc(d,1);)s=d.parentNode,a=Yn(d)+1,d=d.nextSibling;if(d)e=d,i=0,r=Od(e);else{if(e=e.parentNode,e==n.dom)break;i=r=0}}}s&&Ih(n,s,a)}function dy(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function wS(n,t){for(;n&&t==n.childNodes.length&&!Mc(n);)t=Yn(n)+1,n=n.parentNode;for(;n&&t<n.childNodes.length;){let e=n.childNodes[t];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=0}}function SS(n,t){for(;n&&!t&&!Mc(n);)t=Yn(n),n=n.parentNode;for(;n&&t;){let e=n.childNodes[t-1];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=n.childNodes.length}}function Ih(n,t,e){if(t.nodeType!=3){let s,a;(a=wS(t,e))?(t=a,e=0):(s=SS(t,e))&&(t=s,e=s.nodeValue.length)}let i=n.domSelection();if(!i)return;if(Rd(i)){let s=document.createRange();s.setEnd(t,e),s.setStart(t,e),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(t,e);n.domObserver.setCurSelection();let{state:r}=n;setTimeout(()=>{n.state==r&&Oo(n)},50)}function Lv(n,t){let e=n.state.doc.resolve(t);if(!(si||Xw)&&e.parent.inlineContent){let r=n.coordsAtPos(t);if(t>e.start()){let s=n.coordsAtPos(t-1),a=(s.top+s.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(s.left-r.left)>1)return s.left<r.left?"ltr":"rtl"}if(t<e.end()){let s=n.coordsAtPos(t+1),a=(s.top+s.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Rv(n,t,e){let i=n.state.selection;if(i instanceof tn&&!i.empty||e.indexOf("s")>-1||lr&&e.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let a=Th(n.state,t);if(a&&a instanceof ct)return as(n,a)}if(!r.parent.inlineContent){let a=t<0?r:s,d=i instanceof er?It.near(a,t):It.findFrom(a,t);return d?as(n,d):!1}return!1}function Nv(n,t){if(!(n.state.selection instanceof tn))return!0;let{$head:e,$anchor:i,empty:r}=n.state.selection;if(!e.sameParent(i))return!0;if(!r)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return t<0?a.delete(e.pos-s.nodeSize,e.pos):a.delete(e.pos,e.pos+s.nodeSize),n.dispatch(a),!0}return!1}function Fv(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function TS(n){if(!gi||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(t&&t.nodeType==1&&e==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let i=t.firstChild;Fv(n,i,"true"),setTimeout(()=>Fv(n,i,"false"),20)}return!1}function IS(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}function OS(n,t){let e=t.keyCode,i=IS(t);if(e==8||lr&&e==72&&i=="c")return Nv(n,-1)||el(n,-1);if(e==46&&!t.shiftKey||lr&&e==68&&i=="c")return Nv(n,1)||el(n,1);if(e==13||e==27)return!0;if(e==37||lr&&e==66&&i=="c"){let r=e==37?Lv(n,n.state.selection.from)=="ltr"?-1:1:-1;return Dv(n,r,i)||el(n,r)}else if(e==39||lr&&e==70&&i=="c"){let r=e==39?Lv(n,n.state.selection.from)=="ltr"?1:-1:1;return Dv(n,r,i)||el(n,r)}else{if(e==38||lr&&e==80&&i=="c")return Rv(n,-1,i)||el(n,-1);if(e==40||lr&&e==78&&i=="c")return TS(n)||Rv(n,1,i)||el(n,1);if(i==(lr?"m":"c")&&(e==66||e==73||e==89||e==90))return!0}return!1}function Bh(n,t){n.someProp("transformCopied",T=>{t=T(t,n)});let e=[],{content:i,openStart:r,openEnd:s}=t;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let T=i.firstChild;e.push(T.type.name,T.attrs!=T.type.defaultAttrs?T.attrs:null),i=T.content}let a=n.someProp("clipboardSerializer")||xo.fromSchema(n.state.schema),d=_y(),h=d.createElement("div");h.appendChild(a.serializeFragment(i,{document:d}));let m=h.firstChild,y,E=0;for(;m&&m.nodeType==1&&(y=gy[m.nodeName.toLowerCase()]);){for(let T=y.length-1;T>=0;T--){let S=d.createElement(y[T]);for(;h.firstChild;)S.appendChild(h.firstChild);h.appendChild(S),E++}m=h.firstChild}m&&m.nodeType==1&&m.setAttribute("data-pm-slice",`${r} ${s}${E?` -${E}`:""} ${JSON.stringify(e)}`);let O=n.someProp("clipboardTextSerializer",T=>T(t,n))||t.content.textBetween(0,t.content.size,`

`);return{dom:h,text:O,slice:t}}function py(n,t,e,i,r){let s=r.parent.type.spec.code,a,d;if(!e&&!t)return null;let h=t&&(i||s||!e);if(h){if(n.someProp("transformPastedText",O=>{t=O(t,s||i,n)}),s)return t?new Ue(Se.from(n.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Ue.empty;let E=n.someProp("clipboardTextParser",O=>O(t,r,i,n));if(E)d=E;else{let O=r.marks(),{schema:T}=n.state,S=xo.fromSchema(T);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(F=>{let G=a.appendChild(document.createElement("p"));F&&G.appendChild(S.serializeNode(T.text(F,O)))})}}else n.someProp("transformPastedHTML",E=>{e=E(e,n)}),a=PS(e),Ac&&DS(a);let m=a&&a.querySelector("[data-pm-slice]"),y=m&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(m.getAttribute("data-pm-slice")||"");if(y&&y[3])for(let E=+y[3];E>0;E--){let O=a.firstChild;for(;O&&O.nodeType!=1;)O=O.nextSibling;if(!O)break;a=O}if(d||(d=(n.someProp("clipboardParser")||n.someProp("domParser")||is.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(h||y),context:r,ruleFromNode(O){return O.nodeName=="BR"&&!O.nextSibling&&O.parentNode&&!MS.test(O.parentNode.nodeName)?{ignore:!0}:null}})),y)d=LS(Bv(d,+y[1],+y[2]),y[4]);else if(d=Ue.maxOpen(AS(d.content,r),!0),d.openStart||d.openEnd){let E=0,O=0;for(let T=d.content.firstChild;E<d.openStart&&!T.type.spec.isolating;E++,T=T.firstChild);for(let T=d.content.lastChild;O<d.openEnd&&!T.type.spec.isolating;O++,T=T.lastChild);d=Bv(d,E,O)}return n.someProp("transformPasted",E=>{d=E(d,n)}),d}var MS=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function AS(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.index(e)),s,a=[];if(n.forEach(d=>{if(!a)return;let h=r.findWrapping(d.type),m;if(!h)return a=null;if(m=a.length&&s.length&&hy(h,s,d,a[a.length-1],0))a[a.length-1]=m;else{a.length&&(a[a.length-1]=my(a[a.length-1],s.length));let y=fy(d,h);a.push(y),r=r.matchType(y.type),s=h}}),a)return Se.from(a)}return n}function fy(n,t,e=0){for(let i=t.length-1;i>=e;i--)n=t[i].create(null,Se.from(n));return n}function hy(n,t,e,i,r){if(r<n.length&&r<t.length&&n[r]==t[r]){let s=hy(n,t,e,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==n.length-1?e.type:n[r+1]))return i.copy(i.content.append(Se.from(fy(e,n,r+1))))}}function my(n,t){if(t==0)return n;let e=n.content.replaceChild(n.childCount-1,my(n.lastChild,t-1)),i=n.contentMatchAt(n.childCount).fillBefore(Se.empty,!0);return n.copy(e.append(i))}function Oh(n,t,e,i,r,s){let a=t<0?n.firstChild:n.lastChild,d=a.content;return n.childCount>1&&(s=0),r<i-1&&(d=Oh(d,t,e,i,r+1,s)),r>=e&&(d=t<0?a.contentMatchAt(0).fillBefore(d,s<=r).append(d):d.append(a.contentMatchAt(a.childCount).fillBefore(Se.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,a.copy(d))}function Bv(n,t,e){return t<n.openStart&&(n=new Ue(Oh(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new Ue(Oh(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}var gy={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Vv=null;function _y(){return Vv||(Vv=document.implementation.createHTMLDocument("title"))}var hh=null;function kS(n){let t=window.trustedTypes;return t?(hh||(hh=t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),hh.createHTML(n)):n}function PS(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let e=_y().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),r;if((r=i&&gy[i[1].toLowerCase()])&&(n=r.map(s=>"<"+s+">").join("")+n+r.map(s=>"</"+s+">").reverse().join("")),e.innerHTML=kS(n),r)for(let s=0;s<r.length;s++)e=e.querySelector(r[s])||e;return e}function DS(n){let t=n.querySelectorAll(si?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let i=t[e];i.childNodes.length==1&&i.textContent=="\xA0"&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function LS(n,t){if(!n.size)return n;let e=n.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch{return n}let{content:r,openStart:s,openEnd:a}=n;for(let d=i.length-2;d>=0;d-=2){let h=e.nodes[i[d]];if(!h||h.hasRequiredAttrs())break;r=Se.from(h.create(i[d+1],r)),s++,a++}return new Ue(r,s,a)}var _i={},vi={},RS={touchstart:!0,touchmove:!0},Mh=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function NS(n){for(let t in _i){let e=_i[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>{BS(n,i)&&!Vh(n,i)&&(n.editable||!(i.type in vi))&&e(n,i)},RS[t]?{passive:!0}:void 0)}gi&&n.dom.addEventListener("input",()=>null),Ah(n)}function ls(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function FS(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ah(n){n.someProp("handleDOMEvents",t=>{for(let e in t)n.input.eventHandlers[e]||n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>Vh(n,i))})}function Vh(n,t){return n.someProp("handleDOMEvents",e=>{let i=e[t.type];return i?i(n,t)||t.defaultPrevented:!1})}function BS(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=n.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function VS(n,t){!Vh(n,t)&&_i[t.type]&&(n.editable||!(t.type in vi))&&_i[t.type](n,t)}vi.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=e.keyCode==16||e.shiftKey,!yy(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Io&&si&&e.keyCode==13)))if(e.keyCode!=229&&n.domObserver.forceFlush(),il&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",r=>r(n,js(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,e))||OS(n,e)?e.preventDefault():ls(n,"key")};vi.keyup=(n,t)=>{t.keyCode==16&&(n.input.shiftKey=!1)};vi.keypress=(n,t)=>{let e=t;if(yy(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||lr&&e.metaKey)return;if(n.someProp("handleKeyPress",r=>r(n,e))){e.preventDefault();return}let i=n.state.selection;if(!(i instanceof tn)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(e.charCode);!/[\r\n]/.test(r)&&!n.someProp("handleTextInput",s=>s(n,i.$from.pos,i.$to.pos,r))&&n.dispatch(n.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}};function Nd(n){return{left:n.clientX,top:n.clientY}}function zS(n,t){let e=t.x-n.clientX,i=t.y-n.clientY;return e*e+i*i<100}function zh(n,t,e,i,r){if(i==-1)return!1;let s=n.state.doc.resolve(i);for(let a=s.depth+1;a>0;a--)if(n.someProp(t,d=>a>s.depth?d(n,e,s.nodeAfter,s.before(a),r,!0):d(n,e,s.node(a),s.before(a),r,!1)))return!0;return!1}function nl(n,t,e){if(n.focused||n.focus(),n.state.selection.eq(t))return;let i=n.state.tr.setSelection(t);e=="pointer"&&i.setMeta("pointer",!0),n.dispatch(i)}function HS(n,t){if(t==-1)return!1;let e=n.state.doc.resolve(t),i=e.nodeAfter;return i&&i.isAtom&&ct.isSelectable(i)?(nl(n,new ct(e),"pointer"),!0):!1}function GS(n,t){if(t==-1)return!1;let e=n.state.selection,i,r;e instanceof ct&&(i=e.node);let s=n.state.doc.resolve(t);for(let a=s.depth+1;a>0;a--){let d=a>s.depth?s.nodeAfter:s.node(a);if(ct.isSelectable(d)){i&&e.$from.depth>0&&a>=e.$from.depth&&s.before(e.$from.depth+1)==e.$from.pos?r=s.before(e.$from.depth):r=s.before(a);break}}return r!=null?(nl(n,ct.create(n.state.doc,r),"pointer"),!0):!1}function US(n,t,e,i,r){return zh(n,"handleClickOn",t,e,i)||n.someProp("handleClick",s=>s(n,t,i))||(r?GS(n,e):HS(n,e))}function qS(n,t,e,i){return zh(n,"handleDoubleClickOn",t,e,i)||n.someProp("handleDoubleClick",r=>r(n,t,i))}function WS(n,t,e,i){return zh(n,"handleTripleClickOn",t,e,i)||n.someProp("handleTripleClick",r=>r(n,t,i))||jS(n,e,i)}function jS(n,t,e){if(e.button!=0)return!1;let i=n.state.doc;if(t==-1)return i.inlineContent?(nl(n,tn.create(i,0,i.content.size),"pointer"),!0):!1;let r=i.resolve(t);for(let s=r.depth+1;s>0;s--){let a=s>r.depth?r.nodeAfter:r.node(s),d=r.before(s);if(a.inlineContent)nl(n,tn.create(i,d+1,d+1+a.content.size),"pointer");else if(ct.isSelectable(a))nl(n,ct.create(i,d),"pointer");else continue;return!0}}function Hh(n){return Md(n)}var vy=lr?"metaKey":"ctrlKey";_i.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let i=Hh(n),r=Date.now(),s="singleClick";r-n.input.lastClick.time<500&&zS(e,n.input.lastClick)&&!e[vy]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:r,x:e.clientX,y:e.clientY,type:s};let a=n.posAtCoords(Nd(e));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new kh(n,a,e,!!i)):(s=="doubleClick"?qS:WS)(n,a.pos,a.inside,e)?e.preventDefault():ls(n,"pointer"))};var kh=class{constructor(t,e,i,r){this.view=t,this.pos=e,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[vy],this.allowDefault=i.shiftKey;let s,a;if(e.inside>-1)s=t.state.doc.nodeAt(e.inside),a=e.inside;else{let y=t.state.doc.resolve(e.pos);s=y.parent,a=y.depth?y.before():0}let d=r?null:i.target,h=d?t.docView.nearestDesc(d,!0):null;this.target=h&&h.dom.nodeType==1?h.dom:null;let{selection:m}=t.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||m instanceof ct&&m.from<=a&&m.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Lr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ls(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Oo(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Nd(t))),this.updateAllowDefault(t),this.allowDefault||!e?ls(this.view,"pointer"):US(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||gi&&this.mightDrag&&!this.mightDrag.node.isAtom||si&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(nl(this.view,It.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):ls(this.view,"pointer")}move(t){this.updateAllowDefault(t),ls(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}};_i.touchstart=n=>{n.input.lastTouch=Date.now(),Hh(n),ls(n,"pointer")};_i.touchmove=n=>{n.input.lastTouch=Date.now(),ls(n,"pointer")};_i.contextmenu=n=>Hh(n);function yy(n,t){return n.composing?!0:gi&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}var ZS=Io?5e3:-1;vi.compositionstart=vi.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$to;if(t.selection instanceof tn&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||e.marks(),Md(n,!0),n.markCursor=null;else if(Md(n,!t.selection.empty),Lr&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let i=n.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let a=s<0?r.lastChild:r.childNodes[s-1];if(!a)break;if(a.nodeType==3){let d=n.domSelection();d&&d.collapse(a,a.nodeValue.length);break}else r=a,s=-1}}n.input.composing=!0}by(n,ZS)};vi.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,by(n,20))};function by(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>Md(n),t))}function Cy(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=YS());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function KS(n){let t=n.domSelectionRange();if(!t.focusNode)return null;let e=Ww(t.focusNode,t.focusOffset),i=jw(t.focusNode,t.focusOffset);if(e&&i&&e!=i){let r=i.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(e==s||i==s)return s;if(!r||!r.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let a=e.pmViewDesc;if(!(!a||!a.isText(e.nodeValue)))return i}}return e||i}function YS(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Md(n,t=!1){if(!(Io&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Cy(n),t||n.docView&&n.docView.dirty){let e=Nh(n);return e&&!e.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(e)):(n.markCursor||t)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function XS(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(t),n.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}var Tc=Li&&cs<15||il&&Jw<604;_i.copy=vi.cut=(n,t)=>{let e=t,i=n.state.selection,r=e.type=="cut";if(i.empty)return;let s=Tc?null:e.clipboardData,a=i.content(),{dom:d,text:h}=Bh(n,a);s?(e.preventDefault(),s.clearData(),s.setData("text/html",d.innerHTML),s.setData("text/plain",h)):XS(n,d),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function JS(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function QS(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),e?Ic(n,i.value,null,r,t):Ic(n,i.textContent,i.innerHTML,r,t)},50)}function Ic(n,t,e,i,r){let s=py(n,t,e,i,n.state.selection.$from);if(n.someProp("handlePaste",h=>h(n,r,s||Ue.empty)))return!0;if(!s)return!1;let a=JS(s),d=a?n.state.tr.replaceSelectionWith(a,i):n.state.tr.replaceSelection(s);return n.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Ey(n){let t=n.getData("text/plain")||n.getData("Text");if(t)return t;let e=n.getData("text/uri-list");return e?e.replace(/\r?\n/g," "):""}vi.paste=(n,t)=>{let e=t;if(n.composing&&!Io)return;let i=Tc?null:e.clipboardData,r=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&Ic(n,Ey(i),i.getData("text/html"),r,e)?e.preventDefault():QS(n,e)};var Ad=class{constructor(t,e,i){this.slice=t,this.move=e,this.node=i}},xy=lr?"altKey":"ctrlKey";_i.dragstart=(n,t)=>{let e=t,i=n.input.mouseDown;if(i&&i.done(),!e.dataTransfer)return;let r=n.state.selection,s=r.empty?null:n.posAtCoords(Nd(e)),a;if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof ct?r.to-1:r.to))){if(i&&i.mightDrag)a=ct.create(n.state.doc,i.mightDrag.pos);else if(e.target&&e.target.nodeType==1){let E=n.docView.nearestDesc(e.target,!0);E&&E.node.type.spec.draggable&&E!=n.docView&&(a=ct.create(n.state.doc,E.posBefore))}}let d=(a||n.state.selection).content(),{dom:h,text:m,slice:y}=Bh(n,d);(!e.dataTransfer.files.length||!si||Qv>120)&&e.dataTransfer.clearData(),e.dataTransfer.setData(Tc?"Text":"text/html",h.innerHTML),e.dataTransfer.effectAllowed="copyMove",Tc||e.dataTransfer.setData("text/plain",m),n.dragging=new Ad(y,!e[xy],a)};_i.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)};vi.dragover=vi.dragenter=(n,t)=>t.preventDefault();vi.drop=(n,t)=>{let e=t,i=n.dragging;if(n.dragging=null,!e.dataTransfer)return;let r=n.posAtCoords(Nd(e));if(!r)return;let s=n.state.doc.resolve(r.pos),a=i&&i.slice;a?n.someProp("transformPasted",S=>{a=S(a,n)}):a=py(n,Ey(e.dataTransfer),Tc?null:e.dataTransfer.getData("text/html"),!1,s);let d=!!(i&&!e[xy]);if(n.someProp("handleDrop",S=>S(n,e,a||Ue.empty,d))){e.preventDefault();return}if(!a)return;e.preventDefault();let h=a?ov(n.state.doc,s.pos,a):s.pos;h==null&&(h=s.pos);let m=n.state.tr;if(d){let{node:S}=i;S?S.replace(m):m.deleteSelection()}let y=m.mapping.map(h),E=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,O=m.doc;if(E?m.replaceRangeWith(y,y,a.content.firstChild):m.replaceRange(y,y,a),m.doc.eq(O))return;let T=m.doc.resolve(y);if(E&&ct.isSelectable(a.content.firstChild)&&T.nodeAfter&&T.nodeAfter.sameMarkup(a.content.firstChild))m.setSelection(new ct(T));else{let S=m.mapping.map(h);m.mapping.maps[m.mapping.maps.length-1].forEach((F,G,j,oe)=>S=oe),m.setSelection(Fh(n,T,m.doc.resolve(S)))}n.focus(),n.dispatch(m.setMeta("uiEvent","drop"))};_i.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Oo(n)},20))};_i.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};_i.beforeinput=(n,t)=>{if(si&&Io&&t.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,js(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in vi)_i[n]=vi[n];function Oc(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}var kd=class n{constructor(t,e){this.toDOM=t,this.spec=e||Xs,this.side=this.spec.side||0}map(t,e,i,r){let{pos:s,deleted:a}=t.mapResult(e.from+r,this.side<0?-1:1);return a?null:new no(s-i,s-i,this)}valid(){return!0}eq(t){return this==t||t instanceof n&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Oc(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}},Ys=class n{constructor(t,e){this.attrs=t,this.spec=e||Xs}map(t,e,i,r){let s=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-i,a=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=a?null:new no(s,a,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof n&&Oc(this.attrs,t.attrs)&&Oc(this.spec,t.spec)}static is(t){return t.type instanceof n}destroy(){}},Ph=class n{constructor(t,e){this.attrs=t,this.spec=e||Xs}map(t,e,i,r){let s=t.mapResult(e.from+r,1);if(s.deleted)return null;let a=t.mapResult(e.to+r,-1);return a.deleted||a.pos<=s.pos?null:new no(s.pos-i,a.pos-i,this)}valid(t,e){let{index:i,offset:r}=t.content.findIndex(e.from),s;return r==e.from&&!(s=t.child(i)).isText&&r+s.nodeSize==e.to}eq(t){return this==t||t instanceof n&&Oc(this.attrs,t.attrs)&&Oc(this.spec,t.spec)}destroy(){}},no=class n{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new n(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new n(t,t,new kd(e,i))}static inline(t,e,i,r){return new n(t,e,new Ys(i,r))}static node(t,e,i,r){return new n(t,e,new Ph(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ys}get widget(){return this.type instanceof kd}},tl=[],Xs={},mi=class n{constructor(t,e){this.local=t.length?t:tl,this.children=e.length?e:tl}static create(t,e){return e.length?Dd(e,t,0,Xs):oi}find(t,e,i){let r=[];return this.findInner(t??0,e??1e9,r,0,i),r}findInner(t,e,i,r,s){for(let a=0;a<this.local.length;a++){let d=this.local[a];d.from<=e&&d.to>=t&&(!s||s(d.spec))&&i.push(d.copy(d.from+r,d.to+r))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){let d=this.children[a]+1;this.children[a+2].findInner(t-d,e-d,i,r+d,s)}}map(t,e,i){return this==oi||t.maps.length==0?this:this.mapInner(t,e,0,0,i||Xs)}mapInner(t,e,i,r,s){let a;for(let d=0;d<this.local.length;d++){let h=this.local[d].map(t,i,r);h&&h.type.valid(e,h)?(a||(a=[])).push(h):s.onRemove&&s.onRemove(this.local[d].spec)}return this.children.length?$S(this.children,a||[],t,e,i,r,s):a?new n(a.sort(Js),tl):oi}add(t,e){return e.length?this==oi?n.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let r,s=0;t.forEach((d,h)=>{let m=h+i,y;if(y=Sy(e,d,m)){for(r||(r=this.children.slice());s<r.length&&r[s]<h;)s+=3;r[s]==h?r[s+2]=r[s+2].addInner(d,y,m+1):r.splice(s,0,h,h+d.nodeSize,Dd(y,d,m+1,Xs)),s+=3}});let a=wy(s?Ty(e):e,-i);for(let d=0;d<a.length;d++)a[d].type.valid(t,a[d])||a.splice(d--,1);return new n(a.length?this.local.concat(a).sort(Js):this.local,r||this.children)}remove(t){return t.length==0||this==oi?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let a,d=i[s]+e,h=i[s+1]+e;for(let y=0,E;y<t.length;y++)(E=t[y])&&E.from>d&&E.to<h&&(t[y]=null,(a||(a=[])).push(E));if(!a)continue;i==this.children&&(i=this.children.slice());let m=i[s+2].removeInner(a,d+1);m!=oi?i[s+2]=m:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,a;s<t.length;s++)if(a=t[s])for(let d=0;d<r.length;d++)r[d].eq(a,e)&&(r==this.local&&(r=this.local.slice()),r.splice(d--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new n(r,i):oi}forChild(t,e){if(this==oi)return this;if(e.isLeaf)return n.empty;let i,r;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=t){this.children[d]==t&&(i=this.children[d+2]);break}let s=t+1,a=s+e.content.size;for(let d=0;d<this.local.length;d++){let h=this.local[d];if(h.from<a&&h.to>s&&h.type instanceof Ys){let m=Math.max(s,h.from)-s,y=Math.min(a,h.to)-s;m<y&&(r||(r=[])).push(h.copy(m,y))}}if(r){let d=new n(r.sort(Js),tl);return i?new Pd([d,i]):d}return i||oi}eq(t){if(this==t)return!0;if(!(t instanceof n)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Gh(this.localsInner(t))}localsInner(t){if(this==oi)return tl;if(t.inlineContent||!this.local.some(Ys.is))return this.local;let e=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof Ys||e.push(this.local[i]);return e}forEachSet(t){t(this)}};mi.empty=new mi([],[]);mi.removeOverlap=Gh;var oi=mi.empty,Pd=class n{constructor(t){this.members=t}map(t,e){let i=this.members.map(r=>r.map(t,e,Xs));return n.from(i)}forChild(t,e){if(e.isLeaf)return mi.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(t,e);s!=oi&&(s instanceof n?i=i.concat(s.members):i.push(s))}return n.from(i)}eq(t){if(!(t instanceof n)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(t);if(s.length)if(!e)e=s;else{i&&(e=e.slice(),i=!1);for(let a=0;a<s.length;a++)e.push(s[a])}}return e?Gh(i?e:e.sort(Js)):tl}static from(t){switch(t.length){case 0:return oi;case 1:return t[0];default:return new n(t.every(e=>e instanceof mi)?t:t.reduce((e,i)=>e.concat(i instanceof mi?i:i.members),[]))}}forEachSet(t){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(t)}};function $S(n,t,e,i,r,s,a){let d=n.slice();for(let m=0,y=s;m<e.maps.length;m++){let E=0;e.maps[m].forEach((O,T,S,F)=>{let G=F-S-(T-O);for(let j=0;j<d.length;j+=3){let oe=d[j+1];if(oe<0||O>oe+y-E)continue;let ve=d[j]+y-E;T>=ve?d[j+1]=O<=ve?-2:-1:O>=y&&G&&(d[j]+=G,d[j+1]+=G)}E+=G}),y=e.maps[m].map(y,-1)}let h=!1;for(let m=0;m<d.length;m+=3)if(d[m+1]<0){if(d[m+1]==-2){h=!0,d[m+1]=-1;continue}let y=e.map(n[m]+s),E=y-r;if(E<0||E>=i.content.size){h=!0;continue}let O=e.map(n[m+1]+s,-1),T=O-r,{index:S,offset:F}=i.content.findIndex(E),G=i.maybeChild(S);if(G&&F==E&&F+G.nodeSize==T){let j=d[m+2].mapInner(e,G,y+1,n[m]+s+1,a);j!=oi?(d[m]=E,d[m+1]=T,d[m+2]=j):(d[m+1]=-2,h=!0)}else h=!0}if(h){let m=eT(d,n,t,e,r,s,a),y=Dd(m,i,0,a);t=y.local;for(let E=0;E<d.length;E+=3)d[E+1]<0&&(d.splice(E,3),E-=3);for(let E=0,O=0;E<y.children.length;E+=3){let T=y.children[E];for(;O<d.length&&d[O]<T;)O+=3;d.splice(O,0,y.children[E],y.children[E+1],y.children[E+2])}}return new mi(t.sort(Js),d)}function wy(n,t){if(!t||!n.length)return n;let e=[];for(let i=0;i<n.length;i++){let r=n[i];e.push(new no(r.from+t,r.to+t,r.type))}return e}function eT(n,t,e,i,r,s,a){function d(h,m){for(let y=0;y<h.local.length;y++){let E=h.local[y].map(i,r,m);E?e.push(E):a.onRemove&&a.onRemove(h.local[y].spec)}for(let y=0;y<h.children.length;y+=3)d(h.children[y+2],h.children[y]+m+1)}for(let h=0;h<n.length;h+=3)n[h+1]==-1&&d(n[h+2],t[h]+s+1);return e}function Sy(n,t,e){if(t.isLeaf)return null;let i=e+t.nodeSize,r=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>e&&a.to<i&&((r||(r=[])).push(a),n[s]=null);return r}function Ty(n){let t=[];for(let e=0;e<n.length;e++)n[e]!=null&&t.push(n[e]);return t}function Dd(n,t,e,i){let r=[],s=!1;t.forEach((d,h)=>{let m=Sy(n,d,h+e);if(m){s=!0;let y=Dd(m,d,e+h+1,i);y!=oi&&r.push(h,h+d.nodeSize,y)}});let a=wy(s?Ty(n):n,-e).sort(Js);for(let d=0;d<a.length;d++)a[d].type.valid(t,a[d])||(i.onRemove&&i.onRemove(a[d].spec),a.splice(d--,1));return a.length||r.length?new mi(a,r):oi}function Js(n,t){return n.from-t.from||n.to-t.to}function Gh(n){let t=n;for(let e=0;e<t.length-1;e++){let i=t[e];if(i.from!=i.to)for(let r=e+1;r<t.length;r++){let s=t[r];if(s.from==i.from){s.to!=i.to&&(t==n&&(t=n.slice()),t[r]=s.copy(s.from,i.to),zv(t,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(t==n&&(t=n.slice()),t[e]=i.copy(i.from,s.from),zv(t,r,i.copy(s.from,i.to)));break}}}return t}function zv(n,t,e){for(;t<n.length&&Js(e,n[t])>0;)t++;n.splice(t,0,e)}function mh(n){let t=[];return n.someProp("decorations",e=>{let i=e(n.state);i&&i!=oi&&t.push(i)}),n.cursorWrapper&&t.push(mi.create(n.state.doc,[n.cursorWrapper.deco])),Pd.from(t)}var tT={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},nT=Li&&cs<=11,Dh=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}},Lh=class{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Dh,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Li&&cs<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),nT&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,tT)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Pv(this.view)){if(this.suppressingSelectionUpdates)return Oo(this.view);if(Li&&cs<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Qs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e=new Set,i;for(let s=t.focusNode;s;s=Sc(s))e.add(s);for(let s=t.anchorNode;s;s=Sc(s))if(e.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let i=t.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&Pv(t)&&!this.ignoreSelectionChange(i),s=-1,a=-1,d=!1,h=[];if(t.editable)for(let y=0;y<e.length;y++){let E=this.registerMutation(e[y],h);E&&(s=s<0?E.from:Math.min(E.from,s),a=a<0?E.to:Math.max(E.to,a),E.typeOver&&(d=!0))}if(Lr&&h.length){let y=h.filter(E=>E.nodeName=="BR");if(y.length==2){let[E,O]=y;E.parentNode&&E.parentNode.parentNode==O.parentNode?O.remove():E.remove()}else{let{focusNode:E}=this.currentSelection;for(let O of y){let T=O.parentNode;T&&T.nodeName=="LI"&&(!E||oT(t,E)!=T)&&O.remove()}}}let m=null;s<0&&r&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Rd(i)&&(m=Nh(t))&&m.eq(It.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Oo(t),this.currentSelection.set(i)):(s>-1||r)&&(s>-1&&(t.docView.markDirty(s,a),iT(t)),this.handleDOMChange(s,a,d,h),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||Oo(t),this.currentSelection.set(i))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(i==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!i||i.ignoreMutation(t))return null;if(t.type=="childList"){for(let y=0;y<t.addedNodes.length;y++){let E=t.addedNodes[y];e.push(E),E.nodeType==3&&(this.lastChangedTextNode=E)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let r=t.previousSibling,s=t.nextSibling;if(Li&&cs<=11&&t.addedNodes.length)for(let y=0;y<t.addedNodes.length;y++){let{previousSibling:E,nextSibling:O}=t.addedNodes[y];(!E||Array.prototype.indexOf.call(t.addedNodes,E)<0)&&(r=E),(!O||Array.prototype.indexOf.call(t.addedNodes,O)<0)&&(s=O)}let a=r&&r.parentNode==t.target?Yn(r)+1:0,d=i.localPosFromDOM(t.target,a,-1),h=s&&s.parentNode==t.target?Yn(s):t.target.childNodes.length,m=i.localPosFromDOM(t.target,h,1);return{from:d,to:m}}else return t.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=t.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}},Hv=new WeakMap,Gv=!1;function iT(n){if(!Hv.has(n)&&(Hv.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Lr,Gv)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Gv=!0}}function Uv(n,t){let e=t.startContainer,i=t.startOffset,r=t.endContainer,s=t.endOffset,a=n.domAtPos(n.state.selection.anchor);return Qs(a.node,a.offset,r,s)&&([e,i,r,s]=[r,s,e,i]),{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:s}}function rT(n,t){if(t.getComposedRanges){let r=t.getComposedRanges(n.root)[0];if(r)return Uv(n,r)}let e;function i(r){r.preventDefault(),r.stopImmediatePropagation(),e=r.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),e?Uv(n,e):null}function oT(n,t){for(let e=t.parentNode;e&&e!=n.dom;e=e.parentNode){let i=n.docView.nearestDesc(e,!0);if(i&&i.node.isBlock)return e}return null}function sT(n,t,e){let{node:i,fromOffset:r,toOffset:s,from:a,to:d}=n.docView.parseRange(t,e),h=n.domSelectionRange(),m,y=h.anchorNode;if(y&&n.dom.contains(y.nodeType==1?y:y.parentNode)&&(m=[{node:y,offset:h.anchorOffset}],Rd(h)||m.push({node:h.focusNode,offset:h.focusOffset})),si&&n.input.lastKeyCode===8)for(let G=s;G>r;G--){let j=i.childNodes[G-1],oe=j.pmViewDesc;if(j.nodeName=="BR"&&!oe){s=G;break}if(!oe||oe.size)break}let E=n.state.doc,O=n.someProp("domParser")||is.fromSchema(n.state.schema),T=E.resolve(a),S=null,F=O.parse(i,{topNode:T.parent,topMatch:T.parent.contentMatchAt(T.index()),topOpen:!0,from:r,to:s,preserveWhitespace:T.parent.type.whitespace=="pre"?"full":!0,findPositions:m,ruleFromNode:aT,context:T});if(m&&m[0].pos!=null){let G=m[0].pos,j=m[1]&&m[1].pos;j==null&&(j=G),S={anchor:G+a,head:j+a}}return{doc:F,sel:S,from:a,to:d}}function aT(n){let t=n.pmViewDesc;if(t)return t.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(gi&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(n.parentNode.lastChild==n||gi&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}var lT=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function cT(n,t,e,i,r){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,t<0){let se=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,ge=Nh(n,se);if(ge&&!n.state.selection.eq(ge)){if(si&&Io&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Ie=>Ie(n,js(13,"Enter"))))return;let Le=n.state.tr.setSelection(ge);se=="pointer"?Le.setMeta("pointer",!0):se=="key"&&Le.scrollIntoView(),s&&Le.setMeta("composition",s),n.dispatch(Le)}return}let a=n.state.doc.resolve(t),d=a.sharedDepth(e);t=a.before(d+1),e=n.state.doc.resolve(e).after(d+1);let h=n.state.selection,m=sT(n,t,e),y=n.state.doc,E=y.slice(m.from,m.to),O,T;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(O=n.state.selection.to,T="end"):(O=n.state.selection.from,T="start"),n.input.lastKeyCode=null;let S=pT(E.content,m.doc.content,m.from,O,T);if(S&&n.input.domChangeCount++,(il&&n.input.lastIOSEnter>Date.now()-225||Io)&&r.some(se=>se.nodeType==1&&!lT.test(se.nodeName))&&(!S||S.endA>=S.endB)&&n.someProp("handleKeyDown",se=>se(n,js(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!S)if(i&&h instanceof tn&&!h.empty&&h.$head.sameParent(h.$anchor)&&!n.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))S={start:h.from,endA:h.to,endB:h.to};else{if(m.sel){let se=qv(n,n.state.doc,m.sel);if(se&&!se.eq(n.state.selection)){let ge=n.state.tr.setSelection(se);s&&ge.setMeta("composition",s),n.dispatch(ge)}}return}n.state.selection.from<n.state.selection.to&&S.start==S.endB&&n.state.selection instanceof tn&&(S.start>n.state.selection.from&&S.start<=n.state.selection.from+2&&n.state.selection.from>=m.from?S.start=n.state.selection.from:S.endA<n.state.selection.to&&S.endA>=n.state.selection.to-2&&n.state.selection.to<=m.to&&(S.endB+=n.state.selection.to-S.endA,S.endA=n.state.selection.to)),Li&&cs<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>m.from&&m.doc.textBetween(S.start-m.from-1,S.start-m.from+1)==" \xA0"&&(S.start--,S.endA--,S.endB--);let F=m.doc.resolveNoCache(S.start-m.from),G=m.doc.resolveNoCache(S.endB-m.from),j=y.resolve(S.start),oe=F.sameParent(G)&&F.parent.inlineContent&&j.end()>=S.endA,ve;if((il&&n.input.lastIOSEnter>Date.now()-225&&(!oe||r.some(se=>se.nodeName=="DIV"||se.nodeName=="P"))||!oe&&F.pos<m.doc.content.size&&!F.sameParent(G)&&(ve=It.findFrom(m.doc.resolve(F.pos+1),1,!0))&&ve.head==G.pos)&&n.someProp("handleKeyDown",se=>se(n,js(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>S.start&&dT(y,S.start,S.endA,F,G)&&n.someProp("handleKeyDown",se=>se(n,js(8,"Backspace")))){Io&&si&&n.domObserver.suppressSelectionUpdates();return}si&&S.endB==S.start&&(n.input.lastChromeDelete=Date.now()),Io&&!oe&&F.start()!=G.start()&&G.parentOffset==0&&F.depth==G.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==S.endA&&(S.endB-=2,G=m.doc.resolveNoCache(S.endB-m.from),setTimeout(()=>{n.someProp("handleKeyDown",function(se){return se(n,js(13,"Enter"))})},20));let ee=S.start,ye=S.endA,Ae,Ze,je;if(oe){if(F.pos==G.pos)Li&&cs<=11&&F.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Oo(n),20)),Ae=n.state.tr.delete(ee,ye),Ze=y.resolve(S.start).marksAcross(y.resolve(S.endA));else if(S.endA==S.endB&&(je=uT(F.parent.content.cut(F.parentOffset,G.parentOffset),j.parent.content.cut(j.parentOffset,S.endA-j.start()))))Ae=n.state.tr,je.type=="add"?Ae.addMark(ee,ye,je.mark):Ae.removeMark(ee,ye,je.mark);else if(F.parent.child(F.index()).isText&&F.index()==G.index()-(G.textOffset?0:1)){let se=F.parent.textBetween(F.parentOffset,G.parentOffset);if(n.someProp("handleTextInput",ge=>ge(n,ee,ye,se)))return;Ae=n.state.tr.insertText(se,ee,ye)}}if(Ae||(Ae=n.state.tr.replace(ee,ye,m.doc.slice(S.start-m.from,S.endB-m.from))),m.sel){let se=qv(n,Ae.doc,m.sel);se&&!(si&&n.composing&&se.empty&&(S.start!=S.endB||n.input.lastChromeDelete<Date.now()-100)&&(se.head==ee||se.head==Ae.mapping.map(ye)-1)||Li&&se.empty&&se.head==ee)&&Ae.setSelection(se)}Ze&&Ae.ensureMarks(Ze),s&&Ae.setMeta("composition",s),n.dispatch(Ae.scrollIntoView())}function qv(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:Fh(n,t.resolve(e.anchor),t.resolve(e.head))}function uT(n,t){let e=n.firstChild.marks,i=t.firstChild.marks,r=e,s=i,a,d,h;for(let y=0;y<i.length;y++)r=i[y].removeFromSet(r);for(let y=0;y<e.length;y++)s=e[y].removeFromSet(s);if(r.length==1&&s.length==0)d=r[0],a="add",h=y=>y.mark(d.addToSet(y.marks));else if(r.length==0&&s.length==1)d=s[0],a="remove",h=y=>y.mark(d.removeFromSet(y.marks));else return null;let m=[];for(let y=0;y<t.childCount;y++)m.push(h(t.child(y)));if(Se.from(m).eq(n))return{mark:d,type:a}}function dT(n,t,e,i,r){if(e-t<=r.pos-i.pos||gh(i,!0,!1)<r.pos)return!1;let s=n.resolve(t);if(!i.parent.isTextblock){let d=s.nodeAfter;return d!=null&&e==t+d.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(gh(s,!0,!0));return!a.parent.isTextblock||a.pos>e||gh(a,!0,!1)<e?!1:i.parent.content.cut(i.parentOffset).eq(a.parent.content)}function gh(n,t,e){let i=n.depth,r=t?n.end():n.pos;for(;i>0&&(t||n.indexAfter(i)==n.node(i).childCount);)i--,r++,t=!1;if(e){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function pT(n,t,e,i,r){let s=n.findDiffStart(t,e);if(s==null)return null;let{a,b:d}=n.findDiffEnd(t,e+n.size,e+t.size);if(r=="end"){let h=Math.max(0,s-Math.min(a,d));i-=a+h-s}if(a<s&&n.size<t.size){let h=i<=s&&i>=a?s-i:0;s-=h,s&&s<t.size&&Wv(t.textBetween(s-1,s+1))&&(s+=h?1:-1),d=s+(d-a),a=s}else if(d<s){let h=i<=s&&i>=d?s-i:0;s-=h,s&&s<n.size&&Wv(n.textBetween(s-1,s+1))&&(s+=h?1:-1),a=s+(a-d),d=s}return{start:s,endA:a,endB:d}}function Wv(n){if(n.length!=2)return!1;let t=n.charCodeAt(0),e=n.charCodeAt(1);return t>=56320&&t<=57343&&e>=55296&&e<=56319}var Ld=class{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Mh,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Xv),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Kv(this),Zv(this),this.nodeViews=Yv(this),this.docView=Tv(this.state.doc,jv(this),mh(this),this.dom,this),this.domObserver=new Lh(this,(i,r,s,a)=>cT(this,i,r,s,a)),this.domObserver.start(),NS(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Ah(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Xv),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let i in this._props)e[i]=this._props[i];e.state=this.state;for(let i in t)e[i]=t[i];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var i;let r=this.state,s=!1,a=!1;t.storedMarks&&this.composing&&(Cy(this),a=!0),this.state=t;let d=r.plugins!=t.plugins||this._props.plugins!=e.plugins;if(d||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let T=Yv(this);hT(T,this.nodeViews)&&(this.nodeViews=T,s=!0)}(d||e.handleDOMEvents!=this._props.handleDOMEvents)&&Ah(this),this.editable=Kv(this),Zv(this);let h=mh(this),m=jv(this),y=r.plugins!=t.plugins&&!r.doc.eq(t.doc)?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",E=s||!this.docView.matchesNode(t.doc,m,h);(E||!t.selection.eq(r.selection))&&(a=!0);let O=y=="preserve"&&a&&this.dom.style.overflowAnchor==null&&eS(this);if(a){this.domObserver.stop();let T=E&&(Li||si)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&fT(r.selection,t.selection);if(E){let S=si?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=KS(this)),(s||!this.docView.update(t.doc,m,h,this))&&(this.docView.updateOuterDeco(m),this.docView.destroy(),this.docView=Tv(t.doc,m,h,this.dom,this)),S&&!this.trackWrites&&(T=!0)}T||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&CS(this))?Oo(this,T):(cy(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,r),y=="reset"?this.dom.scrollTop=0:y=="to selection"?this.scrollToSelection():O&&tS(O)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof ct){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&bv(this,e.getBoundingClientRect(),t)}else bv(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let i=this.directPlugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let i=this.state.plugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let i=this.pluginViews[e];i.update&&i.update(this,t)}}updateDraggedNode(t,e){let i=t.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let s=i.from+(this.state.doc.content.size-e.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==i.node&&(r=s)}this.dragging=new Ad(t.slice,t.move,r<0?void 0:ct.create(this.state.doc,r))}someProp(t,e){let i=this._props&&this._props[t],r;if(i!=null&&(r=e?e(i):i))return r;for(let a=0;a<this.directPlugins.length;a++){let d=this.directPlugins[a].props[t];if(d!=null&&(r=e?e(d):d))return r}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let d=s[a].props[t];if(d!=null&&(r=e?e(d):d))return r}}hasFocus(){if(Li){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&nS(this.dom),Oo(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return t||document}updateRoot(){this._root=null}posAtCoords(t){return aS(this,t)}coordsAtPos(t,e=1){return iy(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,i=-1){let r=this.docView.posFromDOM(t,e,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return pS(this,e||this.state,t)}pasteHTML(t,e){return Ic(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return Ic(this,t,null,!0,e||new ClipboardEvent("paste"))}serializeForClipboard(t){return Bh(this,t)}destroy(){this.docView&&(FS(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],mh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Uw())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return VS(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return t?gi&&this.root.nodeType===11&&Kw(this.dom.ownerDocument)==this.dom&&rT(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function jv(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),n.someProp("attributes",e=>{if(typeof e=="function"&&(e=e(n.state)),e)for(let i in e)i=="class"?t.class+=" "+e[i]:i=="style"?t.style=(t.style?t.style+";":"")+e[i]:!t[i]&&i!="contenteditable"&&i!="nodeName"&&(t[i]=String(e[i]))}),t.translate||(t.translate="no"),[no.node(0,n.state.doc.content.size,t)]}function Zv(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:no.widget(n.state.selection.from,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Kv(n){return!n.someProp("editable",t=>t(n.state)===!1)}function fT(n,t){let e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}function Yv(n){let t=Object.create(null);function e(i){for(let r in i)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=i[r])}return n.someProp("nodeViews",e),n.someProp("markViews",e),t}function hT(n,t){let e=0,i=0;for(let r in n){if(n[r]!=t[r])return!0;e++}for(let r in t)i++;return e!=i}function Xv(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var mT=["ol",0],gT=["ul",0],_T=["li",0],Iy={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(n){return{order:n.hasAttribute("start")?+n.getAttribute("start"):1}}}],toDOM(n){return n.attrs.order==1?mT:["ol",{start:n.attrs.order},0]}},Oy={parseDOM:[{tag:"ul"}],toDOM(){return gT}},My={parseDOM:[{tag:"li"}],toDOM(){return _T},defining:!0};function Ay(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,a=r.blockRange(s);if(!a)return!1;let d=i?e.tr:null;return vT(d,a,n,t)?(i&&i(d.scrollIntoView()),!0):!1}}function vT(n,t,e,i=null){let r=!1,s=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(e)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let h=a.resolve(t.start-2);s=new zs(h,h,t.depth),t.endIndex<t.parent.childCount&&(t=new zs(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),r=!0}let d=Xa(s,e,i,t);return d?(n&&yT(n,t,d,r,e),!0):!1}function yT(n,t,e,i,r){let s=Se.empty;for(let y=e.length-1;y>=0;y--)s=Se.from(e[y].type.create(e[y].attrs,s));n.step(new qn(t.start-(i?2:0),t.end,t.start,t.end,new Ue(s,0,0),e.length,!0));let a=0;for(let y=0;y<e.length;y++)e[y].type==r&&(a=y+1);let d=e.length-a,h=t.start+e.length-(i?2:0),m=t.parent;for(let y=t.startIndex,E=t.endIndex,O=!0;y<E;y++,O=!1)!O&&rs(n.doc,h,d)&&(n.split(h,d),h+=2*d),h+=m.child(y).nodeSize;return n}function ky(n,t){return function(e,i){let{$from:r,$to:s,node:a}=e.selection;if(a&&a.isBlock||r.depth<2||!r.sameParent(s))return!1;let d=r.node(-1);if(d.type!=n)return!1;if(r.parent.content.size==0&&r.node(-1).childCount==r.indexAfter(-1)){if(r.depth==3||r.node(-3).type!=n||r.index(-2)!=r.node(-2).childCount-1)return!1;if(i){let E=Se.empty,O=r.index(-1)?1:r.index(-2)?2:3;for(let j=r.depth-O;j>=r.depth-3;j--)E=Se.from(r.node(j).copy(E));let T=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;E=E.append(Se.from(n.createAndFill()));let S=r.before(r.depth-(O-1)),F=e.tr.replace(S,r.after(-T),new Ue(E,4-O,0)),G=-1;F.doc.nodesBetween(S,F.doc.content.size,(j,oe)=>{if(G>-1)return!1;j.isTextblock&&j.content.size==0&&(G=oe+1)}),G>-1&&F.setSelection(It.near(F.doc.resolve(G))),i(F.scrollIntoView())}return!0}let h=s.pos==r.end()?d.contentMatchAt(0).defaultType:null,m=e.tr.delete(r.pos,s.pos),y=h?[t?{type:n,attrs:t}:null,{type:h}]:void 0;return rs(m.doc,r.pos,2,y)?(i&&i(m.split(r.pos,2,y).scrollIntoView()),!0):!1}}function Uh(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,a=>a.childCount>0&&a.firstChild.type==n);return s?e?i.node(s.depth-1).type==n?bT(t,e,n,s):CT(t,e,s):!0:!1}}function bT(n,t,e,i){let r=n.tr,s=i.end,a=i.$to.end(i.depth);s<a&&(r.step(new qn(s-1,a,s,a,new Ue(Se.from(e.create(null,i.parent.copy())),1,0),1,!0)),i=new zs(r.doc.resolve(i.$from.pos),r.doc.resolve(a),i.depth));let d=Us(i);if(d==null)return!1;r.lift(i,d);let h=r.mapping.map(s,-1)-1;return qs(r.doc,h)&&r.join(h),t(r.scrollIntoView()),!0}function CT(n,t,e){let i=n.tr,r=e.parent;for(let T=e.end,S=e.endIndex-1,F=e.startIndex;S>F;S--)T-=r.child(S).nodeSize,i.delete(T-1,T+1);let s=i.doc.resolve(e.start),a=s.nodeAfter;if(i.mapping.map(e.end)!=e.start+s.nodeAfter.nodeSize)return!1;let d=e.startIndex==0,h=e.endIndex==r.childCount,m=s.node(-1),y=s.index(-1);if(!m.canReplace(y+(d?0:1),y+1,a.content.append(h?Se.empty:Se.from(r))))return!1;let E=s.pos,O=E+a.nodeSize;return i.step(new qn(E-(d?1:0),O+(h?1:0),E+1,O-1,new Ue((d?Se.empty:Se.from(r.copy(Se.empty))).append(h?Se.empty:Se.from(r.copy(Se.empty))),d?0:1,h?0:1),d?0:1)),t(i.scrollIntoView()),!0}function qh(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,m=>m.childCount>0&&m.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let d=s.parent,h=d.child(a-1);if(h.type!=n)return!1;if(e){let m=h.lastChild&&h.lastChild.type==d.type,y=Se.from(m?n.create():null),E=new Ue(Se.from(n.create(null,Se.from(d.type.create(null,y)))),m?3:1,0),O=s.start,T=s.end;e(t.tr.step(new qn(O-(m?3:1),T,O,T,E,1,!0)).scrollIntoView())}return!0}}var xT={attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(n){return{href:n.getAttribute("href"),title:n.getAttribute("title"),target:n.getAttribute("target")}}}],toDOM(n){let{href:t,title:e,target:i}=n.attrs;return["a",{href:t,title:e,target:i},0]}},wT={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM(){return["em",0]}},ST={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM(){return["strong",0]}},TT={parseDOM:[{tag:"code"}],toDOM(){return["code",0]}},IT={parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM(){return["u",0]}},OT={parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM(){return["s",0]}},MT={attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:n=>({color:n})}],toDOM(n){let{color:t}=n.attrs;return["span",{style:`color:${t};`},0]}},AT={attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:n=>({backgroundColor:n})}],toDOM(n){let{backgroundColor:t}=n.attrs;return["span",{style:`background-color:${t};`},0]}},kT={attrs:{},parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM(){return["sup",0]}},PT={attrs:{},parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM(){return["sub",0]}},DT={link:xT,em:wT,strong:ST,code:TT,u:IT,s:OT,text_color:MT,text_background_color:AT,sup:kT,sub:PT},LT={content:"block+"},RT={group:"inline"},NT={content:"inline*",group:"block",attrs:{align:{default:null},indent:{default:null}},parseDOM:[{tag:"p",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{align:e,indent:parseInt(i,10)||null}}}],toDOM(n){let{align:t,indent:e}=n.attrs,i={textAlign:t!=="left"?t:null,marginLeft:e!==null?`${e*40}px`:null};return["p",{style:ad(i)||null,"data-indent":e??null},0]}},FT={content:"block+",group:"block",defining:!0,attrs:{indent:{default:null}},parseDOM:[{tag:"blockquote",getAttrs(n){let t=n.getAttribute("data-indent")||null;return{indent:parseInt(t,10)||null}}}],toDOM(n){let{indent:t}=n.attrs,e={marginLeft:t!==null?`${t*40}px`:null};return["blockquote",{style:ad(e)||null,"data-indent":t??null},0]}},BT={group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["hr"]}},VT={attrs:{level:{default:1},align:{default:null},indent:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:1,align:e,indent:parseInt(i,10)||null}}},{tag:"h2",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:2,align:e,indent:parseInt(i,10)||null}}},{tag:"h3",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:3,align:e,indent:parseInt(i,10)||null}}},{tag:"h4",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:4,align:e,indent:parseInt(i,10)||null}}},{tag:"h5",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:5,align:e,indent:parseInt(i,10)||null}}},{tag:"h6",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:6,align:e,indent:parseInt(i,10)||null}}}],toDOM(n){let{level:t,align:e,indent:i}=n.attrs,r={textAlign:e!=="left"?e:null,marginLeft:i!==null?`${i*40}px`:null},a={style:ad(r)||null,"data-indent":i??null};return[`h${t}`,a,0]}},zT={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}},HT={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}},GT={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(n){return{src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt"),width:n.getAttribute("width")}}}],toDOM(n){let{src:t,alt:e,title:i,width:r}=n.attrs;return["img",{src:t,alt:e,title:i,width:r}]}},UT=ji(Cn({},My),{content:"paragraph block*"}),qT=ji(Cn({},Iy),{content:"list_item+",group:"block"}),WT=ji(Cn({},Oy),{content:"list_item+",group:"block"}),jT={doc:LT,text:RT,paragraph:NT,blockquote:FT,horizontal_rule:BT,heading:VT,hard_break:HT,code_block:zT,image:GT,list_item:UT,ordered_list:qT,bullet_list:WT},ps=new hd({marks:DT,nodes:jT});var Dy=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function ZT(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("backward",n):e.parentOffset>0)?null:e}var KT=(n,t,e)=>{let i=ZT(n,e);if(!i)return!1;let r=Ly(i);if(!r){let a=i.blockRange(),d=a&&Us(a);return d==null?!1:(t&&t(n.tr.lift(a,d).scrollIntoView()),!0)}let s=r.nodeBefore;if(Fy(n,r,t,-1))return!0;if(i.parent.content.size==0&&(ol(s,"end")||ct.isSelectable(s)))for(let a=i.depth;;a--){let d=bd(n.doc,i.before(a),i.after(a),Ue.empty);if(d&&d.slice.size<d.to-d.from){if(t){let h=n.tr.step(d);h.setSelection(ol(s,"end")?It.findFrom(h.doc.resolve(h.mapping.map(r.pos,-1)),-1):ct.create(h.doc,r.pos-s.nodeSize)),t(h.scrollIntoView())}return!0}if(a==1||i.node(a-1).childCount>1)break}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1};function ol(n,t,e=!1){for(let i=n;i;i=t=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(e&&i.childCount!=1)return!1}return!1}var YT=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=Ly(i)}let a=s&&s.nodeBefore;return!a||!ct.isSelectable(a)?!1:(t&&t(n.tr.setSelection(ct.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function Ly(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function XT(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}var JT=(n,t,e)=>{let i=XT(n,e);if(!i)return!1;let r=Ry(i);if(!r)return!1;let s=r.nodeAfter;if(Fy(n,r,t,1))return!0;if(i.parent.content.size==0&&(ol(s,"start")||ct.isSelectable(s))){let a=bd(n.doc,i.before(),i.after(),Ue.empty);if(a&&a.slice.size<a.to-a.from){if(t){let d=n.tr.step(a);d.setSelection(ol(s,"start")?It.findFrom(d.doc.resolve(d.mapping.map(r.pos)),1):ct.create(d.doc,d.mapping.map(r.pos))),t(d.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},QT=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=Ry(i)}let a=s&&s.nodeAfter;return!a||!ct.isSelectable(a)?!1:(t&&t(n.tr.setSelection(ct.create(n.doc,s.pos)).scrollIntoView()),!0)};function Ry(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}var Ny=(n,t)=>{let{$from:e,$to:i}=n.selection,r=e.blockRange(i),s=r&&Us(r);return s==null?!1:(t&&t(n.tr.lift(r,s).scrollIntoView()),!0)},jh=(n,t)=>{let{$head:e,$anchor:i}=n.selection;return!e.parent.type.spec.code||!e.sameParent(i)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function Zh(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}var Kh=(n,t)=>{let{$head:e,$anchor:i}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(i))return!1;let r=e.node(-1),s=e.indexAfter(-1),a=Zh(r.contentMatchAt(s));if(!a||!r.canReplaceWith(s,s,a))return!1;if(t){let d=e.after(),h=n.tr.replaceWith(d,d,a.createAndFill());h.setSelection(It.near(h.doc.resolve(d),1)),t(h.scrollIntoView())}return!0},Yh=(n,t)=>{let e=n.selection,{$from:i,$to:r}=e;if(e instanceof er||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=Zh(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let a=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,d=n.tr.insert(a,s.createAndFill());d.setSelection(tn.create(d.doc,a+1)),t(d.scrollIntoView())}return!0},Xh=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let s=e.before();if(rs(n.doc,s))return t&&t(n.tr.split(s).scrollIntoView()),!0}let i=e.blockRange(),r=i&&Us(i);return r==null?!1:(t&&t(n.tr.lift(i,r).scrollIntoView()),!0)};function $T(n){return(t,e)=>{let{$from:i,$to:r}=t.selection;if(t.selection instanceof ct&&t.selection.node.isBlock)return!i.parentOffset||!rs(t.doc,i.pos)?!1:(e&&e(t.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let s=[],a,d,h=!1,m=!1;for(let T=i.depth;;T--)if(i.node(T).isBlock){h=i.end(T)==i.pos+(i.depth-T),m=i.start(T)==i.pos-(i.depth-T),d=Zh(i.node(T-1).contentMatchAt(i.indexAfter(T-1)));let F=n&&n(r.parent,h,i);s.unshift(F||(h&&d?{type:d}:null)),a=T;break}else{if(T==1)return!1;s.unshift(null)}let y=t.tr;(t.selection instanceof tn||t.selection instanceof er)&&y.deleteSelection();let E=y.mapping.map(i.pos),O=rs(y.doc,E,s.length,s);if(O||(s[0]=d?{type:d}:null,O=rs(y.doc,E,s.length,s)),y.split(E,s.length,s),!h&&m&&i.node(a).type!=d){let T=y.mapping.map(i.before(a)),S=y.doc.resolve(T);d&&i.node(a-1).canReplaceWith(S.index(),S.index()+1,d)&&y.setNodeMarkup(y.mapping.map(i.before(a)),d)}return e&&e(y.scrollIntoView()),!0}}var Jh=$T();var eI=(n,t)=>(t&&t(n.tr.setSelection(new er(n.doc))),!0);function tI(n,t,e){let i=t.nodeBefore,r=t.nodeAfter,s=t.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&t.parent.canReplace(s-1,s)?(e&&e(n.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(r.isTextblock||qs(n.doc,t.pos))?!1:(e&&e(n.tr.join(t.pos).scrollIntoView()),!0)}function Fy(n,t,e,i){let r=t.nodeBefore,s=t.nodeAfter,a,d,h=r.type.spec.isolating||s.type.spec.isolating;if(!h&&tI(n,t,e))return!0;let m=!h&&t.parent.canReplace(t.index(),t.index()+1);if(m&&(a=(d=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&d.matchType(a[0]||s.type).validEnd){if(e){let T=t.pos+s.nodeSize,S=Se.empty;for(let j=a.length-1;j>=0;j--)S=Se.from(a[j].create(null,S));S=Se.from(r.copy(S));let F=n.tr.step(new qn(t.pos-1,T,t.pos,T,new Ue(S,1,0),a.length,!0)),G=F.doc.resolve(T+2*a.length);G.nodeAfter&&G.nodeAfter.type==r.type&&qs(F.doc,G.pos)&&F.join(G.pos),e(F.scrollIntoView())}return!0}let y=s.type.spec.isolating||i>0&&h?null:It.findFrom(t,1),E=y&&y.$from.blockRange(y.$to),O=E&&Us(E);if(O!=null&&O>=t.depth)return e&&e(n.tr.lift(E,O).scrollIntoView()),!0;if(m&&ol(s,"start",!0)&&ol(r,"end")){let T=r,S=[];for(;S.push(T),!T.isTextblock;)T=T.lastChild;let F=s,G=1;for(;!F.isTextblock;F=F.firstChild)G++;if(T.canReplace(T.childCount,T.childCount,F.content)){if(e){let j=Se.empty;for(let ve=S.length-1;ve>=0;ve--)j=Se.from(S[ve].copy(j));let oe=n.tr.step(new qn(t.pos-S.length,t.pos+s.nodeSize,t.pos+G,t.pos+s.nodeSize-G,new Ue(j,S.length,0),0,!0));e(oe.scrollIntoView())}return!0}}return!1}function By(n){return function(t,e){let i=t.selection,r=n<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(e&&e(t.tr.setSelection(tn.create(t.doc,n<0?r.start(s):r.end(s)))),!0):!1}}var nI=By(-1),iI=By(1);function Vy(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,a=r.blockRange(s),d=a&&Xa(a,n,t);return d?(i&&i(e.tr.wrap(a,d).scrollIntoView()),!0):!1}}function Fd(n,t=null){return function(e,i){let r=!1;for(let s=0;s<e.selection.ranges.length&&!r;s++){let{$from:{pos:a},$to:{pos:d}}=e.selection.ranges[s];e.doc.nodesBetween(a,d,(h,m)=>{if(r)return!1;if(!(!h.isTextblock||h.hasMarkup(n,t)))if(h.type==n)r=!0;else{let y=e.doc.resolve(m),E=y.index();r=y.parent.canReplaceWith(E,E+1,n)}})}if(!r)return!1;if(i){let s=e.tr;for(let a=0;a<e.selection.ranges.length;a++){let{$from:{pos:d},$to:{pos:h}}=e.selection.ranges[a];s.setBlockType(d,h,n,t)}i(s.scrollIntoView())}return!0}}function rI(n,t,e,i){for(let r=0;r<t.length;r++){let{$from:s,$to:a}=t[r],d=s.depth==0?n.inlineContent&&n.type.allowsMarkType(e):!1;if(n.nodesBetween(s.pos,a.pos,(h,m)=>{if(d||!i&&h.isAtom&&h.isInline&&m>=s.pos&&m+h.nodeSize<=a.pos)return!1;d=h.inlineContent&&h.type.allowsMarkType(e)}),d)return!0}return!1}function oI(n){let t=[];for(let e=0;e<n.length;e++){let{$from:i,$to:r}=n[e];i.doc.nodesBetween(i.pos,r.pos,(s,a)=>{if(s.isAtom&&s.content.size&&s.isInline&&a>=i.pos&&a+s.nodeSize<=r.pos)return a+1>i.pos&&t.push(new Qa(i,i.doc.resolve(a+1))),i=i.doc.resolve(a+1+s.content.size),!1}),i.pos<r.pos&&t.push(new Qa(i,r))}return t}function ea(n,t=null,e){let i=(e&&e.removeWhenPresent)!==!1,r=(e&&e.enterInlineAtoms)!==!1,s=!(e&&e.includeWhitespace);return function(a,d){let{empty:h,$cursor:m,ranges:y}=a.selection;if(h&&!m||!rI(a.doc,y,n,r))return!1;if(d)if(m)n.isInSet(a.storedMarks||m.marks())?d(a.tr.removeStoredMark(n)):d(a.tr.addStoredMark(n.create(t)));else{let E,O=a.tr;r||(y=oI(y)),i?E=!y.some(T=>a.doc.rangeHasMark(T.$from.pos,T.$to.pos,n)):E=!y.every(T=>{let S=!1;return O.doc.nodesBetween(T.$from.pos,T.$to.pos,(F,G,j)=>{if(S)return!1;S=!n.isInSet(F.marks)&&!!j&&j.type.allowsMarkType(n)&&!(F.isText&&/^\s*$/.test(F.textBetween(Math.max(0,T.$from.pos-G),Math.min(F.nodeSize,T.$to.pos-G))))}),!S});for(let T=0;T<y.length;T++){let{$from:S,$to:F}=y[T];if(!E)O.removeMark(S.pos,F.pos,n);else{let G=S.pos,j=F.pos,oe=S.nodeAfter,ve=F.nodeBefore,ee=s&&oe&&oe.isText?/^\s*/.exec(oe.text)[0].length:0,ye=s&&ve&&ve.isText?/\s*$/.exec(ve.text)[0].length:0;G+ee<j&&(G+=ee,j-=ye),O.addMark(G,j,n.create(t))}}d(O.scrollIntoView())}return!0}}function sl(...n){return function(t,e,i){for(let r=0;r<n.length;r++)if(n[r](t,e,i))return!0;return!1}}var Wh=sl(Dy,KT,YT),Py=sl(Dy,JT,QT),Mo={Enter:sl(jh,Yh,Xh,Jh),"Mod-Enter":Kh,Backspace:Wh,"Mod-Backspace":Wh,"Shift-Backspace":Wh,Delete:Py,"Mod-Delete":Py,"Mod-a":eI},zy={"Ctrl-h":Mo.Backspace,"Alt-Backspace":Mo["Mod-Backspace"],"Ctrl-d":Mo.Delete,"Ctrl-Alt-Backspace":Mo["Mod-Delete"],"Alt-Delete":Mo["Mod-Delete"],"Alt-d":Mo["Mod-Delete"],"Ctrl-a":nI,"Ctrl-e":iI};for(let n in Mo)zy[n]=Mo[n];var sI=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Hy=sI?zy:Mo;var dr=class{constructor(t,e,i={}){this.match=t,this.match=t,this.handler=typeof e=="string"?aI(e):e,this.undoable=i.undoable!==!1,this.inCode=i.inCode||!1}};function aI(n){return function(t,e,i,r){let s=n;if(e[1]){let a=e[0].lastIndexOf(e[1]);s+=e[0].slice(a+e[1].length),i+=a;let d=i-r;d>0&&(s=e[0].slice(a-d,a)+s,i=r)}return t.tr.insertText(s,i,r)}}var lI=500;function Uy({rules:n}){let t=new ri({state:{init(){return null},apply(e,i){let r=e.getMeta(this);return r||(e.selectionSet||e.docChanged?null:i)}},props:{handleTextInput(e,i,r,s){return Gy(e,i,r,s,n,t)},handleDOMEvents:{compositionend:e=>{setTimeout(()=>{let{$cursor:i}=e.state.selection;i&&Gy(e,i.pos,i.pos,"",n,t)})}}},isInputRules:!0});return t}function Gy(n,t,e,i,r,s){if(n.composing)return!1;let a=n.state,d=a.doc.resolve(t),h=d.parent.textBetween(Math.max(0,d.parentOffset-lI),d.parentOffset,null,"\uFFFC")+i;for(let m=0;m<r.length;m++){let y=r[m];if(d.parent.type.spec.code){if(!y.inCode)continue}else if(y.inCode==="only")continue;let E=y.match.exec(h),O=E&&y.handler(a,E,t-(E[0].length-i.length),e);if(O)return y.undoable&&O.setMeta(s,{transform:O,from:t,to:e,text:i}),n.dispatch(O),!0}return!1}var qy=new dr(/--$/,"\u2014"),Wy=new dr(/\.\.\.$/,"\u2026"),cI=new dr(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),uI=new dr(/"$/,"\u201D"),dI=new dr(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),pI=new dr(/'$/,"\u2019"),jy=[cI,uI,dI,pI];function Bd(n,t,e=null,i){return new dr(n,(r,s,a,d)=>{let h=e instanceof Function?e(s):e,m=r.tr.delete(a,d),y=m.doc.resolve(a),E=y.blockRange(),O=E&&Xa(E,t,h);if(!O)return null;m.wrap(E,O);let T=m.doc.resolve(a-1).nodeBefore;return T&&T.type==t&&qs(m.doc,a-1)&&(!i||i(s,T))&&m.join(a-1),m})}function Qh(n,t,e=null){return new dr(n,(i,r,s,a)=>{let d=i.doc.resolve(s),h=e instanceof Function?e(r):e;return d.node(-1).canReplaceWith(d.index(-1),d.indexAfter(-1),t)?i.tr.delete(s,a).setBlockType(s,s,t,h):null})}var Vd=(n,t)=>{let{from:e,$from:i,to:r,empty:s}=n.selection;return s?!!t.isInSet(n.storedMarks||i.marks()):n.doc.rangeHasMark(e,r,t)},fI=(n,t)=>{for(let e=t.depth;e>0;e-=1)if(t.node(e).type===n)return t.node(e).type;return null},$h=(n,t,e={})=>{let{selection:i}=n,{$from:r,to:s}=i,a=fI(t,r);return!Object.entries(e).length||!a?!!a:s<=r.end()&&r.parent.hasMarkup(t,e)},Zy=n=>{let t=[],{selection:e,storedMarks:i}=n,{from:r,to:s,empty:a,$from:d}=e;return a?t=i||d.marks():n.doc.nodesBetween(r,s,h=>{t=[...t,...h.marks]}),t},em=n=>{let t=[],{selection:{from:e,to:i}}=n;return n.doc.nodesBetween(e,i,r=>{t.push(r)}),t},tm=(n,t,e)=>{for(let i of t){let{$from:r,$to:s}=i,a=r.depth===0?n.type.allowsMarkType(e):!1;if(n.nodesBetween(r.pos,s.pos,d=>a?!1:(a=d.inlineContent&&d.type.allowsMarkType(e),!0)),a)return!0}return!1},nm=(n,t,e)=>new dr(n,(i,r,s,a)=>{let{tr:d}=i,h=s,m=a,[y,,E]=r,O=y.search(/\S/);if(E){let T=s+y.indexOf(E),S=T+E.length;S<a&&d.delete(S,a),T>s&&d.delete(s+O,T),m=s+E.length+O}return d.addMark(h,m,t.create(e)),d.removeStoredMark(t),d}),Ky=(n,t)=>{let{$from:e}=n.selection;for(let i=e.depth;i>=0;i-=1){let r=e.index(i);if(e.node(i).canReplaceWith(r,r,t))return!0}return!1};var Yy=()=>(n,t)=>{let{doc:e,selection:i,tr:r,schema:s}=n,{$head:{pos:a},from:d,to:h}=i,m=s.marks.link;if(d===h){let y=e.resolve(a),E=a-y.textOffset,O=E+y.parent.child(y.index()).nodeSize;r.removeMark(E,O,m)}else r.removeMark(d,h,m);return r.docChanged?(t?.(r),!0):!1},im=(n,t={})=>(e,i)=>{let{tr:r,selection:s}=e,{empty:a,ranges:d,$from:h,$to:m}=s;if(a&&s instanceof tn){let{$cursor:y}=s;if(!y||!tm(e.doc,d,n)||(r.addStoredMark(n.create(t)),!r.storedMarksSet))return!1;i?.(r)}else{if(r.addMark(h.pos,m.pos,n.create(t)),!r.docChanged)return!1;i?.(r.scrollIntoView())}return!0},Xy=n=>(t,e)=>{let{tr:i,selection:r,storedMarks:s,doc:a}=t,{empty:d,ranges:h}=r;if(d&&r instanceof tn){let{$cursor:m}=r;if(!m||!tm(t.doc,h,n))return!1;if(n.isInSet(s||m.marks()))return i.removeStoredMark(n),e?.(i),!0}else{for(let m of h){let{$from:y,$to:E}=m;a.rangeHasMark(y.pos,E.pos,n)&&i.removeMark(y.pos,E.pos,n)}if(!i.docChanged)return!1;e?.(i.scrollIntoView())}return!1};var zd=200,Xn=function(){};Xn.prototype.append=function(t){return t.length?(t=Xn.from(t),!this.length&&t||t.length<zd&&this.leafAppend(t)||this.length<zd&&t.leafPrepend(this)||this.appendInner(t)):this};Xn.prototype.prepend=function(t){return t.length?Xn.from(t).append(this):this};Xn.prototype.appendInner=function(t){return new hI(this,t)};Xn.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?Xn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};Xn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Xn.prototype.forEach=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)};Xn.prototype.map=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,a){return r.push(t(s,a))},e,i),r};Xn.from=function(t){return t instanceof Xn?t:t&&t.length?new Jy(t):Xn.empty};var Jy=function(n){function t(i){n.call(this),this.values=i}n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new t(this.values.slice(r,s))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,s,a,d){for(var h=s;h<a;h++)if(r(this.values[h],d+h)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,a,d){for(var h=s-1;h>=a;h--)if(r(this.values[h],d+h)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=zd)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=zd)return new t(r.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(Xn);Xn.empty=new Jy([]);var hI=function(n){function t(e,i){n.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},t.prototype.forEachInner=function(i,r,s,a){var d=this.left.length;if(r<d&&this.left.forEachInner(i,r,Math.min(s,d),a)===!1||s>d&&this.right.forEachInner(i,Math.max(r-d,0),Math.min(this.length,s)-d,a+d)===!1)return!1},t.prototype.forEachInvertedInner=function(i,r,s,a){var d=this.left.length;if(r>d&&this.right.forEachInvertedInner(i,r-d,Math.max(s,d)-d,a+d)===!1||s<d&&this.left.forEachInvertedInner(i,Math.min(r,d),s,a)===!1)return!1},t.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},t.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new t(r,this.right)},t.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new t(this.left,new t(this.right,i)):new t(this,i)},t}(Xn),rm=Xn;var mI=500,na=class n{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;e&&(r=this.remapping(i,this.items.length),s=r.maps.length);let a=t.tr,d,h,m=[],y=[];return this.items.forEach((E,O)=>{if(!E.step){r||(r=this.remapping(i,O+1),s=r.maps.length),s--,y.push(E);return}if(r){y.push(new io(E.map));let T=E.step.map(r.slice(s)),S;T&&a.maybeStep(T).doc&&(S=a.mapping.maps[a.mapping.maps.length-1],m.push(new io(S,void 0,void 0,m.length+y.length))),s--,S&&r.appendMap(S,s)}else a.maybeStep(E.step);if(E.selection)return d=r?E.selection.map(r.slice(s)):E.selection,h=new n(this.items.slice(0,i).append(y.reverse().concat(m)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:a,selection:d}}addTransform(t,e,i,r){let s=[],a=this.eventCount,d=this.items,h=!r&&d.length?d.get(d.length-1):null;for(let y=0;y<t.steps.length;y++){let E=t.steps[y].invert(t.docs[y]),O=new io(t.mapping.maps[y],E,e),T;(T=h&&h.merge(O))&&(O=T,y?s.pop():d=d.slice(0,d.length-1)),s.push(O),e&&(a++,e=void 0),r||(h=O)}let m=a-i.depth;return m>_I&&(d=gI(d,m),a-=m),new n(d.append(s),a)}remapping(t,e){let i=new _c;return this.items.forEach((r,s)=>{let a=r.mirrorOffset!=null&&s-r.mirrorOffset>=t?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,a)},t,e),i}addMaps(t){return this.eventCount==0?this:new n(this.items.append(t.map(e=>new io(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-e),s=t.mapping,a=t.steps.length,d=this.eventCount;this.items.forEach(O=>{O.selection&&d--},r);let h=e;this.items.forEach(O=>{let T=s.getMirror(--h);if(T==null)return;a=Math.min(a,T);let S=s.maps[T];if(O.step){let F=t.steps[T].invert(t.docs[T]),G=O.selection&&O.selection.map(s.slice(h+1,T));G&&d++,i.push(new io(S,F,G))}else i.push(new io(S))},r);let m=[];for(let O=e;O<a;O++)m.push(new io(s.maps[O]));let y=this.items.slice(0,r).append(m).append(i),E=new n(y,d);return E.emptyItemCount()>mI&&(E=E.compress(this.items.length-i.length)),E}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,r=[],s=0;return this.items.forEach((a,d)=>{if(d>=t)r.push(a),a.selection&&s++;else if(a.step){let h=a.step.map(e.slice(i)),m=h&&h.getMap();if(i--,m&&e.appendMap(m,i),h){let y=a.selection&&a.selection.map(e.slice(i));y&&s++;let E=new io(m.invert(),h,y),O,T=r.length-1;(O=r.length&&r[T].merge(E))?r[T]=O:r.push(E)}}else a.map&&i--},this.items.length,0),new n(rm.from(r.reverse()),s)}};na.empty=new na(rm.empty,0);function gI(n,t){let e;return n.forEach((i,r)=>{if(i.selection&&t--==0)return e=r,!1}),n.slice(e)}var io=class n{constructor(t,e,i,r){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new n(e.getMap().invert(),e,this.selection)}}},ro=class{constructor(t,e,i,r,s){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=r,this.prevComposition=s}},_I=20;function vI(n,t,e,i){let r=e.getMeta(ta),s;if(r)return r.historyState;e.getMeta(CI)&&(n=new ro(n.done,n.undone,null,0,-1));let a=e.getMeta("appendedTransaction");if(e.steps.length==0)return n;if(a&&a.getMeta(ta))return a.getMeta(ta).redo?new ro(n.done.addTransform(e,void 0,i,Hd(t)),n.undone,Qy(e.mapping.maps),n.prevTime,n.prevComposition):new ro(n.done,n.undone.addTransform(e,void 0,i,Hd(t)),null,n.prevTime,n.prevComposition);if(e.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let d=e.getMeta("composition"),h=n.prevTime==0||!a&&n.prevComposition!=d&&(n.prevTime<(e.time||0)-i.newGroupDelay||!yI(e,n.prevRanges)),m=a?om(n.prevRanges,e.mapping):Qy(e.mapping.maps);return new ro(n.done.addTransform(e,h?t.selection.getBookmark():void 0,i,Hd(t)),na.empty,m,e.time,d??n.prevComposition)}else return(s=e.getMeta("rebased"))?new ro(n.done.rebased(e,s),n.undone.rebased(e,s),om(n.prevRanges,e.mapping),n.prevTime,n.prevComposition):new ro(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),om(n.prevRanges,e.mapping),n.prevTime,n.prevComposition)}function yI(n,t){if(!t)return!1;if(!n.docChanged)return!0;let e=!1;return n.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<t.length;s+=2)i<=t[s+1]&&r>=t[s]&&(e=!0)}),e}function Qy(n){let t=[];for(let e=n.length-1;e>=0&&t.length==0;e--)n[e].forEach((i,r,s,a)=>t.push(s,a));return t}function om(n,t){if(!n)return null;let e=[];for(let i=0;i<n.length;i+=2){let r=t.map(n[i],1),s=t.map(n[i+1],-1);r<=s&&e.push(r,s)}return e}function bI(n,t,e){let i=Hd(t),r=ta.get(t).spec.config,s=(e?n.undone:n.done).popEvent(t,i);if(!s)return null;let a=s.selection.resolve(s.transform.doc),d=(e?n.done:n.undone).addTransform(s.transform,t.selection.getBookmark(),r,i),h=new ro(e?d:s.remaining,e?s.remaining:d,null,0,-1);return s.transform.setSelection(a).setMeta(ta,{redo:e,historyState:h})}var sm=!1,$y=null;function Hd(n){let t=n.plugins;if($y!=t){sm=!1,$y=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){sm=!0;break}}return sm}var ta=new tr("history"),CI=new tr("closeHistory");function e1(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new ri({key:ta,state:{init(){return new ro(na.empty,na.empty,null,0,-1)},apply(t,e,i){return vI(e,i,t,n)}},config:n,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,r=i=="historyUndo"?Ud:i=="historyRedo"?kc:null;return r?(e.preventDefault(),r(t.state,t.dispatch)):!1}}}})}function Gd(n,t){return(e,i)=>{let r=ta.getState(e);if(!r||(n?r.undone:r.done).eventCount==0)return!1;if(i){let s=bI(r,e,n);s&&i(t?s.scrollIntoView():s)}return!0}}var Ud=Gd(!1,!0),kc=Gd(!0,!0),CL=Gd(!1,!1),EL=Gd(!0,!1);var Ao={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},EI=typeof navigator<"u"&&/Mac/.test(navigator.platform),xI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Pn=0;Pn<10;Pn++)Ao[48+Pn]=Ao[96+Pn]=String(Pn);var Pn;for(Pn=1;Pn<=24;Pn++)Ao[Pn+111]="F"+Pn;var Pn;for(Pn=65;Pn<=90;Pn++)Ao[Pn]=String.fromCharCode(Pn+32),Wd[Pn]=String.fromCharCode(Pn);var Pn;for(qd in Ao)Wd.hasOwnProperty(qd)||(Wd[qd]=Ao[qd]);var qd;function t1(n){var t=EI&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||xI&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?Wd:Ao)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}var wI=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function SI(n){let t=n.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");let i,r,s,a;for(let d=0;d<t.length-1;d++){let h=t[d];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))wI?a=!0:r=!0;else throw new Error("Unrecognized modifier name: "+h)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),a&&(e="Meta-"+e),s&&(e="Shift-"+e),e}function TI(n){let t=Object.create(null);for(let e in n)t[SI(e)]=n[e];return t}function am(n,t,e=!0){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e&&t.shiftKey&&(n="Shift-"+n),n}function Pc(n){return new ri({props:{handleKeyDown:II(n)}})}function II(n){let t=TI(n);return function(e,i){let r=t1(i),s,a=t[am(r,i)];if(a&&a(e.state,e.dispatch,e))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let d=t[am(r,i,!1)];if(d&&d(e.state,e.dispatch,e))return!0}if((i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(s=Ao[i.keyCode])&&s!=r){let d=t[am(s,i)];if(d&&d(e.state,e.dispatch,e))return!0}}return!1}}var OI=["imgEl"],MI=n=>({"NgxEditor__Resizer--Active":n});function AI(n,t){if(n&1){let e=$e();V(0,"span",4)(1,"span",5),he("mousedown",function(r){Q(e);let s=z();return $(s.startResizing(r,"left"))}),B(),V(2,"span",6),he("mousedown",function(r){Q(e);let s=z();return $(s.startResizing(r,"right"))}),B(),V(3,"span",7),he("mousedown",function(r){Q(e);let s=z();return $(s.startResizing(r,"left"))}),B(),V(4,"span",8),he("mousedown",function(r){Q(e);let s=z();return $(s.startResizing(r,"right"))}),B()()}}var kI=["ngxEditor"],PI=["*"];function DI(n,t){if(n&1&&(V(0,"div",12),te(1),wt(2,"async"),B()),n&2){let e=z(2);D(),bt(" ",kt(2,1,(e.href.errors==null?null:e.href.errors.pattern)&&e.getLabel("enterValidUrl"))," ")}}function LI(n,t){if(n&1&&(V(0,"div",12),te(1),B()),n&2){let e=z(2);D(),bt(" ",(e.text.errors==null?null:e.text.errors.required)&&"This is required"," ")}}function RI(n,t){if(n&1&&(V(0,"div",4)(1,"div",5)(2,"label"),Be(3,"input",13),te(4),wt(5,"async"),B()()()),n&2){let e=z(2);D(4),bt(" ",kt(5,1,e.getLabel("openInNewTab"))," ")}}function NI(n,t){if(n&1){let e=$e();V(0,"div",2)(1,"form",3),he("ngSubmit",function(r){Q(e);let s=z();return $(s.insertLink(r))}),V(2,"div",4)(3,"div",5)(4,"label",6),te(5),wt(6,"async"),B(),Be(7,"input",7),_e(8,DI,3,3,"div",8),B()(),V(9,"div",4)(10,"div",5)(11,"label",6),te(12),wt(13,"async"),B(),Be(14,"input",9),_e(15,LI,2,1,"div",8),B()(),_e(16,RI,6,3,"div",10),V(17,"button",11),te(18),wt(19,"async"),B()()()}if(n&2){let e=z();D(),N("formGroup",e.form),D(3),N("htmlFor",e.getId("link-popup-url")),D(),Wt(kt(6,12,e.getLabel("url"))),D(2),N("id",e.getId("link-popup-url")),D(),N("ngIf",e.href.touched&&e.href.invalid),D(3),N("htmlFor",e.getId("link-popup-label")),D(),Wt(kt(13,14,e.getLabel("text"))),D(2),N("id",e.getId("link-popup-label")),D(),N("ngIf",e.text.touched&&e.text.invalid),D(),N("ngIf",e.options.showOpenInNewTab),D(),N("disabled",!e.form.valid),D(),Wt(kt(19,16,e.getLabel("insert")))}}var FI=(n,t)=>({"NgxEditor__Dropdown--Active":n,"NgxEditor--Disabled":t});function BI(n,t){if(n&1){let e=$e();V(0,"button",4),wt(1,"async"),he("mousedown",function(r){let s=Q(e).$implicit,a=z(2);return $(a.onDropdownItemMouseClick(r,s))})("keydown.enter",function(r){let s=Q(e).$implicit,a=z(2);return $(a.onDropdownItemKeydown(r,s))})("keydown.space",function(r){let s=Q(e).$implicit,a=z(2);return $(a.onDropdownItemKeydown(r,s))}),te(2),wt(3,"async"),B()}if(n&2){let e=t.$implicit,i=z(2);N("ngClass",Ls(8,FI,e===i.activeItem,i.disabledItems.includes(e)))("ariaLabel",kt(1,4,i.getName(e))),xr("aria-selected",e===i.activeItem),D(2),bt(" ",kt(3,6,i.getName(e))," ")}}function VI(n,t){if(n&1&&(V(0,"div",2),_e(1,BI,4,11,"button",3),B()),n&2){let e=z();D(),N("ngForOf",e.items)("ngForTrackBy",e.trackByIndex)}}function zI(n,t){if(n&1&&(V(0,"div",12),te(1),wt(2,"async"),B()),n&2){let e=z(2);D(),bt(" ",kt(2,1,(e.src.errors==null?null:e.src.errors.pattern)&&e.getLabel("enterValidUrl"))," ")}}function HI(n,t){if(n&1){let e=$e();V(0,"div",2)(1,"form",3),he("ngSubmit",function(r){Q(e);let s=z();return $(s.insertLink(r))}),V(2,"div",4)(3,"div",5)(4,"label",6),te(5),wt(6,"async"),B(),Be(7,"input",7),_e(8,zI,3,3,"div",8),B()(),V(9,"div",4)(10,"div",5)(11,"label",6),te(12),wt(13,"async"),B(),Be(14,"input",9),B()(),V(15,"div",4)(16,"div",5)(17,"label",6),te(18),wt(19,"async"),B(),Be(20,"input",10),B()(),V(21,"button",11),te(22),wt(23,"async"),B()()()}if(n&2){let e=z();D(),N("formGroup",e.form),D(3),N("htmlFor",e.getId("image-popup-url")),D(),Wt(kt(6,13,e.getLabel("url"))),D(2),N("id",e.getId("image-popup-url")),D(),N("ngIf",e.src.touched&&e.src.invalid),D(3),N("htmlFor",e.getId("image-popup-label")),D(),Wt(kt(13,15,e.getLabel("altText"))),D(2),N("id",e.getId("image-popup-label")),D(3),N("htmlFor",e.getId("image-popup-title")),D(),Wt(kt(19,17,e.getLabel("title"))),D(2),N("id",e.getId("image-popup-title")),D(),N("disabled",!e.form.valid||!e.form.dirty),D(),Wt(kt(23,19,e.getLabel("insert")))}}var GI=(n,t)=>({backgroundColor:n,color:t}),UI=n=>({"NgxEditor__Color--Active":n});function qI(n,t){if(n&1){let e=$e();V(0,"button",7),he("mousedown",function(r){let s=Q(e).$implicit,a=z(3);return $(a.onColorSelectMouseClick(r,s))})("keydown.enter",function(){let r=Q(e).$implicit,s=z(3);return $(s.onColorSelectKeydown(r))})("keydown.space",function(){let r=Q(e).$implicit,s=z(3);return $(s.onColorSelectKeydown(r))}),B()}if(n&2){let e=t.$implicit,i=z(3);N("ngStyle",Ls(3,GI,e,i.getContrastYIQ(e)))("title",e)("ngClass",Mi(6,UI,i.activeColors.includes(e)))}}function WI(n,t){if(n&1&&(V(0,"div",5),_e(1,qI,1,8,"button",6),B()),n&2){let e=t.$implicit,i=z(2);D(),N("ngForOf",e)("ngForTrackBy",i.trackByIndex)}}function jI(n,t){if(n&1){let e=$e();V(0,"div",2),_e(1,WI,2,2,"div",3),V(2,"button",4),he("mousedown",function(r){Q(e);let s=z();return $(s.onRemoveMouseClick(r))})("keydown.enter",function(){Q(e);let r=z();return $(r.onRemoveKeydown())})("keydown.space",function(){Q(e);let r=z();return $(r.onRemoveKeydown())}),te(3),wt(4,"async"),B()()}if(n&2){let e=z();D(),N("ngForOf",e.presets)("ngForTrackBy",e.trackByIndex),D(),N("disabled",!e.isActive),D(),bt(" ",kt(4,4,e.getLabel("remove"))," ")}}var ZI=(n,t)=>({"NgxEditor--Disabled":n,"NgxEditor__MenuBar--Reverse":t});function KI(n,t){if(n&1&&Be(0,"ngx-toggle-command",7),n&2){let e=z().$implicit,i=z(2);en(i.iconContainerClass),N("toolbarItem",e)}}function YI(n,t){if(n&1&&Be(0,"ngx-insert-command",7),n&2){let e=z().$implicit,i=z(2);en(i.iconContainerClass),N("toolbarItem",e)}}function XI(n,t){if(n&1&&(Nt(0),Be(1,"ngx-link",8),Ft()),n&2){let e=z().$implicit,i=z(2);D(),en(i.iconContainerClass),N("options",i.getLinkOptions(e))}}function JI(n,t){if(n&1&&Be(0,"ngx-image"),n&2){let e=z(3);en(e.iconContainerClass)}}function QI(n,t){if(n&1&&Be(0,"ngx-dropdown",10),n&2){let e=t.$implicit,i=z(4);en(i.dropdownContainerClass),N("group",e.key)("items",e.value)}}function $I(n,t){if(n&1&&(Nt(0),_e(1,QI,1,4,"ngx-dropdown",9),wt(2,"keyvalue"),Ft()),n&2){let e=z().$implicit,i=z(2);D(),N("ngForOf",kt(2,2,i.getDropdownItems(e)))("ngForTrackBy",i.trackByIndex)}}function eO(n,t){if(n&1&&Be(0,"ngx-color-picker",11),n&2){let e=z(3);en(e.iconContainerClass),N("presets",e.presets)}}function tO(n,t){if(n&1&&Be(0,"ngx-color-picker",12),n&2){let e=z(3);en(e.iconContainerClass),N("presets",e.presets)}}function nO(n,t){if(n&1&&Be(0,"div"),n&2){let e=z(3);en(e.seperatorClass)}}function iO(n,t){if(n&1&&(Nt(0),_e(1,KI,1,3,"ngx-toggle-command",3)(2,YI,1,3,"ngx-insert-command",3)(3,XI,2,3,"ng-container",2)(4,JI,1,2,"ngx-image",4)(5,$I,3,4,"ng-container",2)(6,eO,1,3,"ngx-color-picker",5)(7,tO,1,3,"ngx-color-picker",6)(8,nO,1,2,"div",4),Ft()),n&2){let e=t.$implicit,i=t.last,r=z().last,s=z();D(),N("ngIf",s.toggleCommands.includes(e)),D(),N("ngIf",s.insertCommands.includes(e)),D(),N("ngIf",s.isLinkItem(e)),D(),N("ngIf",e==="image"),D(),N("ngIf",s.isDropDown(e)),D(),N("ngIf",e==="text_color"),D(),N("ngIf",e==="background_color"),D(),N("ngIf",i&&!r)}}function rO(n,t){if(n&1&&(Nt(0),_e(1,iO,9,8,"ng-container",1),Ft()),n&2){let e=t.$implicit,i=z();D(),N("ngForOf",e)("ngForTrackBy",i.trackByIndex)}}function oO(n,t){if(n&1&&(Nt(0),jl(1,13),Ft()),n&2){let e=z();D(),N("ngTemplateOutlet",e.customMenuRef)}}var sO=(n=!0)=>new ri({key:new tr("editable"),state:{init(){return n},apply(t,e){return t.getMeta("UPDATE_EDITABLE")??e}},props:{editable(t){return this.getState(t)},attributes(t){return this.getState(t)?null:{class:"NgxEditor__Content--Disabled"}}}}),aO="NgxEditor__Placeholder",lO=n=>new ri({key:new tr("placeholder"),state:{init(){return n??""},apply(t,e){return t.getMeta("UPDATE_PLACEHOLDER")??e}},props:{decorations(t){let{doc:e}=t,{textContent:i,childCount:r}=e,s=this.getState(t);if(!s||r>1)return mi.empty;let a=[],d=(h,m)=>{if(h.type.isBlock&&h.childCount===0&&i.length===0){let y=m,E=m+h.nodeSize,O=no.node(y,E,{class:aO,"data-placeholder":s,"data-align":h.attrs.align??null});a.push(O)}return!1};return e.descendants(d),mi.create(e,a)}}}),cO=(n={})=>new ri({key:new tr("attributes"),props:{attributes:n}}),uO=n=>new ri({key:new tr("focus"),props:{handleDOMEvents:{focus:()=>(n(),!1)}}}),dO=n=>new ri({key:new tr("blur"),props:{handleDOMEvents:{blur:()=>(n(),!1)}}}),pO=(()=>{class n{src;alt="";title="";outerWidth="";selected=!1;view;imageResize=new be;imgEl;startResizing(e,i){e.preventDefault(),this.resizeImage(e,i)}resizeImage(e,i){let r=e.pageX,s=this.imgEl.nativeElement.clientWidth,a=i==="left",{width:d}=window.getComputedStyle(this.view.dom),h=parseInt(d,10),m=E=>{let T=E.pageX-r,S=a?s-T:s+T;S>h||S<20||(this.outerWidth=`${S}px`)},y=E=>{E.preventDefault(),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y),this.imageResize.emit()};document.addEventListener("mousemove",m),document.addEventListener("mouseup",y)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=lt({type:n,selectors:[["ngx-image-view"]],viewQuery:function(i,r){if(i&1&&ti(OI,7),i&2){let s;Hn(s=Gn())&&(r.imgEl=s.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},standalone:!1,decls:4,vars:9,consts:[["imgEl",""],[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(i,r){i&1&&(V(0,"span",1),_e(1,AI,5,0,"span",2),Be(2,"img",3,0),B()),i&2&&(Ln("width",r.outerWidth),N("ngClass",Mi(7,MI,r.selected)),D(),N("ngIf",r.selected),D(),N("src",r.src,Og)("alt",r.alt)("title",r.title))},dependencies:[Rn,Mt],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]})}return n})(),lm=class{dom;view;getPos;applicationRef;imageComponentRef;resizeSubscription;node;updating=!1;constructor(t,e,i,r){this.applicationRef=r.get(xu),this.imageComponentRef=Pg(pO,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(t.attrs),this.imageComponentRef.instance.view=e,this.dom=this.imageComponentRef.location.nativeElement,this.view=e,this.node=t,this.getPos=i,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(t,e){return JSON.stringify(t)===JSON.stringify(e)}setNodeAttributes(t){this.imageComponentRef.instance.src=t.src,this.imageComponentRef.instance.alt=t.alt,this.imageComponentRef.instance.title=t.title,this.imageComponentRef.instance.outerWidth=t.width}handleResize=()=>{if(this.updating)return;let{state:t,dispatch:e}=this.view,{tr:i}=t,r=i.setNodeMarkup(this.getPos(),void 0,ji(Cn({},this.node.attrs),{width:this.imageComponentRef.instance.outerWidth})),s=r.doc.resolve(this.getPos()),a=new ct(s);r.setSelection(a),e(r)};update(t){return t.type!==this.node.type?!1:(this.node=t,this.computeChanges(this.node.attrs,t.attrs)&&(this.updating=!0,this.setNodeAttributes(t.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}},fO=n=>new ri({key:new tr("image-resize"),props:{nodeViews:{image:(t,e,i)=>new lm(t,e,i,n)}}}),hO=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,f1=n=>{let t=[];return n.forEach(e=>{if(e.isText){let i=e.text,r=0,s=hO.exec(i);if(s){let a=s.index,d=a+s[0].length,{link:h}=e.type.schema.marks;a>0&&t.push(e.cut(r,a));let m=i.slice(a,d);t.push(e.cut(a,d).mark(h.create({href:m}).addToSet(e.marks))),r=d}r<i.length&&t.push(e.cut(r))}else t.push(e.copy(f1(e.content)))}),Se.fromArray(t)},mO=()=>new ri({key:new tr("linkify"),props:{transformPasted:n=>new Ue(f1(n.content),n.openStart,n.openEnd)}}),h1=n=>typeof n=="string",gO=()=>window.trustedTypes,m1=n=>gO()?.isHTML(n)??!1,g1=n=>h1(n)||m1(n),_1={type:"doc",content:[{type:"paragraph"}]},_O=(n,t)=>{let e=t??ps,i=e.nodeFromJSON(n),r=xo.fromSchema(e).serializeFragment(i.content),s=document.createElement("div");return s.appendChild(r),s.innerHTML},vO=(n,t,e)=>{let i=t??ps,r=document.createElement("div");return r.innerHTML=n,is.fromSchema(i).parse(r,e).toJSON()},Lc=(n,t,e)=>{if(!n)return t.nodeFromJSON(_1);if(!g1(n))return t.nodeFromJSON(n);let i=vO(n,t,e);return t.nodeFromJSON(i)},lR=(()=>{class n{renderer;injector;elementRef;constructor(e,i,r){this.renderer=e,this.injector=i,this.elementRef=r}ngxEditor;editor;outputFormat;placeholder="Type Here...";focusOut=new be;focusIn=new be;unsubscribe=new Ds;onChange=()=>{};onTouched=()=>{};writeValue(e){!this.outputFormat&&g1(e)&&(this.outputFormat="html"),this.editor.setContent(e??_1)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.setMeta("UPDATE_EDITABLE",!e),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",e)}handleChange(e){if(this.outputFormat==="html"){let i=_O(e,this.editor.schema);this.onChange(i);return}this.onChange(e)}setMeta(e,i){let{dispatch:r,state:{tr:s}}=this.editor.view;r(s.setMeta(e,i))}setPlaceholder(e){this.setMeta("UPDATE_PLACEHOLDER",e)}registerPlugins(){this.editor.registerPlugin(sO()),this.editor.registerPlugin(lO(this.placeholder)),this.editor.registerPlugin(cO({class:"NgxEditor__Content"})),this.editor.registerPlugin(uO(()=>{this.focusIn.emit()})),this.editor.registerPlugin(dO(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin(fO(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(mO())}ngOnInit(){if(!this.editor)throw new Za("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe(qr(this.unsubscribe)).subscribe(e=>{this.handleChange(e)})}ngOnChanges(e){e.placeholder&&!e.placeholder.isFirstChange()&&this.setPlaceholder(e.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static \u0275fac=function(i){return new(i||n)(Fe(Wl),Fe(Xo),Fe(kn))};static \u0275cmp=lt({type:n,selectors:[["ngx-editor"]],viewQuery:function(i,r){if(i&1&&ti(kI,7),i&2){let s;Hn(s=Gn())&&(r.ngxEditor=s.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},standalone:!1,features:[Oi([{provide:ar,useExisting:Zi(()=>n),multi:!0}]),An],ngContentSelectors:PI,decls:3,vars:0,consts:[["ngxEditor",""],[1,"NgxEditor"]],template:function(i,r){i&1&&(_o(),V(0,"div",1,0),wr(2),B())},styles:[`:root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}
`],encapsulation:2})}return n})(),fs=(()=>{class n{editor;customMenuRefChange=new Ds;setCustomMenuRef(e){this.customMenuRefChange.next(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=go({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oo=class{name;constructor(t){this.name=t}apply(){return(t,e)=>{let{schema:i}=t,r=i.marks[this.name];return r?im(r)(t,e):!1}}toggle(){return(t,e)=>{let{schema:i}=t,r=i.marks[this.name];return r?ea(r)(t,e):!1}}isActive(t){let{schema:e}=t,i=e.marks[this.name];return i?Vd(t,i):!1}canExecute(t){return this.toggle()(t)}},cm=class{toggle(){return(t,e)=>{let{schema:i}=t,r=i.nodes.blockquote;return r?this.isActive(t)?Ny(t,e):Vy(r)(t,e):!1}}isActive(t){let{schema:e}=t,i=e.nodes.blockquote;return i?$h(t,i):!1}canExecute(t){return this.toggle()(t)}},um=class{insert(){return(t,e)=>{let{schema:i,tr:r}=t,s=i.nodes.horizontal_rule;return s?(e(r.replaceSelectionWith(s.create()).scrollIntoView()),!0):!1}}canExecute(t){return Ky(t,t.schema.nodes.horizontal_rule)}},ll=class{isBulletList=!1;constructor(t=!1){this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,e)=>{let{schema:i}=t,r=this.getType(i);return r?this.isActive(t)?Uh(i.nodes.list_item)(t,e):Ay(r)(t,e):!1}}isActive(t){let{schema:e}=t,i=this.getType(e);return i?$h(t,i):!1}canExecute(t){return this.toggle()(t)}},ko=class{level;constructor(t){this.level=t}apply(){return(t,e)=>{let{schema:i}=t,r=i.nodes.heading;return r?Fd(r)(t,e):!1}}toggle(){return(t,e)=>{let{schema:i,selection:r,doc:s}=t,a=i.nodes.heading;if(!a)return!1;let d=r.$from.before(1),m=s.nodeAt(d)?.attrs??{};return this.isActive(t)?Fd(i.nodes.paragraph,m)(t,e):Fd(a,ji(Cn({},m),{level:this.level}))(t,e)}}isActive(t){let{schema:e}=t,i=em(t),r=e.nodes.heading;if(!r)return!1;let s=[r,e.nodes.text,e.nodes.blockquote];return!!i.filter(h=>s.includes(h.type)).find(h=>h.attrs.level===this.level)}canExecute(t){return this.toggle()(t)}},ia=class{align;constructor(t){this.align=t}toggle(){return(t,e)=>{let{doc:i,selection:r,tr:s,schema:a}=t,{from:d,to:h}=r,m=!1;return i.nodesBetween(d,h,(y,E)=>{let O=y.type;if([a.nodes.paragraph,a.nodes.heading].includes(O)){m=!0;let T=y.attrs.align===this.align?null:this.align;s.setNodeMarkup(E,O,ji(Cn({},y.attrs),{align:T}))}return!0}),m?(s.docChanged&&e?.(s),!0):!1}}isActive(t){return!!em(t).find(r=>r.attrs.align===this.align)}canExecute(t){return this.toggle()(t)}},yO={strict:!0},dm=class{update(t){return(e,i)=>{let{schema:r,selection:s}=e,a=r.marks.link;return!a||s.empty?!1:ea(a,t)(e,i)}}insert(t,e){return(i,r)=>{let{schema:s,tr:a}=i;if(!s.marks.link)return!1;let h={href:e.href,title:e.title??t,target:e.target??"_blank"},m=s.text(t,[s.marks.link.create(h)]);return a.replaceSelectionWith(m,!1).scrollIntoView(),a.docChanged?(r?.(a),!0):!1}}isActive(t,e=yO){if(e.strict)return!0;let{schema:i}=t,r=i.marks.link;return r?Vd(t,r):!1}remove(t,e){return Yy()(t,e)}canExecute(t){let e={href:""};return this.insert("Exec",e)(t)||this.update(e)(t)}},v1=class{insert(t,e){return(i,r)=>{let{schema:s,tr:a,selection:d}=i,h=s.nodes.image;if(!h)return!1;let m=Cn({width:null,src:t},e);!m.width&&d instanceof ct&&d.node.type===h&&(m.width=d.node.attrs.width),a.replaceSelectionWith(h.createAndFill(m));let y=a.doc.resolve(a.selection.anchor-a.selection.$anchor.nodeBefore.nodeSize);return a.setSelection(new ct(y)).scrollIntoView(),a.docChanged?(r?.(a),!0):!1}}isActive(t){let{selection:e}=t;return e instanceof ct?e.node.type.name==="image":!1}},al=class{name;attrName;constructor(t,e="color"){this.name=t,this.attrName=e}apply(t){return(e,i)=>{let{schema:r,selection:s,doc:a}=e,d=r.marks[this.name];if(!d)return!1;let{from:h,to:m,empty:y}=s;if(!y&&h+1===m){let E=a.nodeAt(h);if(E?.isAtom&&!E.isText&&E.isLeaf)return!1}return im(d,t)(e,i)}}isActive(t){let{schema:e}=t,i=e.marks[this.name];return i?Vd(t,i):!1}getActiveColors(t){if(!this.isActive(t))return[];let{schema:e}=t;return Zy(t).filter(s=>s.type===e.marks[this.name]).map(s=>s.attrs[this.attrName]).filter(Boolean)}remove(){return(t,e)=>{let{schema:i}=t,r=i.marks[this.name];return r?Xy(r)(t,e):!1}}canExecute(t){let e=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(e)(t)}},bO=["link"],pm=class{insert(){return(t,e)=>{let{tr:i}=t,{ranges:r,empty:s}=i.selection;return s||(Object.entries(t.schema.marks).forEach(([a,d])=>{bO.includes(a)||r.forEach(h=>{i.removeMark(h.$from.pos,h.$to.pos,d)})}),e(i)),!0}}canExecute(){return!0}},CO=["paragraph","heading","blockquote"],n1=0,i1=10,EO=(n,t,e)=>{let i=n.doc.nodeAt(t);if(!i)return!1;let r=i.attrs.indent??0,s=w0(r+(e==="increase"?1:-1),n1,i1);if(s===r||s<n1||s>i1)return!1;let a=ji(Cn({},i.attrs),{indent:s});return n.setNodeMarkup(t,i.type,a),!0},cl=class{method="increase";constructor(t){this.method=t}insert(){return(t,e)=>{let{tr:i,doc:r}=t,{from:s,to:a}=i.selection,d=!1;return r.nodesBetween(s,a,(h,m)=>{let y=h.type;return CO.includes(y.name)?(d=EO(i,m,this.method),!1):!h.type.name.includes("list")}),d?(i.docChanged&&e?.(i),!0):!1}}canExecute(t){return this.insert()(t)}},Zd=class{mode="undo";constructor(t){this.mode=t}insert(){return(t,e)=>this.mode==="undo"?Ud(t,e):kc(t,e)}canExecute(t){return this.insert()(t)}},xO=new oo("strong"),wO=new oo("em"),SO=new oo("code"),TO=new oo("u"),IO=new oo("s"),OO=new cm,MO=new um,AO=new pm,kO=new ll(!0),PO=new ll(!1),DO=new ko(1),LO=new ko(2),RO=new ko(3),NO=new ko(4),FO=new ko(5),BO=new ko(6),VO=new ia("left"),zO=new ia("center"),HO=new ia("right"),GO=new ia("justify"),UO=new dm,qO=new v1,WO=new al("text_color","color"),jO=new al("text_background_color","backgroundColor"),ZO=new cl("increase"),KO=new cl("decrease"),YO=new oo("sup"),XO=new oo("sub"),JO=new Zd("undo"),QO=new Zd("redo"),Kd={bold:xO,italic:wO,code:SO,underline:TO,strike:IO,blockquote:OO,bullet_list:kO,ordered_list:PO,h1:DO,h2:LO,h3:RO,h4:NO,h5:FO,h6:BO,align_left:VO,align_center:zO,align_right:HO,align_justify:GO,superscript:YO,subscript:XO},r1={horizontal_rule:MO,format_clear:AO,indent:ZO,outdent:KO,undo:JO,redo:QO},Dc=UO,o1=qO,$O=WO,eM=jO,fm={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"},hm=class{locals=fm;constructor(t={}){this.locals=Cn(Cn({},fm),t)}get=t=>{let e=this.locals[t];return e?yg(e)?e:ql(e):ql("")}},tM=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,nM=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,iM=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,rM=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,oM=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,sM=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,aM=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,lM=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,cM=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,uM=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,dM=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,pM=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,fM=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,hM=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,mM=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,gM=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,_M=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,vM=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,yM=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,bM='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',CM='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',EM='<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',xM='<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',wM='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',SM='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',TM=20,IM=20,OM="currentColor",y1={bold:tM,italic:nM,code:iM,underline:rM,strike:oM,ordered_list:sM,bullet_list:aM,blockquote:lM,link:cM,unlink:uM,image:dM,align_left:pM,align_center:fM,align_right:hM,align_justify:mM,text_color:gM,color_fill:_M,horizontal_rule:vM,format_clear:yM,indent:bM,outdent:CM,superscript:EM,subscript:xM,undo:wM,redo:SM,path:"<path></path>"},mm=class{static get(t,e=OM){let i=y1[t];return i&&(i.includes("<path")||i.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${e}
          height=${TM}
          width=${IM}
        >
          ${i}
        </svg>
      `:i}},gm=(()=>{class n{locals={};icons={};static \u0275fac=function(i){return new(i||n)};static \u0275prov=go({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ra=(()=>{class n{config;constructor(e){this.config=e}get locals(){return new hm(this.config.locals)}getIcon(e){return this.config.icons[e]?this.config.icons[e]:mm.get(e)}static \u0275fac=function(i){return new(i||n)(Cu(gm,8))};static \u0275prov=go({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),s1=n=>({locals:n.locals??{},icons:n.icons??{}}),ul=(()=>{class n{sanitizer;constructor(e){this.sanitizer=e}transform(e){return m1(e)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(i){return new(i||n)(Fe(Bg,16))};static \u0275pipe=kg({name:"sanitizeHtml",type:n,pure:!0,standalone:!1})}return n})(),MM=(()=>{class n{ngxeService;menuService;toolbarItem;get name(){return this.toolbarItem}html;editorView;isActive=!1;disabled=!1;updateSubscription;constructor(e,i){this.ngxeService=e,this.menuService=i}toggle(){let{state:e,dispatch:i}=this.editorView;Kd[this.name].toggle()(e,i)}onMouseClick(e){e.preventDefault(),e.button===0&&this.toggle()}onKeydown(){this.toggle()}update=e=>{let{state:i}=e,r=Kd[this.name];this.isActive=r.isActive(i),this.disabled=!r.canExecute(i)};getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(Fe(ra),Fe(fs))};static \u0275cmp=lt({type:n,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},standalone:!1,decls:4,vars:14,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(i,r){i&1&&(V(0,"button",0),wt(1,"sanitizeHtml"),wt(2,"async"),wt(3,"async"),he("mousedown",function(a){return r.onMouseClick(a)})("keydown.enter",function(){return r.onKeydown()})("keydown.space",function(){return r.onKeydown()}),B()),i&2&&(Ki("NgxEditor__MenuItem--Active",r.isActive)("NgxEditor--Disabled",r.disabled),N("disabled",r.disabled)("innerHTML",kt(1,8,r.html),jr)("title",kt(2,10,r.getTitle(r.name)))("ariaLabel",kt(3,12,r.getTitle(r.name))))},dependencies:[vo,ul],encapsulation:2})}return n})(),AM=(()=>{class n{ngxeService;menuService;toolbarItem;get name(){return this.toolbarItem}html;editorView;disabled=!1;updateSubscription;constructor(e,i){this.ngxeService=e,this.menuService=i}onMouseClick(e){e.preventDefault(),e.button===0&&this.insert()}onKeydown(){this.insert()}insert(){let{state:e,dispatch:i}=this.editorView;r1[this.name].insert()(e,i)}update=e=>{let{state:i}=e,r=r1[this.name];this.disabled=!r.canExecute(i)};getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(Fe(ra),Fe(fs))};static \u0275cmp=lt({type:n,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},standalone:!1,decls:4,vars:12,consts:[[1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(i,r){i&1&&(V(0,"button",0),wt(1,"sanitizeHtml"),wt(2,"async"),wt(3,"async"),he("mousedown",function(a){return r.onMouseClick(a)})("keydown.enter",function(){return r.onKeydown()})("keydown.space",function(){return r.onKeydown()}),B()),i&2&&(Ki("NgxEditor--Disabled",r.disabled),N("disabled",r.disabled)("innerHTML",kt(1,6,r.html),jr)("title",kt(2,8,r.getTitle(r.name)))("ariaLabel",kt(3,10,r.getTitle(r.name))))},dependencies:[vo,ul],encapsulation:2})}return n})(),a1={showOpenInNewTab:!0},kM=(()=>{class n{el;ngxeService;menuService;options=a1;showPopup=!1;isActive=!1;canExecute=!0;componentId=Wf();form;editorView;updateSubscription;constructor(e,i,r){this.el=e,this.ngxeService=i,this.menuService=r}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}getId(e){return`${e}-${this.componentId}`}getLabel(e){return this.ngxeService.locals.get(e)}hidePopup(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}togglePopup(){let{state:e,dispatch:i}=this.editorView;if(this.isActive){Dc.remove(e,i);return}this.showPopup=!this.showPopup,this.showPopup&&this.setText()}onTogglePopupMouseClick(e){e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}setText=()=>{let{state:{selection:e,doc:i}}=this.editorView,{empty:r,from:s,to:a}=e,d=r?"":i.textBetween(s,a);d&&(this.text.patchValue(d),this.text.disable())};update=e=>{let{state:i}=e;this.isActive=Dc.isActive(i,{strict:!1}),this.canExecute=Dc.canExecute(i)};insertLink(e){e.preventDefault();let{text:i,href:r,openInNewTab:s}=this.form.getRawValue(),{dispatch:a,state:d}=this.editorView,{selection:h}=d,m;this.options.showOpenInNewTab&&(m=s?"_blank":"_self");let y={title:r,href:r,target:m};h.empty?(Dc.insert(i,y)(d,a),this.editorView.focus()):Dc.update(y)(d,a),this.hidePopup()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new Ql({href:new Ir("",[di.required,di.pattern(this.menuService.editor.linkValidationPattern)]),text:new Ir("",[di.required]),openInNewTab:new Ir(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(Fe(kn),Fe(ra),Fe(fs))};static \u0275cmp=lt({type:n,selectors:[["ngx-link"]],hostBindings:function(i,r){i&1&&he("mousedown",function(a){return r.onDocumentClick(a)},!1,Jo)},inputs:{options:[2,"options","options",e=>Cn(Cn({},a1),e)]},standalone:!1,features:[af],decls:5,vars:16,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","url","formControlName","href","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off",3,"id"],["class","NgxEditor__Popup--FormGroup",4,"ngIf"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"],["type","checkbox","formControlName","openInNewTab"]],template:function(i,r){i&1&&(V(0,"button",0),wt(1,"sanitizeHtml"),wt(2,"async"),wt(3,"async"),he("mousedown",function(a){return r.onTogglePopupMouseClick(a)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),B(),_e(4,NI,20,18,"div",1)),i&2&&(Ki("NgxEditor__MenuItem--Active",r.isActive||r.showPopup)("NgxEditor--Disabled",!r.canExecute),N("disabled",!r.canExecute)("innerHTML",kt(1,10,r.icon),jr)("title",kt(2,12,r.title))("ariaLabel",kt(3,14,r.title))("ariaExpanded",r.showPopup),D(4),N("ngIf",r.showPopup))},dependencies:[Mt,$l,Zn,Hg,Nn,Jl,Or,ec,vo,ul],encapsulation:2})}return n})(),PM=(()=>{class n{ngxeService;menuService;el;editorView;updateSubscription;group;items;isDropdownOpen=!1;disabledItems=[];activeItem;constructor(e,i,r){this.ngxeService=e,this.menuService=i,this.el=r}get isSelected(){return!!(this.activeItem||this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(e){!this.el.nativeElement.contains(e)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(e){return this.ngxeService.locals.get(e)}getIsDropdownActive(e){return this.activeItem===e}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}onToggleDropdownMouseClick(e){e.preventDefault(),e.button===0&&this.toggleDropdown()}onToggleDropdownKeydown(){this.toggleDropdown()}trackByIndex(e){return e}selectItem(e){let i=Kd[e],{state:r,dispatch:s}=this.editorView;i.toggle()(r,s),this.isDropdownOpen=!1}onDropdownItemMouseClick(e,i){e.preventDefault(),e.button===0&&this.selectItem(i)}onDropdownItemKeydown(e,i){e.preventDefault(),this.selectItem(i)}update=e=>{let{state:i}=e;this.disabledItems=[];let r=[];this.items.forEach(s=>{let a=Kd[s];a.isActive(i)&&r.push(s),a.canExecute(i)||this.disabledItems.push(s)}),r.length===1?[this.activeItem]=r:this.activeItem=null};ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(Fe(ra),Fe(fs),Fe(kn))};static \u0275cmp=lt({type:n,selectors:[["ngx-dropdown"]],hostBindings:function(i,r){i&1&&he("mousedown",function(a){return r.onDocumentClick(a.target)},!1,Jo)},inputs:{group:"group",items:"items"},standalone:!1,decls:5,vars:13,consts:[["type","button","aria-haspopup","listbox",1,"NgxEditor__Dropdown--Text",3,"mousedown","keydown.enter","keydown.space","disabled","ariaLabel","ariaExpanded"],["class","NgxEditor__Dropdown--DropdownMenu","role","listbox",4,"ngIf"],["role","listbox",1,"NgxEditor__Dropdown--DropdownMenu"],["type","button","class","NgxEditor__Dropdown--Item","role","option",3,"ngClass","ariaLabel","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],["type","button","role","option",1,"NgxEditor__Dropdown--Item",3,"mousedown","keydown.enter","keydown.space","ngClass","ariaLabel"]],template:function(i,r){i&1&&(V(0,"button",0),wt(1,"async"),he("mousedown",function(a){return r.onToggleDropdownMouseClick(a)})("keydown.enter",function(){return r.onToggleDropdownKeydown()})("keydown.space",function(){return r.onToggleDropdownKeydown()}),te(2),wt(3,"async"),B(),_e(4,VI,2,2,"div",1)),i&2&&(Ki("NgxEditor__Dropdown--Selected",r.isSelected)("NgxEditor--Disabled",r.isDropdownDisabled),N("disabled",r.isDropdownDisabled)("ariaLabel",kt(1,9,r.getName(r.activeItem||r.group)))("ariaExpanded",r.isDropdownOpen),D(2),bt(" ",kt(3,11,r.getName(r.activeItem||r.group)),`
`),D(2),N("ngIf",r.isDropdownOpen))},dependencies:[Rn,ni,Mt,vo],encapsulation:2})}return n})(),DM=(()=>{class n{el;ngxeService;menuService;showPopup=!1;isActive=!1;componentId=Wf();updateSubscription;form=new Ql({src:new Ir("",[di.required,di.pattern(`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)`)]),alt:new Ir(""),title:new Ir("")});editorView;constructor(e,i,r){this.el=e,this.ngxeService=i,this.menuService=r}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}getId(e){return`${e}-${this.componentId}`}getLabel(e){return this.ngxeService.locals.get(e)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}togglePopup(){this.showPopup=!this.showPopup,this.showPopup&&this.fillForm()}onTogglePopupMouseClick(e){e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}fillForm(){let{state:e}=this.editorView,{selection:i}=e;if(i instanceof ct&&this.isActive){let{src:r,alt:s="",title:a=""}=i.node.attrs;this.form.setValue({src:r,alt:s,title:a})}}update=e=>{let{state:i}=e;this.isActive=o1.isActive(i)};insertLink(e){e.preventDefault();let{src:i,alt:r,title:s}=this.form.getRawValue(),{dispatch:a,state:d}=this.editorView,h={alt:r,title:s};o1.insert(i,h)(d,a),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(Fe(kn),Fe(ra),Fe(fs))};static \u0275cmp=lt({type:n,selectors:[["ngx-image"]],hostBindings:function(i,r){i&1&&he("mousedown",function(a){return r.onDocumentClick(a)},!1,Jo)},standalone:!1,decls:5,vars:13,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","url","formControlName","src","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off",3,"id"],["type","text","formControlName","title","autocomplete","off",3,"id"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(i,r){i&1&&(V(0,"button",0),wt(1,"sanitizeHtml"),wt(2,"async"),wt(3,"async"),he("mousedown",function(a){return r.onTogglePopupMouseClick(a)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),B(),_e(4,HI,24,21,"div",1)),i&2&&(Ki("NgxEditor__MenuItem--Active",r.isActive||r.showPopup),N("innerHTML",kt(1,7,r.icon),jr)("title",kt(2,9,r.getLabel("insertImage")))("ariaLabel",kt(3,11,r.getLabel("insertImage")))("ariaExpanded",r.showPopup),D(4),N("ngIf",r.showPopup))},dependencies:[Mt,$l,Zn,Nn,Jl,Or,ec,vo,ul],encapsulation:2})}return n})(),LM=(()=>{class n{el;menuService;ngxeService;presets;type;constructor(e,i,r){this.el=e,this.menuService=i,this.ngxeService=r}get title(){return this.getLabel(this.type==="text_color"?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon(this.type==="text_color"?"text_color":"color_fill")}get command(){return this.type==="text_color"?$O:eM}updateSubscription;editorView;showPopup=!1;isActive=!1;activeColors=[];canExecute=!0;getContrastYIQ(e){let i=e.replace("#",""),r=parseInt(i.substring(0,2),16),s=parseInt(i.substring(2,4),16),a=parseInt(i.substring(4,6),16);return(r*299+s*587+a*114)/1e3>=128?"black":"white"}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(){this.showPopup=!this.showPopup}onTogglePopupMouseClick(e){e.preventDefault(),e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}remove(){let{state:e,dispatch:i}=this.editorView;this.command.remove()(e,i),this.hidePopup()}onRemoveMouseClick(e){e.preventDefault(),e.button===0&&(e.preventDefault(),this.remove())}onRemoveKeydown(){this.remove()}trackByIndex(e){return e}selectColor(e){let{state:i,dispatch:r}=this.editorView;if(this.type==="text_color"){let s={color:e};this.command.apply(s)(i,r)}else{let s={backgroundColor:e};this.command.apply(s)(i,r)}this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}onColorSelectMouseClick(e,i){e.preventDefault(),e.button===0&&this.selectColor(i)}onColorSelectKeydown(e){this.selectColor(e)}update=e=>{let{state:i}=e;this.canExecute=this.command.canExecute(i),this.isActive=this.command.isActive(i),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(i))};getLabel(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(Fe(kn),Fe(fs),Fe(ra))};static \u0275cmp=lt({type:n,selectors:[["ngx-color-picker"]],hostBindings:function(i,r){i&1&&he("mousedown",function(a){return r.onDocumentClick(a)},!1,Jo)},inputs:{presets:"presets",type:"type"},standalone:!1,decls:5,vars:15,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"mousedown","keydown.enter","keydown.space","disabled"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"mousedown","keydown.enter","keydown.space","ngStyle","title","ngClass"]],template:function(i,r){i&1&&(V(0,"button",0),wt(1,"sanitizeHtml"),wt(2,"async"),wt(3,"async"),he("mousedown",function(a){return r.onTogglePopupMouseClick(a)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),B(),_e(4,jI,5,6,"div",1)),i&2&&(Ki("NgxEditor__MenuItem--Active",r.isActive||r.showPopup)("NgxEditor--Disabled",!r.canExecute),N("disabled",!r.canExecute)("innerHTML",kt(1,9,r.icon),jr)("title",kt(2,11,r.title))("ariaLabel",kt(3,13,r.title)),D(4),N("ngIf",r.showPopup))},dependencies:[Rn,ni,Mt,Lg,vo,ul],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color[_ngcontent-%COMP%]:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']})}return n})();var RM=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]];var NM=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"],pR=(()=>{class n{menuService;toolbar=RM;colorPresets=NM;disabled=!1;editor;customMenuRef=null;dropdownPlacement="bottom";toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify","superscript","subscript"];insertCommands=["horizontal_rule","format_clear","indent","outdent","undo","redo"];iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--IconContainer"];dropdownContainerClass=["NgxEditor__Dropdown"];seperatorClass=["NgxEditor__Seperator"];constructor(e){this.menuService=e}get presets(){let i=[];return this.colorPresets.forEach((r,s)=>{let a=Math.floor(s/8);i[a]||i.push([]),i[a].push(r)}),i}trackByIndex(e){return e}isDropDown(e){return!!e?.heading}getDropdownItems(e){return e}isLinkItem(e){return e==="link"?!0:typeof e=="object"&&typeof e?.link=="object"}isLinkWithOptions(e){return typeof e=="object"&&typeof e?.link=="object"}getLinkOptions(e){return e?.link}ngOnInit(){if(!this.editor)throw new Za("Required editor instance to initialize menu component");this.menuService.editor=this.editor}static \u0275fac=function(i){return new(i||n)(Fe(fs))};static \u0275cmp=lt({type:n,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},standalone:!1,features:[Oi([fs])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"options"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(i,r){i&1&&(V(0,"div",0),_e(1,rO,2,2,"ng-container",1)(2,oO,2,1,"ng-container",2),B()),i&2&&(N("ngClass",Ls(4,ZI,r.disabled,r.dropdownPlacement==="top")),D(),N("ngForOf",r.toolbar)("ngForTrackBy",r.trackByIndex),D(),N("ngIf",r.customMenuRef))},dependencies:[Rn,ni,Mt,Tu,MM,AM,kM,PM,DM,LM,Ng],encapsulation:2})}return n})();var FM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=jn({type:n});static \u0275inj=Wn({providers:[ul],imports:[Pt,fi]})}return n})(),jd=new Aa("NgxEditorConfig"),l1={locals:fm,icons:y1},b1=(()=>{class n{static forRoot(e=l1){return{ngModule:n,providers:[{provide:jd,useValue:e},{provide:gm,useFactory:s1,deps:[jd]}]}}static forChild(e=l1){return{ngModule:n,providers:[{provide:jd,useValue:e},{provide:gm,useFactory:s1,deps:[jd]},ra]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=jn({type:n});static \u0275inj=Wn({imports:[Pt,FM]})}return n})(),BM=n=>n===null||n.length===0,c1=n=>n!==null&&typeof n.length=="number",VM=n=>{if(!n)return!0;let{childCount:t,firstChild:e}=n;return!!(t===1&&e?.isTextblock&&e.content.size===0)},u1=class{static required(t){return e=>{let i=t||ps,r=Lc(e.value,i);return VM(r)?{required:!0}:null}}static maxLength(t,e){return i=>{let r=e||ps,a=Lc(i.value,r).textContent;return c1(a)&&a.length>t?{maxlength:{requiredLength:t,actualLength:a.length}}:null}}static minLength(t,e){return i=>{let r=e||ps,a=Lc(i.value,r).textContent;return BM(a)||!c1(a)?null:a.length<t?{minlength:{requiredLength:t,actualLength:a.length}}:null}}},Ri=(n,t=!1)=>(e,i)=>{let r=new oo(n);return t?r.toggle()(e,i):r.apply()(e,i)},_m=class{view;state;tr;constructor(t){if(!t)throw new Za("Required view to initialize commands.");this.view=t,this.state=t.state,this.tr=this.view.state.tr}applyTrx=t=>{this.state=this.state.apply(t??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)};dispatch=t=>{this.applyTrx(t)};exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;let t=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);let e=this.tr.setMeta("FORCE_EMIT",t);return this.view.dispatch(e),!0}focus(t="end"){let e=t==="start"?It.atStart(this.state.doc):It.atEnd(this.state.doc);return this.tr.setSelection(e),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(t){return this.tr.insertText(t),this.applyTrx(),this}insertNewLine(){return sl(...[jh,Yh,Xh,Jh])(this.state,this.dispatch),this}applyMark(t){return Ri(t,!1)(this.state,this.dispatch),this}toggleMark(t){return Ri(t,!0)(this.state,this.dispatch),this}bold(){return Ri("strong")(this.state,this.dispatch),this}toggleBold(){return Ri("strong",!0)(this.state,this.dispatch),this}italics(){return Ri("em")(this.state,this.dispatch),this}toggleItalics(){return Ri("em",!0)(this.state,this.dispatch),this}underline(){return Ri("u")(this.state,this.dispatch),this}toggleUnderline(){return Ri("u",!0)(this.state,this.dispatch),this}strike(){return Ri("s")(this.state,this.dispatch),this}toggleStrike(){return Ri("s",!0)(this.state,this.dispatch),this}code(){return Ri("code")(this.state,this.dispatch),this}toggleCode(){return Ri("code",!0)(this.state,this.dispatch),this}superscript(){return Ri("sup")(this.state,this.dispatch),this}subscript(){return Ri("sub")(this.state,this.dispatch),this}toggleOrderedList(){return new ll(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new ll(!0).toggle()(this.state,this.dispatch),this}toggleHeading(t){return new ko(t).toggle()(this.state,this.dispatch),this}insertLink(t,e){return new dm().insert(t,e)(this.state,this.dispatch),this}updateLink(t){return new dm().update(t)(this.state,this.dispatch),this}insertImage(t,e={}){return new v1().insert(t,e)(this.state,this.dispatch),this}textColor(t){return new al("text_color").apply({color:t})(this.state,this.dispatch),this}backgroundColor(t){return new al("text_background_color").apply({backgroundColor:t})(this.state,this.dispatch),this}removeTextColor(){return new al("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new al("text_background_color").remove()(this.state,this.dispatch),this}align(t){return new ia(t).toggle()(this.state,this.dispatch),this}insertHTML(t){let{selection:e,schema:i,tr:r}=this.state,{from:s,to:a}=e,d=document.createElement("div");d.innerHTML=h1(t)?t.trim():t;let h=is.fromSchema(i).parseSlice(d),m=r.replaceRange(s,a,h);return this.applyTrx(m),this}indent(){return new cl("increase").insert()(this.state,this.dispatch),this}outdent(){return new cl("decrease").insert()(this.state,this.dispatch),this}},zM=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,HM=n=>Bd(/^\s*>\s$/,n),GM=n=>Bd(/^(?:\d+)\.\s$/,n,t=>({order:Number(t[1])}),(t,e)=>e.childCount+e.attrs.order===Number(t[1])),UM=n=>Bd(/^\s*(?:[-+*])\s$/,n),qM=n=>Qh(/^```$/,n),WM=(n,t)=>Qh(new RegExp(`^(#{1,${t}})\\s$`),n,e=>({level:e[1].length})),jM=n=>nm(/(?:^|\s)(?:(\*\*|__)(?:([^*_]+))(\*\*|__))$/,n),ZM=n=>nm(/(?:^|\s)(?:(\*|_)(?:([^*_]+))(\*|_))$/,n),KM=n=>{let t=jy.concat(Wy,qy);return t.push(jM(n.marks.strong)),t.push(ZM(n.marks.em)),t.push(HM(n.nodes.blockquote)),t.push(GM(n.nodes.ordered_list)),t.push(UM(n.nodes.bullet_list)),t.push(qM(n.nodes.code_block)),t.push(WM(n.nodes.heading,6)),Uy({rules:t})},YM=(n,t)=>{let e={};e["Mod-z"]=Ud,zM?e["Shift-Mod-z"]=kc:e["Mod-y"]=kc;let i=[Pc({"Mod-b":ea(n.marks.strong),"Mod-i":ea(n.marks.em),"Mod-u":ea(n.marks.u),"Mod-`":ea(n.marks.code)}),Pc({Enter:ky(n.nodes.list_item),"Shift-Enter":sl(Kh,(r,s)=>{let{tr:a}=r,d=n.nodes.hard_break;return s(a.replaceSelectionWith(d.create()).scrollIntoView()),!0}),"Mod-[":Uh(n.nodes.list_item),"Mod-]":qh(n.nodes.list_item),Tab:qh(n.nodes.list_item)}),Pc(Hy)];return t.history&&i.push(Pc(e)),i},XM=(n,t)=>{let e=[];return t.keyboardShortcuts&&e.push(...YM(n,{history:t.history})),t.history&&e.push(e1()),t.inputRules&&e.push(KM(n)),e},C1={linkOnPaste:!0,resizeImage:!0},d1={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:ps,plugins:[],nodeViews:{},attributes:{},features:C1,handleScrollToSelection:null,linkValidationPattern:`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)|(mailto:.*[@].*)`},p1=class{options;view;constructor(t=d1){this.options=Cn(Cn({},d1),t),this.createEditor()}valueChangesSubject=new Ds;updateSubject=new Ds;get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||ps}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new _m(this.view)}get features(){return Cn(Cn({},C1),this.options.features)}handleTransactions(t){let e=this.view.state.apply(t);if(this.view.updateState(e),this.updateSubject.next(this.view),!t.docChanged&&!t.getMeta("FORCE_EMIT"))return;let i=e.doc.toJSON();this.valueChangesSubject.next(i)}createEditor(){let{options:t,schema:e}=this,{content:i=null,nodeViews:r}=t,{history:s=!0,keyboardShortcuts:a=!0,inputRules:d=!0}=t,h=Lc(i,e,t.parseOptions),m=t.plugins??[],y=t.attributes??{},E=XM(e,{history:s,keyboardShortcuts:a,inputRules:d});this.view=new Ld(null,{state:xd.create({doc:h,schema:e,plugins:[...E,...m]}),nodeViews:r,dispatchTransaction:this.handleTransactions.bind(this),attributes:y,handleScrollToSelection:t.handleScrollToSelection})}setContent(t){if(x0(t))return;let{state:e}=this.view,{tr:i,doc:r}=e,s=Lc(t,this.schema,this.options.parseOptions);i.replaceWith(0,e.doc.content.size,s),!r.eq(i.doc)&&i.docChanged&&this.view.dispatch(i)}registerPlugin(t){let{state:e}=this.view,i=[...e.plugins,t],r=e.reconfigure({plugins:i});this.view.updateState(r)}destroy(){this.view.destroy()}};function JM(n,t){if(n&1){let e=$e();V(0,"div")(1,"div",1)(2,"div",2),te(3," Showing "),V(4,"b"),te(5),B(),te(6," to "),V(7,"b"),te(8),B(),te(9," of "),V(10,"b"),te(11),B(),te(12," entries "),Be(13,"i",3),B(),V(14,"div",4)(15,"div",5)(16,"nav",6)(17,"button",7),he("click",function(){Q(e);let r=z();return $(r.handlePrevClick())}),Be(18,"i",8),V(19,"span",9),te(20,"Previous"),B()(),V(21,"div",10)(22,"div",11)(23,"span",12),te(24," Go to "),B(),V(25,"input",13),he("ngModelChange",function(r){Q(e);let s=z();return $(s.page=r)})("keyup.enter",function(){Q(e);let r=z();return $(r.onEnterPress())}),B(),V(26,"span",12),te(27," page "),B()()(),V(28,"button",14),he("click",function(){Q(e);let r=z();return $(r.handleNextClick())}),V(29,"span",9),te(30,"Next"),B(),Be(31,"i",15),B()()()()()()}if(n&2){let e=z();zn("box-footer py-0 ",e.class,""),D(5),Wt(e.currentPage),D(3),Wt(e.totalPage),D(3),Wt(e.pageLimit),D(6),N("disabled",e.preBtn),D(8),N("ngModel",e.page),D(3),N("disabled",e.nextBtn)}}var Yd=class n{currentPage;class;totalPage;pageLimit;listLength;preBtn;nextBtn;nextButtonClick=new be;preButtonClick=new be;pageChange=new be;page=1;ngOnChanges(){this.page=this.currentPage}handleNextClick(){this.page<this.totalPage&&(this.page++,this.pageChange.emit(this.page))}handlePrevClick(){this.page>1&&(this.page--,this.pageChange.emit(this.page))}onEnterPress(){if(this.page<1||this.page>this.totalPage){this.page=this.currentPage;return}this.pageChange.emit(this.page)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=lt({type:n,selectors:[["app-pagination-footer"]],inputs:{currentPage:"currentPage",class:"class",totalPage:"totalPage",pageLimit:"pageLimit",listLength:"listLength",preBtn:"preBtn",nextBtn:"nextBtn"},outputs:{nextButtonClick:"nextButtonClick",preButtonClick:"preButtonClick",pageChange:"pageChange"},features:[An],decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"flex","items-center","flex-wrap","overflow-auto"],[1,""],[1,"bi","bi-arrow-right","ms-2","font-semibold"],[1,"ms-auto","my-2"],[1,"grid","justify-center","sm:flex","sm:justify-start","sm:items-center","gap-2","flex-wrap"],["aria-label","pagination35",1,"flex","items-center","-space-x-px","gap-2"],["aria-label","button","type","button",1,"min-h-[32px]","min-w-8","py-1","px-2","inline-flex","justify-center","items-center","gap-x-1.5","text-sm","first:rounded-s-full","last:rounded-e-full","border","border-gray-200","text-gray-800","hover:bg-gray-100","focus:outline-none","focus:bg-gray-100","disabled:opacity-50","disabled:pointer-events-none","dark:border-white/10","dark:text-white","dark:hover:bg-white/10","dark:focus:bg-white/10",3,"click","disabled"],[1,"ri-arrow-left-s-line","align-middle","rtl:rotate-180"],["aria-hidden","true",1,"sr-only"],[1,"flex","justify-center","items-center","gap-x-5"],[1,"flex","justify-center","sm:justify-start","items-center","gap-x-2"],[1,"text-sm","text-gray-800","whitespace-nowrap","dark:text-white","font-medium"],["type","number","min","1",1,"min-h-[32px]","py-1","px-2.5","block","w-12","border-gray-200","rounded-md","text-sm","text-center","focus:border-primary","focus:ring-primary","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","disabled:opacity-50","disabled:pointer-events-none","dark:bg-bodybg","dark:border-white/10","dark:text-gray-400","dark:focus:ring-gray-600",3,"ngModelChange","keyup.enter","ngModel"],["aria-label","button","type","button",1,"min-h-[32px]","min-w-8","py-1","px-2.5","inline-flex","justify-center","items-center","gap-x-1.5","text-sm","first:rounded-s-full","last:rounded-e-full","border","border-gray-200","text-gray-800","hover:bg-gray-100","focus:outline-none","focus:bg-gray-100","disabled:opacity-50","disabled:pointer-events-none","dark:border-white/10","dark:text-white","dark:hover:bg-white/10","dark:focus:bg-white/10",3,"click","disabled"],[1,"ri-arrow-right-s-line","align-middle","rtl:rotate-180"]],template:function(e,i){e&1&&_e(0,JM,32,9,"div",0),e&2&&N("ngIf",i.listLength)},dependencies:[Pt,Mt,Pu,pi,Zn,Gg,Nn,Ug,Qo],encapsulation:2})};function QM(n,t){if(n&1){let e=$e();V(0,"button",3),he("click",function(){Q(e);let r=z();return $(r.handleClick())}),V(1,"span",4),te(2,"Close"),B(),Eu(),V(3,"svg",5),Be(4,"path",6),B()()}}var dl=class n{title;closeBtn=!1;headerClass="p-4";close=new be;ngOnInit(){}handleClick(){this.close.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=lt({type:n,selectors:[["app-modal-header"]],inputs:{title:"title",closeBtn:"closeBtn",headerClass:"headerClass"},outputs:{close:"close"},decls:4,vars:7,consts:[["headerClass","",3,"ngClass"],[3,"ngClass"],["type","button","matTooltip","Close","class","hs-dropdown-toggle ti-modal-close-btn",3,"click",4,"ngIf"],["type","button","matTooltip","Close",1,"hs-dropdown-toggle","ti-modal-close-btn",3,"click"],[1,"sr-only"],["width","8","height","8","viewBox","0 0 8 8","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-3.5","h-3.5"],["d","M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z","fill","currentColor"]],template:function(e,i){e&1&&(V(0,"div",0)(1,"h6",1),te(2),B(),_e(3,QM,5,0,"button",2),B()),e&2&&(zn("ti-modal-header  flex justify-between ",i.headerClass,""),N("ngClass",i.closeBtn?"border-b":""),D(),N("ngClass",i.closeBtn?"modal-title text-[1rem] font-semiboldmodal-title":"box-title font-medium text-[15px] text-primarytint1color"),D(),bt("",i.title," "),D(),N("ngIf",i.closeBtn))},dependencies:[Pt,Rn,Mt,Ai],encapsulation:2})};var hs=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=lt({type:n,selectors:[["app-data-not-found"]],decls:8,vars:0,consts:[[1,"max-w-sm","p-6","mx-auto","text-center"],[1,"flex","flex-col","items-center","space-y-3"],[1,"material-icons","text-gray-300","text-7xl"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500"]],template:function(e,i){e&1&&(V(0,"div",0)(1,"div",1)(2,"span",2),te(3,"cloud_off"),B(),V(4,"p",3),te(5,"No data to display"),B(),V(6,"p",4),te(7,"Once data is available, it will appear here."),B()()())},styles:[".no-data[_ngcontent-%COMP%]{width:100%;height:250px;border-radius:100%;-webkit-border-radius:100%;-moz-border-radius:100%;-ms-border-radius:100%;-o-border-radius:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;grid-row-gap:16px}.no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:7rem!important;color:#ccc}.no-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500;letter-spacing:.5px}.hp100[_ngcontent-%COMP%]{height:100%}"]})};var eA=["dialogPopup"],tA=["hueSlider"],nA=["alphaSlider"];function iA(n,t){if(n&1&&Be(0,"div"),n&2){let e=z();zn("arrow arrow-",e.cpUsePosition,""),Ln("left",e.cpArrowPosition)("top",e.arrowTop,"px")}}function rA(n,t){if(n&1){let e=$e();V(0,"div",28),he("newValue",function(r){Q(e);let s=z();return $(s.onColorChange(r))})("dragStart",function(){Q(e);let r=z();return $(r.onDragStart("saturation-lightness"))})("dragEnd",function(){Q(e);let r=z();return $(r.onDragEnd("saturation-lightness"))}),Be(1,"div",16),B()}if(n&2){let e=z();Ln("background-color",e.hueSliderColor),N("rgX",1)("rgY",1),D(),Ln("top",e.slider==null?null:e.slider.v,"px")("left",e.slider==null?null:e.slider.s,"px")}}function oA(n,t){n&1&&(Eu(),V(0,"svg",29),Be(1,"path",30)(2,"path",31),B())}function sA(n,t){if(n&1){let e=$e();V(0,"button",32),he("click",function(r){Q(e);let s=z();return $(s.onAddPresetColor(r,s.selectedColor))}),te(1),B()}if(n&2){let e=z();en(e.cpAddColorButtonClass),N("disabled",e.cpPresetColors&&e.cpPresetColors.length>=e.cpMaxPresetColorsLength),D(),bt(" ",e.cpAddColorButtonText," ")}}function aA(n,t){n&1&&Be(0,"div",33)}function lA(n,t){if(n&1){let e=$e();V(0,"input",39),he("keyup.enter",function(r){Q(e);let s=z(2);return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z(2);return $(s.onAlphaInput(r))}),B()}if(n&2){let e=z(2);N("rg",1)("value",e.cmykText==null?null:e.cmykText.a)}}function cA(n,t){n&1&&(V(0,"div"),te(1,"A"),B())}function uA(n,t){if(n&1){let e=$e();V(0,"div",34)(1,"div",35)(2,"input",36),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onCyanInput(r))}),B(),V(3,"input",36),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onMagentaInput(r))}),B(),V(4,"input",36),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onYellowInput(r))}),B(),V(5,"input",36),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onBlackInput(r))}),B(),_e(6,lA,1,2,"input",37),B(),V(7,"div",35)(8,"div"),te(9,"C"),B(),V(10,"div"),te(11,"M"),B(),V(12,"div"),te(13,"Y"),B(),V(14,"div"),te(15,"K"),B(),_e(16,cA,2,0,"div",38),B()()}if(n&2){let e=z();Ln("display",e.format!==3?"none":"block"),D(2),N("rg",100)("value",e.cmykText==null?null:e.cmykText.c),D(),N("rg",100)("value",e.cmykText==null?null:e.cmykText.m),D(),N("rg",100)("value",e.cmykText==null?null:e.cmykText.y),D(),N("rg",100)("value",e.cmykText==null?null:e.cmykText.k),D(),N("ngIf",e.cpAlphaChannel!=="disabled"),D(10),N("ngIf",e.cpAlphaChannel!=="disabled")}}function dA(n,t){if(n&1){let e=$e();V(0,"input",39),he("keyup.enter",function(r){Q(e);let s=z(2);return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z(2);return $(s.onAlphaInput(r))}),B()}if(n&2){let e=z(2);N("rg",1)("value",e.hslaText==null?null:e.hslaText.a)}}function pA(n,t){n&1&&(V(0,"div"),te(1,"A"),B())}function fA(n,t){if(n&1){let e=$e();V(0,"div",40)(1,"div",35)(2,"input",41),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onHueInput(r))}),B(),V(3,"input",36),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onSaturationInput(r))}),B(),V(4,"input",36),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onLightnessInput(r))}),B(),_e(5,dA,1,2,"input",37),B(),V(6,"div",35)(7,"div"),te(8,"H"),B(),V(9,"div"),te(10,"S"),B(),V(11,"div"),te(12,"L"),B(),_e(13,pA,2,0,"div",38),B()()}if(n&2){let e=z();Ln("display",e.format!==2?"none":"block"),D(2),N("rg",360)("value",e.hslaText==null?null:e.hslaText.h),D(),N("rg",100)("value",e.hslaText==null?null:e.hslaText.s),D(),N("rg",100)("value",e.hslaText==null?null:e.hslaText.l),D(),N("ngIf",e.cpAlphaChannel!=="disabled"),D(8),N("ngIf",e.cpAlphaChannel!=="disabled")}}function hA(n,t){if(n&1){let e=$e();V(0,"input",39),he("keyup.enter",function(r){Q(e);let s=z(2);return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z(2);return $(s.onAlphaInput(r))}),B()}if(n&2){let e=z(2);N("rg",1)("value",e.rgbaText==null?null:e.rgbaText.a)}}function mA(n,t){n&1&&(V(0,"div"),te(1,"A"),B())}function gA(n,t){if(n&1){let e=$e();V(0,"div",42)(1,"div",35)(2,"input",43),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onRedInput(r))}),B(),V(3,"input",43),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onGreenInput(r))}),B(),V(4,"input",43),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onBlueInput(r))}),B(),_e(5,hA,1,2,"input",37),B(),V(6,"div",35)(7,"div"),te(8,"R"),B(),V(9,"div"),te(10,"G"),B(),V(11,"div"),te(12,"B"),B(),_e(13,mA,2,0,"div",38),B()()}if(n&2){let e=z();Ln("display",e.format!==1?"none":"block"),D(2),N("rg",255)("value",e.rgbaText==null?null:e.rgbaText.r),D(),N("rg",255)("value",e.rgbaText==null?null:e.rgbaText.g),D(),N("rg",255)("value",e.rgbaText==null?null:e.rgbaText.b),D(),N("ngIf",e.cpAlphaChannel!=="disabled"),D(8),N("ngIf",e.cpAlphaChannel!=="disabled")}}function _A(n,t){if(n&1){let e=$e();V(0,"input",39),he("keyup.enter",function(r){Q(e);let s=z(2);return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z(2);return $(s.onAlphaInput(r))}),B()}if(n&2){let e=z(2);N("rg",1)("value",e.hexAlpha)}}function vA(n,t){n&1&&(V(0,"div"),te(1,"A"),B())}function yA(n,t){if(n&1){let e=$e();V(0,"div",44)(1,"div",35)(2,"input",45),he("blur",function(){Q(e);let r=z();return $(r.onHexInput(null))})("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onHexInput(r))}),B(),_e(3,_A,1,2,"input",37),B(),V(4,"div",35)(5,"div"),te(6,"Hex"),B(),_e(7,vA,2,0,"div",38),B()()}if(n&2){let e=z();Ln("display",e.format!==0?"none":"block"),Ki("hex-alpha",e.cpAlphaChannel==="forced"),D(2),N("value",e.hexText),D(),N("ngIf",e.cpAlphaChannel==="forced"),D(4),N("ngIf",e.cpAlphaChannel==="forced")}}function bA(n,t){if(n&1){let e=$e();V(0,"input",39),he("keyup.enter",function(r){Q(e);let s=z(2);return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z(2);return $(s.onAlphaInput(r))}),B()}if(n&2){let e=z(2);N("rg",1)("value",e.hslaText==null?null:e.hslaText.a)}}function CA(n,t){if(n&1){let e=$e();V(0,"div",46)(1,"div",35)(2,"input",36),he("keyup.enter",function(r){Q(e);let s=z();return $(s.onAcceptColor(r))})("newValue",function(r){Q(e);let s=z();return $(s.onValueInput(r))}),B(),_e(3,bA,1,2,"input",37),B(),V(4,"div",35)(5,"div"),te(6,"V"),B(),V(7,"div"),te(8,"A"),B()()()}if(n&2){let e=z();D(2),N("rg",100)("value",e.hslaText==null?null:e.hslaText.l),D(),N("ngIf",e.cpAlphaChannel!=="disabled")}}function EA(n,t){if(n&1){let e=$e();V(0,"div",47)(1,"span",48),he("click",function(){Q(e);let r=z();return $(r.onFormatToggle(-1))}),B(),V(2,"span",48),he("click",function(){Q(e);let r=z();return $(r.onFormatToggle(1))}),B()()}}function xA(n,t){if(n&1){let e=$e();V(0,"span",55),he("click",function(r){Q(e);let s=z().$implicit,a=z(3);return $(a.onRemovePresetColor(r,s))}),B()}if(n&2){let e=z(4);en(e.cpRemoveColorButtonClass)}}function wA(n,t){if(n&1){let e=$e();V(0,"div",53),he("click",function(){let r=Q(e).$implicit,s=z(3);return $(s.setColorFromString(r))}),_e(1,xA,1,3,"span",54),B()}if(n&2){let e=t.$implicit,i=z(3);Ln("background-color",e),D(),N("ngIf",i.cpAddColorButton)}}function SA(n,t){if(n&1&&(V(0,"div"),_e(1,wA,2,3,"div",52),B()),n&2){let e=z(2);en(e.cpPresetColorsClass),D(),N("ngForOf",e.cpPresetColors)}}function TA(n,t){if(n&1&&(V(0,"div"),te(1),B()),n&2){let e=z(2);en(e.cpPresetEmptyMessageClass),D(),Wt(e.cpPresetEmptyMessage)}}function IA(n,t){if(n&1&&(V(0,"div",49),Be(1,"hr"),V(2,"div",50),te(3),B(),_e(4,SA,2,4,"div",51)(5,TA,2,4,"div",51),B()),n&2){let e=z();D(3),Wt(e.cpPresetLabel),D(),N("ngIf",e.cpPresetColors==null?null:e.cpPresetColors.length),D(),N("ngIf",!(e.cpPresetColors!=null&&e.cpPresetColors.length)&&e.cpAddColorButton)}}function OA(n,t){if(n&1){let e=$e();V(0,"button",58),he("click",function(r){Q(e);let s=z(2);return $(s.onCancelColor(r))}),te(1),B()}if(n&2){let e=z(2);en(e.cpCancelButtonClass),D(),Wt(e.cpCancelButtonText)}}function MA(n,t){if(n&1){let e=$e();V(0,"button",58),he("click",function(r){Q(e);let s=z(2);return $(s.onAcceptColor(r))}),te(1),B()}if(n&2){let e=z(2);en(e.cpOKButtonClass),D(),Wt(e.cpOKButtonText)}}function AA(n,t){if(n&1&&(V(0,"div",56),_e(1,OA,2,4,"button",57)(2,MA,2,4,"button",57),B()),n&2){let e=z();D(),N("ngIf",e.cpCancelButton),D(),N("ngIf",e.cpOKButton)}}function kA(n,t){n&1&&jl(0)}function PA(n,t){if(n&1&&(V(0,"div",59),_e(1,kA,1,0,"ng-container",60),B()),n&2){let e=z();D(),N("ngTemplateOutlet",e.cpExtraTemplate)}}var yi=function(n){return n[n.HEX=0]="HEX",n[n.RGBA=1]="RGBA",n[n.HSLA=2]="HSLA",n[n.CMYK=3]="CMYK",n}(yi||{}),Rr=class{r;g;b;a;constructor(t,e,i,r){this.r=t,this.g=e,this.b=i,this.a=r}},pl=class{h;s;v;a;constructor(t,e,i,r){this.h=t,this.s=e,this.v=i,this.a=r}},Po=class{h;s;l;a;constructor(t,e,i,r){this.h=t,this.s=e,this.l=i,this.a=r}},oa=class{c;m;y;k;a;constructor(t,e,i,r,s=1){this.c=t,this.m=e,this.y=i,this.k=r,this.a=s}};function DA(n,t){let e="right",i="bottom",{height:r,width:s}=n,{top:a,left:d}=t,h=a+t.height,m=d+t.width,y=a-r<0,E=h+r>(window.innerHeight||document.documentElement.clientHeight),O=d-s<0,T=m+s>(window.innerWidth||document.documentElement.clientWidth),S=y&&E&&O&&T;return E&&(i="top"),y&&(i="bottom"),O&&(e="right"),T&&(e="left"),S?["left","right","top","bottom"].reduce((G,j)=>n[G]>n[j]?G:j):O&&T?y?"bottom":E||a>h?"top":"bottom":y&&E?O?"right":T||d>m?"left":"right":`${i}-${e}`}function LA(){let n="";typeof navigator<"u"&&(n=navigator.userAgent.toLowerCase());let t=n.indexOf("msie ");return t>0?parseInt(n.substring(t+5,n.indexOf(".",t)),10):!1}var RA=(()=>{class n{rg;text;newValue=new be;inputChange(e){let i=e.target.value;if(this.rg===void 0)this.newValue.emit(i);else{let r=parseFloat(i);this.newValue.emit({v:r,rg:this.rg})}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Zr({type:n,selectors:[["","text",""]],hostBindings:function(i,r){i&1&&he("input",function(a){return r.inputChange(a)})},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"},standalone:!1})}return n})(),NA=(()=>{class n{elRef;listenerMove;listenerStop;rgX;rgY;slider;dragEnd=new be;dragStart=new be;newValue=new be;mouseDown(e){this.start(e)}touchStart(e){this.start(e)}constructor(e){this.elRef=e,this.listenerMove=i=>this.move(i),this.listenerStop=()=>this.stop()}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){let i=this.elRef.nativeElement.getBoundingClientRect();return(e.pageX!==void 0?e.pageX:e.touches[0].pageX)-i.left-window.pageXOffset}getY(e){let i=this.elRef.nativeElement.getBoundingClientRect();return(e.pageY!==void 0?e.pageY:e.touches[0].pageY)-i.top-window.pageYOffset}setCursor(e){let i=this.elRef.nativeElement.offsetWidth,r=this.elRef.nativeElement.offsetHeight,s=Math.max(0,Math.min(this.getX(e),i)),a=Math.max(0,Math.min(this.getY(e),r));this.rgX!==void 0&&this.rgY!==void 0?this.newValue.emit({s:s/i,v:1-a/r,rgX:this.rgX,rgY:this.rgY}):this.rgX===void 0&&this.rgY!==void 0?this.newValue.emit({v:a/r,rgY:this.rgY}):this.rgX!==void 0&&this.rgY===void 0&&this.newValue.emit({v:s/i,rgX:this.rgX})}static \u0275fac=function(i){return new(i||n)(Fe(kn))};static \u0275dir=Zr({type:n,selectors:[["","slider",""]],hostBindings:function(i,r){i&1&&he("mousedown",function(a){return r.mouseDown(a)})("touchstart",function(a){return r.touchStart(a)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"},standalone:!1})}return n})(),Xd=class{h;s;v;a;constructor(t,e,i,r){this.h=t,this.s=e,this.v=i,this.a=r}},Jd=class{h;s;v;a;constructor(t,e,i,r){this.h=t,this.s=e,this.v=i,this.a=r}},x1=(()=>{class n{active=null;setActive(e){this.active&&this.active!==e&&this.active.cpDialogDisplay!=="inline"&&this.active.closeDialog(),this.active=e}hsva2hsla(e){let i=e.h,r=e.s,s=e.v,a=e.a;if(s===0)return new Po(i,0,0,a);if(r===0&&s===1)return new Po(i,1,1,a);{let d=s*(2-r)/2;return new Po(i,s*r/(1-Math.abs(2*d-1)),d,a)}}hsla2hsva(e){let i=Math.min(e.h,1),r=Math.min(e.s,1),s=Math.min(e.l,1),a=Math.min(e.a,1);if(s===0)return new pl(i,0,0,a);{let d=s+r*(1-Math.abs(2*s-1))/2;return new pl(i,2*(d-s)/d,d,a)}}hsvaToRgba(e){let i,r,s,a=e.h,d=e.s,h=e.v,m=e.a,y=Math.floor(a*6),E=a*6-y,O=h*(1-d),T=h*(1-E*d),S=h*(1-(1-E)*d);switch(y%6){case 0:i=h,r=S,s=O;break;case 1:i=T,r=h,s=O;break;case 2:i=O,r=h,s=S;break;case 3:i=O,r=T,s=h;break;case 4:i=S,r=O,s=h;break;case 5:i=h,r=O,s=T;break;default:i=0,r=0,s=0}return new Rr(i,r,s,m)}cmykToRgb(e){let i=(1-e.c)*(1-e.k),r=(1-e.m)*(1-e.k),s=(1-e.y)*(1-e.k);return new Rr(i,r,s,e.a)}rgbaToCmyk(e){let i=1-Math.max(e.r,e.g,e.b);if(i===1)return new oa(0,0,0,1,e.a);{let r=(1-e.r-i)/(1-i),s=(1-e.g-i)/(1-i),a=(1-e.b-i)/(1-i);return new oa(r,s,a,i,e.a)}}rgbaToHsva(e){let i,r,s=Math.min(e.r,1),a=Math.min(e.g,1),d=Math.min(e.b,1),h=Math.min(e.a,1),m=Math.max(s,a,d),y=Math.min(s,a,d),E=m,O=m-y;if(r=m===0?0:O/m,m===y)i=0;else{switch(m){case s:i=(a-d)/O+(a<d?6:0);break;case a:i=(d-s)/O+2;break;case d:i=(s-a)/O+4;break;default:i=0}i/=6}return new pl(i,r,E,h)}rgbaToHex(e,i){let r="#"+(16777216|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return i&&(r+=(256|Math.round(e.a*255)).toString(16).substr(1)),r}normalizeCMYK(e){return new oa(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new oa(Math.floor(e.c*100),Math.floor(e.m*100),Math.floor(e.y*100),Math.floor(e.k*100),e.a)}denormalizeRGBA(e){return new Rr(Math.round(e.r*255),Math.round(e.g*255),Math.round(e.b*255),e.a)}stringToHsva(e="",i=!1){let r=null;e=(e||"").toLowerCase();let s=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new Rr(parseInt(a[2],10)/255,parseInt(a[3],10)/255,parseInt(a[4],10)/255,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new Po(parseInt(a[2],10)/360,parseInt(a[3],10)/100,parseInt(a[4],10)/100,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}}];i?s.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(a){return new Rr(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,parseInt(a[4]||"FF",16)/255)}}):s.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(a){return new Rr(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,1)}}),s.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(a){return new Rr(parseInt(a[1]+a[1],16)/255,parseInt(a[2]+a[2],16)/255,parseInt(a[3]+a[3],16)/255,1)}});for(let a in s)if(s.hasOwnProperty(a)){let d=s[a],h=d.re.exec(e),m=h&&d.parse(h);if(m)return m instanceof Rr?r=this.rgbaToHsva(m):m instanceof Po&&(r=this.hsla2hsva(m)),r}return r}outputFormat(e,i,r){switch(i==="auto"&&(i=e.a<1?"rgba":"hex"),i){case"hsla":let s=this.hsva2hsla(e),a=new Po(Math.round(s.h*360),Math.round(s.s*100),Math.round(s.l*100),Math.round(s.a*100)/100);return e.a<1||r==="always"?"hsla("+a.h+","+a.s+"%,"+a.l+"%,"+a.a+")":"hsl("+a.h+","+a.s+"%,"+a.l+"%)";case"rgba":let d=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||r==="always"?"rgba("+d.r+","+d.g+","+d.b+","+Math.round(d.a*100)/100+")":"rgb("+d.r+","+d.g+","+d.b+")";default:let h=r==="always"||r==="forced";return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),h)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=go({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E1=typeof window<"u"&&"ontouchstart"in window,FA=(()=>{class n{ngZone;elRef;cdRef;document;platformId;service;isIE10=!1;cmyk;hsva;width;height;cmykColor;outputColor;initialColor;fallbackColor;listenerResize;listenerMouseDown;directiveInstance;sliderH;sliderDimMax;directiveElementRef;dialogArrowSize=10;dialogArrowOffset=15;dialogInputFields=[yi.HEX,yi.RGBA,yi.HSLA,yi.CMYK];useRootViewContainer=!1;show;hidden;top;left;position;format;slider;hexText;hexAlpha;cmykText;hslaText;rgbaText;arrowTop;selectedColor;hueSliderColor;alphaSliderColor;cpWidth;cpHeight;cpColorMode;cpCmykEnabled;cpAlphaChannel;cpOutputFormat;cpDisableInput;cpDialogDisplay;cpIgnoredElements;cpSaveClickOutside;cpCloseClickOutside;cpPosition;cpUsePosition;cpPositionOffset;cpOKButton;cpOKButtonText;cpOKButtonClass;cpCancelButton;cpCancelButtonText;cpCancelButtonClass;cpEyeDropper;eyeDropperSupported;cpPresetLabel;cpPresetColors;cpPresetColorsClass;cpMaxPresetColorsLength;cpPresetEmptyMessage;cpPresetEmptyMessageClass;cpAddColorButton;cpAddColorButtonText;cpAddColorButtonClass;cpRemoveColorButtonClass;cpArrowPosition;cpTriggerElement;cpExtraTemplate;dialogElement;hueSlider;alphaSlider;handleEsc(e){this.show&&this.cpDialogDisplay==="popup"&&this.onCancelColor(e)}handleEnter(e){this.show&&this.cpDialogDisplay==="popup"&&this.onAcceptColor(e)}constructor(e,i,r,s,a,d){this.ngZone=e,this.elRef=i,this.cdRef=r,this.document=s,this.platformId=a,this.service=d,this.eyeDropperSupported=Fg(this.platformId)&&"EyeDropper"in this.document.defaultView}ngOnInit(){this.slider=new Xd(0,0,0,0);let e=this.hueSlider.nativeElement.offsetWidth||140,i=this.alphaSlider.nativeElement.offsetWidth||140;this.sliderDimMax=new Jd(e,this.cpWidth,130,i),this.cpCmykEnabled?this.format=yi.CMYK:this.cpOutputFormat==="rgba"?this.format=yi.RGBA:this.cpOutputFormat==="hsla"?this.format=yi.HSLA:this.format=yi.HEX,this.listenerMouseDown=r=>{this.onMouseDown(r)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){if(this.cpWidth!==230||this.cpDialogDisplay==="inline"){let e=this.hueSlider.nativeElement.offsetWidth||140,i=this.alphaSlider.nativeElement.offsetWidth||140;this.sliderDimMax=new Jd(e,this.cpWidth,130,i),this.updateColorPicker(!1),this.cdRef.detectChanges()}}openDialog(e,i=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,i),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(e,i,r,s,a,d,h,m,y,E,O,T,S,F,G,j,oe,ve,ee,ye,Ae,Ze,je,se,ge,Le,Ie,et,Qe,pt,Pe,Et,ke,De,vt,He,de,J){this.setInitialColor(r),this.setColorMode(m),this.isIE10=LA()===10,this.directiveInstance=e,this.directiveElementRef=i,this.cpDisableInput=T,this.cpCmykEnabled=y,this.cpAlphaChannel=E,this.cpOutputFormat=O,this.cpDialogDisplay=d,this.cpIgnoredElements=S,this.cpSaveClickOutside=F,this.cpCloseClickOutside=G,this.useRootViewContainer=j,this.width=this.cpWidth=parseInt(s,10),this.height=this.cpHeight=parseInt(a,10),this.cpPosition=oe,this.cpPositionOffset=parseInt(ve,10),this.cpOKButton=Le,this.cpOKButtonText=et,this.cpOKButtonClass=Ie,this.cpCancelButton=Qe,this.cpCancelButtonText=Pe,this.cpCancelButtonClass=pt,this.cpEyeDropper=He,this.fallbackColor=h||"#fff",this.setPresetConfig(ye,Ae),this.cpPresetColorsClass=Ze,this.cpMaxPresetColorsLength=je,this.cpPresetEmptyMessage=se,this.cpPresetEmptyMessageClass=ge,this.cpAddColorButton=Et,this.cpAddColorButtonText=De,this.cpAddColorButtonClass=ke,this.cpRemoveColorButtonClass=vt,this.cpTriggerElement=de,this.cpExtraTemplate=J,ee||(this.dialogArrowOffset=0),d==="inline"&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),O==="hex"&&E!=="always"&&E!=="forced"&&(this.cpAlphaChannel="disabled")}setColorMode(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}setInitialColor(e){this.initialColor=e}setPresetConfig(e,i){this.cpPresetLabel=e,this.cpPresetColors=i}setColorFromString(e,i=!0,r=!0){let s;this.cpAlphaChannel==="always"||this.cpAlphaChannel==="forced"?(s=this.service.stringToHsva(e,!0),!s&&!this.hsva&&(s=this.service.stringToHsva(e,!1))):s=this.service.stringToHsva(e,!1),!s&&!this.hsva&&(s=this.service.stringToHsva(this.fallbackColor,!1)),s&&(this.hsva=s,this.sliderH=this.hsva.h,this.cpOutputFormat==="hex"&&this.cpAlphaChannel==="disabled"&&(this.hsva.a=1),this.updateColorPicker(i,r))}onResize(){this.position==="fixed"?this.setDialogPosition():this.cpDialogDisplay!=="inline"&&this.closeColorPicker()}onDragEnd(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}onDragStart(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}onMouseDown(e){this.show&&!this.isIE10&&this.cpDialogDisplay==="popup"&&e.target!==this.directiveElementRef.nativeElement&&!this.isDescendant(this.elRef.nativeElement,e.target)&&!this.isDescendant(this.directiveElementRef.nativeElement,e.target)&&this.cpIgnoredElements.filter(i=>i===e.target).length===0&&this.ngZone.run(()=>{this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker()})}onAcceptColor(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),this.cpDialogDisplay==="popup"&&this.closeColorPicker()}onCancelColor(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),this.cpDialogDisplay==="popup"&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onEyeDropper(){if(!this.eyeDropperSupported)return;new window.EyeDropper().open().then(i=>{this.setColorFromString(i.sRGBHex,!0)})}onFormatToggle(e){let i=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),r=((this.dialogInputFields.indexOf(this.format)+e)%i+i)%i;this.format=this.dialogInputFields[r]}onColorChange(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(e){if(e===null)this.updateColorPicker();else{e&&e[0]!=="#"&&(e="#"+e);let i=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;this.cpAlphaChannel==="always"&&(i=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);let r=i.test(e);r&&(e.length<5&&(e="#"+e.substring(1).split("").map(s=>s+s).join("")),this.cpAlphaChannel==="forced"&&(e+=Math.round(this.hsva.a*255).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:r,value:e,color:this.outputColor})}}onRedInput(e){let i=this.service.hsvaToRgba(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(i.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(i),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:r,value:i.r,color:this.outputColor})}onBlueInput(e){let i=this.service.hsvaToRgba(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(i.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(i),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:r,value:i.b,color:this.outputColor})}onGreenInput(e){let i=this.service.hsvaToRgba(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(i.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(i),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:r,value:i.g,color:this.outputColor})}onHueInput(e){let i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:i,value:this.hsva.h,color:this.outputColor})}onValueInput(e){let i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:i,value:this.hsva.v,color:this.outputColor})}onAlphaInput(e){let i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:i,value:this.hsva.a,color:this.outputColor})}onLightnessInput(e){let i=this.service.hsva2hsla(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(i.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(i),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:r,value:i.l,color:this.outputColor})}onSaturationInput(e){let i=this.service.hsva2hsla(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(i.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(i),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:r,value:i.s,color:this.outputColor})}onCyanInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(e,i){e.stopPropagation(),this.cpPresetColors.filter(r=>r===i).length||(this.cpPresetColors=this.cpPresetColors.concat(i),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(e,i){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(r=>r!==i),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||this.ngZone.runOutsideAngular(()=>{E1?document.addEventListener("touchstart",this.listenerMouseDown):document.addEventListener("mousedown",this.listenerMouseDown)}),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(E1?document.removeEventListener("touchstart",this.listenerMouseDown):document.removeEventListener("mousedown",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(e=!0,i=!0,r=!1){if(this.sliderDimMax){this.cpColorMode===2&&(this.hsva.s=0);let s,a,d,h=this.outputColor;if(a=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(r?(d=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(d)):(d=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(d))),d=this.service.denormalizeRGBA(d),this.sliderH=this.hsva.h):d=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),s=this.service.denormalizeRGBA(this.service.hsvaToRgba(new pl(this.sliderH||this.hsva.h,1,1,1))),i){this.hslaText=new Po(Math.round(a.h*360),Math.round(a.s*100),Math.round(a.l*100),Math.round(a.a*100)/100),this.rgbaText=new Rr(d.r,d.g,d.b,Math.round(d.a*100)/100),this.cpCmykEnabled&&(this.cmykText=new oa(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(this.cmyk.a*100)/100));let m=this.cpAlphaChannel==="always";this.hexText=this.service.rgbaToHex(d,m),this.hexAlpha=this.rgbaText.a}if(this.cpOutputFormat==="auto"&&this.format!==yi.RGBA&&this.format!==yi.CMYK&&this.format!==yi.HSLA&&this.hsva.a<1&&(this.format=this.hsva.a<1?yi.RGBA:yi.HEX),this.hueSliderColor="rgb("+s.r+","+s.g+","+s.b+")",this.alphaSliderColor="rgb("+d.r+","+d.g+","+d.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==yi.CMYK)this.cmykColor="";else if(this.cpAlphaChannel==="always"||this.cpAlphaChannel==="enabled"||this.cpAlphaChannel==="forced"){let m=Math.round(this.cmyk.a*100)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${m})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new Xd((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&h!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if(this.cpDialogDisplay==="inline")this.position="relative";else{let e="static",i="",r,s=null,a=null,d=this.directiveElementRef.nativeElement.parentNode,h=this.dialogElement.nativeElement.offsetHeight;for(;d!==null&&d.tagName!=="HTML";){if(r=window.getComputedStyle(d),e=r.getPropertyValue("position"),i=r.getPropertyValue("transform"),e!=="static"&&s===null&&(s=d),i&&i!=="none"&&a===null&&(a=d),e==="fixed"){s=a;break}d=d.parentNode}let m=this.createDialogBox(this.directiveElementRef.nativeElement,e!=="fixed");if(this.useRootViewContainer||e==="fixed"&&(!s||s instanceof HTMLUnknownElement))this.top=m.top,this.left=m.left;else{s===null&&(s=d);let j=this.createDialogBox(s,e!=="fixed");this.top=m.top-j.top,this.left=m.left-j.left}e==="fixed"&&(this.position="fixed");let y=this.cpPosition,E=this.dialogElement.nativeElement.getBoundingClientRect();if(this.cpPosition==="auto"){let j=this.cpTriggerElement.nativeElement.getBoundingClientRect();y=DA(E,j)}switch(this.arrowTop=y==="top"?h-1:void 0,this.cpArrowPosition=void 0,y){case"top":this.top-=h+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*m.width-this.dialogArrowOffset;break;case"bottom":this.top+=m.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*m.width-this.dialogArrowOffset;break;case"top-left":case"left-top":this.top-=h-m.height+m.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset;break;case"top-right":case"right-top":this.top-=h-m.height+m.height*this.cpPositionOffset/100,this.left+=m.width+this.dialogArrowSize-2-this.dialogArrowOffset;break;case"left":case"bottom-left":case"left-bottom":this.top+=m.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2;break;case"right":case"bottom-right":case"right-bottom":default:this.top+=m.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=m.width+this.dialogArrowSize-2;break}let O=window.innerHeight,T=window.innerWidth,S=this.elRef.nativeElement.getBoundingClientRect();this.top+E.height>O&&(this.top=O-E.height,this.cpArrowPosition=S.x/2-20),this.left+E.width>T&&(this.left=T-E.width,this.cpArrowPosition=S.x/2-20),this.cpUsePosition=y}}isDescendant(e,i){let r=i.parentNode;for(;r!==null;){if(r===e)return!0;r=r.parentNode}return!1}createDialogBox(e,i){let{top:r,left:s}=e.getBoundingClientRect();return{top:r+(i?window.pageYOffset:0),left:s+(i?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}static \u0275fac=function(i){return new(i||n)(Fe(Wr),Fe(kn),Fe(Tr),Fe(Dg),Fe(Ig),Fe(x1))};static \u0275cmp=lt({type:n,selectors:[["color-picker"]],viewQuery:function(i,r){if(i&1&&(ti(eA,7),ti(tA,7),ti(nA,7)),i&2){let s;Hn(s=Gn())&&(r.dialogElement=s.first),Hn(s=Gn())&&(r.hueSlider=s.first),Hn(s=Gn())&&(r.alphaSlider=s.first)}},hostBindings:function(i,r){i&1&&he("keyup.esc",function(a){return r.handleEsc(a)},!1,Jo)("keyup.enter",function(a){return r.handleEnter(a)},!1,Jo)},standalone:!1,decls:30,vars:51,consts:[["dialogPopup",""],["hueSlider",""],["valueSlider",""],["alphaSlider",""],[1,"color-picker",3,"click"],[3,"left","class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color",3,"click"],["class","eyedropper-icon","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",4,"ngIf"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"newValue","dragStart","dragEnd","slider","rgX"],[1,"cursor"],[1,"value",3,"newValue","dragStart","dragEnd","slider","rgX"],[1,"alpha",3,"newValue","dragStart","dragEnd","slider","rgX"],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],["class","extra-template",4,"ngIf"],[1,"saturation-lightness",3,"newValue","dragStart","dragEnd","slider","rgX","rgY"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",1,"eyedropper-icon"],["d","M0 0h24v24H0V0z","fill","none"],["d","M17.66 5.41l.92.92-2.69 2.69-.92-.92 2.69-2.69M17.67 3c-.26 0-.51.1-.71.29l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42l-2.34-2.34c-.2-.19-.45-.29-.7-.29zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z"],["type","button",3,"click","disabled"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"keyup.enter","newValue","text","rg","value"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"keyup.enter","newValue","text","rg","value"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"keyup.enter","newValue","text","rg","value"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"keyup.enter","newValue","text","rg","value"],[1,"hex-text"],[3,"blur","keyup.enter","newValue","text","value"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"],[1,"extra-template"],[4,"ngTemplateOutlet"]],template:function(i,r){if(i&1){let s=$e();V(0,"div",4,0),he("click",function(d){return Q(s),$(d.stopPropagation())}),_e(2,iA,1,7,"div",5)(3,rA,2,8,"div",6),V(4,"div",7)(5,"div",8),Be(6,"div",9),V(7,"div",10),he("click",function(){return Q(s),$(r.eyeDropperSupported&&r.cpEyeDropper&&r.onEyeDropper())}),_e(8,oA,3,0,"svg",11),B(),_e(9,sA,2,5,"button",12),B(),V(10,"div",13),_e(11,aA,1,0,"div",14),V(12,"div",15,1),he("newValue",function(d){return Q(s),$(r.onHueChange(d))})("dragStart",function(){return Q(s),$(r.onDragStart("hue"))})("dragEnd",function(){return Q(s),$(r.onDragEnd("hue"))}),Be(14,"div",16),B(),V(15,"div",17,2),he("newValue",function(d){return Q(s),$(r.onValueChange(d))})("dragStart",function(){return Q(s),$(r.onDragStart("value"))})("dragEnd",function(){return Q(s),$(r.onDragEnd("value"))}),Be(17,"div",16),B(),V(18,"div",18,3),he("newValue",function(d){return Q(s),$(r.onAlphaChange(d))})("dragStart",function(){return Q(s),$(r.onDragStart("alpha"))})("dragEnd",function(){return Q(s),$(r.onDragEnd("alpha"))}),Be(20,"div",16),B()()(),_e(21,uA,17,12,"div",19)(22,fA,14,10,"div",20)(23,gA,14,10,"div",21)(24,yA,8,7,"div",22)(25,CA,9,3,"div",23)(26,EA,3,0,"div",24)(27,IA,6,3,"div",25)(28,AA,3,2,"div",26)(29,PA,2,1,"div",27),B()}i&2&&(Ln("display",r.show?"block":"none")("visibility",r.hidden?"hidden":"visible")("top",r.top,"px")("left",r.left,"px")("position",r.position)("height",r.cpHeight,"px")("width",r.cpWidth,"px"),Ki("open",r.show),D(2),N("ngIf",r.cpDialogDisplay==="popup"),D(),N("ngIf",(r.cpColorMode||1)===1),D(4),Ln("background-color",r.selectedColor)("cursor",r.eyeDropperSupported&&r.cpEyeDropper?"pointer":null),D(),N("ngIf",r.eyeDropperSupported&&r.cpEyeDropper),D(),N("ngIf",r.cpAddColorButton),D(2),N("ngIf",r.cpAlphaChannel==="disabled"),D(),Ln("display",(r.cpColorMode||1)===1?"block":"none"),N("rgX",1),D(2),Ln("left",r.slider==null?null:r.slider.h,"px"),D(),Ln("display",(r.cpColorMode||1)===2?"block":"none"),N("rgX",1),D(2),Ln("right",r.slider==null?null:r.slider.v,"px"),D(),Ln("display",r.cpAlphaChannel==="disabled"?"none":"block")("background-color",r.alphaSliderColor),N("rgX",1),D(2),Ln("left",r.slider==null?null:r.slider.a,"px"),D(),N("ngIf",!r.cpDisableInput&&(r.cpColorMode||1)===1),D(),N("ngIf",!r.cpDisableInput&&(r.cpColorMode||1)===1),D(),N("ngIf",!r.cpDisableInput&&(r.cpColorMode||1)===1),D(),N("ngIf",!r.cpDisableInput&&(r.cpColorMode||1)===1),D(),N("ngIf",!r.cpDisableInput&&(r.cpColorMode||1)===2),D(),N("ngIf",!r.cpDisableInput&&(r.cpColorMode||1)===1),D(),N("ngIf",(r.cpPresetColors==null?null:r.cpPresetColors.length)||r.cpAddColorButton),D(),N("ngIf",r.cpOKButton||r.cpCancelButton),D(),N("ngIf",r.cpExtraTemplate))},dependencies:[ni,Mt,Tu,RA,NA],styles:[`.color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:#777 solid 1px;cursor:default;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff}.color-picker *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .arrow{position:absolute;z-index:999999;width:0;height:0;border-style:solid}.color-picker .arrow.arrow-top{left:8px;border-width:10px 5px;border-color:#777 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-bottom{top:-20px;left:8px;border-width:10px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #777 rgba(0,0,0,0)}.color-picker .arrow.arrow-top-left,.color-picker .arrow.arrow-left-top{right:-21px;bottom:8px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-top-right,.color-picker .arrow.arrow-right-top{bottom:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom,.color-picker .arrow.arrow-bottom-left{top:8px;right:-21px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom,.color-picker .arrow.arrow-bottom-right{top:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .cursor{position:relative;width:16px;height:16px;border:#222 solid 2px;border-radius:50%;cursor:default}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:#a9a9a9 solid 1px;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;padding:1px;border:#a9a9a9 solid 1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;-webkit-flex:1;-ms-flex:1;flex:1;padding:1px;margin:0 8px 0 0;border:#a9a9a9 solid 1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:16px;height:24px;background-size:8px 16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==)}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:transparent}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class:before{content:"x";position:relative;bottom:3.5px;display:inline-block;font-size:10px}.color-picker .eyedropper-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);fill:#fff;mix-blend-mode:exclusion}
`],encapsulation:2})}return n})(),BA=!1,GR=(()=>{class n{injector;cfr;appRef;vcRef;elRef;_service;dialog;dialogCreated=!1;ignoreChanges=!1;cmpRef;viewAttachedToAppRef=!1;colorPicker;cpWidth="230px";cpHeight="auto";cpToggle=!1;cpDisabled=!1;cpIgnoredElements=[];cpFallbackColor="";cpColorMode="color";cpCmykEnabled=!1;cpOutputFormat="auto";cpAlphaChannel="enabled";cpDisableInput=!1;cpDialogDisplay="popup";cpSaveClickOutside=!0;cpCloseClickOutside=!0;cpUseRootViewContainer=!1;cpPosition="auto";cpPositionOffset="0%";cpPositionRelativeToArrow=!1;cpOKButton=!1;cpOKButtonText="OK";cpOKButtonClass="cp-ok-button-class";cpCancelButton=!1;cpCancelButtonText="Cancel";cpCancelButtonClass="cp-cancel-button-class";cpEyeDropper=!1;cpPresetLabel="Preset colors";cpPresetColors;cpPresetColorsClass="cp-preset-colors-class";cpMaxPresetColorsLength=6;cpPresetEmptyMessage="No colors added";cpPresetEmptyMessageClass="preset-empty-message";cpAddColorButton=!1;cpAddColorButtonText="Add color";cpAddColorButtonClass="cp-add-color-button-class";cpRemoveColorButtonClass="cp-remove-color-button-class";cpArrowPosition=0;cpExtraTemplate;cpInputChange=new be(!0);cpToggleChange=new be(!0);cpSliderChange=new be(!0);cpSliderDragEnd=new be(!0);cpSliderDragStart=new be(!0);colorPickerOpen=new be(!0);colorPickerClose=new be(!0);colorPickerCancel=new be(!0);colorPickerSelect=new be(!0);colorPickerChange=new be(!1);cpCmykColorChange=new be(!0);cpPresetColorsChange=new be(!0);handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(e){this.inputChange(e)}constructor(e,i,r,s,a,d){this.injector=e,this.cfr=i,this.appRef=r,this.vcRef=s,this.elRef=a,this._service=d}ngOnDestroy(){this.cmpRef!=null&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&(this.cpDialogDisplay==="inline"&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&this.cpDialogDisplay!=="inline"&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&(this.cmpRef.instance.cpAlphaChannel=this.cpAlphaChannel,this.dialog.openDialog(this.colorPicker));else{let e=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&this.cpDialogDisplay!=="inline"){let r=this.appRef.componentTypes[0],s=this.injector.get(r,Xo.NULL);s!==Xo.NULL?(e=s.vcRef||s.viewContainerRef||this.vcRef,BA&&e===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor.")):this.viewAttachedToAppRef=!0}let i=this.cfr.resolveComponentFactory(FA);if(this.viewAttachedToAppRef)this.cmpRef=i.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{let r=Xo.create({providers:[],parent:e.injector});this.cmpRef=e.createComponent(i,0,r,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.cpEyeDropper,this.elRef,this.cpExtraTemplate),this.dialog=this.cmpRef.instance,this.vcRef!==e&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&this.cpDialogDisplay==="popup"&&this.dialog.closeDialog()}cmykChanged(e){this.cpCmykColorChange.emit(e)}stateChanged(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(e,i=!0){this.ignoreChanges=i,this.colorPickerChange.emit(e)}colorSelected(e){this.colorPickerSelect.emit(e)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){let e=this.elRef.nativeElement,i=this.cpIgnoredElements.filter(r=>r===e);!this.cpDisabled&&!i.length&&(typeof document<"u"&&e===document.activeElement?this.openDialog():!this.dialog||!this.dialog.show?this.openDialog():this.closeDialog())}inputChange(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(e){this.cpInputChange.emit(e)}sliderChanged(e){this.cpSliderChange.emit(e)}sliderDragEnd(e){this.cpSliderDragEnd.emit(e)}sliderDragStart(e){this.cpSliderDragStart.emit(e)}presetColorsChanged(e){this.cpPresetColorsChange.emit(e)}static \u0275fac=function(i){return new(i||n)(Fe(Xo),Fe(Mg),Fe(xu),Fe(Ag),Fe(kn),Fe(x1))};static \u0275dir=Zr({type:n,selectors:[["","colorPicker",""]],hostBindings:function(i,r){i&1&&he("click",function(){return r.handleClick()})("focus",function(){return r.handleFocus()})("input",function(a){return r.handleInput(a)})},inputs:{colorPicker:"colorPicker",cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpEyeDropper:"cpEyeDropper",cpPresetLabel:"cpPresetLabel",cpPresetColors:"cpPresetColors",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",cpArrowPosition:"cpArrowPosition",cpExtraTemplate:"cpExtraTemplate"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],standalone:!1,features:[An]})}return n})(),w1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=jn({type:n});static \u0275inj=Wn({imports:[Pt]})}return n})();var sa=function(n){return n.Range="range",n.Steps="steps",n.Positions="positions",n.Count="count",n.Values="values",n}(sa||{}),Ni=function(n){return n[n.None=-1]="None",n[n.NoValue=0]="NoValue",n[n.LargeValue=1]="LargeValue",n[n.SmallValue=2]="SmallValue",n}(Ni||{});function VA(n){return $d(n)&&typeof n.from=="function"}function $d(n){return typeof n=="object"&&typeof n.to=="function"}function S1(n){n.parentElement.removeChild(n)}function vm(n){return n!=null}function T1(n){n.preventDefault()}function zA(n){return n.filter(function(t){return this[t]?!1:this[t]=!0},{})}function HA(n,t){return Math.round(n/t)*t}function GA(n,t){var e=n.getBoundingClientRect(),i=n.ownerDocument,r=i.documentElement,s=A1(i);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(s.x=0),t?e.top+s.y-r.clientTop:e.left+s.x-r.clientLeft}function Nr(n){return typeof n=="number"&&!isNaN(n)&&isFinite(n)}function I1(n,t,e){e>0&&(ai(n,t),setTimeout(function(){Qd(n,t)},e))}function O1(n){return Math.max(Math.min(n,100),0)}function ep(n){return Array.isArray(n)?n:[n]}function UA(n){n=String(n);var t=n.split(".");return t.length>1?t[1].length:0}function ai(n,t){n.classList&&!/\s/.test(t)?n.classList.add(t):n.className+=" "+t}function Qd(n,t){n.classList&&!/\s/.test(t)?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function qA(n,t){return n.classList?n.classList.contains(t):new RegExp("\\b"+t+"\\b").test(n.className)}function A1(n){var t=window.pageXOffset!==void 0,e=(n.compatMode||"")==="CSS1Compat",i=t?window.pageXOffset:e?n.documentElement.scrollLeft:n.body.scrollLeft,r=t?window.pageYOffset:e?n.documentElement.scrollTop:n.body.scrollTop;return{x:i,y:r}}function WA(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function jA(){var n=!1;try{var t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,t)}catch{}return n}function ZA(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function bm(n,t){return 100/(t-n)}function ym(n,t,e){return t*100/(n[e+1]-n[e])}function KA(n,t){return ym(n,n[0]<0?t+Math.abs(n[0]):t-n[0],0)}function YA(n,t){return t*(n[1]-n[0])/100+n[0]}function Rc(n,t){for(var e=1;n>=t[e];)e+=1;return e}function XA(n,t,e){if(e>=n.slice(-1)[0])return 100;var i=Rc(e,n),r=n[i-1],s=n[i],a=t[i-1],d=t[i];return a+KA([r,s],e)/bm(a,d)}function JA(n,t,e){if(e>=100)return n.slice(-1)[0];var i=Rc(e,t),r=n[i-1],s=n[i],a=t[i-1],d=t[i];return YA([r,s],(e-a)*bm(a,d))}function QA(n,t,e,i){if(i===100)return i;var r=Rc(i,n),s=n[r-1],a=n[r];return e?i-s>(a-s)/2?a:s:t[r-1]?n[r-1]+HA(i-n[r-1],t[r-1]):i}var $A=function(){function n(t,e,i){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.snap=e;var r,s=[];for(Object.keys(t).forEach(function(a){s.push([ep(t[a]),a])}),s.sort(function(a,d){return a[0][0]-d[0][0]}),r=0;r<s.length;r++)this.handleEntryPoint(s[r][1],s[r][0]);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)this.handleStepPoint(r,this.xNumSteps[r])}return n.prototype.getDistance=function(t){for(var e=[],i=0;i<this.xNumSteps.length-1;i++)e[i]=ym(this.xVal,t,i);return e},n.prototype.getAbsoluteDistance=function(t,e,i){var r=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[r+1];)r++;else t===this.xPct[this.xPct.length-1]&&(r=this.xPct.length-2);!i&&t===this.xPct[r+1]&&r++,e===null&&(e=[]);var s,a=1,d=e[r],h=0,m=0,y=0,E=0;for(i?s=(t-this.xPct[r])/(this.xPct[r+1]-this.xPct[r]):s=(this.xPct[r+1]-t)/(this.xPct[r+1]-this.xPct[r]);d>0;)h=this.xPct[r+1+E]-this.xPct[r+E],e[r+E]*a+100-s*100>100?(m=h*s,a=(d-100*s)/e[r+E],s=1):(m=e[r+E]*h/100*a,a=0),i?(y=y-m,this.xPct.length+E>=1&&E--):(y=y+m,this.xPct.length-E>=1&&E++),d=e[r+E]*a;return t+y},n.prototype.toStepping=function(t){return t=XA(this.xVal,this.xPct,t),t},n.prototype.fromStepping=function(t){return JA(this.xVal,this.xPct,t)},n.prototype.getStep=function(t){return t=QA(this.xPct,this.xSteps,this.snap,t),t},n.prototype.getDefaultStep=function(t,e,i){var r=Rc(t,this.xPct);return(t===100||e&&t===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/i},n.prototype.getNearbySteps=function(t){var e=Rc(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},n.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(UA);return Math.max.apply(null,t)},n.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},n.prototype.convert=function(t){return this.getStep(this.toStepping(t))},n.prototype.handleEntryPoint=function(t,e){var i;if(t==="min"?i=0:t==="max"?i=100:i=parseFloat(t),!Nr(i)||!Nr(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(i),this.xVal.push(e[0]);var r=Number(e[1]);i?this.xSteps.push(isNaN(r)?!1:r):isNaN(r)||(this.xSteps[0]=r),this.xHighestCompleteStep.push(0)},n.prototype.handleStepPoint=function(t,e){if(e){if(this.xVal[t]===this.xVal[t+1]){this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t];return}this.xSteps[t]=ym([this.xVal[t],this.xVal[t+1]],e,0)/bm(this.xPct[t],this.xPct[t+1]);var i=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],r=Math.ceil(Number(i.toFixed(3))-1),s=this.xVal[t]+this.xNumSteps[t]*r;this.xHighestCompleteStep[t]=s}},n}(),M1={to:function(n){return n===void 0?"":n.toFixed(2)},from:Number},ek={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},ms={tooltips:".__tooltips",aria:".__aria"};function tk(n,t){if(!Nr(t))throw new Error("noUiSlider: 'step' is not numeric.");n.singleStep=t}function nk(n,t){if(!Nr(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");n.keyboardPageMultiplier=t}function ik(n,t){if(!Nr(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");n.keyboardMultiplier=t}function rk(n,t){if(!Nr(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");n.keyboardDefaultStep=t}function ok(n,t){if(typeof t!="object"||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(t.min===void 0||t.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");n.spectrum=new $A(t,n.snap||!1,n.singleStep)}function sk(n,t){if(t=ep(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");n.handles=t.length,n.start=t}function ak(n,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");n.snap=t}function lk(n,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");n.animate=t}function ck(n,t){if(typeof t!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");n.animationDuration=t}function k1(n,t){var e=[!1],i;if(t==="lower"?t=[!0,!1]:t==="upper"&&(t=[!1,!0]),t===!0||t===!1){for(i=1;i<n.handles;i++)e.push(t);e.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==n.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");e=t}n.connect=e}function uk(n,t){switch(t){case"horizontal":n.ort=0;break;case"vertical":n.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function P1(n,t){if(!Nr(t))throw new Error("noUiSlider: 'margin' option must be numeric.");t!==0&&(n.margin=n.spectrum.getDistance(t))}function dk(n,t){if(!Nr(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(n.limit=n.spectrum.getDistance(t),!n.limit||n.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function pk(n,t){var e;if(!Nr(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&!(t.length===2||Nr(t[0])||Nr(t[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(t!==0){for(Array.isArray(t)||(t=[t,t]),n.padding=[n.spectrum.getDistance(t[0]),n.spectrum.getDistance(t[1])],e=0;e<n.spectrum.xNumSteps.length-1;e++)if(n.padding[0][e]<0||n.padding[1][e]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var i=t[0]+t[1],r=n.spectrum.xVal[0],s=n.spectrum.xVal[n.spectrum.xVal.length-1];if(i/(s-r)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function fk(n,t){switch(t){case"ltr":n.dir=0;break;case"rtl":n.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function hk(n,t){if(typeof t!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var e=t.indexOf("tap")>=0,i=t.indexOf("drag")>=0,r=t.indexOf("fixed")>=0,s=t.indexOf("snap")>=0,a=t.indexOf("hover")>=0,d=t.indexOf("unconstrained")>=0,h=t.indexOf("invert-connects")>=0,m=t.indexOf("drag-all")>=0,y=t.indexOf("smooth-steps")>=0;if(r){if(n.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");P1(n,n.start[1]-n.start[0])}if(h&&n.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(d&&(n.margin||n.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");n.events={tap:e||s,drag:i,dragAll:m,smoothSteps:y,fixed:r,snap:s,hover:a,unconstrained:d,invertConnects:h}}function mk(n,t){if(t!==!1)if(t===!0||$d(t)){n.tooltips=[];for(var e=0;e<n.handles;e++)n.tooltips.push(t)}else{if(t=ep(t),t.length!==n.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.forEach(function(i){if(typeof i!="boolean"&&!$d(i))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),n.tooltips=t}}function gk(n,t){if(t.length!==n.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");n.handleAttributes=t}function _k(n,t){if(!$d(t))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");n.ariaFormat=t}function vk(n,t){if(!VA(t))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");n.format=t}function yk(n,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");n.keyboardSupport=t}function bk(n,t){n.documentElement=t}function Ck(n,t){if(typeof t!="string"&&t!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");n.cssPrefix=t}function Ek(n,t){if(typeof t!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof n.cssPrefix=="string"?(n.cssClasses={},Object.keys(t).forEach(function(e){n.cssClasses[e]=n.cssPrefix+t[e]})):n.cssClasses=t}function D1(n){var t={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:M1,format:M1},e={step:{r:!1,t:tk},keyboardPageMultiplier:{r:!1,t:nk},keyboardMultiplier:{r:!1,t:ik},keyboardDefaultStep:{r:!1,t:rk},start:{r:!0,t:sk},connect:{r:!0,t:k1},direction:{r:!0,t:fk},snap:{r:!1,t:ak},animate:{r:!1,t:lk},animationDuration:{r:!1,t:ck},range:{r:!0,t:ok},orientation:{r:!1,t:uk},margin:{r:!1,t:P1},limit:{r:!1,t:dk},padding:{r:!1,t:pk},behaviour:{r:!0,t:hk},ariaFormat:{r:!1,t:_k},format:{r:!1,t:vk},tooltips:{r:!1,t:mk},keyboardSupport:{r:!0,t:yk},documentElement:{r:!1,t:bk},cssPrefix:{r:!0,t:Ck},cssClasses:{r:!0,t:Ek},handleAttributes:{r:!1,t:gk}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:ek,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};n.format&&!n.ariaFormat&&(n.ariaFormat=n.format),Object.keys(e).forEach(function(h){if(!vm(n[h])&&i[h]===void 0){if(e[h].r)throw new Error("noUiSlider: '"+h+"' is required.");return}e[h].t(t,vm(n[h])?n[h]:i[h])}),t.pips=n.pips;var r=document.createElement("div"),s=r.style.msTransform!==void 0,a=r.style.transform!==void 0;t.transformRule=a?"transform":s?"msTransform":"webkitTransform";var d=[["left","top"],["right","bottom"]];return t.style=d[t.dir][t.ort],t}function xk(n,t,e){var i=WA(),r=ZA(),s=r&&jA(),a=n,d,h,m,y,E,O,T=t.spectrum,S=[],F=[],G=[],j=0,oe={},ve=!1,ee=n.ownerDocument,ye=t.documentElement||ee.documentElement,Ae=ee.body,Ze=ee.dir==="rtl"||t.ort===1?0:100;function je(P,H){var W=ee.createElement("div");return H&&ai(W,H),P.appendChild(W),W}function se(P,H){var W=je(P,t.cssClasses.origin),ce=je(W,t.cssClasses.handle);if(je(ce,t.cssClasses.touchArea),ce.setAttribute("data-handle",String(H)),t.keyboardSupport&&(ce.setAttribute("tabindex","0"),ce.addEventListener("keydown",function(xe){return Ot(xe,H)})),t.handleAttributes!==void 0){var Te=t.handleAttributes[H];Object.keys(Te).forEach(function(xe){ce.setAttribute(xe,Te[xe])})}return ce.setAttribute("role","slider"),ce.setAttribute("aria-orientation",t.ort?"vertical":"horizontal"),H===0?ai(ce,t.cssClasses.handleLower):H===t.handles-1&&ai(ce,t.cssClasses.handleUpper),W.handle=ce,W}function ge(P,H){return H?je(P,t.cssClasses.connect):!1}function Le(P,H){h=je(H,t.cssClasses.connects),m=[],y=[],y.push(ge(h,P[0]));for(var W=0;W<t.handles;W++)m.push(se(H,W)),G[W]=W,y.push(ge(h,P[W+1]))}function Ie(P){ai(P,t.cssClasses.target),t.dir===0?ai(P,t.cssClasses.ltr):ai(P,t.cssClasses.rtl),t.ort===0?ai(P,t.cssClasses.horizontal):ai(P,t.cssClasses.vertical);var H=getComputedStyle(P).direction;return H==="rtl"?ai(P,t.cssClasses.textDirectionRtl):ai(P,t.cssClasses.textDirectionLtr),je(P,t.cssClasses.base)}function et(P,H){return!t.tooltips||!t.tooltips[H]?!1:je(P.firstChild,t.cssClasses.tooltip)}function Qe(){return a.hasAttribute("disabled")}function pt(P){var H=m[P];return H.hasAttribute("disabled")}function Pe(P){P!=null?(m[P].setAttribute("disabled",""),m[P].handle.removeAttribute("tabindex")):(a.setAttribute("disabled",""),m.forEach(function(H){H.handle.removeAttribute("tabindex")}))}function Et(P){P!=null?(m[P].removeAttribute("disabled"),m[P].handle.setAttribute("tabindex","0")):(a.removeAttribute("disabled"),m.forEach(function(H){H.removeAttribute("disabled"),H.handle.setAttribute("tabindex","0")}))}function ke(){O&&(xt("update"+ms.tooltips),O.forEach(function(P){P&&S1(P)}),O=null)}function De(){ke(),O=m.map(et),Bt("update"+ms.tooltips,function(P,H,W){if(!(!O||!t.tooltips)&&O[H]!==!1){var ce=P[H];t.tooltips[H]!==!0&&(ce=t.tooltips[H].to(W[H])),O[H].innerHTML=ce}})}function vt(){xt("update"+ms.aria),Bt("update"+ms.aria,function(P,H,W,ce,Te){G.forEach(function(xe){var Je=m[xe],we=qt(F,xe,0,!0,!0,!0),Ce=qt(F,xe,100,!0,!0,!0),Ht=Te[xe],Jt=String(t.ariaFormat.to(W[xe]));we=T.fromStepping(we).toFixed(1),Ce=T.fromStepping(Ce).toFixed(1),Ht=T.fromStepping(Ht).toFixed(1),Je.children[0].setAttribute("aria-valuemin",we),Je.children[0].setAttribute("aria-valuemax",Ce),Je.children[0].setAttribute("aria-valuenow",Ht),Je.children[0].setAttribute("aria-valuetext",Jt)})})}function He(P){if(P.mode===sa.Range||P.mode===sa.Steps)return T.xVal;if(P.mode===sa.Count){if(P.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var H=P.values-1,W=100/H,ce=[];H--;)ce[H]=H*W;return ce.push(100),de(ce,P.stepped)}return P.mode===sa.Positions?de(P.values,P.stepped):P.mode===sa.Values?P.stepped?P.values.map(function(Te){return T.fromStepping(T.getStep(T.toStepping(Te)))}):P.values:[]}function de(P,H){return P.map(function(W){return T.fromStepping(H?T.getStep(W):W)})}function J(P){function H(Ht,Jt){return Number((Ht+Jt).toFixed(7))}var W=He(P),ce={},Te=T.xVal[0],xe=T.xVal[T.xVal.length-1],Je=!1,we=!1,Ce=0;return W=zA(W.slice().sort(function(Ht,Jt){return Ht-Jt})),W[0]!==Te&&(W.unshift(Te),Je=!0),W[W.length-1]!==xe&&(W.push(xe),we=!0),W.forEach(function(Ht,Jt){var nn,Vt,hn,wn=Ht,cn=W[Jt+1],In,aa,ao,Lo,hl,lo,ml,co=P.mode===sa.Steps;for(co&&(nn=T.xNumSteps[Jt]),nn||(nn=cn-wn),cn===void 0&&(cn=wn),nn=Math.max(nn,1e-7),Vt=wn;Vt<=cn;Vt=H(Vt,nn)){for(In=T.toStepping(Vt),aa=In-Ce,hl=aa/(P.density||1),lo=Math.round(hl),ml=aa/lo,hn=1;hn<=lo;hn+=1)ao=Ce+hn*ml,ce[ao.toFixed(5)]=[T.fromStepping(ao),0];Lo=W.indexOf(Vt)>-1?Ni.LargeValue:co?Ni.SmallValue:Ni.NoValue,!Jt&&Je&&Vt!==cn&&(Lo=0),Vt===cn&&we||(ce[In.toFixed(5)]=[Vt,Lo]),Ce=In}}),ce}function ae(P,H,W){var ce,Te,xe=ee.createElement("div"),Je=(ce={},ce[Ni.None]="",ce[Ni.NoValue]=t.cssClasses.valueNormal,ce[Ni.LargeValue]=t.cssClasses.valueLarge,ce[Ni.SmallValue]=t.cssClasses.valueSub,ce),we=(Te={},Te[Ni.None]="",Te[Ni.NoValue]=t.cssClasses.markerNormal,Te[Ni.LargeValue]=t.cssClasses.markerLarge,Te[Ni.SmallValue]=t.cssClasses.markerSub,Te),Ce=[t.cssClasses.valueHorizontal,t.cssClasses.valueVertical],Ht=[t.cssClasses.markerHorizontal,t.cssClasses.markerVertical];ai(xe,t.cssClasses.pips),ai(xe,t.ort===0?t.cssClasses.pipsHorizontal:t.cssClasses.pipsVertical);function Jt(Vt,hn){var wn=hn===t.cssClasses.value,cn=wn?Ce:Ht,In=wn?Je:we;return hn+" "+cn[t.ort]+" "+In[Vt]}function nn(Vt,hn,wn){if(wn=H?H(hn,wn):wn,wn!==Ni.None){var cn=je(xe,!1);cn.className=Jt(wn,t.cssClasses.marker),cn.style[t.style]=Vt+"%",wn>Ni.NoValue&&(cn=je(xe,!1),cn.className=Jt(wn,t.cssClasses.value),cn.setAttribute("data-value",String(hn)),cn.style[t.style]=Vt+"%",cn.innerHTML=String(W.to(hn)))}}return Object.keys(P).forEach(function(Vt){nn(Vt,P[Vt][0],P[Vt][1])}),xe}function me(){E&&(S1(E),E=null)}function ie(P){me();var H=J(P),W=P.filter,ce=P.format||{to:function(Te){return String(Math.round(Te))}};return E=a.appendChild(ae(H,W,ce)),E}function Ge(){var P=d.getBoundingClientRect(),H="offset"+["Width","Height"][t.ort];return t.ort===0?P.width||d[H]:P.height||d[H]}function Oe(P,H,W,ce){var Te=function(Je){var we=st(Je,ce.pageOffset,ce.target||H);if(!we||Qe()&&!ce.doNotReject||qA(a,t.cssClasses.tap)&&!ce.doNotReject||P===i.start&&we.buttons!==void 0&&we.buttons>1||ce.hover&&we.buttons)return!1;s||we.preventDefault(),we.calcPoint=we.points[t.ort],W(we,ce)},xe=[];return P.split(" ").forEach(function(Je){H.addEventListener(Je,Te,s?{passive:!0}:!1),xe.push([Je,Te])}),xe}function st(P,H,W){var ce=P.type.indexOf("touch")===0,Te=P.type.indexOf("mouse")===0,xe=P.type.indexOf("pointer")===0,Je=0,we=0;if(P.type.indexOf("MSPointer")===0&&(xe=!0),P.type==="mousedown"&&!P.buttons&&!P.touches)return!1;if(ce){var Ce=function(nn){var Vt=nn.target;return Vt===W||W.contains(Vt)||P.composed&&P.composedPath().shift()===W};if(P.type==="touchstart"){var Ht=Array.prototype.filter.call(P.touches,Ce);if(Ht.length>1)return!1;Je=Ht[0].pageX,we=Ht[0].pageY}else{var Jt=Array.prototype.find.call(P.changedTouches,Ce);if(!Jt)return!1;Je=Jt.pageX,we=Jt.pageY}}return H=H||A1(ee),(Te||xe)&&(Je=P.clientX+H.x,we=P.clientY+H.y),P.pageOffset=H,P.points=[Je,we],P.cursor=Te||xe,P}function ut(P){var H=P-GA(d,t.ort),W=H*100/Ge();return W=O1(W),t.dir?100-W:W}function Dt(P){var H=100,W=!1;return m.forEach(function(ce,Te){if(!pt(Te)){var xe=F[Te],Je=Math.abs(xe-P),we=Je===100&&H===100,Ce=Je<H,Ht=Je<=H&&P>xe;(Ce||Ht||we)&&(W=Te,H=Je)}}),W}function gt(P,H){P.type==="mouseout"&&P.target.nodeName==="HTML"&&P.relatedTarget===null&&at(P,H)}function Zt(P,H){if(navigator.appVersion.indexOf("MSIE 9")===-1&&P.buttons===0&&H.buttonsProperty!==0)return at(P,H);var W=(t.dir?-1:1)*(P.calcPoint-H.startCalcPoint),ce=W*100/H.baseSize;Fi(W>0,ce,H.locations,H.handleNumbers,H.connect)}function at(P,H){H.handle&&(Qd(H.handle,t.cssClasses.active),j-=1),H.listeners.forEach(function(W){ye.removeEventListener(W[0],W[1])}),j===0&&(Qd(a,t.cssClasses.drag),Bi(),P.cursor&&(Ae.style.cursor="",Ae.removeEventListener("selectstart",T1))),t.events.smoothSteps&&(H.handleNumbers.forEach(function(W){Jn(W,F[W],!0,!0,!1,!1)}),H.handleNumbers.forEach(function(W){ft("update",W)})),H.handleNumbers.forEach(function(W){ft("change",W),ft("set",W),ft("end",W)})}function Yt(P,H){if(!H.handleNumbers.some(pt)){var W;if(H.handleNumbers.length===1){var ce=m[H.handleNumbers[0]];W=ce.children[0],j+=1,ai(W,t.cssClasses.active)}P.stopPropagation();var Te=[],xe=Oe(i.move,ye,Zt,{target:P.target,handle:W,connect:H.connect,listeners:Te,startCalcPoint:P.calcPoint,baseSize:Ge(),pageOffset:P.pageOffset,handleNumbers:H.handleNumbers,buttonsProperty:P.buttons,locations:F.slice()}),Je=Oe(i.end,ye,at,{target:P.target,handle:W,listeners:Te,doNotReject:!0,handleNumbers:H.handleNumbers}),we=Oe("mouseout",ye,gt,{target:P.target,handle:W,listeners:Te,doNotReject:!0,handleNumbers:H.handleNumbers});Te.push.apply(Te,xe.concat(Je,we)),P.cursor&&(Ae.style.cursor=getComputedStyle(P.target).cursor,m.length>1&&ai(a,t.cssClasses.drag),Ae.addEventListener("selectstart",T1,!1)),H.handleNumbers.forEach(function(Ce){ft("start",Ce)})}}function pn(P){P.stopPropagation();var H=ut(P.calcPoint),W=Dt(H);W!==!1&&(t.events.snap||I1(a,t.cssClasses.tap,t.animationDuration),Jn(W,H,!0,!0),Bi(),ft("slide",W,!0),ft("update",W,!0),t.events.snap?Yt(P,{handleNumbers:[W]}):(ft("change",W,!0),ft("set",W,!0)))}function fn(P){var H=ut(P.calcPoint),W=T.getStep(H),ce=T.fromStepping(W);Object.keys(oe).forEach(function(Te){Te.split(".")[0]==="hover"&&oe[Te].forEach(function(xe){xe.call(Vr,ce)})})}function Ot(P,H){if(Qe()||pt(H))return!1;var W=["Left","Right"],ce=["Down","Up"],Te=["PageDown","PageUp"],xe=["Home","End"];t.dir&&!t.ort?W.reverse():t.ort&&!t.dir&&(ce.reverse(),Te.reverse());var Je=P.key.replace("Arrow",""),we=Je===Te[0],Ce=Je===Te[1],Ht=Je===ce[0]||Je===W[0]||we,Jt=Je===ce[1]||Je===W[1]||Ce,nn=Je===xe[0],Vt=Je===xe[1];if(!Ht&&!Jt&&!nn&&!Vt)return!0;P.preventDefault();var hn;if(Jt||Ht){var wn=Ht?0:1,cn=nr(H),In=cn[wn];if(In===null)return!1;In===!1&&(In=T.getDefaultStep(F[H],Ht,t.keyboardDefaultStep)),Ce||we?In*=t.keyboardPageMultiplier:In*=t.keyboardMultiplier,In=Math.max(In,1e-7),In=(Ht?-1:1)*In,hn=S[H]+In}else Vt?hn=t.spectrum.xVal[t.spectrum.xVal.length-1]:hn=t.spectrum.xVal[0];return Jn(H,T.toStepping(hn),!0,!0),ft("slide",H),ft("update",H),ft("change",H),ft("set",H),!1}function zt(P){P.fixed||m.forEach(function(H,W){Oe(i.start,H.children[0],Yt,{handleNumbers:[W]})}),P.tap&&Oe(i.start,d,pn,{}),P.hover&&Oe(i.move,d,fn,{hover:!0}),P.drag&&y.forEach(function(H,W){if(!(H===!1||W===0||W===y.length-1)){var ce=m[W-1],Te=m[W],xe=[H],Je=[ce,Te],we=[W-1,W];ai(H,t.cssClasses.draggable),P.fixed&&(xe.push(ce.children[0]),xe.push(Te.children[0])),P.dragAll&&(Je=m,we=G),xe.forEach(function(Ce){Oe(i.start,Ce,Yt,{handles:Je,handleNumbers:we,connect:H})})}})}function Bt(P,H){oe[P]=oe[P]||[],oe[P].push(H),P.split(".")[0]==="update"&&m.forEach(function(W,ce){ft("update",ce)})}function Xt(P){return P===ms.aria||P===ms.tooltips}function xt(P){var H=P&&P.split(".")[0],W=H?P.substring(H.length):P;Object.keys(oe).forEach(function(ce){var Te=ce.split(".")[0],xe=ce.substring(Te.length);(!H||H===Te)&&(!W||W===xe)&&(!Xt(xe)||W===xe)&&delete oe[ce]})}function ft(P,H,W){Object.keys(oe).forEach(function(ce){var Te=ce.split(".")[0];P===Te&&oe[ce].forEach(function(xe){xe.call(Vr,S.map(t.format.to),H,S.slice(),W||!1,F.slice(),Vr)})})}function qt(P,H,W,ce,Te,xe,Je){var we;return m.length>1&&!t.events.unconstrained&&(ce&&H>0&&(we=T.getAbsoluteDistance(P[H-1],t.margin,!1),W=Math.max(W,we)),Te&&H<m.length-1&&(we=T.getAbsoluteDistance(P[H+1],t.margin,!0),W=Math.min(W,we))),m.length>1&&t.limit&&(ce&&H>0&&(we=T.getAbsoluteDistance(P[H-1],t.limit,!1),W=Math.min(W,we)),Te&&H<m.length-1&&(we=T.getAbsoluteDistance(P[H+1],t.limit,!0),W=Math.max(W,we))),t.padding&&(H===0&&(we=T.getAbsoluteDistance(0,t.padding[0],!1),W=Math.max(W,we)),H===m.length-1&&(we=T.getAbsoluteDistance(100,t.padding[1],!0),W=Math.min(W,we))),Je||(W=T.getStep(W)),W=O1(W),W===P[H]&&!xe?!1:W}function bi(P,H){var W=t.ort;return(W?H:P)+", "+(W?P:H)}function Fi(P,H,W,ce,Te){var xe=W.slice(),Je=ce[0],we=t.events.smoothSteps,Ce=[!P,P],Ht=[P,!P];ce=ce.slice(),P&&ce.reverse(),ce.length>1?ce.forEach(function(nn,Vt){var hn=qt(xe,nn,xe[nn]+H,Ce[Vt],Ht[Vt],!1,we);hn===!1?H=0:(H=hn-xe[nn],xe[nn]=hn)}):Ce=Ht=[!0];var Jt=!1;ce.forEach(function(nn,Vt){Jt=Jn(nn,W[nn]+H,Ce[Vt],Ht[Vt],!1,we)||Jt}),Jt&&(ce.forEach(function(nn){ft("update",nn),ft("slide",nn)}),Te!=null&&ft("drag",Je))}function pr(P,H){return t.dir?100-P-H:P}function fr(P,H){F[P]=H,S[P]=T.fromStepping(H);var W=pr(H,0)-Ze,ce="translate("+bi(W+"%","0")+")";if(m[P].style[t.transformRule]=ce,t.events.invertConnects&&F.length>1){var Te=F.every(function(xe,Je,we){return Je===0||xe>=we[Je-1]});if(ve!==!Te){Br();return}}At(P),At(P+1),ve&&(At(P-1),At(P+2))}function Bi(){G.forEach(function(P){var H=F[P]>50?-1:1,W=3+(m.length+H*P);m[P].style.zIndex=String(W)})}function Jn(P,H,W,ce,Te,xe){return Te||(H=qt(F,P,H,W,ce,!1,xe)),H===!1?!1:(fr(P,H),!0)}function At(P){if(y[P]){var H=F.slice();ve&&H.sort(function(we,Ce){return we-Ce});var W=0,ce=100;P!==0&&(W=H[P-1]),P!==y.length-1&&(ce=H[P]);var Te=ce-W,xe="translate("+bi(pr(W,Te)+"%","0")+")",Je="scale("+bi(Te/100,"1")+")";y[P].style[t.transformRule]=xe+" "+Je}}function Ci(P,H){return P===null||P===!1||P===void 0||(typeof P=="number"&&(P=String(P)),P=t.format.from(P),P!==!1&&(P=T.toStepping(P)),P===!1||isNaN(P))?F[H]:P}function li(P,H,W){var ce=ep(P),Te=F[0]===void 0;H=H===void 0?!0:H,t.animate&&!Te&&I1(a,t.cssClasses.tap,t.animationDuration),G.forEach(function(we){Jn(we,Ci(ce[we],we),!0,!1,W)});var xe=G.length===1?0:1;if(Te&&T.hasNoSize()&&(W=!0,F[0]=0,G.length>1)){var Je=100/(G.length-1);G.forEach(function(we){F[we]=we*Je})}for(;xe<G.length;++xe)G.forEach(function(we){Jn(we,F[we],!0,!0,W)});Bi(),G.forEach(function(we){ft("update",we),ce[we]!==null&&H&&ft("set",we)})}function so(P){li(t.start,P)}function Vi(P,H,W,ce){if(P=Number(P),!(P>=0&&P<G.length))throw new Error("noUiSlider: invalid handle number, got: "+P);Jn(P,Ci(H,P),!0,!0,ce),ft("update",P),W&&ft("set",P)}function Fr(P){if(P===void 0&&(P=!1),P)return S.length===1?S[0]:S.slice(0);var H=S.map(t.format.to);return H.length===1?H[0]:H}function Fn(){for(xt(ms.aria),xt(ms.tooltips),Object.keys(t.cssClasses).forEach(function(P){Qd(a,t.cssClasses[P])});a.firstChild;)a.removeChild(a.firstChild);delete a.noUiSlider}function nr(P){var H=F[P],W=T.getNearbySteps(H),ce=S[P],Te=W.thisStep.step,xe=null;if(t.snap)return[ce-W.stepBefore.startValue||null,W.stepAfter.startValue-ce||null];Te!==!1&&ce+Te>W.stepAfter.startValue&&(Te=W.stepAfter.startValue-ce),ce>W.thisStep.startValue?xe=W.thisStep.step:W.stepBefore.step===!1?xe=!1:xe=ce-W.stepBefore.highestStep,H===100?Te=null:H===0&&(xe=null);var Je=T.countStepDecimals();return Te!==null&&Te!==!1&&(Te=Number(Te.toFixed(Je))),xe!==null&&xe!==!1&&(xe=Number(xe.toFixed(Je))),[xe,Te]}function zi(){return G.map(nr)}function ir(P,H){var W=Fr(),ce=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];ce.forEach(function(xe){P[xe]!==void 0&&(e[xe]=P[xe])});var Te=D1(e);ce.forEach(function(xe){P[xe]!==void 0&&(t[xe]=Te[xe])}),T=Te.spectrum,t.margin=Te.margin,t.limit=Te.limit,t.padding=Te.padding,t.pips?ie(t.pips):me(),t.tooltips?De():ke(),F=[],li(vm(P.start)?P.start:W,H),P.connect&&Ei()}function Ei(){for(;h.firstChild;)h.removeChild(h.firstChild);for(var P=0;P<=t.handles;P++)y[P]=ge(h,t.connect[P]),At(P);zt({drag:t.events.drag,fixed:!0})}function Br(){ve=!ve,k1(t,t.connect.map(function(P){return!P})),Ei()}function Do(){d=Ie(a),Le(t.connect,d),zt(t.events),li(t.start),t.pips&&ie(t.pips),t.tooltips&&De(),vt()}Do();var Vr={destroy:Fn,steps:zi,on:Bt,off:xt,get:Fr,set:li,setHandle:Vi,reset:so,disable:Pe,enable:Et,__moveHandles:function(P,H,W){Fi(P,H,F,W)},options:e,updateOptions:ir,target:a,removePips:me,removeTooltips:ke,getPositions:function(){return F.slice()},getTooltips:function(){return O},getOrigins:function(){return m},pips:ie};return Vr}function L1(n,t){if(!n||!n.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+n);if(n.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var e=D1(t),i=xk(n,e,t);return n.noUiSlider=i,i}var Cm=class{to(t){return String(parseFloat(parseFloat(String(t)).toFixed(2)))}from(t){return parseFloat(t)}},Sk=(()=>{class n{constructor(e,i,r){this.ngZone=e,this.el=i,this.renderer=r,this.handles=[],this.config={},this.change=new be(!0),this.update=new be(!0),this.slide=new be(!0),this.set=new be(!0),this.start=new be(!0),this.end=new be(!0),this.onChange=Function.prototype,this.cleanups=[],this.eventHandler=(s,a,d,h)=>{let m=this.toValues(a),y=!1;if(this.value===void 0){this.value=m;return}Array.isArray(m)&&this.value[d]!=m[d]&&(y=!0),!Array.isArray(m)&&this.value!=m&&(y=!0),y&&this.ngZone.run(()=>{s.observers.length>0&&s.emit(m),this.onChange(m)}),Array.isArray(m)?this.value[d]=m[d]:this.value=m},this.defaultKeyHandler=s=>{let a=this.slider.steps(),d=parseInt(s.target.getAttribute("data-handle")),h=1,m=1,y=0,E=0;switch(s.which){case 34:m=this.config.pageSteps;break;case 40:case 37:h=-1,y=a[d][0],s.preventDefault();break;case 33:m=this.config.pageSteps;break;case 38:case 39:y=a[d][1],s.preventDefault();break;default:break}E=h*m*y;let O;Array.isArray(this.value)?(O=[...this.value],O[d]=O[d]+E):O=this.value+E,this.slider.set(O)}}ngOnChanges(e){this.slider&&(e.min||e.max||e.step||e.range)&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.slider.updateOptions({range:Object.assign({},{min:this.min,max:this.max},this.range||{}),step:this.step})})})}ngOnDestroy(){for(this.slider.destroy();this.cleanups.length;)this.cleanups.pop()?.()}toValues(e){let i=e.map(this.config.format.from);return i.length==1?i[0]:i}writeValue(e){this.slider?this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.slider.set(e)})}):e!==null&&(this.value=e,this.createSlider(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){e?this.renderer.setAttribute(this.el.nativeElement.childNodes[0],"disabled","true"):this.renderer.removeAttribute(this.el.nativeElement.childNodes[0],"disabled")}createSlider(e){let i=JSON.parse(JSON.stringify({behaviour:this.behaviour,connect:this.connect,limit:this.limit,start:e,step:this.step,pageSteps:this.pageSteps,keyboard:this.keyboard,onKeydown:this.onKeydown,range:this.range||this.config.range||{min:this.min,max:this.max},tooltips:this.tooltips,snap:this.snap,animate:this.animate}));if(i.tooltips=this.tooltips||this.config.tooltips,i.format=this.format||this.config.format||new Cm,this.ngZone.runOutsideAngular(()=>{this.slider=L1(this.el.nativeElement.querySelector("div"),Object.assign(this.config,i))}),this.handles=[].slice.call(this.el.nativeElement.querySelectorAll(".noUi-handle")),this.config.keyboard){this.config.pageSteps===void 0&&(this.config.pageSteps=10);for(let r of this.handles){r.setAttribute("tabindex",0);let s=this.config.onKeydown||this.defaultKeyHandler;this.ngZone.runOutsideAngular(()=>{this.cleanups.push(this.renderer.listen(r,"keydown",s),this.renderer.listen(r,"click",()=>{r.focus()}))})}}this.slider.on("set",(r,s,a)=>{this.eventHandler(this.set,r,s,a)}),this.slider.on("update",(r,s,a)=>{this.update.observers.length>0&&this.ngZone.run(()=>{this.update.emit(this.toValues(r))})}),this.slider.on("change",(r,s,a)=>{this.change.observers.length>0&&this.ngZone.run(()=>{this.change.emit(this.toValues(r))})}),this.slider.on("slide",(r,s,a)=>{this.eventHandler(this.slide,r,s,a)}),this.slider.on("start",(r,s,a)=>{this.start.observers.length>0&&this.ngZone.run(()=>{this.start.emit(this.toValues(r))})}),this.slider.on("end",(r,s,a)=>{this.end.observers.length>0&&this.ngZone.run(()=>{this.end.emit(this.toValues(r))})})}}return n.\u0275fac=function(e){return new(e||n)(Fe(Wr),Fe(kn),Fe(Wl))},n.\u0275cmp=lt({type:n,selectors:[["nouislider"]],hostVars:2,hostBindings:function(e,i){e&2&&Ki("ng2-nouislider",!0)},inputs:{disabled:"disabled",behaviour:"behaviour",connect:"connect",limit:"limit",min:"min",max:"max",snap:"snap",animate:"animate",range:"range",step:"step",format:"format",pageSteps:"pageSteps",config:"config",keyboard:"keyboard",onKeydown:"onKeydown",tooltips:"tooltips"},outputs:{change:"change",update:"update",slide:"slide",set:"set",start:"start",end:"end"},features:[Oi([{provide:ar,useExisting:Zi(()=>n),multi:!0}]),An],decls:1,vars:1,template:function(e,i){e&1&&Be(0,"div"),e&2&&xr("disabled",i.disabled?!0:void 0)},styles:["[_nghost-%COMP%]{display:block;margin-top:1rem;margin-bottom:1rem}"]}),n})(),R1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jn({type:n}),n.\u0275inj=Wn({imports:[Sk]}),n})();var Tk=n=>({active:n});function Ik(n,t){if(n&1&&Be(0,"i"),n&2){let e=z().$implicit;en(e.icon+" font-medium align-middle")}}function Ok(n,t){if(n&1&&(V(0,"span",4),te(1),B()),n&2){let e=z().$implicit;D(),bt(" ",e.count,`
`)}}function Mk(n,t){if(n&1){let e=$e();V(0,"button",1),he("click",function(){let r=Q(e).$implicit,s=z();return $(s.onTabChange(r.name,r.subTab,r.value))}),_e(1,Ik,1,2,"i",2),te(2),_e(3,Ok,2,1,"span",3),B()}if(n&2){let e=t.$implicit,i=z();N("id","tabs-with-badges-item-"+e.id)("disabled",i.activeTab===e.name)("ngClass",Mi(8,Tk,i.activeTab===e.name)),xr("data-hs-tab","#tabs-with-badges-"+e.id)("aria-controls","tabs-with-badges-"+e.id),D(),N("ngIf",i.iconShow),D(),bt(`
`,e.label," "),D(),N("ngIf",i.countShow)}}var tp=class n{tabs=[];activeTab="";countShow=!0;iconShow=!0;tabChange=new be;onTabChange(t,e,i){this.tabChange.emit({tab:t,subTab:e,value:i})}ngOnChanges(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=lt({type:n,selectors:[["app-listing-tab"]],inputs:{tabs:"tabs",activeTab:"activeTab",countShow:"countShow",iconShow:"iconShow"},outputs:{tabChange:"tabChange"},features:[An],decls:1,vars:1,consts:[["type","button","class","w-full disabled-mode sm:w-auto hs-tab-active:font-semibold hs-tab-active:border-primary hs-tab-active:text-primary py-1 px-1 inline-flex items-center gap-2 border-b-[3px] border-transparent text-sm whitespace-nowrap text-defaulttextcolor hover:text-primary dark:text-[#8c9097] dark:text-white/50",3,"id","disabled","ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"w-full","disabled-mode","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:border-primary","hs-tab-active:text-primary","py-1","px-1","inline-flex","items-center","gap-2","border-b-[3px]","border-transparent","text-sm","whitespace-nowrap","text-defaulttextcolor","hover:text-primary","dark:text-[#8c9097]","dark:text-white/50",3,"click","id","disabled","ngClass"],[3,"class",4,"ngIf"],["class","hs-tab-active:bg-primary hs-tab-active:text-white dark:hs-tab-active:bg-primary dark:hs-tab-active:text-white py-0.5 px-1.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800 dark:bg-black/20 dark:text-gray-300",4,"ngIf"],[1,"hs-tab-active:bg-primary","hs-tab-active:text-white","dark:hs-tab-active:bg-primary","dark:hs-tab-active:text-white","py-0.5","px-1.5","rounded-full","text-xs","font-medium","bg-gray-200","text-gray-800","dark:bg-black/20","dark:text-gray-300"]],template:function(e,i){e&1&&_e(0,Mk,4,10,"button",0),e&2&&N("ngForOf",i.tabs)},dependencies:[Pt,Rn,ni,Mt],encapsulation:2})};var np=class n{constructor(t){this.toastr=t}markFormGroupTouched(t){Object.values(t.controls).forEach(e=>{e instanceof Ql?this.markFormGroupTouched(e):(e.markAsTouched(),e.updateValueAndValidity())})}getValidators(t){let e=[];return t.required&&e.push(di.required),t.edit&&e.push(di.required),t.type==="NUMBER"?(t.min_length&&e.push(di.min(Math.pow(10,t.min_length-1))),t.max_length&&e.push(di.max(Math.pow(10,t.max_length)-1)),e.push(this.numberLengthValidator(t.min_length,t.max_length))):(t.min_length&&e.push(di.minLength(t.min_length)),t.max_length&&e.push(di.maxLength(t.max_length))),t.pattern&&e.push(di.pattern(t.pattern)),t.type==="EMAIL"&&e.push(this.emailValidator()),e}numberLengthValidator(t,e){return i=>{if(i.value){let r=i.value.toString();if(r.length<t||r.length>e)return{numberLength:!0}}return null}}emailValidator(){return di.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)}removeEmptyControls(t){Object.keys(t.controls).forEach(e=>{let i=t.get(e);(i?.value===""||i?.value==null)&&t.removeControl(e)})}cleanedPayload(t){return Object.entries(t).filter(([e,i])=>i!==""&&i!==null&&i!==void 0).reduce((e,[i,r])=>ji(Cn({},e),{[i]:r}),{})}removeEmptyFields(t){Object.keys(t).forEach(e=>{let i=t[e];(i==null||i==="")&&delete t[e]})}handleInputFilter(t,e="custom"){let i={mobile:/^[6-9][0-9]{0,9}$/,number:/^[0-9]*$/,alphabet:/^[a-zA-Z]*$/,noSpace:/^[^\s]*$/,custom:/^[a-zA-Z0-9\s]*$/},s=t.target.value+t.key;if(t.ctrlKey||t.metaKey||t.key==="Backspace"||t.key==="Tab")return;i[e].test(s)||t.preventDefault()}static \u0275fac=function(e){return new(e||n)(Cu(zg))};static \u0275prov=go({token:n,factory:n.\u0275fac,providedIn:"root"})};var kk=["inputRef"],Pk=n=>({"text-area-height":n});function Dk(n,t){n&1&&(V(0,"span",6),te(1,"*"),B())}function Lk(n,t){if(n&1){let e=$e();Nt(0),V(1,"input",7,0),he("input",function(r){Q(e);let s=z();return $(s.onInputChange(r))})("keydown",function(r){Q(e);let s=z();return $(s.preventMinus(r))})("paste",function(r){Q(e);let s=z();return $(s.blockNegativePaste(r))}),B(),Ft()}if(n&2){let e=z();D(),N("placeholder",e.label)("formControl",e.control)("type",e.type),xr("maxlength",e.maxlength)("minlength",e.minlength)}}function Rk(n,t){if(n&1){let e=$e();Nt(0),V(1,"textarea",8),he("input",function(r){Q(e);let s=z();return $(s.onInputChange(r))}),B(),Ft()}if(n&2){let e=z();D(),N("placeholder",e.label)("formControl",e.control)("type",e.type)}}function Nk(n,t){if(n&1&&(Nt(0),te(1),Ft()),n&2){let e=z(2);D(),bt(" ",e.label," is required ")}}function Fk(n,t){if(n&1&&(Nt(0),te(1),Ft()),n&2){let e=z(2);D(),bt(" Enter a valid ",e.label," ")}}function Bk(n,t){if(n&1&&(Nt(0),te(1),Ft()),n&2){let e=z(2);D(),bt(" Minimum required length is ",e.control.errors==null?null:e.control.errors.minlength.requiredLength," characters. ")}}function Vk(n,t){if(n&1&&(Nt(0),te(1),Ft()),n&2){let e=z(2);D(),bt(" Maximum allowed length is ",e.control.errors==null?null:e.control.errors.maxlength.requiredLength," characters. ")}}function zk(n,t){n&1&&(Nt(0),te(1," Please enter a valid email "),Ft())}function Hk(n,t){if(n&1&&(V(0,"mat-hint",9),_e(1,Nk,2,1,"ng-container",4)(2,Fk,2,1,"ng-container",4)(3,Bk,2,1,"ng-container",4)(4,Vk,2,1,"ng-container",4)(5,zk,2,0,"ng-container",4),B()),n&2){let e=z();D(),N("ngIf",e.control.hasError("required")),D(),N("ngIf",e.control.hasError("pattern")),D(),N("ngIf",e.control.hasError("minlength")),D(),N("ngIf",e.control.hasError("maxlength")),D(),N("ngIf",e.control.hasError("email"))}}var ip=class n{constructor(t,e,i){this.formGroupDirective=t;this.cdr=e;this.formValidation=i}inputElement;control;fieldReq=!1;label;class;type="text";errorMessage="This field is required";formControlName;valueChange=new be;maxlength;minlength;isUpdating=!1;onChange=()=>{};onTouched=()=>{};focusInput(){this.inputElement?.nativeElement&&this.inputElement.nativeElement.focus()}ngOnInit(){this.formGroupDirective.form&&(this.control=this.formGroupDirective.form.get(this.formControlName))}registerOnTouched(t){this.onTouched=t}writeValue(t){t!==void 0&&this.control.value!==t&&(this.isUpdating=!0,this.control.setValue(t,{emitEvent:!1}),this.isUpdating=!1)}registerOnChange(t){this.onChange=t,this.control.valueChanges.subscribe(e=>{this.isUpdating||this.onChange(e)})}onBlur(){this.onTouched()}onInputChange(t){let i=t.target.value;this.type==="number"&&(i=i===""?null:Number(i),this.formValidation.handleInputFilter(t,this.type)),this.isUpdating=!0,this.control.setValue(i,{emitEvent:!1}),this.isUpdating=!1,this.onChange(i),this.valueChange.emit(i)}preventMinus(t){this.type==="number"&&(t.key==="-"||t.key==="Minus")&&t.preventDefault()}blockNegativePaste(t){this.type==="number"&&(t.clipboardData?.getData("text")||"").includes("-")&&t.preventDefault()}static \u0275fac=function(e){return new(e||n)(Fe(Or),Fe(Tr),Fe(np))};static \u0275cmp=lt({type:n,selectors:[["spk-input"]],viewQuery:function(e,i){if(e&1&&ti(kk,5),e&2){let r;Hn(r=Gn())&&(i.inputElement=r.first)}},inputs:{control:"control",fieldReq:"fieldReq",label:"label",class:"class",type:"type",errorMessage:"errorMessage",formControlName:"formControlName",maxlength:"maxlength",minlength:"minlength"},outputs:{valueChange:"valueChange"},features:[Oi([{provide:ar,useExisting:Zi(()=>n),multi:!0}])],decls:7,vars:11,consts:[["inputRef",""],[1,"form-label"],["class","text-red-500",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["align","end","class","mt-1 text-xs text-red-500 text-right",4,"ngIf"],[1,"text-red-500"],["matInput","",3,"input","keydown","paste","placeholder","formControl","type"],["matInput","",3,"input","placeholder","formControl","type"],["align","end",1,"mt-1","text-xs","text-red-500","text-right"]],template:function(e,i){e&1&&(V(0,"label",1),te(1),_e(2,Dk,2,0,"span",2),B(),V(3,"mat-form-field",3),_e(4,Lk,3,5,"ng-container",4)(5,Rk,2,3,"ng-container",4)(6,Hk,6,5,"mat-hint",5),B()),e&2&&(D(),bt("",i.label," "),D(),N("ngIf",i.fieldReq),D(),zn("mat-custom-field ",i.class,""),N("ngClass",Mi(9,Pk,i.type==="textarea")),D(),N("ngIf",i.type!=="textarea"),D(),N("ngIf",i.type==="textarea"),D(),N("ngIf",i.control.invalid&&(i.control.touched||i.control.dirty)))},dependencies:[Pt,Rn,Mt,fi,Zn,Nn,$o,Ai,La,Kr,Da],encapsulation:2})};function Gk(n,t){if(n&1){let e=$e();V(0,"button",3),he("click",function(){Q(e);let r=z();return $(r.clearInput())}),V(1,"mat-icon"),te(2,"close"),B()()}}var rp=class n{label="";type="text";model="";modelChange=new be;enterKey=new be;onInputChange(t){this.model=t,this.modelChange.emit(t)}debugKey(t){}onEnter(){this.enterKey.emit()}clearInput(){this.model="",this.modelChange.emit("")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=lt({type:n,selectors:[["spk-input-listing"]],inputs:{label:"label",type:"type",model:"model"},outputs:{modelChange:"modelChange",enterKey:"enterKey"},decls:3,vars:4,consts:[[1,"mat-custom-field","table-input"],["matInput","",3,"ngModelChange","keyup","keyup.enter","placeholder","type","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(e,i){e&1&&(V(0,"mat-form-field",0)(1,"input",1),he("ngModelChange",function(s){return i.onInputChange(s)})("keyup",function(s){return i.debugKey(s)})("keyup.enter",function(){return i.onEnter()}),B(),_e(2,Gk,3,0,"button",2),B()),e&2&&(D(),N("placeholder",i.label)("type",i.type)("ngModel",i.model),D(),N("ngIf",i.model))},dependencies:[Pt,Mt,pi,Zn,Nn,Qo,Ai,Au,ku,La,Kr,Mu],encapsulation:2})};var H1=Ps(od()),G1=Ps(N1()),U1=Ps(F1()),q1=Ps(B1());var Uk=n=>({"ti-btn-loader ti-btn-disabled":n}),qk=()=>[];function Wk(n,t){n&1&&(V(0,"div")(1,"span",19),Be(2,"img",20),B()())}function jk(n,t){if(n&1&&(V(0,"li",13)(1,"div",14),_e(2,Wk,3,0,"div",0),V(3,"div",15)(4,"span",16),te(5),B(),V(6,"span",17),te(7),B(),V(8,"span",18),te(9),B()()()()),n&2){let e=t.$implicit,i=z(2);D(2),N("ngIf",i.showAvatar),D(3),Wt(e.created_name),D(2),Wt(e.comment),D(2),Wt(e.created_at)}}function Zk(n,t){n&1&&(Nt(0),Be(1,"app-data-not-found"),Ft())}function Kk(n,t){if(n&1&&(Nt(0),V(1,"ul",11),_e(2,jk,10,4,"li",12),B(),_e(3,Zk,2,0,"ng-container",0),Ft()),n&2){let e=z();D(2),N("ngForOf",e.commentsData),D(),N("ngIf",!e.commentsData.length)}}function Yk(n,t){n&1&&(V(0,"div"),Be(1,"app-skeleton",22),B())}function Xk(n,t){n&1&&(Nt(0),_e(1,Yk,2,0,"div",21),Ft()),n&2&&(D(),N("ngForOf",ka(1,qk).constructor(5)))}function Jk(n,t){n&1&&(V(0,"div",23)(1,"span",24),Be(2,"img",20),B()())}function Qk(n,t){n&1&&Be(0,"i",25)}function $k(n,t){n&1&&(V(0,"span",26),Be(1,"i",27),B())}var op=class n{constructor(t,e){this.api=t;this.dateService=e}detailId;module="";showAvatar=!0;comment="";commentsData=[];skCommentsLoading=!1;ngOnInit(){this.getComments()}ngOnChanges(){this.getComments()}getComments(){this.getCommentsDetail(),setTimeout(()=>this.scrollToBottom(),200)}getCommentsDetail(){this.skCommentsLoading=!0,this.api.post({row_id:this.detailId},`${this.module}/read-comment`).subscribe(t=>{t.statusCode===200&&(this.skCommentsLoading=!1,this.commentsData=this.dateService.formatToDDMMYYYYHHMM(t.data),setTimeout(()=>this.scrollToBottom(),100))})}postComment(){this.comment.trim()!==""&&(this.api.disabled=!0,this.api.post({row_id:this.detailId,comment:this.comment},`${this.module}/save-comment`).subscribe(t=>{t.statusCode===200&&(this.comment="",this.api.disabled=!1,this.getCommentsDetail())}))}scrollToBottom(){let t=document.getElementById("commentList");t&&(t.scrollTop=t.scrollHeight)}static \u0275fac=function(e){return new(e||n)(Fe(qg),Fe(Ra))};static \u0275cmp=lt({type:n,selectors:[["app-comments"]],inputs:{detailId:"detailId",module:"module",showAvatar:"showAvatar"},features:[An],decls:13,vars:11,consts:[[4,"ngIf"],[1,"p-4","mt-2","bg-light","rounded"],[1,"sm:flex","items-center","leading-none"],["class","sm:me-4 mb-2 sm:mb-0",4,"ngIf"],[1,"flex-auto","me-sm-2"],[1,"inline-flex","input-group"],["type","text","placeholder","Enter Here ...",1,"form-control","shadow-none","border","!border-e-0",3,"ngModelChange","keydown.enter","ngModel"],["type","submit",1,"ti-btn","ti-btn-primary","m-0",3,"click","ngClass","disabled"],[1,"flex","items-center"],["class","ri-send-plane-fill ms-2 text-[16px]",4,"ngIf"],["class","loading",4,"ngIf"],["id","commentList",1,"ti-list-group","scroll-y-400"],["class","ti-list-group-item",4,"ngFor","ngForOf"],[1,"ti-list-group-item"],[1,"flex","items-center","gap-4"],[1,"flex-auto","w-50"],[1,"block","font-semibold"],[1,"block","mb-3"],[1,"float-end","text-[11px]","badge","bg-light","text-textmuted","dark:text-textmuted/50"],[1,"avatar","avatar-sm","avatar-rounded","bg-primary/10","text-primary"],["src","./assets/images/faces/11.jpg","alt",""],[4,"ngFor","ngForOf"],[1,"h50","mb-2"],[1,"sm:me-4","mb-2","sm:mb-0"],[1,"avatar","avatar-md","avatar-rounded"],[1,"ri-send-plane-fill","ms-2","text-[16px]"],[1,"loading"],[1,"ri-loader-2-fill","text-[1rem]","animate-spin"]],template:function(e,i){e&1&&(_e(0,Kk,4,2,"ng-container",0)(1,Xk,2,2,"ng-container",0),V(2,"div",1)(3,"div",2),_e(4,Jk,3,0,"div",3),V(5,"div",4)(6,"div",5)(7,"input",6),Yl("ngModelChange",function(s){return Kl(i.comment,s)||(i.comment=s),s}),he("keydown.enter",function(){return i.postComment()}),B(),V(8,"button",7),he("click",function(){return i.postComment()}),V(9,"span",8),te(10),_e(11,Qk,1,0,"i",9),B(),_e(12,$k,2,0,"span",10),B()()()()()),e&2&&(N("ngIf",!i.skCommentsLoading),D(),N("ngIf",i.skCommentsLoading),D(3),N("ngIf",i.showAvatar),D(3),Zl("ngModel",i.comment),D(),N("ngClass",Mi(9,Uk,i.api.disabled))("disabled",i.api.disabled||!i.comment),D(2),bt("",i.api.disabled?"Posting":"Post"," "),D(),N("ngIf",!i.api.disabled),D(),N("ngIf",i.api.disabled))},dependencies:[Pt,Rn,ni,Mt,Ai,pi,Zn,Nn,Qo,hs,Wa],encapsulation:2})};var eP=["*"];function tP(n,t){if(n&1&&(V(0,"span",5),te(1),B()),n&2){let e=z(2);D(),Wt(e.overallCount)}}function nP(n,t){if(n&1){let e=$e();V(0,"button",14),he("click",function(){Q(e);let r=z(2);return $(r.toggleShowCode())}),te(1,"Show Code "),Be(2,"i"),B()}if(n&2){let e=z(2);D(2),zn("ri-code-",e.toggleStatus?"s-slash-line":"line"," ms-2 inline-block align-middle")}}function iP(n,t){if(n&1){let e=$e();V(0,"form",15)(1,"spk-ng-select",16),he("searchChanged",function(r){Q(e);let s=z(2);return $(s.onsearchChangeHanler(r))})("selectedChange",function(r){Q(e);let s=z(2);return $(s.onSingleSelectChangeHandler(r))}),B()()}if(n&2){let e=z(2);N("formGroup",e.filterForm),D(),N("label",e.filterLabel?e.labelName:"")("options",e.optionArray)("search",e.searchSel)("multiple",e.multiple)}}function rP(n,t){if(n&1){let e=$e();V(0,"input",17),Yl("ngModelChange",function(r){Q(e);let s=z(2);return Kl(s.selectedMonth,r)||(s.selectedMonth=r),$(r)}),he("ngModelChange",function(r){Q(e);let s=z(2);return $(s.onMonthChange(r))}),B()}if(n&2){let e=z(2);Zl("ngModel",e.selectedMonth),N("max",e.max)}}function oP(n,t){if(n&1){let e=$e();V(0,"button",18),he("click",function(r){Q(e);let s=z(2);return $(s.onActionClick(r))}),Be(1,"i"),B()}if(n&2){let e=z(2);en(e.iconClass),N("disabled",e.disabled),D(),en(e.iconName)}}function sP(n,t){if(n&1){let e=$e();V(0,"div",19)(1,"input",20),Yl("ngModelChange",function(r){Q(e);let s=z(2);return Kl(s.searchTerm,r)||(s.searchTerm=r),$(r)}),he("keyup.enter",function(){Q(e);let r=z(2);return $(r.onSearchClick())}),B(),V(2,"button",21),he("click",function(){Q(e);let r=z(2);return $(r.onSearchClick())}),te(3,"Search"),B()()}if(n&2){let e=z(2);D(),N("placeholder",e.searchPlaceholder),Zl("ngModel",e.searchTerm)}}function aP(n,t){if(n&1){let e=$e();V(0,"button",22),he("click",function(){Q(e);let r=z(2);return $(r.onFilterClick())}),Be(1,"i",23),B()}}function lP(n,t){if(n&1){let e=$e();V(0,"button",22),he("click",function(){Q(e);let r=z(2);return $(r.onRefreshClick())}),Be(1,"i",24),te(2," Refresh "),B()}}function cP(n,t){if(n&1){let e=$e();V(0,"button",22),he("click",function(){Q(e);let r=z(2);return $(r.onlogBtnClick())}),Be(1,"i",25),te(2," Logs "),B()}}function uP(n,t){if(n&1){let e=$e();V(0,"button",26),he("click",function(r){Q(e);let s=z(2);return $(s.onBtnClick(r))}),Be(1,"i"),te(2),B()}if(n&2){let e=z(2);D(),en(e.iconName),D(),bt(" ",e.buttonName," ")}}function dP(n,t){if(n&1&&(V(0,"div")(1,"div",3),Be(2,"div",4),_e(3,tP,2,1,"span",5),B(),V(4,"div",6),_e(5,nP,3,3,"button",7)(6,iP,2,5,"form",8)(7,rP,1,2,"input",9)(8,oP,2,7,"button",10)(9,sP,4,2,"div",11)(10,aP,2,0,"button",12)(11,lP,3,0,"button",12)(12,cP,3,0,"button",12)(13,uP,3,4,"button",13),B()()),n&2){let e=z();zn("box-header justify-between ",e.boxHeader,""),D(2),zn("box-title ",e.class,""),N("innerHTML",e.title,jr),D(),wu(e.overallCountShow?3:-1),D(2),N("ngIf",e.view),D(),N("ngIf",e.filterForm),D(),N("ngIf",e.filterMonth),D(),N("ngIf",e.actionIcons),D(),N("ngIf",e.showSearch),D(),N("ngIf",e.filterBtnShow),D(),N("ngIf",e.refresBtnShow),D(),N("ngIf",e.logBtnShow),D(),N("ngIf",e.btn1)}}function pP(n,t){if(n&1&&(V(0,"div"),wr(1),B()),n&2){let e=z();zn("box-body ",e.classbody,"")}}function fP(n,t){if(n&1&&(V(0,"div",2)(1,"pre",27)(2,"code",27),te(3),B()()()),n&2){let e=z();D(3),bt(`
                `,e.prism,"")}}var sp=class n{constructor(t){this.cdr=t}actionIcons=!1;iconClass;iconName;buttonName;title;titleView;view;prism;overallCount;tsCode;class;classbody;boxClass;boxHeader;toggleStatus=!1;overallCountShow;refresBtnShow;filterBtnShow;logBtnShow;btn1;activeTab;searchPlaceholder="Search...";showSearch=!1;refresh=new be;action=new be;logBtn=new be;search=new be;btnClick=new be;filterClick=new be;labelName;searchSel=!1;multiple=!1;filterLabel=!1;optionArray=[];filterForm;showSelectOption=!1;buttonClick=new be;buttonClick1=new be;onSingleSelectChange=new be;onsearchChange=new be;monthChanged=new be;disabled=!1;filterMonth=!1;max;selectedMonth;searchTerm="";hasTsCode=!1;ngOnChanges(){}toggleShowCode(){this.toggleStatus=!this.toggleStatus}onRefreshClick(){this.searchTerm="";let t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0");this.selectedMonth=`${e}-${i}`,this.activeTab?this.refresh.emit(this.activeTab):this.refresh.emit()}onFilterClick(){this.filterClick.emit()}onlogBtnClick(){this.activeTab?this.logBtn.emit(this.activeTab):this.logBtn.emit()}onSearchClick(){this.search.emit(this.searchTerm)}onActionClick(t){this.action.emit(t)}onBtnClick(t){this.btnClick.emit(t)}onMonthChange(t){this.selectedMonth=t,this.monthChanged.emit(t)}onSingleSelectChangeHandler(t){this.onSingleSelectChange.emit(t)}onsearchChangeHanler(t){this.onsearchChange.emit(t)}static \u0275fac=function(e){return new(e||n)(Fe(Tr))};static \u0275cmp=lt({type:n,selectors:[["app-showcode-card"]],inputs:{actionIcons:"actionIcons",iconClass:"iconClass",iconName:"iconName",buttonName:"buttonName",title:"title",titleView:"titleView",view:"view",prism:"prism",overallCount:"overallCount",tsCode:"tsCode",class:"class",classbody:"classbody",boxClass:"boxClass",boxHeader:"boxHeader",overallCountShow:"overallCountShow",refresBtnShow:"refresBtnShow",filterBtnShow:"filterBtnShow",logBtnShow:"logBtnShow",btn1:"btn1",activeTab:"activeTab",searchPlaceholder:"searchPlaceholder",showSearch:"showSearch",labelName:"labelName",searchSel:"searchSel",multiple:"multiple",filterLabel:"filterLabel",optionArray:"optionArray",filterForm:"filterForm",showSelectOption:"showSelectOption",disabled:"disabled",filterMonth:"filterMonth",max:"max",selectedMonth:"selectedMonth"},outputs:{refresh:"refresh",action:"action",logBtn:"logBtn",search:"search",btnClick:"btnClick",filterClick:"filterClick",buttonClick:"buttonClick",buttonClick1:"buttonClick1",onSingleSelectChange:"onSingleSelectChange",onsearchChange:"onsearchChange",monthChanged:"monthChanged"},features:[An],ngContentSelectors:eP,decls:4,vars:5,consts:[[3,"class",4,"ngIf"],[3,"class"],[1,"box-footer","border-t-0"],[1,"flex"],[3,"innerHTML"],[1,"badge","bg-primary","rounded","ms-1","text-xs","align-middle"],[1,"prism-toggle","flex","items-center","gap-2"],["type","button","class","ti-btn !py-1 !px-2 ti-btn-soft-primary !text-[0.75rem] !font-medium btn-wave",3,"click",4,"ngIf"],[3,"formGroup",4,"ngIf"],["type","month","name","selectedMonth",3,"ngModel","max","ngModelChange",4,"ngIf"],["type","button",3,"class","disabled","click",4,"ngIf"],["class","custom-form-group mr-1",4,"ngIf"],["type","button","class","ti-btn-sm !py-1 btn ti-btn ti-btn-soft-primary",3,"click",4,"ngIf"],["type","button","class","ti-btn-sm !py-1 btn ti-btn ti-btn-soft-primary m-0",3,"click",4,"ngIf"],["type","button",1,"ti-btn","!py-1","!px-2","ti-btn-soft-primary","!text-[0.75rem]","!font-medium","btn-wave",3,"click"],[3,"formGroup"],["formControlName","select_value",3,"searchChanged","selectedChange","label","options","search","multiple"],["type","month","name","selectedMonth",3,"ngModelChange","ngModel","max"],["type","button",3,"click","disabled"],[1,"custom-form-group","mr-1"],["type","text",1,"form-control","form-control-md","w300",3,"ngModelChange","keyup.enter","placeholder","ngModel"],["type","button",1,"ti-btn","bg-primary","text-white","ti-btn-sm","border-0","custom-form-btn",3,"click"],["type","button",1,"ti-btn-sm","!py-1","btn","ti-btn","ti-btn-soft-primary",3,"click"],[1,"ri-equalizer-line","font-medium","align-middle"],[1,"ri-refresh-line","font-medium","align-middle"],[1,"ri-file-list-line","font-medium","align-middle"],["type","button",1,"ti-btn-sm","!py-1","btn","ti-btn","ti-btn-soft-primary","m-0",3,"click"],[1,"language-html"]],template:function(e,i){e&1&&(_o(),V(0,"div"),_e(1,dP,14,17,"div",0)(2,pP,2,3,"div",1)(3,fP,4,1,"div",2),B()),e&2&&(zn("box ",i.boxClass,""),D(),N("ngIf",i.titleView),D(),wu(i.toggleStatus?3:2))},dependencies:[Pt,Mt,pi,$l,Zn,Nn,Jl,Qo,ja,fi,Or,ec],encapsulation:2})};function hP(n,t){if(n&1&&Be(0,"i"),n&2){let e=z(2);en(e.iconClass+" ms-2 text-[16px] inline-block lh22")}}function mP(n,t){if(n&1&&(V(0,"span"),te(1),_e(2,hP,1,2,"i",2),B()),n&2){let e=z();D(),bt(" ",e.buttonText," "),D(),N("ngIf",e.iconClass)}}function gP(n,t){if(n&1&&Be(0,"i"),n&2){let e=z(2);en(e.loadingIconClass+" text-[1rem] animate-spin lh22")}}function _P(n,t){if(n&1&&(V(0,"span"),te(1),_e(2,gP,1,2,"i",2),B()),n&2){let e=z();D(),bt(" ",e.buttonText," "),D(),N("ngIf",e.loadingIconClass)}}var ap=class n{buttonType="";buttonClass="";disabled=!1;formType="add";iconClass;loadingIconClass;label;buttonClick=new be;ngOnInit(){}get buttonText(){return this.label?this.label:this.disabled?this.formType==="edit"?"Updating":"Saving":this.formType==="edit"?"Update":"Save"}handleClick(){!this.disabled&&this.buttonType==="submit"&&this.buttonClick.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=lt({type:n,selectors:[["app-button"]],inputs:{buttonType:"buttonType",buttonClass:"buttonClass",disabled:"disabled",formType:"formType",iconClass:"iconClass",loadingIconClass:"loadingIconClass",label:"label"},outputs:{buttonClick:"buttonClick"},standalone:!1,decls:3,vars:6,consts:[[3,"click","type","disabled"],[4,"ngIf"],[3,"class",4,"ngIf"]],template:function(e,i){e&1&&(V(0,"button",0),he("click",function(){return i.disabled?"":i.handleClick()}),_e(1,mP,3,2,"span",1)(2,_P,3,2,"span",1),B()),e&2&&(en(i.buttonClass),N("type",i.buttonType||"button")("disabled",i.disabled),D(),N("ngIf",!i.disabled),D(),N("ngIf",i.disabled))},dependencies:[Mt],encapsulation:2})};var yP=()=>["lat","long","gps_address"];function bP(n,t){if(n&1&&(V(0,"div",5)(1,"div")(2,"span",6),te(3),wt(4,"titlecase"),B(),V(5,"span",7),te(6),B()()()),n&2){let e=t.$implicit,i=z();D(3),Wt(kt(4,2,e)),D(3),Wt((i.detail==null?null:i.detail[e])||"--")}}function CP(n,t){if(n&1){let e=$e();Nt(0),V(1,"div",8)(2,"div",9)(3,"span",10),te(4,"location_on"),B(),V(5,"p",11),te(6,"Point your location first"),B(),V(7,"p",12),te(8,"Once location is point, map will appear here."),B(),V(9,"div",13)(10,"app-button",14),he("buttonClick",function(){Q(e);let r=z();return $(r.onAction())}),B()()()(),Ft()}n&2&&(D(10),N("buttonType","submit")("buttonClass","m-0 ti-btn ti-btn-outline-success")("label","Point Your Location")("iconClass","ri-map-pin-user-line"))}var lp=class n{detail;title="";iconClass="";actionIcons=!1;action=new be;loadMap=new be;constructor(){}ngOnInit(){this.detail?.lat&&this.detail?.long&&this.loadMap.emit()}onAction(){this.action.emit(this.detail)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=lt({type:n,selectors:[["app-point-location"]],inputs:{detail:"detail",title:"title",iconClass:"iconClass",actionIcons:"actionIcons"},outputs:{action:"action",loadMap:"loadMap"},decls:5,vars:11,consts:[[3,"action","title","titleView","actionIcons","iconClass","classbody","iconName"],["id","map",2,"width","100%","height","300px"],[1,"flex","gap-6","mt-2","flex-wrap","text-[12px]"],["class","flex items-center",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","items-center"],[1,"text-xs","text-textmuted","dark:text-textmuted/50"],[1,"block","font-medium"],[1,"max-w-sm","p-6","mx-auto","text-center"],[1,"flex","flex-col","items-center","space-y-3"],[1,"material-icons","text-6xl","text-danger"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500"],[1,"border-t","border-block-start-dashed","sm:flex","justify-end"],[3,"buttonClick","buttonType","buttonClass","label","iconClass"]],template:function(e,i){e&1&&(V(0,"app-showcode-card",0),he("action",function(){return i.onAction()}),Be(1,"div",1),V(2,"div",2),_e(3,bP,7,4,"div",3),B(),_e(4,CP,11,4,"ng-container",4),B()),e&2&&(en("box-title font-medium text-[15px] block text-primarytint1color"),N("title",i.title)("titleView",!0)("actionIcons",!0)("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName",!(i.detail!=null&&i.detail.lat)||!(i.detail!=null&&i.detail.long)?"ri-add-line":"ri-pencil-line"),D(3),N("ngForOf",ka(10,yP)),D(),N("ngIf",!(i.detail!=null&&i.detail.lat)||!(i.detail!=null&&i.detail.long)))},dependencies:[Pt,ni,Mt,Rg,fl,ap,sp],encapsulation:2})};var gs=Ps(z1());function EP(n,t){n&1&&(Nt(0),Be(1,"div",2),Ft())}function xP(n,t){n&1&&Be(0,"app-data-not-found")}var up=class n{constructor(t){this.cdr=t}data;myMap;address;hasLocation=!1;ngOnChanges(){}ngOnInit(){let t=this.data?.lat,e=this.data?.long;if(t==null||e==null){this.hasLocation=!1;return}this.hasLocation=!0;let i="map";setTimeout(()=>{this.myMap=gs.map(i).setView([t,e],16),gs.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:22,attribution:"&copy; OpenStreetMap contributors"}).addTo(this.myMap);let r=gs.icon({iconUrl:"assets/images/pin-marker.gif",iconSize:[30,33],iconAnchor:[15,33],popupAnchor:[0,-30]}),s=gs.marker([t,e],{icon:r}).addTo(this.myMap),a=d=>{s.bindPopup(`<strong>Address:</strong><br>${d}`).openPopup()};this.address?.trim()?a(this.address):fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`,{headers:{"User-Agent":"YourAppNameHere/1.0"}}).then(d=>d.json()).then(d=>{let h=d.display_name||"No address found";a(h)}).catch(d=>{console.error("Reverse geocoding failed:",d),a("No address available")})},100)}static \u0275fac=function(e){return new(e||n)(Fe(Tr))};static \u0275cmp=lt({type:n,selectors:[["app-spk-maps"]],inputs:{data:"data"},features:[An],decls:3,vars:2,consts:[["noData",""],[4,"ngIf","ngIfElse"],["id","map",2,"height","400px","width","100%"]],template:function(e,i){if(e&1&&_e(0,EP,2,0,"ng-container",1)(1,xP,1,0,"ng-template",null,0,Pa),e&2){let r=Sr(2);N("ngIf",i.hasLocation)("ngIfElse",r)}},dependencies:[Pt,Mt,Ai,hs],encapsulation:2})};H1.registerPlugin(G1.default,U1.default,q1.default);var fl=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=jn({type:n});static \u0275inj=Wn({imports:[Pt,Vg,g0,pi,fi,w1,nd,ja,ip,up,rp,id,R1,E0,b1,tp,dl,dp,cc,Yd,op,lp,tc,Pt,pi,fi,cc,tc]})};var wP=n=>({"ellipsis-none":n}),SP=()=>[];function TP(n,t){if(n&1){let e=$e();Nt(0),V(1,"app-modal-header",5),he("close",function(){Q(e);let r=z();return $(r.close())}),B(),Ft()}if(n&2){let e=z();D(),N("title","Logs")("closeBtn",e.closeBtn)}}function IP(n,t){if(n&1){let e=$e();V(0,"span",14),he("click",function(){Q(e);let r=z().index,s=z(2);return $(s.toggleReadMore(r))}),te(1),B()}if(n&2){let e=z().index,i=z(2);D(),Wt(i.readMore[e]?"Read Less":"Read More")}}function OP(n,t){if(n&1&&(V(0,"li")(1,"div")(2,"div",7)(3,"div"),Be(4,"i",8),V(5,"h6",9),te(6),B()(),V(7,"div")(8,"p",10),te(9),wt(10,"date"),B()()(),V(11,"div",11)(12,"div"),Be(13,"span",12,0),_e(15,IP,2,1,"span",13),B()()()()),n&2){let e=t.$implicit,i=t.index,r=Sr(14),s=z(2);D(6),Wt(e.createdName),D(3),bt(" ",Xl(10,5,e.createdAt,"d MMM yyyy, hh:mm a")," "),D(4),N("innerHTML",e.changes,jr)("ngClass",Mi(8,wP,s.readMore[i])),D(2),N("ngIf",s.isContentOverflowed(r))}}function MP(n,t){if(n&1&&(Nt(0),_e(1,OP,16,10,"li",6),Ft()),n&2){let e=z();D(),N("ngForOf",e.logList)}}function AP(n,t){n&1&&(V(0,"div"),Be(1,"app-skeleton"),B()),n&2&&(D(),en("h100 mb-5"))}function kP(n,t){n&1&&(Nt(0),_e(1,AP,2,2,"div",6),Ft()),n&2&&(D(),N("ngForOf",ka(1,SP).constructor(5)))}function PP(n,t){n&1&&(Nt(0),Be(1,"app-data-not-found"),Ft())}var dp=class n{constructor(t,e){this.modalData=t;this.dialogRef=e}logList=[];skLoading=!1;hideHeader=!0;closeBtn=!0;scrollHeight="550";readMore=[];toggleReadMore(t){this.readMore[t]=!this.readMore[t]}isContentOverflowed(t){let e=parseFloat(window.getComputedStyle(t).lineHeight);return t.scrollHeight>e*2}close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||n)(Fe(t_,8),Fe(e_,8))};static \u0275cmp=lt({type:n,selectors:[["app-logs"]],inputs:{logList:"logList",skLoading:"skLoading",hideHeader:"hideHeader",closeBtn:"closeBtn",scrollHeight:"scrollHeight"},decls:7,vars:5,consts:[["content",""],[1,"box"],[4,"ngIf"],[1,"box-body"],[1,"widgets-task-list","mb-0","ps-[2rem]",3,"ngClass"],[3,"close","title","closeBtn"],[4,"ngFor","ngForOf"],[1,"grow","flex","item-center","justify-between"],[1,"task-icon","bg-primary"],[1,"text-[14px]","mb-0"],[1,"mb-0","text-textmuted","dark:text-textmuted/50","text-[11px]"],[1,"grow","flex","items-center","justify-between"],[1,"text-xs","text-textmuted","dark:text-textmuted/50","two-line-text-ellipsis",3,"innerHTML","ngClass"],["class","text10px text-primary font-medium underline ms-1 cursor-pointer",3,"click",4,"ngIf"],[1,"text10px","text-primary","font-medium","underline","ms-1","cursor-pointer",3,"click"]],template:function(e,i){e&1&&(V(0,"div",1),_e(1,TP,2,2,"ng-container",2),V(2,"div",3)(3,"ul",4),_e(4,MP,2,1,"ng-container",2)(5,kP,2,2,"ng-container",2),B(),_e(6,PP,2,0,"ng-container",2),B()()),e&2&&(D(),N("ngIf",i.hideHeader),D(2),N("ngClass","scroll-y-"+i.scrollHeight),D(),N("ngIf",!i.skLoading&&i.logList.length),D(),N("ngIf",i.skLoading),D(),N("ngIf",i.logList.length===0&&!i.skLoading))},dependencies:[fl,Rn,ni,Mt,Wa,hs,Iu,Pt,dl,Pu],encapsulation:2})};export{qP as a,g0 as b,Wa as c,GR as d,w1 as e,nd as f,ja as g,id as h,od as i,L2 as j,E0 as k,lR as l,pR as m,b1 as n,u1 as o,p1 as p,Yd as q,dl as r,hs as s,dp as t,tp as u,np as v,ip as w,N1 as x,F1 as y,B1 as z,op as A,sp as B,ap as C,z1 as D,up as E,fl as F};
