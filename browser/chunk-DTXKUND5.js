import{a as Z}from"./chunk-RR6NUCME.js";import{a as Q}from"./chunk-OEHD5D2Y.js";import{a as X}from"./chunk-GLWQGYBC.js";import{a as $}from"./chunk-DC4QM32I.js";import{B as J,F as K,c as H,t as G}from"./chunk-VHE3PQ3O.js";import{Z as W,jb as z,p as E}from"./chunk-GYDYF5F3.js";import{K as U,M as j,e as A,f as B,g as O,o as Y,t as V}from"./chunk-PD5VTTIY.js";import{$b as C,$c as S,Hb as y,Mc as o,Nc as s,Ob as m,Oc as u,Pc as b,Yc as x,Zb as h,_b as l,bc as g,cc as I,dc as D,ed as L,gc as k,gd as q,ic as P,jc as M,kc as i,lc as a,mc as p,nc as F,oc as N,rb as t,sb as f,wc as R,yc as c}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";function ne(n,r){if(n&1&&(i(0,"li")(1,"div",4)(2,"div")(3,"span"),p(4,"i"),a()(),i(5,"div",5)(6,"span",6),o(7),a(),i(8,"span",7),o(9),a()(),i(10,"div",8)(11,"span"),o(12),a()()()()),n&2){let e=r.$implicit;I("ti-list-group-item !p-[0.84rem] ",e.liClass,""),t(3),D("avatar avatar-rounded bg-",e.iconBgClass,"/10 !text-",e.iconBgClass,""),t(),g(e.iconClass),t(3),s(e.title),t(2),s(e.subtitle),t(2),I("text-",e.valueClass," fs-medium text-xl font-medium"),t(),s(e.value)}}var T=class n{budgetTitle="";liClass="";budgetAmount="";increasePercentage="";incomeItems=[];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-spk-widget-total-budget-card"]],inputs:{budgetTitle:"budgetTitle",liClass:"liClass",budgetAmount:"budgetAmount",increasePercentage:"increasePercentage",incomeItems:"incomeItems"},decls:5,vars:0,consts:[[1,"box","overflow-hidden"],[1,"box-body","p-0"],[1,"ti-list-group","list-group-flush","!border-0","!rounded-none"],[3,"class"],[1,"flex","items-start","gap-4"],[1,"flex-auto"],[1,"mb-0","font-medium","block"],[1,"text-textmuted","dark:text-textmuted/50","text-xs"],[1,"text-end"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"div",1)(2,"ul",2),P(3,ne,13,16,"li",3,k),a()()()),e&2&&(t(3),M(d.incomeItems))},encapsulation:2})};var re=()=>["Target Detail"],te=(n,r,e)=>({"text-success bg-success/10":n,"text-warning bg-warning/10":r,"text-info bg-info/10":e}),oe=(n,r,e)=>({"text-warning bg-warning/10":n,"text-info bg-info/10":r,"text-primary bg-primary/10":e}),w=()=>[];function le(n,r){n&1&&(i(0,"div",8)(1,"div")(2,"span",9),o(3,"Distributors"),a(),i(4,"span",10),o(5,"Customer Type"),a()()())}function se(n,r){if(n&1&&(i(0,"div",8)(1,"div")(2,"span",9),o(3),a(),i(4,"span",10),o(5,"Assign To Name"),a()()()),n&2){let e=c(2);t(3),s(e.basiqDetail.assign_to_name||"--")}}function de(n,r){if(n&1&&(i(0,"tr")(1,"td",32),o(2),a(),i(3,"td")(4,"span",33),o(5),a()(),i(6,"td"),o(7),i(8,"span",34),o(9),a()(),i(10,"td")(11,"div",35)(12,"div",36),p(13,"div",37),a(),i(14,"div",38),o(15),a()()(),i(16,"td")(17,"span",39),o(18),a()()()),n&2){let e=r.$implicit,d=r.index,v=c(5);t(2),s(d+1),t(3),u(" ",e.field_name,""),t(2),b("",e.input_type==="Value"?v.CURRENCY_SYMBOLS.RUPEE:"Pcs"," ",e.total_achieved," "),t(2),u("/",e.target_value,""),t(4),C("width",e.progress+"%"),h("aria-valuenow",e.progress),t(2),u("",e.progress,"%"),t(2),l("ngClass",S(11,te,e.status==="Completed",e.status==="Pending",e.status==="In Progress")),t(),s(e.status)}}function me(n,r){if(n&1&&(i(0,"div",27)(1,"label",28),o(2," Category Wise Target "),a(),i(3,"div",29)(4,"spk-reusable-tables",30),m(5,de,19,15,"tr",31),a()()()),n&2){let e=c(4);t(4),l("columns",e.summaryColumns)("tableHead","border-b")("showCheckbox",!1)("showS_No",!0),t(),l("ngForOf",e.getCategorySummaries(e.additionalTargets))}}function pe(n,r){if(n&1&&(i(0,"tr")(1,"td",32),o(2),a(),i(3,"td")(4,"span",33),o(5),a()(),i(6,"td"),o(7),i(8,"span",34),o(9),a()(),i(10,"td")(11,"div",35)(12,"div",36),p(13,"div",37),a(),i(14,"div",38),o(15),a()()(),i(16,"td")(17,"span",39),o(18),a()()()),n&2){let e=r.$implicit,d=r.index,v=c(5);t(2),s(d+1),t(3),u(" ",e.field_name,""),t(2),b("",e.input_type==="Value"?v.CURRENCY_SYMBOLS.RUPEE:"Pcs"," ",e.total_achieved," "),t(2),u("/",e.target_value,""),t(4),C("width",e.progress+"%"),h("aria-valuenow",e.progress),t(2),u("",e.progress,"%"),t(2),l("ngClass",S(11,te,e.status==="Completed",e.status==="Pending",e.status==="In Progress")),t(),s(e.status)}}function ce(n,r){if(n&1&&(i(0,"div",27)(1,"label",28),o(2," Product Wise Target "),a(),i(3,"div",29)(4,"spk-reusable-tables",30),m(5,pe,19,15,"tr",31),a()()()),n&2){let e=c(4);t(4),l("columns",e.summaryColumns)("tableHead","border-b")("showCheckbox",!1)("showS_No",!0),t(),l("ngForOf",e.getProductSummaries(e.additionalTargets))}}function ue(n,r){if(n&1&&(i(0,"div",42)(1,"div",43)(2,"div",44)(3,"div",45)(4,"div",46)(5,"i",47),o(6),a()(),i(7,"div",48)(8,"p",49),o(9),i(10,"span",50),o(11),a()(),i(12,"p",51),o(13),a()(),i(14,"div",52)(15,"p",53),o(16),i(17,"span",34),o(18),a()(),i(19,"div",35)(20,"div",54),p(21,"div",37),a(),i(22,"div",55),o(23),a()()()()()()()),n&2){let e=r.$implicit,d=c(5);t(6),s(e.icon),t(3),u("",e.name||"--"," "),t(),l("ngClass",S(12,oe,e.status==="Pending",e.status==="In Progress",e.status==="Completed")),t(),s(e.status),t(2),s(e.description||"--"),t(3),b("",e.input_type==="Value"?d.CURRENCY_SYMBOLS.RUPEE:""," ",e.total_achieved||"0"," "),t(2),u("/ ",e.target_value||"0",""),t(3),C("width",e.progress+"%"),h("aria-valuenow",e.progress),t(2),u("",e.progress||"0","%")}}function ge(n,r){if(n&1&&(i(0,"div",40),m(1,ue,24,16,"div",41),a()),n&2){let e=c(4);t(),l("ngForOf",e.getOtherSummaries(e.additionalTargets))}}function ve(n,r){if(n&1&&(i(0,"div",23)(1,"div",24),m(2,me,6,5,"div",25)(3,ce,6,5,"div",25)(4,ge,2,1,"div",26),a()()),n&2){let e,d,v,_=c(3);t(2),l("ngIf",((e=_.getCategorySummaries(_.additionalTargets))==null?null:e.length)>0),t(),l("ngIf",((d=_.getProductSummaries(_.additionalTargets))==null?null:d.length)>0),t(),l("ngIf",((v=_.getOtherSummaries(_.additionalTargets))==null?null:v.length)>0)}}function _e(n,r){if(n&1&&(i(0,"div",3)(1,"div",14)(2,"app-showcode-card",15)(3,"div",16)(4,"div",17)(5,"div",18)(6,"div",19)(7,"div",20)(8,"div",21),m(9,ve,5,3,"div",22),a()()()()()()()()()),n&2){let e=c(2);t(2),g("box-title font-medium text-[15px] block text-primarytint1color"),l("title","Target Detail")("titleView",!0)("actionIcons",!1)("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName","ri-add-line"),t(7),l("ngIf",e.additionalTargets&&e.additionalTargets.length>0)}}function fe(n,r){if(n&1&&(F(0),i(1,"div",3)(2,"div",4)(3,"app-showcode-card",5)(4,"ul",6)(5,"li")(6,"div",7)(7,"div",8)(8,"div")(9,"span",9),o(10),L(11,"date"),a(),i(12,"span",10),o(13,"Date Created"),a()()(),i(14,"div",8)(15,"div")(16,"span",9),o(17),a(),i(18,"span",10),o(19,"Created By"),a()()(),i(20,"div",8)(21,"div")(22,"span",9),o(23),a(),i(24,"span",10),o(25,"Title"),a()()(),i(26,"div",8)(27,"div")(28,"span",9),o(29),a(),i(30,"span",10),o(31,"Start Date"),a()()(),i(32,"div",8)(33,"div")(34,"span",9),o(35),a(),i(36,"span",10),o(37,"End Date"),a()()(),i(38,"div",8)(39,"div")(40,"span",9),o(41),a(),i(42,"span",10),o(43,"Target Type"),a()()(),m(44,le,6,0,"div",11)(45,se,6,1,"div",11),i(46,"div",8)(47,"div")(48,"span",9),o(49),a(),i(50,"span",10),o(51,"Target Value"),a()()(),i(52,"div",8)(53,"div")(54,"span",9),o(55),a(),i(56,"span",10),o(57,"Additional Target"),a()()()()()()()(),i(58,"div",4),p(59,"app-spk-widget-total-budget-card",12),a(),i(60,"div",4)(61,"div"),p(62,"app-logs",13),a()()(),m(63,_e,10,9,"div",2),N()),n&2){let e=c();t(3),g("box-title font-medium text-[15px] block text-primarytint1color"),l("title","Basic Detail")("titleView",!0),t(7),s(e.basiqDetail.created_at?q(11,23,e.basiqDetail.created_at,"d MMM yyyy, hh:mm a"):"--"),t(7),s(e.basiqDetail.created_name||"--"),t(6),s(e.basiqDetail.title?e.basiqDetail.title:"---"),t(6),s(e.basiqDetail.start_date?e.date.formatToDDMMYYYY(e.basiqDetail.start_date):"---"),t(6),s(e.basiqDetail.end_date?e.date.formatToDDMMYYYY(e.basiqDetail.end_date):"---"),t(6),s(e.basiqDetail.target_type||"--"),t(3),l("ngIf",e.basiqDetail.target_type==="Customer"),t(),l("ngIf",e.basiqDetail.assign_to_name),t(4),b("",e.CURRENCY_SYMBOLS.RUPEE," ",e.basiqDetail.sale_value||"--",""),t(6),s(e.basiqDetail.is_additional_target===!0?"Yes":"No"),t(4),l("budgetTitle","Target Detail")("budgetAmount",e.overallSummary.customer_achievement_summary)("increasePercentage",e.overallSummary.progress)("incomeItems",e.incomeItems),t(3),l("logList",e.logList)("scrollHeight","190")("closeBtn",!1),t(),l("ngIf",e.additionalTargets)}}function xe(n,r){n&1&&(i(0,"div",35),p(1,"app-skeleton"),a()),n&2&&(t(),g("w175"))}function be(n,r){n&1&&p(0,"app-skeleton"),n&2&&g("wp100 h35 mb-3")}function ye(n,r){n&1&&p(0,"app-skeleton"),n&2&&g("wp100 h35 mb-3")}function he(n,r){n&1&&(i(0,"div",35),p(1,"app-skeleton"),a()),n&2&&(t(),g("w180"))}function Ce(n,r){n&1&&(i(0,"div",3)(1,"div",14)(2,"div",3)(3,"div",4)(4,"app-showcode-card",56)(5,"div")(6,"div",57),m(7,xe,2,2,"div",58),a()()()(),i(8,"div",4)(9,"app-showcode-card",56),m(10,be,1,2,"app-skeleton",59),a()(),i(11,"div",4)(12,"app-showcode-card",56),m(13,ye,1,2,"app-skeleton",59),a()()(),i(14,"div",60)(15,"div",14)(16,"app-showcode-card",56)(17,"div")(18,"div",57),m(19,he,2,2,"div",58),a()()()()()()()),n&2&&(t(4),l("titleView",!1)("view",!1),t(3),l("ngForOf",x(12,w).constructor(14)),t(2),l("titleView",!1)("view",!1),t(),l("ngForOf",x(13,w).constructor(7)),t(2),l("titleView",!1)("view",!1),t(),l("ngForOf",x(14,w).constructor(7)),t(3),l("titleView",!1)("view",!1),t(3),l("ngForOf",x(15,w).constructor(16)))}var ee=class n{constructor(r,e,d,v,_,Se){this.router=r;this.moduleService=e;this.route=d;this.api=v;this.date=_;this.targetLogService=Se}CURRENCY_SYMBOLS=E;submodule;skLoading=!1;DetailId;Detail={};basiqDetail={};overallSummary={};additionalTargets={};incomeItems=[];openIndex=null;logList=[];ngOnInit(){let r=this.moduleService.getSubModuleByName("SFA","Target");r&&(this.submodule=r),this.route.paramMap.subscribe(e=>{this.DetailId=e.get("id"),this.DetailId&&this.getDetail()})}formatRupee(r){return r==null?"\u20B90":E.RUPEE+r.toLocaleString("en-IN")}toggleCollapse(r){this.openIndex=this.openIndex===r?null:r}editPage(){this.router.navigate(["/apps/sfa/target/target-detail/"+this.DetailId+"/edit"])}getDetail(){this.skLoading=!0,this.api.post({_id:this.DetailId},"target/detail").subscribe(r=>{r.statusCode===200&&(this.skLoading=!1,this.Detail=r.data,this.basiqDetail=r.data.result,this.overallSummary=r.data.overall_summary,this.additionalTargets=r.data.additional_target,this.targetLogService.getLogs(this.submodule.module_id,e=>{this.logList=e},this.DetailId?this.DetailId:"",this.submodule.module_type),this.incomeItems=[{title:"Target Achived",liClass:"border-top",subtitle:"Total Target Achived",value:this.overallSummary.progress+"%",iconClass:"ti ti-hourglass text-[22px]",iconBgClass:"success",valueClass:"success"},{title:"Days Left",subtitle:"Total Days Left",value:this.overallSummary.day_left,iconClass:"ti ti-clock text-[22px]",iconBgClass:"primary",valueClass:"primary"},{title:"Target Value",subtitle:"Total Target Value",value:this.formatRupee(this.overallSummary.total_target),iconClass:"ti ti-trending-up text-[22px]",iconBgClass:"secondary",valueClass:"secondary"},{title:"Achievement Value",subtitle:"Total Achievement Value",value:this.formatRupee(this.overallSummary.total_achieved),iconClass:"ti ti-checklist text-[22px]",iconBgClass:"info",valueClass:"info"}])})}getCategorySummaries(r){return r.filter(e=>e.name==="Category")}getProductSummaries(r){return r.filter(e=>e.name==="Product")}getOtherSummaries(r){return r.filter(e=>e.name!=="Category"&&e.name!=="Product")}summaryColumns=[{label:"Category Name"},{label:"Achievement"},{label:"Progress"},{label:"Status"}];summaries=[{sno:1,title:"Category",tasks:"2,50,000",tasks1:"5,00,000",percentage:"10%",bg:"danger",status:"Not Achieved",progress:"10"},{sno:2,title:"Category",tasks:"2,50,000",tasks1:"5,00,000",percentage:"63%",bg:"primary",status:"In Progress",team:"+2",progress:"63"},{sno:3,title:"Category",tasks:"2,50,000",tasks1:"5,00,000",percentage:"100%",bg:"success",status:"Achieved",team:"+2",progress:"100"}];customers=[{name:"Primary Sale Target",description:"Additional primary sale target",icon:"shopping_cart",input_show:!0,input_value:"",checked:!1},{name:"Secondary Sale",description:"Target for secondary sale",icon:"repeat",input_show:!0,input_value:"",checked:!1},{name:"New Customer",description:"New customer create target",icon:"person_add",input_show:!0,input_value:"",checked:!1},{name:"Enquiry Close",description:"Enquiry close target",icon:"done_all",input_show:!0,input_value:"",checked:!1},{name:"Site Creation",description:"New site creation target",icon:"add_location",input_show:!0,input_value:"",checked:!1},{name:"Site Close",description:"Close site target",icon:"location_off",input_show:!0,input_value:"",checked:!1},{name:"Customer Visit",description:"Customer visit target",icon:"event_available",input_show:!0,input_value:"",checked:!1},{name:"Event",description:"Event in your area target",icon:"event",input_show:!0,input_value:"",checked:!1},{name:"Influencer Registration",description:"New Influencer registration target",icon:"how_to_reg",input_show:!0,input_value:"",checked:!1},{name:"Payment Collection",description:"Payment collection target",icon:"payments",input_show:!0,input_value:"",checked:!1},{name:"Category/Product",description:"Category/Product wise target",icon:"payments",input_show:!1,input_value:"",checked:!0}];static \u0275fac=function(e){return new(e||n)(f(j),f($),f(U),f(W),f(z),f(Z))};static \u0275cmp=y({type:n,selectors:[["app-target-detail"]],decls:3,vars:9,consts:[[3,"buttonClick1","title","title1","activeitem","buttonText1","icon1","btnShow1"],[4,"ngIf"],["class","grid grid-cols-12 sm:gap-x-6",4,"ngIf"],[1,"grid","grid-cols-12","sm:gap-x-6"],[1,"xl:col-span-4","col-span-12"],[3,"title","titleView"],[1,"ti-list-group","list-group-flush","border-0","h190"],[1,"flex","items-center","gap-5","flex-wrap","text-[12px]"],[1,"flex","items-center","me-2","flex-wrap"],[1,"block","font-medium","text-primay"],[1,"text-textmuted","dark:text-textmuted/50"],["class","flex items-center me-2 flex-wrap",4,"ngIf"],[3,"budgetTitle","budgetAmount","increasePercentage","incomeItems"],[3,"logList","scrollHeight","closeBtn"],[1,"xl:col-span-12","col-span-12"],[3,"title","titleView","actionIcons","iconClass","classbody","iconName"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xxl:col-span-12","col-span-12"],[1,"tab-pane","show","active","border-0","p-0","mb-5"],["id","accordionFAQ1",1,"accordion","accordion-customicon1","accordion-primary","accordions-items-seperate"],[1,"hs-accordion-group"],["id","faq-one",1,"hs-accordion","bg-white","dark:bg-bodybg","border","dark:border-defaultborder/10","border-defaultborder","mt-[0.5rem]","rounded-sm","active"],["id","faq-collapse-one","class","hs-accordion-content w-full overflow-hidden transition-[height] duration-300","aria-labelledby","faq-one",4,"ngIf"],["id","faq-collapse-one","aria-labelledby","faq-one",1,"hs-accordion-content","w-full","overflow-hidden","transition-[height]","duration-300"],[1,"p-2"],["class","bg-light pt-2 p-4 rounded-md !mb-6",4,"ngIf"],["class","grid grid-cols-12 sm:gap-x-6 gap-y-3 mb-6 mt-3",4,"ngIf"],[1,"bg-light","pt-2","p-4","rounded-md","!mb-6"],[1,"font-medium","text-xs"],[1,"table-responsive","table-bordered-default","mt-3"],["tableClass","ti-custom-table ti-custom-table-hover ti-head-primary",3,"columns","tableHead","showCheckbox","showS_No"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"font-medium"],[1,"opacity-70"],[1,"flex","items-center"],["role","progressbar","aria-valuenow","35","aria-valuemin","0","aria-valuemax","100",1,"progress","progress-sm","w-full","bg-gray-200"],[1,"progress-bar","bg-primary"],[1,"ms-2"],[1,"badge","leading-none",3,"ngClass"],[1,"grid","grid-cols-12","sm:gap-x-6","gap-y-3","mb-6","mt-3"],["class","xl:col-span-6 col-span-12",4,"ngFor","ngForOf"],[1,"xl:col-span-6","col-span-12"],[1,"form-check","shipping-method-container","mb-0","flex","items-center","bg-light","mb-2","px-2","py-2","relative"],[1,"form-check-label","wp100"],[1,"sm:flex","items-center","justify-between"],[1,"me-4","ms-2","flex"],[1,"material-icons","text-primary",2,"font-size","25px !important"],[1,"shipping-partner-details","wp100"],[1,"mb-0","font-semibold"],[1,"badge","leading-none","ml-2",3,"ngClass"],[1,"text-textmuted","dark:text-textmuted/50","text-[11px]","mb-0"],[1,"mr-2","text-[11px]"],[1,"mb-0","font-medium","whitespace-nowrap"],["role","progressbar","aria-valuenow","35","aria-valuemin","0","aria-valuemax","100",1,"progress","progress-sm","w-full","bg-gray-400"],[1,"ms-2","font-medium"],[3,"titleView","view"],[1,"flex","gap-2","mb-1","flex-wrap"],["class","flex items-center",4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","sm:gap-x-6","mt-5"]],template:function(e,d){e&1&&(i(0,"app-page-header",0),R("buttonClick1",function(){return d.editPage()}),a(),m(1,fe,64,26,"ng-container",1)(2,Ce,20,16,"div",2)),e&2&&(l("title","SFA")("title1",x(8,re))("activeitem","Target Detail")("buttonText1","Edit Target")("icon1","edit")("btnShow1",!0),t(),l("ngIf",!d.skLoading),t(),l("ngIf",d.skLoading))},dependencies:[K,A,B,O,X,H,G,Y,V,J,Q,T],encapsulation:2})};export{ee as TargetDetailComponent};
