import{a as ge}from"./chunk-J4NDCUAB.js";import{a as ue}from"./chunk-REKAXM5L.js";import{a as me}from"./chunk-SQZ3YN6N.js";import{b as ce,c as pe}from"./chunk-CIBZCVJQ.js";import{a as de}from"./chunk-OTFCGVEU.js";import{a as se}from"./chunk-HPLI5COI.js";import{a as ne}from"./chunk-OEHD5D2Y.js";import{a as _e}from"./chunk-GLWQGYBC.js";import{a as Q}from"./chunk-DC4QM32I.js";import{F as le,c as J,q as ae,s as re,u as oe}from"./chunk-VHE3PQ3O.js";import{$ as z,Aa as Y,B as j,Ea as Z,G as K,Ga as $,Qa as ee,W as G,Z as q,hb as te,jb as ie,va as U,wa as X,z as N}from"./chunk-GYDYF5F3.js";import{M as W,f as A,g as D,o as O,t as H}from"./chunk-PD5VTTIY.js";import{$c as R,Aa as _,Ba as m,Hb as I,Mc as p,Nc as f,Ob as g,Uc as S,Vc as y,Wc as L,Yc as B,Zc as P,_b as c,ac as F,bc as T,ed as k,fc as C,gd as M,kc as o,lc as r,mc as w,nc as x,oc as v,qc as h,rb as l,sb as b,wc as u,yc as s}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var be=()=>["Leader Board"],E=()=>[],he=(i,a,e)=>({name:i,label:a,icon:e}),Ce=i=>[i];function xe(i,a){i&1&&w(0,"app-skeleton"),i&2&&T("w100 h25")}function ve(i,a){i&1&&(x(0),g(1,xe,1,2,"app-skeleton",10),v()),i&2&&(l(),c("ngForOf",B(1,E).constructor(2)))}function Se(i,a){if(i&1){let e=h();o(0,"app-listing-tab",12),u("tabChange",function(t){_(e);let d=s(2);return m(d.onTabChange(t.tab))}),r()}if(i&2){let e=a.$implicit,n=s(2);c("tabs",P(7,Ce,R(3,he,e.name,e.label,e.icon)))("activeTab",n.activeTab)("countShow",!1)}}function ye(i,a){if(i&1&&(x(0),g(1,Se,1,9,"app-listing-tab",11),v()),i&2){let e=s();l(),c("ngForOf",e.mainTabs)}}function Le(i,a){if(i&1){let e=h();o(0,"button",19),u("click",function(){_(e);let t=s(2);return t.filter.title="",m(t.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function we(i,a){if(i&1){let e=h();o(0,"button",19),u("click",function(){_(e);let t=s(2);return t.filter.customer_type_name="",m(t.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function Be(i,a){if(i&1){let e=h();o(0,"button",19),u("click",function(){_(e);let t=s(2);return t.filter.state="",m(t.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function Te(i,a){if(i&1){let e=h();o(0,"button",19),u("click",function(){_(e);let t=s(2);return t.filter.ledger_creation_type="",m(t.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function ke(i,a){if(i&1){let e=h();o(0,"button",19),u("click",function(){_(e);let t=s(2);return t.filter.status="",m(t.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function Me(i,a){if(i&1&&(o(0,"span",29),p(1),r()),i&2){let e=a.$implicit;l(),f(e)}}function Ee(i,a){if(i&1&&(o(0,"div",27),g(1,Me,2,1,"span",28),r()),i&2){let e=s().$implicit;l(),c("ngForOf",e.state)}}function Ve(i,a){if(i&1&&(o(0,"span",29),p(1),r()),i&2){let e=a.$implicit;l(),f(e)}}function Ie(i,a){if(i&1&&(o(0,"div",27),g(1,Ve,2,1,"span",28),r()),i&2){let e=s().$implicit;l(),c("ngForOf",e.ledger_creation_type)}}function Fe(i,a){if(i&1){let e=h();o(0,"app-icon-button",30),u("clickEvent",function(){_(e);let t=s().$implicit,d=s(2);return m(d.delete(t._id,"leader-board/delete","row delete"))}),r()}i&2&&c("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function Pe(i,a){if(i&1){let e=h();o(0,"tr",20)(1,"td",21),p(2),r(),o(3,"td"),p(4),k(5,"date"),r(),o(6,"td"),p(7),r(),o(8,"td")(9,"a",22),u("click",function(){let t=_(e).$implicit,d=s(2);return m(d.goToDetailPage(t._id))}),p(10),r()(),o(11,"td"),p(12),k(13,"date"),r(),o(14,"td"),p(15),k(16,"date"),r(),o(17,"td"),p(18),r(),o(19,"td"),g(20,Ee,2,1,"div",23),r(),o(21,"td"),g(22,Ie,2,1,"div",23),r(),o(23,"td",24),p(24),r(),o(25,"td")(26,"app-toggle",25),u("checkedChange",function(t){let d=_(e).$implicit,V=s(2);return m(V.onToggleChange(t,d._id,d.status))}),r()(),o(27,"td",21),g(28,Fe,1,2,"app-icon-button",26),r()()}if(i&2){let e=a.$implicit,n=a.index,t=s(2);F("bg-gray-400",t.isHighlighted(e._id)),l(2),f((t.pagination.cur_page-1)*t.pagination.limit+n+1),l(2),f(e.created_at?M(5,14,e.created_at,"d MMM yyyy, hh:mm a"):"--"),l(3),f(e.created_name||"--"),l(3),f(e.title||"--"),l(2),f(e.start_date?M(13,17,e.start_date,"d MMM yyyy"):"--"),l(3),f(e.end_date?M(16,20,e.end_date,"d MMM yyyy"):"--"),l(3),f(e.customer_type_name||"--"),l(2),c("ngIf",e.state),l(2),c("ngIf",e.ledger_creation_type),l(2),f(e.total_gifts||"--"),l(2),c("checked",e.isChecked),l(2),c("ngIf",t.accessRight==null?null:t.accessRight.deleteRight)}}function Re(i,a){if(i&1){let e=h();x(0),o(1,"tr",13)(2,"td"),p(3,"\xA0"),r(),o(4,"td"),p(5,"\xA0"),r(),o(6,"td"),p(7,"\xA0"),r(),o(8,"td")(9,"div",14)(10,"mat-form-field",15)(11,"input",16),L("ngModelChange",function(t){_(e);let d=s();return y(d.filter.title,t)||(d.filter.title=t),m(t)}),u("keyup.enter",function(){_(e);let t=s();return m(t.getList())}),r(),g(12,Le,3,0,"button",17),r()()(),o(13,"td"),p(14,"\xA0"),r(),o(15,"td"),p(16,"\xA0"),r(),o(17,"td")(18,"div",14)(19,"mat-form-field",15)(20,"input",16),L("ngModelChange",function(t){_(e);let d=s();return y(d.filter.customer_type_name,t)||(d.filter.customer_type_name=t),m(t)}),u("keyup.enter",function(){_(e);let t=s();return m(t.getList())}),r(),g(21,we,3,0,"button",17),r()()(),o(22,"td")(23,"div",14)(24,"mat-form-field",15)(25,"input",16),L("ngModelChange",function(t){_(e);let d=s();return y(d.filter.state,t)||(d.filter.state=t),m(t)}),u("keyup.enter",function(){_(e);let t=s();return m(t.getList())}),r(),g(26,Be,3,0,"button",17),r()()(),o(27,"td")(28,"div",14)(29,"mat-form-field",15)(30,"input",16),L("ngModelChange",function(t){_(e);let d=s();return y(d.filter.ledger_creation_type,t)||(d.filter.ledger_creation_type=t),m(t)}),u("keyup.enter",function(){_(e);let t=s();return m(t.getList())}),r(),g(31,Te,3,0,"button",17),r()()(),o(32,"td"),p(33,"\xA0"),r(),o(34,"td")(35,"div",14)(36,"mat-form-field",15)(37,"input",16),L("ngModelChange",function(t){_(e);let d=s();return y(d.filter.status,t)||(d.filter.status=t),m(t)}),u("keyup.enter",function(){_(e);let t=s();return m(t.getList())}),r(),g(38,ke,3,0,"button",17),r()()(),o(39,"td"),p(40,"\xA0"),r()(),g(41,Pe,29,23,"tr",18),v()}if(i&2){let e=s();l(11),S("ngModel",e.filter.title),l(),C(e.filter.title?12:-1),l(8),S("ngModel",e.filter.customer_type_name),l(),C(e.filter.customer_type_name?21:-1),l(4),S("ngModel",e.filter.state),l(),C(e.filter.state?26:-1),l(4),S("ngModel",e.filter.ledger_creation_type),l(),C(e.filter.ledger_creation_type?31:-1),l(6),S("ngModel",e.filter.status),l(),C(e.filter.status?38:-1),l(3),c("ngForOf",e.listing)}}function Ae(i,a){i&1&&(o(0,"td"),w(1,"app-skeleton"),r()),i&2&&(l(),T("h20 bg-skeleton"))}function De(i,a){i&1&&(o(0,"tr",13),g(1,Ae,2,2,"td",32),r()),i&2&&(l(),c("ngForOf",B(1,E).constructor(12)))}function Oe(i,a){i&1&&(x(0),g(1,De,2,2,"tr",31),v()),i&2&&(l(),c("ngForOf",B(1,E).constructor(8)))}function He(i,a){i&1&&(x(0),w(1,"app-data-not-found"),v())}var fe=class i{constructor(a,e,n,t,d,V,We,Ne,je){this.dialog=a;this.api=e;this.comanFuncation=n;this.moduleService=t;this.alert=d;this.dateService=V;this.router=We;this.logService=Ne;this.highlightService=je}FORMID=se;skLoading=!1;activeTab="Running";pagination={};listing=[];filter={};mainTabs=[];submodule={};pageKey="leaderboard-list";highlightedId;accessRight={};ngOnInit(){let a=this.moduleService.getAccessMap("IRP","Leader Board");a&&(this.accessRight=a);let e=this.moduleService.getSubModuleByName("IRP","Leader Board");e&&(this.submodule=e);let n=this.highlightService.getHighlight(this.pageKey);n!=null&&(this.activeTab=n.tab,this.highlightedId=n.rowId,this.pagination.cur_page=n.pageIndex,this.filter=n.filters,this.highlightService.clearHighlight(this.pageKey)),this.getList()}onRefresh(){this.filter={},this.getList()}onTabChange(a){this.activeTab=a,this.getList()}goToAddPage(){this.router.navigate(["/apps/loyalty/leader-board/leader-board-add"])}goToDetailPage(a){this.setHighLight(a),this.router.navigate(["/apps/loyalty/leader-board/leader-board-detail",a])}changeToPage(a){this.pagination.cur_page=a,this.getList()}changeToPagination(a){a==="Next"&&this.pagination.cur_page<this.pagination.total_pages?this.pagination.cur_page++:a==="Previous"&&this.pagination.cur_page>1&&this.pagination.cur_page--,this.getList()}getList(){this.skLoading=!0,this.api.post({filters:this.filter,activeTab:this.activeTab},"leader-board/read").subscribe(a=>{if(a.statusCode==200){this.skLoading=!1,this.listing=a.data,this.pagination=a.pagination;for(let e=0;e<this.listing.length;e++){let n=this.listing[e];n.isChecked=n.status==="Active"}this.mainTabs=[{name:"Running",label:"Running",icon:"ri-run-line"},{name:"Expired",label:"Expired",icon:"ri-pass-expired-line"}]}})}delete(a,e,n){this.comanFuncation.delete(a,this.submodule,n,e,"single_action",a).subscribe(t=>{t===!0&&this.getList()})}openMainLogModal(a){this.comanFuncation.listLogsModal(this.submodule.module_id,a,this.submodule.module_type).subscribe(e=>{e===!0&&this.getList()})}PageHeaders=[{label:"Created At",table_class:""},{label:"Created By",table_class:""},{label:"Title",table_class:""},{label:"Start Date",table_class:""},{label:"End Date",table_class:""},{label:"Customer Category",table_class:""},{label:"State",table_class:""},{label:"Point Category Type",table_class:""},{label:"Total Gift",table_class:"text-center"},{label:"Status",table_class:""}];isHighlighted(a){return this.highlightedId===a}setHighLight(a){this.comanFuncation.setHighLight(this.pageKey,a,this.activeTab,this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}onToggleChange(a,e,n){this.comanFuncation.statusChange(a,e,n,this.submodule,"toggle","leader-board/update-status").subscribe(t=>{t?this.getList():this.getList()})}static \u0275fac=function(e){return new(e||i)(b(ee),b(q),b(pe),b(Q),b(z),b(ie),b(W),b(de),b(ce))};static \u0275cmp=I({type:i,selectors:[["app-call-request"]],decls:14,vars:29,consts:[[3,"title","title1","activeitem"],[1,"box","py-3","px-4"],["aria-label","Tabs","role","tablist",1,"sm:flex","sm:space-x-2","sm:rtl:space-x-reverse","gap-1"],[4,"ngIf"],[1,"row"],[1,"col-xl-12"],[3,"onRefresh","logBtn","button1","pageTitle","listLength","btnShow","refreshLabel","btnShow1","logsLabel","btnShow2","addBtnLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","showAction","columns"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"class",4,"ngFor","ngForOf"],[3,"tabs","activeTab","countShow","tabChange",4,"ngFor","ngForOf"],[3,"tabChange","tabs","activeTab","countShow"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"table-search-filters"],[1,"table-input"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["class","product-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"product-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"text-primary","font-semibold","underline",3,"click"],["class","",4,"ngIf"],[1,"text-center"],[3,"checkedChange","checked"],[3,"icon","buttonClass","clickEvent",4,"ngIf"],[1,""],["class","badge bg-light text-textmuted dark:text-textmuted/50 m-1 border border-defaultborder dark:border-defaultborder/10",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-textmuted","dark:text-textmuted/50","m-1","border","border-defaultborder","dark:border-defaultborder/10"],[3,"clickEvent","icon","buttonClass"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(w(0,"app-page-header",0),o(1,"div",1)(2,"nav",2),g(3,ve,2,2,"ng-container",3)(4,ye,2,1,"ng-container",3),r(),o(5,"div",4)(6,"div",5)(7,"app-page-sub-header",6),u("onRefresh",function(){return n.onRefresh()})("logBtn",function(){return n.openMainLogModal("")})("button1",function(){return n.goToAddPage()}),r(),o(8,"div",7)(9,"spk-reusable-tables",8),g(10,Re,42,11,"ng-container",3)(11,Oe,2,2,"ng-container",3),r(),g(12,He,2,0,"ng-container",3),r(),o(13,"app-pagination-footer",9),u("preButtonClick",function(){return n.changeToPagination("Previous")})("nextButtonClick",function(){return n.changeToPagination("Next")})("pageChange",function(d){return n.changeToPage(d)}),r()()()()),e&2&&(c("title","Loyalty")("title1",B(28,be))("activeitem","Leader Board List"),l(3),c("ngIf",n.skLoading),l(),c("ngIf",!n.skLoading),l(3),T("p-0 pt-3"),c("pageTitle","Leader Board List")("listLength",n.listing.length)("btnShow",!0)("refreshLabel","Refresh")("btnShow1",!0)("logsLabel","Logs")("btnShow2",n.accessRight==null?null:n.accessRight.addRight)("addBtnLabel","Add Leader Board"),l(2),c("tableHead","border-b")("showS_No",!0)("showAction",!0)("columns",n.PageHeaders),l(),c("ngIf",!n.skLoading),l(),c("ngIf",n.skLoading),l(),c("ngIf",n.listing.length===0&&!n.skLoading),l(),c("currentPage",n.pagination.cur_page)("totalPage",n.pagination.total_pages)("pageLimit",n.pagination.limit)("listLength",n.listing.length)("preBtn",!n.pagination.prev)("nextBtn",!n.pagination.next))},dependencies:[le,A,D,N,j,K,_e,J,re,ae,ge,me,ue,oe,O,H,ne,te,Y,Z,$,X,U,G],encapsulation:2})};export{fe as leaderBoardListComponent};
