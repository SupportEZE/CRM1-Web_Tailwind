import{a as ge}from"./chunk-J4NDCUAB.js";import{b as pe,c as ue}from"./chunk-CIBZCVJQ.js";import{a as le}from"./chunk-OEHD5D2Y.js";import{a as de}from"./chunk-GLWQGYBC.js";import{a as X}from"./chunk-DC4QM32I.js";import{F as me,c as J,q as se,s as ce,u as _e}from"./chunk-VHE3PQ3O.js";import{Aa as ee,B as Q,Ea as te,G as U,Ga as ie,Ha as ne,Ia as re,Ja as oe,Z as z,hb as ae,o as Y,va as Z,wa as $,z as q}from"./chunk-GYDYF5F3.js";import{K as j,M as K,Q as G,e as W,f as H,g as N,n as A,o as O}from"./chunk-PD5VTTIY.js";import{$c as D,Aa as _,Ba as m,Hb as P,Lc as V,Mc as p,Nc as f,Ob as g,Oc as E,Uc as h,Vc as b,Wc as S,Yc as T,Zc as F,_b as u,ac as B,bc as M,ed as v,fc as x,fd as R,gd as I,kc as r,lc as n,mc as k,nc as L,oc as w,qc as C,rb as l,sb as y,wc as d,yc as c}from"./chunk-2NSPOFEK.js";var he=()=>["Stock Return"],be=(o,a,t)=>({name:o,label:a,icon:t}),Se=o=>[o],Ce=()=>[];function ye(o,a){o&1&&k(0,"app-page-header",12),o&2&&u("title","IRP")("title1",T(3,he))("activeitem","Customer To Customer Stock Return")}function xe(o,a){if(o&1){let t=C();r(0,"app-listing-tab",15),d("tabChange",function(e){_(t);let s=c(2);return m(s.onTabChange(e.tab))}),n()}if(o&2){let t=a.$implicit,i=c(2);u("tabs",F(7,Se,D(3,be,t.name,t.label,t.icon)))("activeTab",i.activeTab)("countShow",!1)}}function ke(o,a){if(o&1&&(r(0,"nav",13),g(1,xe,1,9,"app-listing-tab",14),n()),o&2){let t=c();l(),u("ngForOf",t.mainTabs)}}function ve(o,a){if(o&1){let t=C();r(0,"button",26),d("click",function(){_(t);let e=c(2);return e.filter.created_name="",m(e.getList())}),r(1,"mat-icon"),p(2,"close"),n()()}}function Le(o,a){if(o&1){let t=C();r(0,"button",26),d("click",function(){_(t);let e=c(2);return e.filter.bill_number="",m(e.getList())}),r(1,"mat-icon"),p(2,"close"),n()()}}function we(o,a){if(o&1){let t=C();r(0,"button",26),d("click",function(){_(t);let e=c(2);return e.filter.sender_customer_type_name="",m(e.getList())}),r(1,"mat-icon"),p(2,"close"),n()()}}function Te(o,a){if(o&1){let t=C();r(0,"button",26),d("click",function(){_(t);let e=c(2);return e.filter.sender_customer_name="",m(e.getList())}),r(1,"mat-icon"),p(2,"close"),n()()}}function Re(o,a){if(o&1){let t=C();r(0,"button",26),d("click",function(){_(t);let e=c(2);return e.filter.receiver_customer_type_name="",m(e.getList())}),r(1,"mat-icon"),p(2,"close"),n()()}}function Me(o,a){if(o&1){let t=C();r(0,"button",26),d("click",function(){_(t);let e=c(2);return e.filter.receiver_customer_name="",m(e.getList())}),r(1,"mat-icon"),p(2,"close"),n()()}}function Ve(o,a){if(o&1){let t=C();r(0,"tr",27)(1,"td"),p(2),n(),r(3,"td"),p(4),v(5,"date"),n(),r(6,"td"),p(7),v(8,"titlecase"),n(),r(9,"td"),p(10),v(11,"date"),n(),r(12,"td")(13,"a",28),d("click",function(){let e=_(t).$implicit,s=c(2);return m(s.goToDetail(e._id))}),p(14),n()(),r(15,"td"),p(16),n(),r(17,"td"),p(18),v(19,"titlecase"),n(),r(20,"td"),p(21),v(22,"titlecase"),n(),r(23,"td"),p(24),n(),r(25,"td",29),p(26),n(),r(27,"td",29),p(28),n(),r(29,"td",30),p(30),n()()}if(o&2){let t=a.$implicit,i=a.index,e=c(2);B("bg-gray-400",e.isHighlighted(t._id)),l(2),f((e.pagination.cur_page-1)*e.pagination.limit+i+1),l(2),f(t.created_at?I(5,14,t.created_at,"dd MMM yyyy hh:mm a"):""),l(3),f(t.created_name?R(8,17,t.created_name):"---"),l(3),f(t.bill_date?I(11,19,t.bill_date,"dd MMM yyyy hh:mm a"):""),l(4),E(" ",t.bill_number?t.bill_number:"---"," "),l(2),f(t.sender_customer_type_name?t.sender_customer_type_name:"---"),l(2),f(t.sender_customer_name?R(19,22,t.sender_customer_name):"---"),l(3),f(t.receiver_customer_type_name?R(22,24,t.receiver_customer_type_name):"---"),l(3),f(t.receiver_customer_name?t.receiver_customer_name:"---"),l(2),f(t.total_item_count?t.total_item_count:"---"),l(2),f(t.total_item_quantity?t.total_item_quantity:"---"),l(2),E("\u20B9 ",t.bill_amount?t.bill_amount:"0","")}}function Ee(o,a){if(o&1){let t=C();L(0),r(1,"tr",16)(2,"td",17),p(3,"\xA0"),n(),r(4,"td")(5,"div",18)(6,"mat-form-field",19)(7,"input",20),S("ngModelChange",function(e){_(t);let s=c();return b(s.filter.created_at,e)||(s.filter.created_at=e),m(e)}),d("ngModelChange",function(){_(t);let e=c();return m(e.getList())}),n(),k(8,"mat-datepicker-toggle",21)(9,"mat-datepicker",null,0),n()()(),r(11,"td",17)(12,"div",18)(13,"mat-form-field",19)(14,"input",22),S("ngModelChange",function(e){_(t);let s=c();return b(s.filter.created_name,e)||(s.filter.created_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=c();return m(e.getList())}),n(),g(15,ve,3,0,"button",23),n()()(),r(16,"td")(17,"div",18)(18,"mat-form-field",19)(19,"input",24),S("ngModelChange",function(e){_(t);let s=c();return b(s.filter.billing_date,e)||(s.filter.billing_date=e),m(e)}),d("ngModelChange",function(){_(t);let e=c();return m(e.getList())}),n(),k(20,"mat-datepicker-toggle",21)(21,"mat-datepicker",null,1),n()()(),r(23,"td",17)(24,"div",18)(25,"mat-form-field",19)(26,"input",22),S("ngModelChange",function(e){_(t);let s=c();return b(s.filter.bill_number,e)||(s.filter.bill_number=e),m(e)}),d("keyup.enter",function(){_(t);let e=c();return m(e.getList())}),n(),g(27,Le,3,0,"button",23),n()()(),r(28,"td",17)(29,"div",18)(30,"mat-form-field",19)(31,"input",22),S("ngModelChange",function(e){_(t);let s=c();return b(s.filter.sender_customer_type_name,e)||(s.filter.sender_customer_type_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=c();return m(e.getList())}),n(),g(32,we,3,0,"button",23),n()()(),r(33,"td",17)(34,"div",18)(35,"mat-form-field",19)(36,"input",22),S("ngModelChange",function(e){_(t);let s=c();return b(s.filter.sender_customer_name,e)||(s.filter.sender_customer_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=c();return m(e.getList())}),n(),g(37,Te,3,0,"button",23),n()()(),r(38,"td",17)(39,"div",18)(40,"mat-form-field",19)(41,"input",22),S("ngModelChange",function(e){_(t);let s=c();return b(s.filter.sender_customer_type_name,e)||(s.filter.sender_customer_type_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=c();return m(e.getList())}),n(),g(42,Re,3,0,"button",23),n()()(),r(43,"td",17)(44,"div",18)(45,"mat-form-field",19)(46,"input",22),S("ngModelChange",function(e){_(t);let s=c();return b(s.filter.receiver_customer_name,e)||(s.filter.receiver_customer_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=c();return m(e.getList())}),n(),g(47,Me,3,0,"button",23),n()()(),r(48,"td"),p(49,"\xA0"),n(),r(50,"td"),p(51,"\xA0"),n(),r(52,"td"),p(53,"\xA0"),n()(),g(54,Ve,31,26,"tr",25),w()}if(o&2){let t=V(10),i=V(22),e=c();l(7),u("matDatepicker",t),h("ngModel",e.filter.created_at),l(),u("for",t),l(6),h("ngModel",e.filter.created_name),l(),x(e.filter.created_name?15:-1),l(4),u("matDatepicker",i),h("ngModel",e.filter.billing_date),l(),u("for",i),l(6),h("ngModel",e.filter.bill_number),l(),x(e.filter.bill_number?27:-1),l(4),h("ngModel",e.filter.sender_customer_type_name),l(),x(e.filter.sender_customer_type_name?32:-1),l(4),h("ngModel",e.filter.sender_customer_name),l(),x(e.filter.sender_customer_name?37:-1),l(4),h("ngModel",e.filter.sender_customer_type_name),l(),x(e.filter.receiver_customer_type_name?42:-1),l(4),h("ngModel",e.filter.receiver_customer_name),l(),x(e.filter.receiver_customer_name?47:-1),l(7),u("ngForOf",e.listing)}}function Ie(o,a){o&1&&(r(0,"td"),k(1,"app-skeleton"),n()),o&2&&(l(),M("h20 bg-skeleton"))}function Pe(o,a){o&1&&(r(0,"tr",16),g(1,Ie,2,2,"td",32),n()),o&2&&(l(),u("ngForOf",T(1,Ce).constructor(13)))}function Be(o,a){o&1&&(L(0),g(1,Pe,2,2,"tr",31),w()),o&2&&(l(),u("ngForOf",T(1,Ce).constructor(5)))}function Fe(o,a){o&1&&(L(0),k(1,"app-data-not-found"),w())}var fe=class o{constructor(a,t,i,e,s,De){this.comanFuncation=a;this.highlightService=t;this.router=i;this.api=e;this.route=s;this.moduleService=De}pageHeader=!0;tabView=!1;_id;customerDetail;tabCount={};activeTab="";skLoading=!1;highlightedId;pageKey="stock-list";pagination={};filter={};listing=[];stockType={};accessRight={};LOGIN_TYPES=Y;mainTabs=[{name:"My Return",label:"My Return",icon:"ri-time-fill",count:this.tabCount.Pending?this.tabCount.Pending:0},{name:"From Customer",label:"From Customer",icon:"ri-check-fill",count:this.tabCount.Approved?this.tabCount.Approved:0}];ngOnInit(){let a=this.moduleService.getAccessMap("IRP","Stock Transfer","Company To Customer");a&&(this.accessRight=a);let t=this.highlightService.getHighlight(this.pageKey);t!=null&&(this.activeTab=t.tab,this.highlightedId=t.rowId,this.pagination.cur_page=t.pageIndex,this.filter=t.filters,this.highlightService.clearHighlight(this.pageKey)),this.customerDetail&&Object.keys(this.customerDetail).length>0&&(this.activeTab="My Return"),this.route.paramMap.subscribe(i=>{i.get("type")&&(this.stockType=i.get("type"),this.getList())}),this.getList()}onRefresh(){this.getList()}getList(a){this.skLoading=!0,this.api.post({page:this.pagination.cur_page??1,activeTab:this.activeTab,filters:this.filter,[this.activeTab==="My Return"?"sender_id":"recevier_id"]:this._id},"stock-transfer/customer-return-read").subscribe(t=>{t.statusCode===200?(this.listing=t.data.result,this.pagination=t.pagination,this.skLoading=!1):this.skLoading=!1})}changeToPagination(a){a=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.getList()):this.pagination.next&&(this.pagination.cur_page++,this.getList())}changeToPage(a){this.pagination.cur_page=a,this.getList()}isHighlighted(a){return this.highlightedId===a}setHighLight(a){this.comanFuncation.setHighLight(this.pageKey,a,this.activeTab,this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}goToDetail(a){this.setHighLight(a);let t={"return-type":"customer"};this.router.navigate(["/apps/loyalty/stock-transfer-list/company/stock-return-detail/"+a],{state:{detail:t}})}onTabChange(a){this.activeTab=a;let t=a==="Pending"?"sender_id":"recevier_id";this.getList(t)}goToPage(){let a={"return-type":"customer"};this.router.navigate(["/apps/loyalty/stock-transfer-list/company/stock-return-add"],{state:{detail:a}})}invoiceColumn=[{label:"Date Created"},{label:"Created By"},{label:"Bill Date"},{label:"Bill/Slip Number"},{label:"Sender Customer Category"},{label:"Sender Customer Detail"},{label:"Receiver Customer Category"},{label:"Receiver Customer Detail"},{label:"Total Item",table_class:"text-center"},{label:"Total Qty",table_class:"text-center"},{label:"Bill Amount",table_class:"text-right"}];static \u0275fac=function(t){return new(t||o)(y(ue),y(pe),y(K),y(z),y(j),y(X))};static \u0275cmp=P({type:o,selectors:[["app-customer-stock-return-list"]],inputs:{pageHeader:"pageHeader",tabView:"tabView",_id:"_id",customerDetail:"customerDetail"},decls:12,vars:23,consts:[["picker",""],["picker2",""],[3,"title","title1","activeitem",4,"ngIf"],[1,"row"],[1,"col-xl-12"],[1,"py-4",3,"ngClass"],["class","sm:flex sm:space-x-2 sm:rtl:space-x-reverse gap-1","aria-label","Tabs","role","tablist",4,"ngIf"],[3,"onRefresh","button1","pageTitle","listLength","btnShow","btnShow2","addBtnLabel","refreshLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","columns"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"title","title1","activeitem"],["aria-label","Tabs","role","tablist",1,"sm:flex","sm:space-x-2","sm:rtl:space-x-reverse","gap-1"],[3,"tabs","activeTab","countShow","tabChange",4,"ngFor","ngForOf"],[3,"tabChange","tabs","activeTab","countShow"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","created_at","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["matInput","","name","billing_date","placeholder","Bill Date",3,"ngModelChange","matDatepicker","ngModel"],["class","invoice-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"invoice-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"font-medium","text-primary","underline",3,"click"],[1,"text-center"],[1,"text-right"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(g(0,ye,1,4,"app-page-header",2),r(1,"div",3)(2,"div",4)(3,"div",5),g(4,ke,2,1,"nav",6),r(5,"app-page-sub-header",7),d("onRefresh",function(){return i.onRefresh()})("button1",function(){return i.goToPage()}),n(),r(6,"div",8)(7,"spk-reusable-tables",9),g(8,Ee,55,19,"ng-container",10)(9,Be,2,2,"ng-container",10),n(),g(10,Fe,2,0,"ng-container",10),r(11,"app-pagination-footer",11),d("preButtonClick",function(){return i.changeToPagination("Previous")})("nextButtonClick",function(){return i.changeToPagination("Next")})("pageChange",function(s){return i.changeToPage(s)}),n()()()()()),t&2&&(u("ngIf",i.pageHeader),l(3),u("ngClass",i.pageHeader?"box px-4":""),l(),u("ngIf",i.tabView),l(),M("p-0 pt-3"),u("pageTitle","Customer To Customer Stock Return")("listLength",i.listing.length)("btnShow",!0)("btnShow2",i.accessRight!=null&&i.accessRight.addRight&&i.LOGIN_TYPES.INFLUENCER==(i.customerDetail==null?null:i.customerDetail.login_type_id)?!1:i.activeTab!="My Return")("addBtnLabel","Stock Return")("refreshLabel","Refresh"),l(2),u("tableHead","border-b")("showS_No",!0)("columns",i.invoiceColumn),l(),u("ngIf",!i.skLoading),l(),u("ngIf",i.skLoading),l(),u("ngIf",i.listing.length===0&&!i.skLoading),l(),u("currentPage",i.pagination.cur_page)("totalPage",i.pagination.total_pages)("pageLimit",i.pagination.limit)("listLength",i.listing.length)("preBtn",!i.pagination.prev)("nextBtn",!i.pagination.next))},dependencies:[me,W,H,N,q,Q,U,de,J,ce,se,ge,_e,A,O,G,le,ae,ee,ne,re,oe,te,ie,$,Z],encapsulation:2})};export{fe as a};
