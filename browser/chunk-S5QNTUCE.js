import{a as ge}from"./chunk-2N4MLWQT.js";import{a as he}from"./chunk-J4NDCUAB.js";import{a as fe}from"./chunk-REKAXM5L.js";import{a as _e}from"./chunk-ZON5AR26.js";import"./chunk-LGZVJJDX.js";import"./chunk-54KZ5YIV.js";import"./chunk-SQZ3YN6N.js";import{b as de,c as pe}from"./chunk-CIBZCVJQ.js";import{a as ce}from"./chunk-OTFCGVEU.js";import{a as le}from"./chunk-HPLI5COI.js";import{b as ue}from"./chunk-DUVWFXSE.js";import{a as ee}from"./chunk-CNF4GSI7.js";import{a as oe}from"./chunk-OEHD5D2Y.js";import{a as me}from"./chunk-GLWQGYBC.js";import{a as ie}from"./chunk-DC4QM32I.js";import{F as se,c as te,q as re,s as ae}from"./chunk-VHE3PQ3O.js";import{$ as Z,F as L,Qa as ne,V as U,W as X,Z as Y,_ as xe,l as W,v as z,w as J}from"./chunk-GYDYF5F3.js";import{M as Q,N as q,Q as G,f as A,g as N,o as $,t as K}from"./chunk-PD5VTTIY.js";import{Aa as p,Ba as m,Fc as F,Gc as R,Hb as y,Hc as V,Lc as H,Mc as w,Nc as D,Ob as _,Oc as x,Yc as S,Zc as E,_b as s,ac as I,bc as k,ed as B,gc as T,gd as O,ic as P,jc as M,jd as j,kc as c,lc as l,mc as f,nc as b,oc as C,qc as v,rb as r,sb as g,wc as h,yc as d}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import{g as we}from"./chunk-66YHNWRR.js";var Ce=we(xe());var Se=["reusableTable"],Le=()=>["Products"],ye=n=>["/apps/master/products-list/product-details",n],ve=()=>[];function Ie(n,i){n&1&&(c(0,"div",15)(1,"div",16),f(2,"div",17)(3,"div",17)(4,"div",17)(5,"div",17),l(),c(6,"div",18),f(7,"div",19),l()())}function ke(n,i){if(n&1&&(b(0),_(1,Ie,8,0,"div",14),C()),n&2){let e=d();r(),s("ngForOf",e.cardData)}}function Te(n,i){if(n&1&&(c(0,"div",20),f(1,"spk-listview-card",21),l()),n&2){let e=i.$implicit;r(),s("card",e)}}function Pe(n,i){if(n&1&&P(0,Te,2,1,"div",20,T),n&2){let e=d();M(e.cardData)}}function Me(n,i){if(n&1&&(c(0,"span"),w(1),B(2,"date"),l()),n&2){let e=d().$implicit,t=d().$implicit;r(),x(" ",O(2,1,(t==null?null:t[e.name])||(t==null||t.form_data==null?null:t.form_data[e.name]),"d MMM yyyy, hh:mm a")," ")}}function Fe(n,i){if(n&1&&(c(0,"span"),w(1),l()),n&2){let e=d().$implicit,t=d().$implicit;r(),x(" ",t[e==null?null:e.name]||(t==null||t.form_data==null?null:t.form_data[e==null?null:e.name])||"--"," ")}}function Re(n,i){if(n&1){let e=v();c(0,"span",31)(1,"a",32),h("click",function(){p(e);let o=d(2).$implicit,a=d(2);return m(a.setHighLight(o._id))}),w(2),l()()}if(n&2){let e=d().$implicit,t=d().$implicit;r(),s("routerLink",E(2,ye,t._id)),r(),x(" ",t[e.name]?t[e.name]:"--","")}}function Ve(n,i){if(n&1){let e=v();c(0,"span",33)(1,"app-toggle",34),h("checkedChange",function(o){p(e);let a=d(2).$implicit,u=d(2);return m(u.onToggleChange(o,a._id,a.status))}),l()()}if(n&2){let e=d(2).$implicit;r(),s("checked",e.isChecked)}}function He(n,i){if(n&1&&(b(0),c(1,"td"),_(2,Me,3,4,"span",28)(3,Fe,2,1,"span",12)(4,Re,3,4,"span",29)(5,Ve,2,1,"span",30),l(),C()),n&2){let e=i.$implicit;r(2),s("ngIf",e.name.includes("date")||e.name.endsWith("_at")),r(),s("ngIf",e.name!=="status"&&e.name!=="product_name"&&!(e.name.includes("date")||e.name.includes("_at"))),r(),s("ngIf",e.name=="product_name"),r(),s("ngIf",e.name=="status")}}function De(n,i){if(n&1){let e=v();c(0,"a",35),h("click",function(){p(e);let o=d().$implicit,a=d(2);return m(a.onDeleteProduct(o._id))}),f(1,"i",36),l()}}function Ee(n,i){if(n&1&&(c(0,"tr",23)(1,"td",24),w(2),l(),_(3,He,6,4,"ng-container",25),c(4,"td",24)(5,"div",26),_(6,De,2,0,"a",27),l()()()),n&2){let e=i.$implicit,t=i.index,o=d(2);I("bg-gray-400",o.isHighlighted(e._id)),r(2),D((o.pagination.cur_page-1)*o.pagination.limit+t+1),r(),s("ngForOf",o.visibleHeaders),r(3),s("ngIf",o.accessRight==null?null:o.accessRight.deleteRight)}}function Be(n,i){if(n&1&&(b(0),_(1,Ee,7,5,"tr",22),C()),n&2){let e=d();r(),s("ngForOf",e.listing)}}function Oe(n,i){n&1&&(c(0,"td",40),f(1,"app-skeleton"),l()),n&2&&(r(),k("h20 bg-skeleton"))}function je(n,i){n&1&&(c(0,"tr",38),_(1,Oe,2,2,"td",39),l()),n&2&&(r(),s("ngForOf",S(1,ve).constructor(11)))}function Ae(n,i){n&1&&(b(0),_(1,je,2,2,"tr",37),C()),n&2&&(r(),s("ngForOf",S(1,ve).constructor(16)))}function Ne(n,i){n&1&&(b(0),f(1,"app-data-not-found"),C())}var be=class n{constructor(i,e,t,o,a,u,$e,Ke,Qe,qe,Ge){this.toastr=i;this.api=e;this.highlightService=t;this.alert=o;this.fb=a;this.router=u;this.logService=$e;this.dialog=Ke;this.moduleService=Qe;this.comanFuncation=qe;this.CommonApiService=Ge;this.range=this.fb.group({start:new L(null),end:new L(null)})}reusableTable;disabled=!1;filter={};sorting={};selectedField="";isModalOpen=!1;range;FORMID=le;selectedChoices=[];tableData={};mastersModule={};productModule=[];module_table={};module_form={};skLoading=!1;subModule={};moduleName="";moduleId=0;moduleFormId=0;moduleTableId=0;isChecked=!1;highlightedId;pageKey="qr-list";fieldTypes=W;accessRight={};cardData=[{id:1,customClass:"flex items-start justify-between mb-2",titleClass:"dark:text-textmuted/50 block mb-1",valueClass:"fw-medium mb-0",cardClass:"overflow-hidden main-content-card",title:"Total Product",value:"45,478",graph:"Increased",color:"success",percentage:"2.56%",percentageIcon:"ti ti-arrow-narrow-up text-[1rem]",bg:"primary",icon:"ri-task-line text-xl"},{id:2,customClass:"flex items-start justify-between mb-2",titleClass:"dark:text-textmuted/50 block mb-1",valueClass:"fw-medium mb-0",cardClass:"overflow-hidden main-content-card",title:"Active Product",value:"2,345",graph:"Decreased",color:"danger",percentage:"3.05%",percentageIcon:"ti ti-arrow-narrow-down text-[1rem]",bg:"primarytint1color",icon:"ri-check-line text-xl"},{id:3,customClass:"flex items-start justify-between mb-2",titleClass:"dark:text-textmuted/50 block mb-1",valueClass:"fw-medium mb-0",cardClass:"overflow-hidden main-content-card",title:"Incomplete Info",value:"1245",graph:"Increased",color:"success",percentage:"2.16%",percentageIcon:"ti ti-arrow-narrow-up text-[1rem]",bg:"primarytint2color",icon:"ri-time-line text-xl"},{id:4,customClass:"flex items-start justify-between mb-2",titleClass:"dark:text-textmuted/50 block mb-1",valueClass:"fw-medium mb-0",cardClass:"overflow-hidden main-content-card",title:"Top Rated",value:"658",graph:"Increased",color:"success",percentage:"2.1%",percentageIcon:"ti ti-arrow-narrow-up text-[1rem]",bg:"primarytint3color",icon:"ri-loader-line text-xl"},{id:4,customClass:"flex items-start justify-between mb-2",titleClass:"dark:text-textmuted/50 block mb-1",valueClass:"fw-medium mb-0",cardClass:"overflow-hidden main-content-card",title:"Order Punched",value:"658",graph:"Increased",color:"success",percentage:"2.1%",percentageIcon:"ti ti-arrow-narrow-up text-[1rem]",bg:"primarytint3color",icon:"ri-loader-line text-xl"},{id:4,customClass:"flex items-start justify-between mb-2",titleClass:"dark:text-textmuted/50 block mb-1",valueClass:"fw-medium mb-0",cardClass:"overflow-hidden main-content-card",title:"Never Order",value:"658",graph:"Increased",color:"success",percentage:"2.1%",percentageIcon:"ti ti-arrow-narrow-up text-[1rem]",bg:"primarytint3color",icon:"ri-loader-line text-xl"}];ngOnInit(){let i=this.moduleService.getAccessMap("Masters","Products");i&&(this.accessRight=i),this.skLoading=!1;let e=this.moduleService.getSubModuleByName("Masters","Products"),t=this.moduleService.getFormById("Masters","Products",this.FORMID.ID.Products),o=this.moduleService.getTableById("Masters","Products",this.FORMID.ID.Products),a=this.highlightService.getHighlight(this.pageKey);a!=null&&(this.highlightedId=a.rowId,this.pagination.cur_page=a.pageIndex,this.filter=a.filters,this.highlightService.clearHighlight(this.pageKey)),e&&(this.subModule=e,this.moduleId=e.module_id,this.moduleName=e.title),t&&(this.moduleFormId=t.form_id),o&&(this.moduleTableId=o.table_id),this.getHeaderConfigListing()}onRefresh(){this.filter={},this.reusableTable.clearSearchInputs(),this.getHeaderConfigListing()}goToPage(){this.router.navigate(["/apps/master/products-list/add-product"])}tableConfigData={};visibleHeaders=[];getHeaderConfigListing(){this.CommonApiService.getHeaderConfigListing(this.moduleTableId,this.moduleFormId).subscribe(i=>{this.tableConfigData=i.data.table_data;let e=this.tableConfigData.tableHead;this.visibleHeaders=e.filter(t=>t.list_view_checked),this.getList()})}listing=[];pagination={};page=1;getList(){this.skLoading=!0,this.api.post({filters:this.filter,sorting:this.sorting,page:this.page},"product/read").subscribe(i=>{i.statusCode===200&&(this.skLoading=!1,this.listing=i.data,this.listing.forEach(e=>e.isChecked=e.status==="Active"),this.pagination=i.pagination)})}onSortChanged(i){this.sorting={},this.sorting[i.field]=i.order,this.getList()}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}isHighlighted(i){return this.highlightedId===i}setHighLight(i){this.comanFuncation.setHighLight(this.pageKey,i,"",this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}downurl="";handleSelectionChange(i){let{category_name:e,selections:t}=i;this.filter[e]=t,this.getList()}updateSearchFilter(i){this.filter[i.name]=i.searchText,this.getList()}handleDateRangeChange(i){this.filter=i,this.getList()}onDeleteProduct(i){this.alert.confirm("Are you sure?").then(e=>{e.isConfirmed&&this.api.patch({_id:i,is_delete:1},"product/delete").subscribe(t=>{t.statusCode===200&&(Ce.default.fire("Deleted!",t.message,"success"),this.getList())})})}changeToPagination(i){i=="Previous"?this.pagination.prev&&this.page>1&&(this.page--,this.getList()):this.pagination.next&&(this.page++,this.getList())}changeToPage(i){this.page=i,this.pagination.cur_page=i,this.getList()}onToggleChange(i,e,t){this.comanFuncation.statusChange(i,e,t,this.subModule,"toggle","product/update-status").subscribe(o=>{o?this.getHeaderConfigListing():this.getHeaderConfigListing()})}openHeaderSettingModal(){this.getHeaderConfigListing(),this.dialog.open(_e,{width:"450px",panelClass:"mat-right-modal",position:{right:"0px"},data:{lastPage:"header-config",moduleFormId:this.moduleFormId,moduleTableId:this.moduleTableId,moduleName:this.subModule.title,tableConfigData:this.tableConfigData}}).afterClosed().subscribe(e=>{e===!0&&this.getHeaderConfigListing()})}openMainLogModal(i){this.comanFuncation.listLogsModal(this.subModule.sub_module_id,i,this.subModule.module_type).subscribe(e=>{})}importModal(){this.comanFuncation.importModal(this.subModule.sub_module_id,this.moduleFormId).subscribe(i=>{})}static \u0275fac=function(e){return new(e||n)(g(J),g(Y),g(de),g(Z),g(U),g(Q),g(ce),g(ne),g(ie),g(pe),g(ee))};static \u0275cmp=y({type:n,selectors:[["app-product-list"]],viewQuery:function(e,t){if(e&1&&F(Se,5),e&2){let o;R(o=V())&&(t.reusableTable=o.first)}},decls:17,vars:37,consts:[["cardList",""],["reusableTable",""],[3,"buttonClick1","title","title1","activeitem","btnShow1","buttonText1","icon1","dataHsOverlay"],[1,"grid","grid-cols-12","gap-x-2"],[4,"ngIf","ngIfElse"],[1,"row"],[1,"col-xl-12"],[1,"box"],[3,"logBtn","importBtn","onRefresh","button1","pageTitle","listLength","refreshLabel","btnShow","btnShow1","btnShow2","btnShow3","addBtnLabel","logsLabel","importLabel"],[1,"box-body"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"sortChanged","selectionChange","textSearchChange","dateRangeChange","tableHead","showCheckbox","showS_No","showSorting","showFilterRow","showAction","columns","subModule"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],["class","xxl:col-span-2 xl:col-span-2 col-span-12 skeleton skeleton-multiple-box",4,"ngFor","ngForOf"],[1,"xxl:col-span-2","xl:col-span-2","col-span-12","skeleton","skeleton-multiple-box"],[1,"skeleton-left"],[1,"line"],[1,"skeleton-right"],[1,"square"],[1,"xxl:col-span-2","xl:col-span-2","col-span-12"],[3,"card"],["class","product-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],[1,"product-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[4,"ngFor","ngForOf"],[1,"flex","flex-row","items-center","!gap-2","text-[0.9375rem]"],["aria-label","anchor","class","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light",3,"click",4,"ngIf"],[4,"ngIfElseNonDate","ngIf"],["class","font-semibold",4,"ngIf"],["class","badge",4,"ngIf"],[1,"font-semibold"],[1,"text-primary","underline",3,"click","routerLink"],[1,"badge"],[3,"checkedChange","checked"],["aria-label","anchor",1,"ti-btn","btn-wave","product-btn","ti-btn-sm","ti-btn-soft-danger","waves-effect","waves-light",3,"click"],[1,"ri-delete-bin-line"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],["class","w120",4,"ngFor","ngForOf"],[1,"w120"]],template:function(e,t){if(e&1){let o=v();c(0,"app-page-header",2),h("buttonClick1",function(){return p(o),m(t.openHeaderSettingModal())}),l(),c(1,"div",3),_(2,ke,2,1,"ng-container",4)(3,Pe,2,0,"ng-template",null,0,j),l(),c(5,"div",5)(6,"div",6)(7,"div",7)(8,"app-page-sub-header",8),h("logBtn",function(){return p(o),m(t.openMainLogModal(""))})("importBtn",function(){return p(o),m(t.importModal())})("onRefresh",function(){return p(o),m(t.onRefresh())})("button1",function(){return p(o),m(t.goToPage())}),l(),c(9,"div",9)(10,"div",10)(11,"spk-reusable-tables",11,1),h("sortChanged",function(u){return p(o),m(t.onSortChanged(u))})("selectionChange",function(u){return p(o),m(t.handleSelectionChange(u))})("textSearchChange",function(u){return p(o),m(t.updateSearchFilter(u))})("dateRangeChange",function(u){return p(o),m(t.handleDateRangeChange(u))}),_(13,Be,2,1,"ng-container",12),l(),_(14,Ae,2,2,"ng-container",12)(15,Ne,2,0,"ng-container",12),l()(),c(16,"app-pagination-footer",13),h("preButtonClick",function(){return p(o),m(t.changeToPagination("Previous"))})("nextButtonClick",function(){return p(o),m(t.changeToPagination("Next"))})("pageChange",function(u){return p(o),m(t.changeToPage(u))}),l()()()()}if(e&2){let o=H(4);s("title","Master Modules")("title1",S(36,Le))("activeitem","Products List")("btnShow1",t.accessRight==null?null:t.accessRight.modifyRight)("buttonText1","Header Config")("icon1","settings")("dataHsOverlay","#product-header-config"),r(2),s("ngIf",t.skLoading)("ngIfElse",o),r(6),s("pageTitle","Products List")("listLength",t.pagination.total)("refreshLabel","Refresh")("btnShow",!0)("btnShow1",!0)("btnShow2",t.accessRight==null?null:t.accessRight.addRight)("btnShow3",!0)("addBtnLabel","Add Product")("logsLabel","Logs")("importLabel","Import"),r(3),s("tableHead","border-b")("showCheckbox",!1)("showS_No",!0)("showSorting",!0)("showFilterRow",!0)("showAction",!0)("columns",t.visibleHeaders)("subModule",t.subModule),r(2),s("ngIf",!t.skLoading),r(),s("ngIf",t.skLoading),r(),s("ngIf",!t.listing.length&&!t.skLoading),r(),s("currentPage",t.pagination.cur_page)("totalPage",t.pagination.total_pages)("pageLimit",t.pagination.limit)("listLength",t.listing.length)("preBtn",!t.pagination.prev)("nextBtn",!t.pagination.next)}},dependencies:[se,A,N,me,te,ae,re,he,fe,$,K,G,q,oe,X,ue,z,ge],encapsulation:2})};export{be as ProductListComponent};
