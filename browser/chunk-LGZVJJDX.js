import{a as re}from"./chunk-SQZ3YN6N.js";import{c as de}from"./chunk-CIBZCVJQ.js";import{F as ae,c as J,s as ne}from"./chunk-VHE3PQ3O.js";import{$a as oe,B as G,G as Q,Ga as X,Oa as Y,Pa as Z,W as z,Ya as ee,Z as H,Za as te,hb as ie,oa as K,w as R,wa as U,z as $}from"./chunk-GYDYF5F3.js";import{e as A,f as j,g as B,k as q,n as W,t as P}from"./chunk-PD5VTTIY.js";import{Aa as m,Ba as _,Bc as V,Ca as F,Da as T,Hb as O,Mc as f,Nc as y,Ob as c,Oc as h,Uc as M,Vc as S,Wc as I,Yc as E,Zc as k,_b as p,ed as L,fd as N,kc as d,lc as l,mc as g,nc as D,oc as C,qc as v,rb as n,sb as u,wc as w,yc as s}from"./chunk-2NSPOFEK.js";var le=()=>[],se=t=>({"hs-accordion-toggle hs-accordion-active:!text-primary hs-accordion-active:border hs-accordion-active:border-transparent hs-accordion-active:bg-primary/10   dark:hs-accordion-active:!text-primary dark:hs-accordion-active:border ":t}),ce=t=>({display:t});function me(t,o){t&1&&(d(0,"div",10),g(1,"app-skeleton"),l())}function _e(t,o){t&1&&(d(0,"div",7)(1,"div",8)(2,"div",1),c(3,me,2,0,"div",9),l()()()),t&2&&(n(3),p("ngForOf",E(1,le).constructor(3)))}function ue(t,o){t&1&&g(0,"mat-progress-bar",33)}function ge(t,o){if(t&1&&(D(0),d(1,"mat-option",36),f(2),l(),C()),t&2){let e=o.$implicit;n(),V("value",e.option_name),n(),y(e.label?e.label:"---")}}function fe(t,o){if(t&1){let e=v();d(0,"div",28)(1,"mat-form-field",29)(2,"mat-select",34,0),I("ngModelChange",function(i){m(e);let r=s(3);return S(r.data.dependent_value_option,i)||(r.data.dependent_value_option=i),_(i)}),c(4,ge,3,2,"ng-container",35),l()()()}if(t&2){let e=s(3);n(2),M("ngModel",e.data.dependent_value_option),n(2),p("ngForOf",e.dropDownDependentValue)}}function ve(t,o){if(t&1&&(d(0,"span",44),f(1),l()),t&2){let e=s().$implicit;n(),y(e.dependent_option_name?e.dependent_option_name+"-":"")}}function we(t,o){if(t&1){let e=v();d(0,"li",37)(1,"div",38)(2,"div",39)(3,"span",40),f(4),c(5,ve,2,1,"span",41),f(6),l()(),d(7,"div",42)(8,"app-icon-button",43),w("clickEvent",function(){let i=m(e).$implicit,r=s().$implicit,b=s(2);return _(b.delete(r._id,i._id,i.option_name))}),l()()()()}if(t&2){let e=o.$implicit,a=o.index;n(4),h(" ",a+1,". "),n(),p("ngIf",e.dependent_option_name),n(),h(" ",e.option_name?e.option_name:""," "),n(2),p("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light m-0 mt-1 mb-1")}}function he(t,o){if(t&1){let e=v();d(0,"div",13)(1,"div",14)(2,"button",15),w("click",function(){let i=m(e),r=i.$implicit,b=i.index,x=s(2);return x.toggleCollapse(b),x.getOptions(r._id),_(r.dependent_dropdown_id?x.getDependentOptions(r.dependent_dropdown_id):"")}),f(3),L(4,"titlecase"),d(5,"div",16),F(),d(6,"svg",17),g(7,"path",18)(8,"path",19),l(),d(9,"svg",20),g(10,"path",18),l()()(),T(),d(11,"div",21)(12,"div",22),c(13,ue,1,0,"mat-progress-bar",23),d(14,"ul",24)(15,"li")(16,"div",25)(17,"div",26),c(18,fe,5,2,"div",27),d(19,"div",28)(20,"mat-form-field",29)(21,"input",30),I("ngModelChange",function(i){m(e);let r=s(2);return S(r.data.dropdown_option,i)||(r.data.dropdown_option=i),_(i)}),l()()(),d(22,"app-icon-button",31),w("click",function(){let i=m(e).$implicit,r=s(2);return _(r.submitOption(i._id,i.dropdown_name,r.dropDownDependentValue.length))}),l()()()(),c(23,we,9,5,"li",32),l()()()()()}if(t&2){let e=o.$implicit,a=o.index,i=s(2);n(2),p("ngClass",k(12,se,i.openIndex===a)),n(),h(" ",e.dropdown_display_name?N(4,10,e.dropdown_display_name):""," "),n(8),p("ngStyle",k(14,ce,i.openIndex===a?"block":"none")),n(2),p("ngIf",i.optionLoading),n(5),p("ngIf",e.dependent_dropdown_name),n(3),M("ngModel",i.data.dropdown_option),n(),p("icon","ri-add-line")("buttonClass","ti-btn ti-btn-icon ti-btn-primary btn-wave m-0")("disabled",i.btnDisabled),n(),p("ngForOf",i.dropDownValue)}}function be(t,o){if(t&1&&(d(0,"div",11),c(1,he,24,16,"div",12),l()),t&2){let e=s();n(),p("ngForOf",e.dropDown)}}function xe(t,o){t&1&&(D(0),g(1,"app-data-not-found"),C())}var pe=class t{constructor(o,e,a,i,r){this.modalData=o;this.dialogRef=e;this.toastr=a;this.api=i;this.comanFuncation=r}skLoading=!1;optionLoading=!1;btnDisabled=!1;data={};moduleData;dropDown=[];dropDownValue=[];dropDownDependentValue=[];openIndex=null;ngOnInit(){this.modalData.call_as==="modal"&&(this.moduleData=this.modalData.moduleData),this.getCategoryName()}toggleCollapse(o){this.openIndex=this.openIndex===o?null:o,this.data.dependent_value_option=""}delete(o,e,a){this.comanFuncation.delete(e,this.moduleData,a,"dropdown/delete-option").subscribe(i=>{i===!0&&this.getOptions(o)})}getCategoryName(){this.skLoading=!0,this.api.post({module_id:this.moduleData.sub_module_id?this.moduleData.sub_module_id:this.moduleData.module_id},"dropdown/read").subscribe(o=>{o.statusCode===200&&(this.skLoading=!1,this.dropDown=o.data)})}getOptions(o){this.dropDownValue=[],this.data.dropdown_option="",this.optionLoading=!0,this.api.post({dropdown_id:o},"dropdown/read-option").subscribe(e=>{e.statusCode===200&&(this.optionLoading=!1,this.dropDownValue=e.data)})}getDependentOptions(o){this.dropDownDependentValue=[],this.data.dropdown_option="",this.optionLoading=!0,this.api.post({dropdown_id:o},"dropdown/read-option").subscribe(e=>{e.statusCode===200&&(this.optionLoading=!1,this.dropDownDependentValue=e.data)})}submitOption(o,e,a){if(a>0&&this.data.dependent_value_option===void 0&&this.data.dropdown_option===void 0){this.toastr.error("Option is required","","toast-top-right");return}else if(!this.data.dropdown_option&&this.data.dropdown_option==null){this.toastr.error("Option is required","","toast-top-right");return}this.btnDisabled=!0,this.api.post({module_id:this.moduleData.sub_module_id?this.moduleData.sub_module_id:this.moduleData.module_id,module_name:this.moduleData.sub_module_name?this.moduleData.sub_module_name:this.moduleData.module_name,module_type:this.moduleData.module_type,dropdown_id:o,dropdown_name:e,option_name:this.data.dropdown_option,dependent_option_name:this.data.dependent_value_option?this.data.dependent_value_option:""},"dropdown/create-option").subscribe(i=>{i.statusCode===200?(this.data.dropdown_option="",this.btnDisabled=!1,this.getOptions(o),this.toastr.success(i.message,"","toast-top-right")):this.btnDisabled=!1})}static \u0275fac=function(e){return new(e||t)(u(Z),u(Y),u(R),u(H),u(de))};static \u0275cmp=O({type:t,selectors:[["app-module-dropdown"]],inputs:{moduleData:"moduleData"},decls:6,vars:3,consts:[["parent_field_value","ngModel"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xxl:col-span-12","col-span-12"],[1,"tab-pane","show","active","border-0","p-0","mb-5"],["class","box",4,"ngIf"],["class","accordion accordion-customicon1 accordion-primary accordions-items-seperate","id","accordionFAQ1",4,"ngIf"],[4,"ngIf"],[1,"box"],[1,"p-4"],["class","xl:col-span-12 col-span-12 mb-4",4,"ngFor","ngForOf"],[1,"xl:col-span-12","col-span-12","mb-4"],["id","accordionFAQ1",1,"accordion","accordion-customicon1","accordion-primary","accordions-items-seperate"],["class","hs-accordion-group",4,"ngFor","ngForOf"],[1,"hs-accordion-group"],["id","faq-one",1,"hs-accordion","bg-white","dark:bg-bodybg","border","dark:border-defaultborder/10","border-defaultborder","mt-[0.5rem]","rounded-sm","active"],["type","button","aria-controls","faq-collapse-one",1,"dark:border-defaultborder/10","justify-between","inline-flex","items-center","w-full","font-semibold","text-start","text-[0.85rem]","transition","py-3","px-4","dark:text-gray-200","dark:hover:text-white/80",3,"click","ngClass"],[1,"flex","items-center","gap-1"],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg",1,"hs-accordion-active:hidden","hs-accordion-active:!text-primary","hs-accordion-active:!bg-primary","hs-accordion-active:group-hover:!text-primary","block","sm:w-[1.25rem]","h-[1.25rem]","w-[2.25rem]","ms-2","p-[3px]","rounded-full","text-gray-600","bg-light","group-hover:text-defaulttextcolor","dark:text-defaulttextcolor/80"],["d","M1.5 8.85999L14.5 8.85998","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M8 15.36L8 2.35999","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg",1,"hs-accordion-active:block","hs-accordion-active:!text-white","hs-accordion-active:!bg-primary","hs-accordion-active:group-hover:!text-primary","hidden","sm:w-[1.25rem]","h-[1.25rem]","w-[2.25rem]","ms-2","p-[3px]","rounded-full","text-gray-600","bg-light","group-hover:text-defaulttextcolor","dark:text-defaulttextcolor/80"],["id","faq-collapse-one","aria-labelledby","faq-one",1,"hs-accordion-content","w-full","overflow-hidden","transition-[height]","duration-300",3,"ngStyle"],[1,"p-5"],["mode","indeterminate","style","margin: -8px 0px 10px 0px;",4,"ngIf"],[1,"ti-list-group","!border-0"],[1,"xxl:col-span-3","xl:col-span-12","lg:col-span-12","md:col-span-6","col-span-12"],[1,"flex","gap-3"],["class","wp100",4,"ngIf"],[1,"wp100"],[1,"mat-custom-field"],["matInput","","placeholder","Add New Option *","name","dropdown_option",3,"ngModelChange","ngModel"],["matTooltip","Add New Option",3,"click","icon","buttonClass","disabled"],["class","!border-b",4,"ngFor","ngForOf"],["mode","indeterminate",2,"margin","-8px 0px 10px 0px"],["name","parent_field_value","placeholder","Select an option *","name","dependent_value_option",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[3,"value"],[1,"!border-b"],[1,"flex","items-center","flex-wrap","gap-2"],[1,"flex-auto"],[1,"block","font-bold","capitalize"],["class","text-success",4,"ngIf"],[1,"btn-list"],["matTooltip","Delete",3,"clickEvent","icon","buttonClass"],[1,"text-success"]],template:function(e,a){e&1&&(d(0,"div",1)(1,"div",2)(2,"div",3),c(3,_e,4,2,"div",4)(4,be,2,1,"div",5)(5,xe,2,0,"ng-container",6),l()()()),e&2&&(n(3),p("ngIf",a.skLoading),n(),p("ngIf",!a.skLoading),n(),p("ngIf",!a.dropDown.length&&!a.skLoading))},dependencies:[ae,A,j,B,q,$,G,Q,J,ne,re,te,W,P,ie,K,X,U,oe,ee,z],encapsulation:2})};export{pe as a};
