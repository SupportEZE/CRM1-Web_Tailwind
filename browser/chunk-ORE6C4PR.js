import{a as ue}from"./chunk-7X2DQYED.js";import{a as ge}from"./chunk-J4NDCUAB.js";import"./chunk-PU6S26UW.js";import{a as de}from"./chunk-54KZ5YIV.js";import"./chunk-SQZ3YN6N.js";import{b as pe,c as _e}from"./chunk-CIBZCVJQ.js";import"./chunk-OTFCGVEU.js";import"./chunk-CNF4GSI7.js";import{a as re}from"./chunk-OEHD5D2Y.js";import{a as me}from"./chunk-GLWQGYBC.js";import{a as J}from"./chunk-DC4QM32I.js";import{F as ce,c as z,q as le,s as se}from"./chunk-VHE3PQ3O.js";import{Aa as Y,B as G,Ca as Z,Ea as $,G as U,Ga as ee,Ha as te,Ia as ie,Ja as ne,Qa as oe,Z as q,hb as ae,va as Q,wa as X,z as K}from"./chunk-GYDYF5F3.js";import{K as N,M as O,Q as j,f as F,g as W,n as A,o as H}from"./chunk-PD5VTTIY.js";import{Aa as p,Ba as _,Hb as I,Lc as R,Mc as g,Nc as y,Ob as u,Oc as D,Uc as C,Vc as b,Wc as x,Yc as k,_b as m,ac as E,bc as T,ed as M,fc as v,fd as B,gd as P,kc as l,lc as r,mc as w,nc as S,oc as L,qc as f,rb as a,sb as h,wc as d,yc as c}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var Ce=()=>["Dispatch"],fe=()=>[];function be(o,n){o&1&&(l(0,"td"),g(1,"\xA0"),r())}function xe(o,n){if(o&1){let i=f();l(0,"button",19),d("click",function(){p(i);let e=c(2);return e.filter.billing_company="",_(e.getList())}),l(1,"mat-icon"),g(2,"close"),r()()}}function ye(o,n){if(o&1){let i=f();l(0,"button",19),d("click",function(){p(i);let e=c(2);return e.filter.order_no="",_(e.getList())}),l(1,"mat-icon"),g(2,"close"),r()()}}function ve(o,n){if(o&1){let i=f();l(0,"button",19),d("click",function(){p(i);let e=c(2);return e.filter.customer_type_name="",_(e.getList())}),l(1,"mat-icon"),g(2,"close"),r()()}}function we(o,n){if(o&1){let i=f();l(0,"button",19),d("click",function(){p(i);let e=c(2);return e.filter.customer_name="",_(e.getList())}),l(1,"mat-icon"),g(2,"close"),r()()}}function Se(o,n){if(o&1){let i=f();l(0,"td")(1,"mat-checkbox",23),x("ngModelChange",function(e){p(i);let s=c().$implicit;return b(s._checked,e)||(s._checked=e),_(e)}),d("change",function(e){p(i);let s=c().$implicit,V=c(2);return _(V.onCheckboxChange(e,s))}),r()()}if(o&2){let i=c().$implicit,t=c(2);a(),C("ngModel",i._checked),m("disabled",t.isCheckboxDisabled(i))("indeterminate",t.isCheckboxDisabled(i))}}function Le(o,n){if(o&1){let i=f();l(0,"tr",20)(1,"td"),g(2),r(),u(3,Se,2,3,"td",8),l(4,"td"),g(5),M(6,"date"),r(),l(7,"td"),g(8),r(),l(9,"td")(10,"a",21),d("click",function(){let e=p(i).$implicit,s=c(2);return _(s.goToDetail(e._id))}),g(11),r()(),l(12,"td"),g(13),r(),l(14,"td"),g(15),M(16,"titlecase"),r(),l(17,"td",22),g(18),r()()}if(o&2){let i=n.$implicit,t=n.index,e=c(2);E("bg-gray-400",e.isHighlighted(i._id)),a(2),y((e.pagination.cur_page-1)*e.pagination.limit+t+1),a(),m("ngIf",e.pageType==="gatepass_pending"),a(2),y(i.created_at?P(6,10,i.created_at,"dd MMM yyyy hh:mm a"):""),a(3),y(i.billing_company?i.billing_company:""),a(3),D(" ",i.order_no?i.order_no:"---"," "),a(2),y(i.customer_type_name?e.removeSpace.formatText(i.customer_type_name):"---"),a(2),y(i.customer_name?B(16,13,i.customer_name):"---"),a(3),D(" ",i.customer_code?i.customer_code:"N/A"," ")}}function ke(o,n){if(o&1){let i=f();S(0),l(1,"tr",10)(2,"td",11),g(3,"\xA0"),r(),u(4,be,2,0,"td",8),l(5,"td")(6,"div",12)(7,"mat-form-field",13)(8,"input",14),x("ngModelChange",function(e){p(i);let s=c();return b(s.filter.created_at,e)||(s.filter.created_at=e),_(e)}),d("ngModelChange",function(){p(i);let e=c();return _(e.getList())}),r(),w(9,"mat-datepicker-toggle",15)(10,"mat-datepicker",null,0),r()()(),l(12,"td")(13,"div",12)(14,"mat-form-field",13)(15,"input",16),x("ngModelChange",function(e){p(i);let s=c();return b(s.filter.billing_company,e)||(s.filter.billing_company=e),_(e)}),d("keyup.enter",function(){p(i);let e=c();return _(e.getList())}),r(),u(16,xe,3,0,"button",17),r()()(),l(17,"td",11)(18,"div",12)(19,"mat-form-field",13)(20,"input",16),x("ngModelChange",function(e){p(i);let s=c();return b(s.filter.order_no,e)||(s.filter.order_no=e),_(e)}),d("keyup.enter",function(){p(i);let e=c();return _(e.getList())}),r(),u(21,ye,3,0,"button",17),r()()(),l(22,"td",11)(23,"div",12)(24,"mat-form-field",13)(25,"input",16),x("ngModelChange",function(e){p(i);let s=c();return b(s.filter.customer_type_name,e)||(s.filter.customer_type_name=e),_(e)}),d("keyup.enter",function(){p(i);let e=c();return _(e.getList())}),r(),u(26,ve,3,0,"button",17),r()()(),l(27,"td",11)(28,"div",12)(29,"mat-form-field",13)(30,"input",16),x("ngModelChange",function(e){p(i);let s=c();return b(s.filter.customer_name,e)||(s.filter.customer_name=e),_(e)}),d("keyup.enter",function(){p(i);let e=c();return _(e.getList())}),r(),u(31,we,3,0,"button",17),r()()()(),u(32,Le,19,15,"tr",18),L()}if(o&2){let i=R(11),t=c();a(4),m("ngIf",t.pageType==="gatepass_pending"),a(4),m("matDatepicker",i),C("ngModel",t.filter.created_at),a(),m("for",i),a(6),C("ngModel",t.filter.billing_company),a(),v(t.filter.billing_company?16:-1),a(4),C("ngModel",t.filter.order_no),a(),v(t.filter.order_no?21:-1),a(4),C("ngModel",t.filter.customer_type_name),a(),v(t.filter.customer_type_name?26:-1),a(4),C("ngModel",t.filter.customer_name),a(),v(t.filter.customer_name?31:-1),a(),m("ngForOf",t.listing)}}function Te(o,n){o&1&&(l(0,"td"),w(1,"app-skeleton"),r()),o&2&&(a(),T("h20 bg-skeleton"))}function De(o,n){if(o&1&&(l(0,"tr",10),u(1,Te,2,2,"td",25),r()),o&2){let i=c(2);a(),m("ngForOf",k(1,fe).constructor(i.pageType==="gatepass_pending"?8:7))}}function Me(o,n){o&1&&(S(0),u(1,De,2,2,"tr",24),L()),o&2&&(a(),m("ngForOf",k(1,fe).constructor(5)))}function Ve(o,n){o&1&&(S(0),w(1,"app-data-not-found"),L())}var he=class o{constructor(n,i,t,e,s,V,Ie,Ee){this.route=n;this.comanFuncation=i;this.router=t;this.api=e;this.dialog=s;this.removeSpace=V;this.highlightService=Ie;this.moduleService=Ee}skLoading=!1;listing=[];pagination={};filter={};pageKey="payment-list";highlightedId;pageType={};checked={};mainTabs=[{name:"Unpaid",label:"Unpaid",icon:"ri-bill-fill"},{name:"All",label:"All",icon:"ri-inbox-fill"}];selectedBillingCom=null;selectedRows=[];ngOnInit(){let n=this.highlightService.getHighlight(this.pageKey);n!=null&&(this.highlightedId=n.rowId,this.pagination.cur_page=n.pageIndex,this.filter=n.filters,this.highlightService.clearHighlight(this.pageKey)),this.route.paramMap.subscribe(i=>{i.get("type")&&(this.pageType=i.get("type"),this.getList())})}onRefresh(){this.getList(),this.selectedRows=[]}isCheckboxDisabled(n){return this.selectedBillingCom?n.organisation_name!==this.selectedBillingCom:!1}onCheckboxChange(n,i){n.checked?(this.selectedBillingCom=i.organisation_name,this.selectedRows.some(e=>e._id===i._id)||this.selectedRows.push(i)):(this.selectedRows=this.selectedRows.filter(e=>e._id!==i._id),this.listing.some(e=>e!==i&&e._checked&&e.organisation_name===this.selectedBillingCom)||(this.selectedBillingCom=null))}goToDetail(n){this.setHighLight(n),this.router.navigate(["/apps/wms/dispatch-list/"+this.pageType+"/dispatch-detail/"+n])}getList(){this.skLoading=!0,this.api.post({page:this.pagination.cur_page??1,activeTab:this.pageType,filters:this.filter},"dispatch/read").subscribe(n=>{n.statusCode===200?(this.listing=n?.data??[],this.pagination=n.pagination,this.skLoading=!1):this.skLoading=!1})}changeToPagination(n){n=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.getList()):this.pagination.next&&(this.pagination.cur_page++,this.getList())}changeToPage(n){this.pagination.cur_page=n,this.getList()}isHighlighted(n){return this.highlightedId===n}setHighLight(n){this.comanFuncation.setHighLight(this.pageKey,n,"",this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}getColumn(){return[...this.pageType==="gatepass_pending"?[{label:"Action"}]:[],{label:"Created At"},{label:"Billing Company"},{label:"Order Number"},{label:"Customer Type"},{label:"Customer Detail"},{label:"Account Code"}]}openDialog(n){this.dialog.open(ue,{width:"1024px",data:{lastPage:n,item:this.selectedRows??[]}}).afterClosed().subscribe(t=>{t===!0&&(this.selectedRows=[],this.getList())})}static \u0275fac=function(i){return new(i||o)(h(N),h(_e),h(O),h(q),h(oe),h(de),h(pe),h(J))};static \u0275cmp=I({type:o,selectors:[["app-dispatch-list"]],decls:11,vars:25,consts:[["picker",""],[3,"buttonClick","title","title1","activeitem","btnShow","buttonText","icon"],[1,"row"],[1,"col-xl-12"],[1,"box","py-4","px-4"],[3,"onRefresh","pageTitle","listLength","btnShow","refreshLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","columns"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","created_at","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["class","invoice-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"invoice-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"font-medium","text-primary",3,"click"],[1,"text-right"],["color","accent",3,"ngModelChange","change","ngModel","disabled","indeterminate"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(i,t){i&1&&(l(0,"app-page-header",1),d("buttonClick",function(){return t.openDialog("gatepass")}),r(),l(1,"div",2)(2,"div",3)(3,"div",4)(4,"app-page-sub-header",5),d("onRefresh",function(){return t.onRefresh()}),r(),l(5,"div",6)(6,"spk-reusable-tables",7),u(7,ke,33,13,"ng-container",8)(8,Me,2,2,"ng-container",8),r(),u(9,Ve,2,0,"ng-container",8),l(10,"app-pagination-footer",9),d("preButtonClick",function(){return t.changeToPagination("Previous")})("nextButtonClick",function(){return t.changeToPagination("Next")})("pageChange",function(s){return t.changeToPage(s)}),r()()()()()),i&2&&(m("title","WMS")("title1",k(24,Ce))("activeitem",t.removeSpace.formatText(t.pageType))("btnShow",t.selectedRows.length>0&&t.pageType==="gatepass_pending")("buttonText","Genrate Gate Pass")("icon","description"),a(4),T("p-0 pt-0"),m("pageTitle",t.removeSpace.formatText(t.pageType)+" List")("listLength",t.pagination.total?t.pagination.total:0)("btnShow",!0)("refreshLabel","Refresh"),a(2),m("tableHead","border-b")("showS_No",!0)("columns",t.getColumn()),a(),m("ngIf",!t.skLoading),a(),m("ngIf",t.skLoading),a(),m("ngIf",t.listing.length===0&&!t.skLoading),a(),m("currentPage",t.pagination.cur_page)("totalPage",t.pagination.total_pages)("pageLimit",t.pagination.limit)("listLength",t.listing.length)("preBtn",!t.pagination.prev)("nextBtn",!t.pagination.next))},dependencies:[ce,F,W,K,G,U,me,z,se,le,ge,A,H,j,re,ae,Y,Z,te,ie,ne,$,ee,X,Q],encapsulation:2})};export{he as DispatchListComponent};
