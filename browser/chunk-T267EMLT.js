import{a as st}from"./chunk-LD5X5WIY.js";import{a as z}from"./chunk-NUEZMFL3.js";import{a as lt}from"./chunk-J4NDCUAB.js";import"./chunk-PU6S26UW.js";import{a as rt}from"./chunk-SQZ3YN6N.js";import{c as at}from"./chunk-CIBZCVJQ.js";import{a as nt}from"./chunk-OTFCGVEU.js";import{a as it}from"./chunk-HPLI5COI.js";import"./chunk-CNF4GSI7.js";import{a as X}from"./chunk-OEHD5D2Y.js";import{a as ot}from"./chunk-GLWQGYBC.js";import{a as q}from"./chunk-DC4QM32I.js";import{F as et,c as W,q as Z,s as tt}from"./chunk-VHE3PQ3O.js";import{$ as G,Qa as J,W as Y,Z as H,Za as K,hb as Q,p as $,w as U}from"./chunk-GYDYF5F3.js";import{M as j,f as V,g as O,o as A,t as N}from"./chunk-PD5VTTIY.js";import{Aa as u,Ba as b,Bc as B,Hb as E,Mc as c,Nc as _,Ob as d,Oc as y,Pc as D,Yc as x,_b as s,bc as T,cc as I,ed as w,gc as M,hd as L,ic as R,jc as F,kc as r,lb as P,lc as l,mc as h,nc as C,oc as v,qc as S,rb as n,sb as f,wc as g,yc as m}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var pt=()=>["Spare Part"],k=()=>[];function mt(e,i){if(e&1){let t=S();r(0,"div")(1,"spk-sales-cards",12),g("buttonClick",function(){let o=u(t).$implicit,p=m();return b(o.activeTab?p.onTabChange(o.activeTab):null)}),l()()}if(e&2){let t=i.$implicit,a=m();I("",t.colClass," xl:col-span-6 col-span-12"),n(),s("card",t)("bgOnActive",t.activeTab===a.activeTab?"bg-primary/10":"")}}function _t(e,i){if(e&1){let t=S();C(0),r(1,"img",31),g("click",function(){let o=u(t).$implicit,p=m(4);return b(p.comanFuncation.zoom(o._id,"spare-part/get-doc"))}),l(),v()}if(e&2){let t=i.$implicit;n(),s("src",t.signed_url,P)}}function dt(e,i){if(e&1){let t=S();r(0,"app-icon-button",32),g("clickEvent",function(){u(t);let o=m().$implicit,p=m(3);return b(p.openModal(o,"edit"))}),l()}e&2&&s("icon","ri-edit-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-success waves-effect waves-light")}function gt(e,i){if(e&1){let t=S();r(0,"app-icon-button",33),g("click",function(){u(t);let o=m().$implicit,p=m(3);return b(p.delete(o._id,"spare-part/delete","Delete"))}),l()}e&2&&s("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function ut(e,i){if(e&1){let t=S();r(0,"tr",15)(1,"td",16),c(2),l(),r(3,"td"),c(4),l(),r(5,"td"),c(6),w(7,"date"),l(),r(8,"td")(9,"div",17)(10,"span",18),d(11,_t,2,1,"ng-container",19),l(),r(12,"div",20)(13,"span",21),c(14),l(),r(15,"span",21)(16,"a",22),g("click",function(){let o=u(t).$implicit,p=m(3);return b(p.goToDetailPage(o._id))}),c(17),l()()()()(),r(18,"td",23),c(19),l(),r(20,"td")(21,"span",21),c(22),l(),r(23,"span",21)(24,"span",24),c(25,"Last Transaction "),l(),r(26,"span",25),c(27),l()()(),r(28,"td")(29,"span",26),c(30),l()(),r(31,"td",27),d(32,dt,1,2,"app-icon-button",28),r(33,"app-icon-button",29),g("clickEvent",function(){let o=u(t).$implicit,p=m(3);return b(p.openMainLogModal(o._id))}),l(),d(34,gt,1,2,"app-icon-button",30),l()()}if(e&2){let t=i.$implicit,a=i.index,o=m(3);n(2),_((o.pagination.cur_page-1)*o.pagination.limit+a+1),n(2),_(t==null?null:t.created_name),n(2),_(L(7,16,t==null?null:t.created_at,"d MMM yyyy, hh:mm a","--")),n(5),s("ngForOf",t.files),n(3),_(t==null?null:t.product_name),n(3),_(t==null?null:t.product_code),n(2),D(" ",o.CURRENCY_SYMBOLS.RUPEE," ",(t==null?null:t.mrp)||"--",""),n(3),_((t==null?null:t.stock_quantity)||"--"),n(5),y("",(t==null?null:t.last_transaction_days)||0," Days Ago"),n(2),B("matTooltip",t==null?null:t.description),n(),_((t==null?null:t.description)||"--"),n(2),s("ngIf",o.accessRight==null?null:o.accessRight.modifyRight),n(),s("icon","ri-file-list-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),n(),s("ngIf",o.accessRight==null?null:o.accessRight.deleteRight)}}function bt(e,i){if(e&1&&(C(0),d(1,ut,35,20,"tr",14),v()),e&2){let t=m(2);n(),s("ngForOf",t.listing)}}function ft(e,i){e&1&&(r(0,"td"),h(1,"app-skeleton"),l()),e&2&&(n(),T("h20 bg-skeleton"))}function Ct(e,i){e&1&&(r(0,"tr",35),d(1,ft,2,2,"td",19),l()),e&2&&(n(),s("ngForOf",x(1,k).constructor(8)))}function vt(e,i){e&1&&(C(0),d(1,Ct,2,2,"tr",34),v()),e&2&&(n(),s("ngForOf",x(1,k).constructor(8)))}function St(e,i){if(e&1&&(C(0),r(1,"spk-reusable-tables",13),d(2,bt,2,1,"ng-container",10)(3,vt,2,2,"ng-container",10),l(),v()),e&2){let t=m();n(),s("tableHead","border-b")("showAction",!0)("showS_No",!0)("columns",t.headers),n(),s("ngIf",!t.skLoading),n(),s("ngIf",t.skLoading)}}function ht(e,i){if(e&1){let t=S();r(0,"tr",15)(1,"td",16),c(2),l(),r(3,"td"),c(4),l(),r(5,"td"),c(6),w(7,"date"),l(),r(8,"td")(9,"div",17)(10,"span",18),h(11,"img",36),l(),r(12,"div",20)(13,"span",21)(14,"a",22),g("click",function(){let o=u(t).$implicit,p=m(3);return b(p.goToDetailPage(o._id))}),c(15),l()(),r(16,"span",21),c(17),l()()()(),r(18,"td",27),c(19),l(),r(20,"td",27),c(21),l(),r(22,"td"),c(23),w(24,"date"),r(25,"span",25),c(26),l()(),r(27,"td",27)(28,"app-icon-button",33),g("click",function(){let o=u(t).$implicit,p=m(3);return b(p.delete(o._id,"spare-part/delete","Delete"))}),l()()()}if(e&2){let t=i.$implicit,a=i.index,o=m(3);n(2),_((o.pagination.cur_page-1)*o.pagination.limit+a+1),n(2),_(t.created_name),n(2),_(L(7,11,t.created_at,"d MMM yyyy, hh:mm a","--")),n(9),_(t.assigned_to_name||"--"),n(2),_(t.mobile||"--"),n(2),_(t.total_items),n(2),_(t.stock_quantity),n(2),y(" ",L(24,15,t.last_transaction_date,"d MMM yyyy, hh:mm a","--")," "),n(3),y("",t.last_transaction_days||0," Days Ago"),n(2),s("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}}function xt(e,i){if(e&1&&(C(0),d(1,ht,29,19,"tr",14),v()),e&2){let t=m(2);n(),s("ngForOf",t.listing)}}function yt(e,i){e&1&&(r(0,"td"),h(1,"app-skeleton"),l()),e&2&&(n(),T("h20 bg-skeleton"))}function wt(e,i){e&1&&(r(0,"tr",35),d(1,yt,2,2,"td",19),l()),e&2&&(n(),s("ngForOf",x(1,k).constructor(8)))}function Lt(e,i){e&1&&(C(0),d(1,wt,2,2,"tr",34),v()),e&2&&(n(),s("ngForOf",x(1,k).constructor(8)))}function kt(e,i){if(e&1&&(C(0),r(1,"spk-reusable-tables",13),d(2,xt,2,1,"ng-container",10)(3,Lt,2,2,"ng-container",10),l(),v()),e&2){let t=m();n(),s("tableHead","border-b")("showAction",!0)("showS_No",!0)("columns",t.headers_one),n(),s("ngIf",!t.skLoading),n(),s("ngIf",t.skLoading)}}function Tt(e,i){e&1&&(C(0),h(1,"app-data-not-found"),v())}var ct=class e{constructor(i,t,a,o,p,Pt,Et,It){this.dialog=i;this.api=t;this.comanFuncation=a;this.moduleService=o;this.alert=p;this.router=Pt;this.logService=Et;this.toastr=It}activeTab="company_stock";page=1;FORMID=it;skLoading=!1;pagination={};filter={};mainTabs=[];modules={};listingCount={};listing=[];cardData=[];accessRight={};CURRENCY_SYMBOLS=$;ngOnInit(){let i=this.moduleService.getAccessMap("WCMS","Spare Part");console.log(i),i&&(this.accessRight=i);let t=this.moduleService.getSubModuleByName("WCMS","Spare Part");t&&(this.modules=t,console.log(this.modules)),this.getList()}onRefresh(){this.filter={},this.getList()}onTabChange(i){this.activeTab=i,this.getList()}goToAddPage(){this.router.navigate(["/apps/service/spare-part/spare-part-add"])}goToDetailPage(i){this.router.navigate(["/apps/service/spare-part/spare-part-detail",i,this.activeTab])}changeToPage(i){this.pagination.cur_page=i,this.getList()}changeToPagination(i){i==="Next"&&this.pagination.cur_page<this.pagination.total_pages?this.pagination.cur_page++:i==="Previous"&&this.pagination.cur_page>1&&this.pagination.cur_page--,this.getList()}getList(){this.skLoading=!0,this.api.post({filters:this.filter,activeTab:this.activeTab,page:this.pagination.cur_page??1},"spare-part/read").subscribe(i=>{i.statusCode==200&&(this.skLoading=!1,this.listing=i.data.result,this.listingCount=i.data.summaryStats,this.pagination=i.pagination,this.getMainTabs())})}getMainTabs(){this.cardData=[{id:1,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Total Items",value:this.listingCount?.totalItems,bg:"primary",icon:"ti ti-box-multiple",colClass:"xxl:col-span-2"},{id:2,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Company Stock",value:this.listingCount?.companyStock,bg:"primarytint1color",icon:"ti ti-building-warehouse",colClass:"xxl:col-span-2",activeTab:"company_stock"},{id:3,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Team Stock",value:this.listingCount?.teamStock,bg:"primarytint2color",icon:"ti ti-users",colClass:"xxl:col-span-2",activeTab:"team_stock"},{id:4,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Distributor Stock",value:this.listingCount?.customerStock,bg:"primarytint3color",icon:"ti ti-truck-loading",colClass:"xxl:col-span-3",activeTab:"distributor_stock"},{id:5,cardClass:"overflow-hidden main-content-card",customClass:"justify-content-between align-items-start  mb-2",valueClass:"fw-medium mb-0",titleClass:"d-block mb-1",title:"Successfully Installation",value:this.listingCount?.distributionPercentage,bg:"primarytint3color",icon:"ti ti-checkup-list",colClass:"xxl:col-span-3"}]}delete(i,t,a){this.comanFuncation.delete(i,this.modules,a,t,"single_action",i).subscribe(o=>{o===!0&&this.getList()})}openModal(i,t){this.dialog.open(st,{width:t!=="manage-transaction"?"400px":"770px",panelClass:t!=="manage-transaction"?"mat-right-modal":"",position:t!=="manage-transaction"?{right:"0px"}:void 0,data:{formType:t,formData:i||{}}}).afterClosed().subscribe(o=>{o===!0&&this.getList()})}openMainLogModal(i){this.comanFuncation.listLogsModal(this.modules.module_id,i,this.modules.module_type).subscribe(t=>{t===!0&&this.getList()})}headers=[{label:"Created By"},{label:"Created At"},{label:"Item Detail"},{label:"Mrp",table_class:"text-right"},{label:"Stock"},{label:"Description"}];headers_one=[{label:"Created By"},{label:"Created At"},{label:"User Detail"},{label:"Total Item",table_class:"text-center"},{label:"Total Stock",table_class:"text-center"},{label:"Last Transaction"}];static \u0275fac=function(t){return new(t||e)(f(J),f(H),f(at),f(q),f(G),f(j),f(nt),f(U))};static \u0275cmp=E({type:e,selectors:[["app-spare-part-list"]],decls:16,vars:24,consts:[[3,"title","title1","activeitem"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xxl:col-span-12","col-span-12"],[3,"class"],[1,"row"],[1,"col-xl-12"],[1,"box"],[3,"onRefresh","logBtn","button1","importBtn","pageTitle","listLength","btnShow","refreshLabel","btnShow1","logsLabel","btnShow2","addBtnLabel","btnShow3","importLabel","importIcon"],[1,"box-body"],[1,"table-responsive","overflow-auto","table-bordered-default"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"buttonClick","card","bgOnActive"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showAction","showS_No","columns"],["class","product-list border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[1,"product-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"flex","items-center"],[1,"avatar","avatar-sm","me-2","avatar-rounded"],[4,"ngFor","ngForOf"],[1,""],[1,"block"],[1,"text-primary","font-medium","underline",3,"click"],[1,"text-right"],[1,"text-textmuted","dark:text-textmuted/50","text-[11px]"],[1,"badge","text-primary","bg-primary/10"],[1,"ellipsis",3,"matTooltip"],[1,"text-center"],["matTooltip","Edit",3,"icon","buttonClass","clickEvent",4,"ngIf"],[3,"clickEvent","icon","buttonClass"],[3,"icon","buttonClass","click",4,"ngIf"],["alt","Gift Image",3,"click","src"],["matTooltip","Edit",3,"clickEvent","icon","buttonClass"],[3,"click","icon","buttonClass"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],["src","./assets/images/faces/11.jpg","alt","Gift Image"]],template:function(t,a){t&1&&(h(0,"app-page-header",0),r(1,"div",1)(2,"div",2)(3,"div",1),R(4,mt,2,5,"div",3,M),l()()(),r(6,"div",4)(7,"div",5)(8,"div",6)(9,"app-page-sub-header",7),g("onRefresh",function(){return a.onRefresh()})("logBtn",function(){return a.openMainLogModal("")})("button1",function(){return a.openModal("","add")})("importBtn",function(){return a.openModal("","manage-transaction")}),l(),r(10,"div",8)(11,"div",9),d(12,St,4,6,"ng-container",10)(13,kt,4,6,"ng-container",10)(14,Tt,2,0,"ng-container",10),l(),r(15,"app-pagination-footer",11),g("preButtonClick",function(){return a.changeToPagination("Previous")})("nextButtonClick",function(){return a.changeToPagination("Next")})("pageChange",function(p){return a.changeToPage(p)}),l()()()()()),t&2&&(s("title","WCMS")("title1",x(23,pt))("activeitem","Spare Part List"),n(4),F(a.cardData),n(5),s("pageTitle","Spare Part List")("listLength",a.listing.length)("btnShow",!0)("refreshLabel","Refresh")("btnShow1",!0)("logsLabel","Logs")("btnShow2",a.accessRight==null?null:a.accessRight.addRight)("addBtnLabel","Add Spare Part")("btnShow3",a.accessRight==null?null:a.accessRight.addRight)("importLabel","Manage Transaction")("importIcon","ri-box-3-line"),n(3),s("ngIf",a.activeTab==="company_stock"),n(),s("ngIf",a.activeTab!=="company_stock"),n(),s("ngIf",!a.listing.length&&!a.skLoading),n(),s("currentPage",a.pagination.cur_page)("totalPage",a.pagination.total_pages)("pageLimit",a.pagination.limit)("listLength",a.listing.length)("preBtn",!a.pagination.prev)("nextBtn",!a.pagination.next))},dependencies:[et,V,O,ot,W,tt,Z,lt,rt,K,A,N,X,Q,Y,z],encapsulation:2})};export{ct as SparePartListComponent};
