import{a as _e}from"./chunk-SQZ3YN6N.js";import{c as pe}from"./chunk-CIBZCVJQ.js";import"./chunk-OTFCGVEU.js";import{a as re}from"./chunk-OEHD5D2Y.js";import{a as me}from"./chunk-GLWQGYBC.js";import{a as Q}from"./chunk-DC4QM32I.js";import{B as se,F as ce,c as K,s as le}from"./chunk-VHE3PQ3O.js";import{Aa as $,B as z,Ea as ee,G,Ga as te,Qa as ne,Z as J,Za as ie,hb as ae,jb as oe,p as U,va as X,w as q,wa as Z,z as H}from"./chunk-GYDYF5F3.js";import{M as Y,e as B,f as N,g as j,o as O,t as W}from"./chunk-PD5VTTIY.js";import{Aa as m,Ba as _,Bc as F,Hb as I,Mc as s,Nc as g,Ob as v,Pc as P,Uc as h,Vc as E,Wc as y,Yc as T,_b as d,bc as k,cc as L,ed as A,fc as x,gc as M,gd as R,ic as V,jc as D,kc as a,lc as i,mc as b,nc as S,oc as w,qc as f,rb as r,sb as C,wc as u,yc as c}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var ge=()=>["Event Plan"],ue=()=>[];function ve(l,t){if(l&1){let e=f();a(0,"div",3)(1,"div",11)(2,"div",12),u("click",function(){let n=m(e).$implicit,p=c();return _(p.onTabChange(n.activeTab))}),a(3,"h5",13),s(4),i(),a(5,"div",14),s(6),i(),a(7,"div"),b(8,"i"),i()()()()}if(l&2){let e=t.$implicit,o=c();r(2),d("ngClass",e.activeTab===o.activeTab?"bg-primary/10":""),r(2),g(e.count),r(2),g(e.title),r(),L("icon svg-icon-med absolute end-0 bottom-0 opacity-1 ",e.svgIconClass,""),r(),L("",e.svgIconPath," text-[25px]")}}function fe(l,t){if(l&1){let e=f();a(0,"li",15),u("click",function(){let n=m(e).$implicit,p=c();return _(p.onDateTabChange(n.event_date))}),a(1,"p",16),s(2),i(),a(3,"div",17)(4,"span",18),s(5),i(),a(6,"span",19),s(7),i()()()}if(l&2){let e=t.$implicit,o=c();d("ngClass",e.event_date===o.dateActiveTab?"text-primary bg-primary/10":""),r(2),g(e.date),r(3),g(e.day),r(2),g(e.month)}}function Ce(l,t){if(l&1){let e=f();a(0,"button",26),u("click",function(){m(e);let n=c(2);return n.filter.assigned_to_user_name="",_(n.getList())}),a(1,"mat-icon"),s(2,"close"),i()()}}function be(l,t){if(l&1){let e=f();a(0,"button",26),u("click",function(){m(e);let n=c(2);return n.filter.event_type="",_(n.getList())}),a(1,"mat-icon"),s(2,"close"),i()()}}function xe(l,t){if(l&1){let e=f();a(0,"button",26),u("click",function(){m(e);let n=c(2);return n.filter.customer_name="",_(n.getList())}),a(1,"mat-icon"),s(2,"close"),i()()}}function he(l,t){if(l&1){let e=f();a(0,"button",26),u("click",function(){m(e);let n=c(2);return n.filter.event_venue="",_(n.getList())}),a(1,"mat-icon"),s(2,"close"),i()()}}function Ee(l,t){if(l&1){let e=f();a(0,"app-icon-button",36),u("click",function(){m(e);let n=c().$implicit,p=c(2);return _(p.delete(n._id,"event/delete","Delete"))}),i()}l&2&&d("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function ye(l,t){if(l&1){let e=f();a(0,"tr",20)(1,"td"),s(2),A(3,"date"),i(),a(4,"td")(5,"div",27),b(6,"img",28),a(7,"div",29)(8,"span",30),s(9),i(),a(10,"span",30)(11,"span",31),s(12,"RM: "),i(),s(13),i()()()(),a(14,"td")(15,"span",30),s(16),i(),a(17,"span",30)(18,"a",32),u("click",function(){let n=m(e).$implicit,p=c(2);return _(p.goToDetailPage(n._id))}),s(19),i()()(),a(20,"td")(21,"span",30),b(22,"span",31),s(23),i(),a(24,"span",30)(25,"span",31),s(26,"Type: "),i(),s(27),i()(),a(28,"td")(29,"span",30)(30,"span",31),s(31,"Invite: "),i(),s(32),i(),a(33,"span",30)(34,"span",31),s(35,"Request: "),i(),s(36),i()(),a(37,"td")(38,"span",33),s(39),i()(),a(40,"td",34),v(41,Ee,1,2,"app-icon-button",35),i()()}if(l&2){let e=t.$implicit,o=c(2);r(2),g(e.event_date?R(3,14,e.event_date,"d MMM yyyy"):"--"),r(7),P("",e.assigned_to_user_name||"--"," | ",e.user_mobile||"--",""),r(4),g(e.reporting_manager_name||"--"),r(3),g(e.event_type||"--"),r(3),g(e.event_id||"--"),r(4),g(e.customer_name||"--"),r(4),g(e.customer_type_name||"--"),r(5),g(e.invite_members||"--"),r(4),P("",o.CURRENCY_SYMBOLS.RUPEE," ",e.budget_request_per_person||"--","/Person"),r(2),F("matTooltip",e.event_venue),r(),g(e.event_venue||"--"),r(2),d("ngIf",o.accessRight==null?null:o.accessRight.deleteRight)}}function Se(l,t){if(l&1){let e=f();S(0),a(1,"tr",20)(2,"td"),s(3,"\xA0"),i(),a(4,"td")(5,"div",21)(6,"mat-form-field",22)(7,"input",23),y("ngModelChange",function(n){m(e);let p=c();return E(p.filter.assigned_to_user_name,n)||(p.filter.assigned_to_user_name=n),_(n)}),u("keyup.enter",function(){m(e);let n=c();return _(n.getList())}),i(),v(8,Ce,3,0,"button",24),i()()(),a(9,"td")(10,"div",21)(11,"mat-form-field",22)(12,"input",23),y("ngModelChange",function(n){m(e);let p=c();return E(p.filter.event_type,n)||(p.filter.event_type=n),_(n)}),u("keyup.enter",function(){m(e);let n=c();return _(n.getList())}),i(),v(13,be,3,0,"button",24),i()()(),a(14,"td")(15,"div",21)(16,"mat-form-field",22)(17,"input",23),y("ngModelChange",function(n){m(e);let p=c();return E(p.filter.customer_name,n)||(p.filter.customer_name=n),_(n)}),u("keyup.enter",function(){m(e);let n=c();return _(n.getList())}),i(),v(18,xe,3,0,"button",24),i()()(),a(19,"td"),s(20,"\xA0"),i(),a(21,"td")(22,"div",21)(23,"mat-form-field",22)(24,"input",23),y("ngModelChange",function(n){m(e);let p=c();return E(p.filter.event_venue,n)||(p.filter.event_venue=n),_(n)}),u("keyup.enter",function(){m(e);let n=c();return _(n.getList())}),i(),v(25,he,3,0,"button",24),i()()(),a(26,"td"),s(27,"\xA0"),i()(),v(28,ye,42,17,"tr",25),w()}if(l&2){let e=c();r(7),h("ngModel",e.filter.assigned_to_user_name),r(),x(e.filter.assigned_to_user_name?8:-1),r(4),h("ngModel",e.filter.event_type),r(),x(e.filter.event_type?13:-1),r(4),h("ngModel",e.filter.customer_name),r(),x(e.filter.customer_name?18:-1),r(6),h("ngModel",e.filter.event_venue),r(),x(e.filter.event_venue?25:-1),r(3),d("ngForOf",e.listing)}}function we(l,t){l&1&&(a(0,"td"),b(1,"app-skeleton"),i()),l&2&&(r(),k("h20 bg-skeleton"))}function Te(l,t){l&1&&(a(0,"tr",20),v(1,we,2,2,"td",37),i()),l&2&&(r(),d("ngForOf",T(1,ue).constructor(7)))}function Le(l,t){l&1&&(S(0),v(1,Te,2,2,"tr",25),w()),l&2&&(r(),d("ngForOf",T(1,ue).constructor(8)))}function Pe(l,t){l&1&&(S(0),b(1,"app-data-not-found"),w())}var de=class l{constructor(t,e,o,n,p,Ie,ke){this.dialog=t;this.api=e;this.router=o;this.toastr=n;this.comanFuncation=p;this.moduleService=Ie;this.dateService=ke}skLoading=!1;activeTab="Pending";dateActiveTab;pagination={};filter={};mainTabs=[];submodule={};listingCount={};listing=[];stats=[];calenderData=[];showChangeStatusBtn=!1;CURRENCY_SYMBOLS=U;accessRight={};ngOnInit(){let t=this.moduleService.getAccessMap("SFA","Event Plan");t&&(this.accessRight=t);let e=this.moduleService.getSubModuleByName("SFA","Event Plan");e&&(this.submodule=e),this.getList()}goToAddPage(){this.router.navigate(["/apps/sfa/event-plan/event-plan-add"])}goToDetailPage(t){this.router.navigate(["/apps/sfa/event-plan/event-plan-detail",t])}onRefresh(){let{event_date:t}=this.filter||{};this.filter={},t&&(this.filter.event_date=t),this.getList()}onTabChange(t){this.activeTab=t,this.activeTab!=="total"&&this.getList()}onDateTabChange(t){this.dateActiveTab=t,this.filter.event_date=t,this.getList()}onDateChange(t,e){if(e){let o=this.dateService.formatToYYYYMMDD(e);this.filter[t]=o}else this.filter[t]=null;this.filter.event_date&&this.getList()}getList(){this.skLoading=!0,this.api.post({filters:this.filter,activeTab:this.activeTab,dateActiveTab:this.dateActiveTab,page:this.pagination.cur_page??1},"event/read").subscribe(t=>{t.statusCode==200&&(this.skLoading=!1,this.listing=t.data.result,this.listingCount=t.data.tabCounts,this.calenderData=t.data.calender_data,this.pagination=t.pagination,this.getMainTabs(),!this.dateActiveTab&&this.calenderData.length>0&&(this.dateActiveTab=this.calenderData[0].event_date,this.onDateTabChange(this.dateActiveTab)))})}changeToPage(t){this.pagination.cur_page=t,this.getList()}changeToPagination(t){t==="Next"&&this.pagination.cur_page<this.pagination.total_pages?this.pagination.cur_page++:t==="Previous"&&this.pagination.cur_page>1&&this.pagination.cur_page--,this.getList()}delete(t,e,o){this.comanFuncation.delete(t,this.submodule,o,e,"single_action",t).subscribe(n=>{n===!0&&this.getList()})}getMainTabs(){this.stats=[{title:"Total",count:this.listingCount.total_count||0,svgIconClass:"text-primarytint2color",svgIconPath:"ri-bar-chart-box-line",activeTab:"Total"},{title:"Pending Approval",count:this.listingCount.pending_count||0,svgIconClass:"text-primary",svgIconPath:"ri-time-line",activeTab:"Pending"},{title:"In Process",count:this.listingCount.inprocess_count||0,svgIconClass:"text-primary",svgIconPath:"ri-hourglass-fill",activeTab:"Inprocess"},{title:"Upcoming Event",count:this.listingCount.upcoming_count||0,svgIconClass:"text-primarytint3color",svgIconPath:"ri-calendar-event-line",activeTab:"Upcoming"},{title:"Completed",count:this.listingCount.complete_count||0,svgIconClass:"text-primarytint1color",svgIconPath:"ri-check-double-line",activeTab:"Complete"},{title:"Cancel & Reject",count:this.listingCount.reject_count||0,svgIconClass:"text-primarytint2color",svgIconPath:"ri-close-circle-line",activeTab:"Reject"}]}openMainLogModal(t){this.comanFuncation.listLogsModal(this.submodule.module_id,t,this.submodule.module_type).subscribe(e=>{e===!0&&this.getList()})}headers=[{label:"Event Date"},{label:"Request By"},{label:"Event Type"},{label:"Customer Details"},{label:"Budget Details"},{label:"Event Venue"}];static \u0275fac=function(e){return new(e||l)(C(ne),C(J),C(Y),C(q),C(pe),C(Q),C(oe))};static \u0275cmp=I({type:l,selectors:[["app-event-list"]],decls:17,vars:22,consts:[[3,"title","title1","activeitem"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xxl:col-span-12","col-span-12"],[1,"sm:col-span-2","col-span-12"],[3,"refresh","btnClick","logBtn","title","boxHeader","classbody","titleView","overallCountShow","overallCount","refresBtnShow","btn1","buttonName","iconName","logBtnShow"],[1,"upcoming-shedule"],["aria-label","Tabs","role","tablist","aria-orientation","horizontal",1,"nav","nav-pills","flex","gap-2","overflow-auto"],["class","nav-link text-center mb-2 px-4 py-3 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"columns","showCheckbox","showAction"],[4,"ngIf"],[1,"box","relative","rounded-md","overflow-hidden"],[1,"box-body",3,"click","ngClass"],[1,"mb-1"],[1,"font-medium","opacity-70"],[1,"nav-link","text-center","mb-2","px-4","py-3","cursor-pointer",3,"click","ngClass"],[1,"sh-dt","mb-0","text-lg","font-medium"],[1,"flex","items-center","justify-center"],[1,"sh-day","text-[11px]","mr-2"],[1,"sh-day","text-[11px]"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"table-search-filters"],[1,"table-input"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"flex","items-center","gap-2"],["src","./assets/images/faces/12.jpg","alt","",1,"avatar","avatar-sm","avatar-rounded"],[1,""],[1,"block"],[1,"text-textmuted","dark:text-textmuted/50","text-[11px]"],[1,"text-primary","font-medium","underline",3,"click"],[1,"ellipsis",3,"matTooltip"],[1,"text-center"],[3,"icon","buttonClass","click",4,"ngIf"],[3,"click","icon","buttonClass"],[4,"ngFor","ngForOf"]],template:function(e,o){e&1&&(b(0,"app-page-header",0),a(1,"div",1)(2,"div",2)(3,"div",1),V(4,ve,9,9,"div",3,M),i()()(),a(6,"div",1)(7,"div",2)(8,"app-showcode-card",4),u("refresh",function(){return o.onRefresh()})("btnClick",function(){return o.goToAddPage()})("logBtn",function(){return o.openMainLogModal("")}),a(9,"div",5)(10,"ul",6),v(11,fe,8,4,"li",7),i()(),a(12,"div",8)(13,"spk-reusable-tables",9),v(14,Se,29,9,"ng-container",10)(15,Le,2,2,"ng-container",10),i(),v(16,Pe,2,0,"ng-container",10),i()()()()),e&2&&(d("title","Event Plan")("title1",T(21,ge))("activeitem","Event Plan List"),r(4),D(o.stats),r(4),d("title","Event List")("boxHeader","pt-3")("classbody","pt-0")("titleView",!0)("overallCountShow",!0)("overallCount",o.listing.length)("refresBtnShow",!0)("btn1",!0)("buttonName","Add Event Plan")("iconName","ri-draft-line")("logBtnShow",!0),r(3),d("ngForOf",o.calenderData),r(2),d("columns",o.headers)("showCheckbox",!1)("showAction",!0),r(),d("ngIf",!o.skLoading),r(),d("ngIf",o.skLoading),r(),d("ngIf",!o.listing.length&&!o.skLoading))},dependencies:[ce,B,N,j,H,z,G,me,K,le,_e,ie,O,W,re,se,ae,$,ee,te,Z,X],encapsulation:2})};export{de as EventPlanListComponent};
