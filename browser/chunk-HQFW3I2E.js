import{a as De}from"./chunk-J4NDCUAB.js";import{a as qe}from"./chunk-54KZ5YIV.js";import{a as Ve}from"./chunk-SQZ3YN6N.js";import{b as Le,c as Ee}from"./chunk-CIBZCVJQ.js";import{a as ke}from"./chunk-HPLI5COI.js";import{b as Ie}from"./chunk-DUVWFXSE.js";import{a as ve}from"./chunk-OEHD5D2Y.js";import{a as Me}from"./chunk-GLWQGYBC.js";import{a as le}from"./chunk-DC4QM32I.js";import{F,c as _e,q as we,r as Se,s as Te,u as Qe}from"./chunk-VHE3PQ3O.js";import{$ as re,Aa as pe,B as ne,Ea as de,G as ie,Ga as me,Ha as ge,Ia as ue,Ja as fe,Oa as Ce,Pa as xe,Qa as be,Ta as he,W as oe,Z as ae,Za as ye,hb as B,jb as O,va as ce,w as ee,wa as se,z as te}from"./chunk-GYDYF5F3.js";import{M as Z,Q as $,e as J,f as R,g as P,n as U,o as X,t as W}from"./chunk-PD5VTTIY.js";import{$c as K,Aa as s,Ba as p,Hb as V,Lc as q,Mc as d,Nc as b,Ob as u,Oc as M,Pc as H,Uc as h,Vc as y,Wc as v,Yc as E,Zc as z,_b as m,ac as I,bc as x,ed as k,fc as w,fd as L,gd as D,kc as o,lc as i,mc as f,nc as T,oc as Q,qc as C,qd as Y,rb as r,sb as S,wc as g,yc as l,za as j}from"./chunk-2NSPOFEK.js";function Ne(a,_){if(a&1&&(o(0,"tr",5)(1,"td",10),d(2),i(),o(3,"td",7),d(4),i(),o(5,"td",10),d(6),i(),o(7,"td",11),d(8),i()()),a&2){let e=_.$implicit,n=_.index,t=l(2);r(2),b(n+1),r(2),b(e.qr_item_code?e.qr_item_code:""),r(2),b(t.modalData.data.product_data.product_name),r(2),b(t.modalData.data.product_data.product_code)}}function Ae(a,_){if(a&1){let e=C();o(0,"div",1)(1,"app-modal-header",2),g("close",function(){s(e);let t=l();return p(t.closeModal())}),i(),o(2,"mat-dialog-content",3)(3,"table",4)(4,"thead")(5,"tr",5)(6,"th",6),d(7,"S.No"),i(),o(8,"th",7),d(9,"Item QR No."),i(),o(10,"th"),d(11,"Product Name"),i(),o(12,"th",8),d(13,"Product Code"),i()()(),o(14,"tbody"),u(15,Ne,9,4,"tr",9),i()()()()}if(a&2){let e=l();r(),m("title","Box QR No. :- "+e.modalData.data.qr_box_code+(" ("+e.modalData.data.box_items_count+")"))("closeBtn",!0),r(14),m("ngForOf",e.modalData==null?null:e.modalData.data.box_items)}}var N=class a{constructor(_,e){this.modalData=_;this.dialogRef=e}closeModal(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||a)(S(xe),S(Ce))};static \u0275cmp=V({type:a,selectors:[["app-qr-modal"]],decls:1,vars:1,consts:[["class","mat-dialoge",4,"ngIf"],[1,"mat-dialoge"],[3,"close","title","closeBtn"],[1,"mat-typography"],[1,"ti-custom-table","ti-custom-table-head","ti-custom-table-hover","ti-head-primary","whitespace-nowrap"],[1,"border-b","border-defaultborder","dark:border-defaultborder/10"],[1,"text-start","w50"],[1,"w150"],[1,"w100"],["class","border-b border-defaultborder dark:border-defaultborder/10",4,"ngFor","ngForOf"],[1,"text-start"],[1,"w120"]],template:function(e,n){e&1&&u(0,Ae,16,3,"div",0),e&2&&m("ngIf",n.modalData.pageType==="item_list")},dependencies:[Se,W,R,P,F,B,he],encapsulation:2})};var A=()=>["point_category","box","item"],He=()=>["QR List"],Oe=(a,_,e)=>({name:a,label:_,icon:e}),Ge=a=>[a],G=()=>[];function je(a,_){if(a&1&&f(0,"app-page-header",11),a&2){let e=l();m("title","IRP")("title1",E(4,He))("activeitem","QR List")("btnShow1",e.accessRight==null?null:e.accessRight.modifyRight)}}function ze(a,_){if(a&1){let e=C();o(0,"app-listing-tab",14),g("tabChange",function(t){s(e);let c=l(2);return p(c.onTabChange(t.tab))}),i()}if(a&2){let e=_.$implicit,n=l(2);m("tabs",z(7,Ge,K(3,Oe,e.name,e.label,e.icon)))("activeTab",n.activeTab)("countShow",!1)}}function Ke(a,_){if(a&1&&(o(0,"nav",12),u(1,ze,1,9,"app-listing-tab",13),i()),a&2){let e=l();r(),m("ngForOf",e.mainTabs)}}function Ye(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.created_name="",p(t.getQrData())}),o(1,"mat-icon"),d(2,"close"),i()()}}function Je(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(4);return t.filter.qr_box_code="",p(t.getQrData())}),o(1,"mat-icon"),d(2,"close"),i()()}}function Ue(a,_){if(a&1){let e=C();o(0,"td")(1,"div",18)(2,"mat-form-field",19)(3,"input",23),v("ngModelChange",function(t){s(e);let c=l(3);return y(c.filter.qr_box_code,t)||(c.filter.qr_box_code=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(3);return p(t.getQrData())}),i(),u(4,Je,3,0,"button",24),i()()()}if(a&2){let e=l(3);r(3),h("ngModel",e.filter.qr_box_code),r(),w(e.filter.qr_box_code?4:-1)}}function Xe(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(4);return t.filter.qr_item_code="",p(t.getQrData())}),o(1,"mat-icon"),d(2,"close"),i()()}}function Ze(a,_){if(a&1){let e=C();T(0),o(1,"div",18)(2,"mat-form-field",19)(3,"input",23),v("ngModelChange",function(t){s(e);let c=l(3);return y(c.filter.qr_item_code,t)||(c.filter.qr_item_code=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(3);return p(t.getQrData())}),i(),u(4,Xe,3,0,"button",24),i()(),Q()}if(a&2){let e=l(3);r(3),h("ngModel",e.filter.qr_item_code),r(),w(e.filter.qr_item_code?4:-1)}}function $e(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(4);return t.filter.qr_box_code="",p(t.getQrData())}),o(1,"mat-icon"),d(2,"close"),i()()}}function et(a,_){if(a&1){let e=C();T(0),o(1,"div",18)(2,"mat-form-field",19)(3,"input",23),v("ngModelChange",function(t){s(e);let c=l(3);return y(c.filter.qr_box_code,t)||(c.filter.qr_box_code=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(3);return p(t.getQrData())}),i(),u(4,$e,3,0,"button",24),i()(),Q()}if(a&2){let e=l(3);r(3),h("ngModel",e.filter.qr_box_code),r(),w(e.filter.qr_box_code?4:-1)}}function tt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(4);return t.filter.product_name="",p(t.getQrData())}),o(1,"mat-icon"),d(2,"close"),i()()}}function nt(a,_){if(a&1){let e=C();T(0),o(1,"div",18)(2,"mat-form-field",19)(3,"input",23),v("ngModelChange",function(t){s(e);let c=l(3);return y(c.filter.product_name,t)||(c.filter.product_name=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(3);return p(t.getQrData())}),i(),u(4,tt,3,0,"button",24),i()(),Q()}if(a&2){let e=l(3);r(3),h("ngModel",e.filter.product_name),r(),w(e.filter.product_name?4:-1)}}function it(a,_){a&1&&(o(0,"td",16),d(1,"\xA0"),i())}function ot(a,_){if(a&1&&(o(0,"td",22),d(1),i()),a&2){let e=l().$implicit;r(),b(e.qr_box_code?e.qr_box_code:"")}}function at(a,_){if(a&1&&(T(0),d(1),Q()),a&2){let e=l().$implicit;r(),M(" ",e.qr_item_code?e.qr_item_code:""," ")}}function rt(a,_){if(a&1&&(T(0),d(1),Q()),a&2){let e=l().$implicit;r(),M(" ",e.qr_box_code?e.qr_box_code:""," ")}}function _t(a,_){if(a&1&&(T(0),d(1),k(2,"titlecase"),Q()),a&2){let e=l().$implicit;r(),H(" ",e.product_data?L(2,2,e.product_data.product_name):"---"," ",e.product_data?"("+e.product_data.product_code+")":"---"," ")}}function lt(a,_){if(a&1&&(T(0),d(1),k(2,"titlecase"),Q()),a&2){let e=l().$implicit;r(),M(" ",e.product_data?L(2,1,e.product_data.point_category_name):"---"," ")}}function ct(a,_){if(a&1){let e=C();o(0,"td",16)(1,"a",33),g("click",function(){s(e);let t=l().$implicit,c=l(3);return p(c.openModal(t))}),d(2),i()()}if(a&2){let e=l().$implicit;r(2),M(" ",e.box_items_count?e.box_items_count:""," ")}}function st(a,_){if(a&1){let e=C();o(0,"app-icon-button",34),g("clickEvent",function(){s(e);let t=l().$implicit,c=l(3);return p(c.delete(t._id,"qr-code/delete-qr","Qr Code"))}),i()}a&2&&m("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")("matTooltip","Delete")}function pt(a,_){if(a&1&&(o(0,"tr")(1,"td",16),d(2),i(),o(3,"td",17),d(4),k(5,"date"),i(),o(6,"td",22),d(7),k(8,"titlecase"),i(),u(9,ot,2,1,"td",30),o(10,"td",25),u(11,at,2,1,"ng-container",9)(12,rt,2,1,"ng-container",9),i(),o(13,"td"),u(14,_t,3,4,"ng-container",9)(15,lt,3,3,"ng-container",9),i(),u(16,ct,3,1,"td",26),o(17,"td",31),u(18,st,1,3,"app-icon-button",32),i()()),a&2){let e=_.$implicit,n=_.index,t=l(3);I("bg-gray-400",t.isHighlighted(e._id)),r(2),b((t.pagination.cur_page-1)*t.pagination.limit+n+1),r(2),b(e.created_at?D(5,12,e.created_at,"dd MMM yyyy hh:mm a"):"---"),r(3),b(e.created_name?L(8,15,e.created_name):""),r(2),m("ngIf",t.activeTab==="item"),r(2),m("ngIf",t.activeTab==="item"||t.activeTab==="point_category"),r(),m("ngIf",t.activeTab==="box"),r(2),m("ngIf",t.activeTab==="item"||t.activeTab==="box"),r(),m("ngIf",t.activeTab==="point_category"),r(),m("ngIf",t.activeTab==="box"),r(2),m("ngIf",t.accessRight==null?null:t.accessRight.deleteRight)}}function dt(a,_){if(a&1){let e=C();T(0),o(1,"tr",15)(2,"td",16),d(3,"\xA0"),i(),o(4,"td",17)(5,"div",18)(6,"mat-form-field",19)(7,"input",20),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.created_at,t)||(c.filter.created_at=t),p(t)}),g("ngModelChange",function(){s(e);let t=l(2);return p(t.getQrData())}),i(),f(8,"mat-datepicker-toggle",21)(9,"mat-datepicker",null,0),i()()(),o(11,"td",22)(12,"div",18)(13,"mat-form-field",19)(14,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.created_name,t)||(c.filter.created_name=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getQrData())}),i(),u(15,Ye,3,0,"button",24),i()()(),u(16,Ue,5,2,"td",9),o(17,"td",25),u(18,Ze,5,2,"ng-container",9)(19,et,5,2,"ng-container",9),i(),o(20,"td"),u(21,nt,5,2,"ng-container",9),i(),u(22,it,2,0,"td",26),o(23,"td",27),d(24,"\xA0"),i()(),u(25,pt,19,17,"tr",28),Q()}if(a&2){let e=q(10),n=l(2);r(7),m("matDatepicker",e),h("ngModel",n.filter.created_at),r(),m("for",e),r(6),h("ngModel",n.filter.created_name),r(),w(n.filter.created_name?15:-1),r(),m("ngIf",n.activeTab==="item"),r(2),m("ngIf",n.activeTab==="item"||n.activeTab==="point_category"),r(),m("ngIf",n.activeTab==="box"),r(2),m("ngIf",n.activeTab==="item"||n.activeTab==="box"),r(),m("ngIf",n.activeTab==="box"),r(3),m("ngForOf",n.qrList)}}function mt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.created_name="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function gt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.customer_type_name="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function ut(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.customer_mobile="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function ft(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.qrcode_type="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function Ct(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.box_qr_code="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function xt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.qr_code="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function bt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.point_category_name="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function ht(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.product_name="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function yt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.state="",p(t.getScanQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function vt(a,_){if(a&1){let e=C();o(0,"tr")(1,"td",16),d(2),i(),o(3,"td",17),d(4),k(5,"date"),i(),o(6,"td",17),d(7),i(),o(8,"td",22),d(9),k(10,"titlecase"),i(),o(11,"td",22),d(12),k(13,"titlecase"),i(),o(14,"td",22),d(15),k(16,"titlecase"),i(),o(17,"td",22),d(18),k(19,"titlecase"),i(),o(20,"td",25),d(21),i(),o(22,"td",25),d(23),i(),o(24,"td",25),d(25),i(),o(26,"td",25),d(27),i(),o(28,"td",25),d(29),i(),o(30,"td",35)(31,"strong"),d(32),i()(),o(33,"td",35)(34,"a",36),g("click",function(){let t=s(e).$implicit,c=l(3);return p(c.redirectToMap(t.lattitude,t.longitude))}),d(35,"View Location"),i()(),o(36,"td",35)(37,"app-icon-button",37),g("clickEvent",function(){let t=s(e).$implicit,c=l(3);return p(c.reopen(t._id))}),i()()()}if(a&2){let e=_.$implicit,n=_.index,t=l(3);I("bg-gray-400",t.isHighlighted(e._id)),r(2),M(" ",(t.pagination.cur_page-1)*t.pagination.limit+n+1," "),r(2),b(e.created_at?D(5,18,e.created_at,"dd MMM yyyy hh:mm a"):"---"),r(3),b(e.is_manual_scan?"Manual":"Scanning"),r(2),b(e.created_name?L(10,21,e.created_name):""),r(3),b(e.customer_type_name?L(13,23,e.customer_type_name):""),r(3),b(e.customer_mobile?L(16,25,e.customer_mobile):""),r(3),b(e.qrcode_type?L(19,27,e.qrcode_type):""),r(3),b(e.box_qr_code?e.box_qr_code:"---"),r(2),b(e.qr_code?e.qr_code:"---"),r(2),b(e.point_category_name?e.point_category_name:"---"),r(2),H("",e.product_name?e.product_name:"---"," ",e.product_code?"("+e.product_code+")":"",""),r(2),b(e.state?e.state:"---"),r(3),b(e.total_points?e.total_points+"PT":"---"),r(5),m("icon","ri-history-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-info waves-effect waves-light")}}function wt(a,_){if(a&1){let e=C();T(0),o(1,"tr",15)(2,"td",16),d(3,"\xA0"),i(),o(4,"td",17)(5,"div",18)(6,"mat-form-field",19)(7,"input",20),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.created_at,t)||(c.filter.created_at=t),p(t)}),g("ngModelChange",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),f(8,"mat-datepicker-toggle",21)(9,"mat-datepicker",null,0),i()()(),o(11,"td",17),d(12,"\xA0"),i(),o(13,"td",22)(14,"div",18)(15,"mat-form-field",19)(16,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.created_name,t)||(c.filter.created_name=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(17,mt,3,0,"button",24),i()()(),o(18,"td",22)(19,"div",18)(20,"mat-form-field",19)(21,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.customer_type_name,t)||(c.filter.customer_type_name=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(22,gt,3,0,"button",24),i()()(),o(23,"td",22)(24,"div",18)(25,"mat-form-field",19)(26,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.customer_mobile,t)||(c.filter.customer_mobile=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(27,ut,3,0,"button",24),i()()(),o(28,"td",22)(29,"div",18)(30,"mat-form-field",19)(31,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.qrcode_type,t)||(c.filter.qrcode_type=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(32,ft,3,0,"button",24),i()()(),o(33,"td",25)(34,"div",18)(35,"mat-form-field",19)(36,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.box_qr_code,t)||(c.filter.box_qr_code=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(37,Ct,3,0,"button",24),i()()(),o(38,"td",25)(39,"div",18)(40,"mat-form-field",19)(41,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.qr_code,t)||(c.filter.qr_code=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(42,xt,3,0,"button",24),i()()(),o(43,"td",25)(44,"div",18)(45,"mat-form-field",19)(46,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.point_category_name,t)||(c.filter.point_category_name=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(47,bt,3,0,"button",24),i()()(),o(48,"td",25)(49,"div",18)(50,"mat-form-field",19)(51,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.product_name,t)||(c.filter.product_name=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(52,ht,3,0,"button",24),i()()(),o(53,"td",25)(54,"div",18)(55,"mat-form-field",19)(56,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.state,t)||(c.filter.state=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(57,yt,3,0,"button",24),i()()(),o(58,"td",35),d(59,"\xA0"),i(),o(60,"td",35),d(61,"\xA0"),i()(),u(62,vt,38,29,"tr",28),Q()}if(a&2){let e=q(10),n=l(2);r(7),m("matDatepicker",e),h("ngModel",n.filter.created_at),r(),m("for",e),r(8),h("ngModel",n.filter.created_name),r(),w(n.filter.created_name?17:-1),r(4),h("ngModel",n.filter.customer_type_name),r(),w(n.filter.customer_type_name?22:-1),r(4),h("ngModel",n.filter.customer_mobile),r(),w(n.filter.customer_mobile?27:-1),r(4),h("ngModel",n.filter.qrcode_type),r(),w(n.filter.qrcode_type?32:-1),r(4),h("ngModel",n.filter.box_qr_code),r(),w(n.filter.box_qr_code?37:-1),r(4),h("ngModel",n.filter.qr_code),r(),w(n.filter.qr_code?42:-1),r(4),h("ngModel",n.filter.point_category_name),r(),w(n.filter.point_category_name?47:-1),r(4),h("ngModel",n.filter.product_name),r(),w(n.filter.product_name?52:-1),r(4),h("ngModel",n.filter.state),r(),w(n.filter.state?57:-1),r(5),m("ngForOf",n.scanQrList)}}function St(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.created_name="",p(t.getGenHisQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function Tt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.qrcode_type="",p(t.getGenHisQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function Qt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.paper_size="",p(t.getGenHisQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function kt(a,_){if(a&1){let e=C();o(0,"button",29),g("click",function(){s(e);let t=l(3);return t.filter.product_name="",p(t.getGenHisQr())}),o(1,"mat-icon"),d(2,"close"),i()()}}function Lt(a,_){if(a&1){let e=C();o(0,"app-icon-button",34),g("clickEvent",function(){s(e);let t=l().$implicit,c=l(3);return p(c.goToDetail(t._id))}),i()}a&2&&m("icon","ri-eye-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-success waves-effect waves-light")("matTooltip","View Detail")}function Et(a,_){if(a&1){let e=C();o(0,"app-icon-button",34),g("clickEvent",function(){s(e);let t=l().$implicit,c=l(3);return p(c.goToDetail(t._id))}),i()}a&2&&m("icon","ri-download-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-info waves-effect waves-light")("matTooltip","Download")}function Mt(a,_){if(a&1){let e=C();o(0,"app-icon-button",42),g("clickEvent",function(){s(e);let t=l().$implicit,c=l(3);return p(c.delete(t._id,"qr-code/delete-history","Qr Code"))}),i()}if(a&2){let e=l().$implicit;m("icon","ri-delete-bin-line")("disabled",e.is_printed)("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")("matTooltip",e.is_printed?"Disabled":"Delete")}}function Vt(a,_){if(a&1&&(o(0,"tr")(1,"td",16),d(2),i(),o(3,"td",17),d(4),k(5,"date"),i(),o(6,"td",22),d(7),k(8,"titlecase"),i(),o(9,"td",22),d(10),k(11,"titlecase"),i(),o(12,"td",22),d(13),i(),o(14,"td",22),d(15),i(),o(16,"td",38),d(17),i(),o(18,"td",38)(19,"span",39),d(20),i()(),o(21,"td",40)(22,"div"),u(23,Lt,1,3,"app-icon-button",32)(24,Et,1,3,"app-icon-button",32)(25,Mt,1,4,"app-icon-button",41),i()()()),a&2){let e=_.$implicit,n=_.index,t=l(3);I("bg-gray-400",t.isHighlighted(e._id)),r(2),M(" ",(t.pagination.cur_page-1)*t.pagination.limit+n+1," "),r(2),b(e.created_at?D(5,14,e.created_at,"dd MMM yyyy hh:mm a"):"---"),r(3),b(e.created_name?L(8,17,e.created_name):""),r(3),b(e.qrcode_type?L(11,19,e.qrcode_type.replaceAll("_"," ")):""),r(3),b(e.paper_size?e.paper_size:""),r(2),b(e.product_data?e.product_data.product_name?e.product_data.product_name+("("+e.product_data.product_code+")"):e.product_data.point_category_name:"---"),r(2),b(e.qrcode_qty?e.qrcode_qty:"---"),r(2),m("ngClass",e.is_printed?"bg-success/10 text-success":"bg-danger/10 text-danger"),r(),M(" ",e.is_printed?"Print":"Not Print"," "),r(3),m("ngIf",t.accessRight==null?null:t.accessRight.modifyRight),r(),m("ngIf",t.accessRight==null?null:t.accessRight.modifyRight),r(),m("ngIf",t.accessRight==null?null:t.accessRight.deleteRight)}}function It(a,_){if(a&1){let e=C();T(0),o(1,"tr",15)(2,"td",16),d(3,"\xA0"),i(),o(4,"td",17)(5,"div",18)(6,"mat-form-field",19)(7,"input",20),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.created_at,t)||(c.filter.created_at=t),p(t)}),g("ngModelChange",function(){s(e);let t=l(2);return p(t.getGenHisQr())}),i(),f(8,"mat-datepicker-toggle",21)(9,"mat-datepicker",null,0),i()()(),o(11,"td",22)(12,"div",18)(13,"mat-form-field",19)(14,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.created_name,t)||(c.filter.created_name=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(15,St,3,0,"button",24),i()()(),o(16,"td",22)(17,"div",18)(18,"mat-form-field",19)(19,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.qrcode_type,t)||(c.filter.qrcode_type=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(20,Tt,3,0,"button",24),i()()(),o(21,"td",22)(22,"div",18)(23,"mat-form-field",19)(24,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.paper_size,t)||(c.filter.paper_size=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getScanQr())}),i(),u(25,Qt,3,0,"button",24),i()()(),o(26,"td",22)(27,"div",18)(28,"mat-form-field",19)(29,"input",23),v("ngModelChange",function(t){s(e);let c=l(2);return y(c.filter.product_name,t)||(c.filter.product_name=t),p(t)}),g("keyup.enter",function(){s(e);let t=l(2);return p(t.getGenHisQr())}),i(),u(30,kt,3,0,"button",24),i()()(),o(31,"td",38),d(32,"\xA0"),i(),o(33,"td",38),d(34,"\xA0"),i(),o(35,"td",38),d(36,"\xA0"),i()(),u(37,Vt,26,21,"tr",28),Q()}if(a&2){let e=q(10),n=l(2);r(7),m("matDatepicker",e),h("ngModel",n.filter.created_at),r(),m("for",e),r(6),h("ngModel",n.filter.created_name),r(),w(n.filter.created_name?15:-1),r(4),h("ngModel",n.filter.qrcode_type),r(),w(n.filter.qrcode_type?20:-1),r(4),h("ngModel",n.filter.paper_size),r(),w(n.filter.paper_size?25:-1),r(4),h("ngModel",n.filter.product_name),r(),w(n.filter.product_name?30:-1),r(7),m("ngForOf",n.generateQr)}}function qt(a,_){if(a&1&&(T(0),u(1,dt,26,11,"ng-container",9)(2,wt,63,22,"ng-container",9)(3,It,38,12,"ng-container",9),Q()),a&2){let e=l();r(),m("ngIf",E(3,A).includes(e.activeTab)),r(),m("ngIf",e.activeTab==="scan_history"),r(),m("ngIf",e.activeTab==="generate_history")}}function Dt(a,_){a&1&&(o(0,"td",22),f(1,"app-skeleton"),i()),a&2&&(r(),x("h20 bg-skeleton"))}function Rt(a,_){a&1&&(o(0,"td",16),f(1,"app-skeleton"),i()),a&2&&(r(),x("h20 bg-skeleton"))}function Pt(a,_){if(a&1&&(o(0,"tr")(1,"td",16),f(2,"app-skeleton"),i(),o(3,"td",17),f(4,"app-skeleton"),i(),o(5,"td",22),f(6,"app-skeleton"),i(),u(7,Dt,2,2,"td",30),o(8,"td",25),f(9,"app-skeleton"),i(),o(10,"td",16),f(11,"app-skeleton"),i(),u(12,Rt,2,2,"td",26),o(13,"td",27),f(14,"app-skeleton"),i()()),a&2){let e=l(2);r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(),m("ngIf",e.activeTab==="item"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(),m("ngIf",e.activeTab==="box"),r(2),x("h20 bg-skeleton")}}function Wt(a,_){a&1&&(T(0),u(1,Pt,15,14,"tr",43),Q()),a&2&&(r(),m("ngForOf",E(1,G).constructor(10)))}function Bt(a,_){a&1&&(o(0,"tr")(1,"td",16),f(2,"app-skeleton"),i(),o(3,"td",17),f(4,"app-skeleton"),i(),o(5,"td",17),f(6,"app-skeleton"),i(),o(7,"td",17),f(8,"app-skeleton"),i(),o(9,"td",22),f(10,"app-skeleton"),i(),o(11,"td",22),f(12,"app-skeleton"),i(),o(13,"td",22),f(14,"app-skeleton"),i(),o(15,"td",22),f(16,"app-skeleton"),i(),o(17,"td",25),f(18,"app-skeleton"),i(),o(19,"td",25),f(20,"app-skeleton"),i(),o(21,"td",25),f(22,"app-skeleton"),i(),o(23,"td",25),f(24,"app-skeleton"),i(),o(25,"td",25),f(26,"app-skeleton"),i(),o(27,"td",25),f(28,"app-skeleton"),i(),o(29,"td",25),f(30,"app-skeleton"),i()()),a&2&&(r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"))}function Ft(a,_){a&1&&(T(0),u(1,Bt,31,30,"tr",43),Q()),a&2&&(r(),m("ngForOf",E(1,G).constructor(10)))}function Nt(a,_){a&1&&(o(0,"tr")(1,"td",16),f(2,"app-skeleton"),i(),o(3,"td",17),f(4,"app-skeleton"),i(),o(5,"td",22),f(6,"app-skeleton"),i(),o(7,"td",22),f(8,"app-skeleton"),i(),o(9,"td",22),f(10,"app-skeleton"),i(),o(11,"td",25),f(12,"app-skeleton"),i(),o(13,"td",25),f(14,"app-skeleton"),i(),o(15,"td",25),f(16,"app-skeleton"),i(),o(17,"td",25),f(18,"app-skeleton"),i()()),a&2&&(r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"),r(2),x("h20 bg-skeleton"))}function At(a,_){a&1&&(T(0),u(1,Nt,19,18,"tr",43),Q()),a&2&&(r(),m("ngForOf",E(1,G).constructor(10)))}function Ht(a,_){a&1&&(T(0),f(1,"app-data-not-found"),Q())}var Re=class a{constructor(_,e,n,t,c,Ot,Gt,jt,zt,Kt,Yt,Jt){this.cd=_;this.comanFuncation=e;this.toastr=n;this.dialog=t;this.api=c;this.alert=Ot;this.dateService=Gt;this.date=jt;this.router=zt;this.textFormat=Kt;this.moduleService=Yt;this.highlightService=Jt}_id;active_tab;detail_page_active=!1;filter={};skLoading=!1;disabled=!1;moduleId=0;moduleFormId=0;moduleTableId=0;FORMID=ke;submodule={};tableId;activeTab="item";qrList=[];scanQrList=[];pagination={};generateQr=[];highlightedId;pageKey="qr-list";accessRight={};mainTabs=[{name:"item",label:"Item",icon:"ri-file-text-fill"},{name:"box",label:"Box",icon:"ri-box-3-fill"},{name:"point_category",label:"Point Category",icon:"ri-exchange-fill"},{name:"scan_history",label:"Scan History",icon:"ri-qr-code-line"},{name:"generate_history",label:"Generate History",icon:"ri-time-line"}];ngOnChanges(){this.activeTab=this.active_tab}ngOnInit(){let _=this.moduleService.getAccessMap("IRP","Qr Code");_&&(this.accessRight=_,this.cd.detectChanges());let e=this.moduleService.getSubModuleByName("IRP","Qr Code"),n=this.moduleService.getFormById("IRP","Qr Code",this.FORMID.ID.QRCodeformId),t=this.moduleService.getTableById("IRP","Qr Code",this.FORMID.ID.QRCodeTableId);e&&(this.submodule=e),n&&(this.moduleFormId=n.form_id),t&&(this.tableId=t.table_id);let c=this.highlightService.getHighlight(this.pageKey);c!=null&&(this.activeTab=c.tab,this.highlightedId=c.rowId,this.pagination.cur_page=c.pageIndex,this.filter=c.filters,this.highlightService.clearHighlight(this.pageKey)),this.onTabChange(this.activeTab)}isHighlighted(_){return this.highlightedId===_}onRefresh(){this.filter={},this.activeTab==="scan_history"?this.getScanQr():this.activeTab==="generate_history"?this.getGenHisQr():this.getQrData()}onTabChange(_){this.highlightedId||(this.pagination.cur_page=1),this.activeTab=_,_==="scan_history"?this.getScanQr():_==="generate_history"?this.getGenHisQr():this.getQrData()}getColumns(){return this.activeTab==="scan_history"?[{label:"S.no.",field:"S.no."},{label:"Scan Date",field:"Scan Date"},{label:"Scan Type",field:"Scan Type"},{label:"Scan By",field:"Scan By"},{label:"Profession Type",field:"Profession Type"},{label:"Mobile No.",field:"Mobile No."},{label:"QR Type",field:"QR Type"},{label:"Box QR Code No.	",field:"Box QR Code No."},{label:"Item QR Code No.	",field:"Item QR Code No."},{label:"Point Catgory",field:"Point Catgory"},{label:"Product Detail",field:"Product Detail"},{label:"State",field:"State"},{label:"Scanning Point",field:"Scanning Point"},{label:"Geo Location",field:"Geo Location"},{label:"Action",field:"Action"}]:this.activeTab==="generate_history"?[{label:"S.no.",field:"S.no."},{label:"Date Created",field:"Date Created"},{label:"Created by",field:"Created by"},{label:"QR Type",field:"QR Type"},{label:"Paper Size",field:"Paper Size"},{label:"Product Details/ Point Catgeory",field:"Product Details/ Point Catgeory"},{label:"Total QR Code No.	",field:"Total QR Code No."},{label:"Print Status",field:"Print Status"},{label:"Action",field:"Action"}]:[{label:"S.no.",field:"S.no."},{label:"Date Created",field:"Date Created"},{label:"Created by",field:"Created by"},...this.activeTab==="item"?[{label:"Box QR Code No.",field:"Box QR Code No."}]:[],{label:this.activeTab==="box"?"Box QR Code No.":"Item QR Code No.",field:this.activeTab==="box"?"Box QR Code No.":"Item QR Code No."},...this.activeTab==="box"||this.activeTab==="item"?[{label:"Product",field:"Product"}]:[{label:"Point Category",field:"Point Category"}],...this.activeTab==="box"?[{label:"Packing Size",field:"Packing Size"}]:[],{label:"Action",field:"Action"}]}getQrData(){this.skLoading=!0,this.api.post({qrcode_type:this.activeTab,filters:this.filter,page:this.pagination.cur_page??1},"qr-code/read-qr").subscribe(_=>{_.statusCode===200?(this.qrList=_.data,this.pagination=_.pagination,this.skLoading=!1):this.skLoading=!1})}getScanQr(){this.skLoading=!0,this.api.post({qrcode_type:this.activeTab,filters:this.filter,_id:this._id,page:this.pagination.cur_page??1},"qr-code/read-scanqr").subscribe(_=>{_.statusCode===200?(this.scanQrList=_.data,this.pagination=_.pagination,this.skLoading=!1):this.skLoading=!1})}getGenHisQr(){this.skLoading=!0,this.api.post({qrcode_type:this.activeTab,filters:this.filter,_id:this._id,page:this.pagination.cur_page??1},"qr-code/read-history").subscribe(_=>{_.statusCode===200?(this.generateQr=_.data,this.pagination=_.pagination,this.skLoading=!1):this.skLoading=!1})}openModal(_){this.dialog.open(N,{width:"768px",data:{pageType:"item_list",data:_}}).afterClosed().subscribe(n=>{})}redirectToMap(_,e){if(!_&&!e){this.toastr.error("Location Not Found","","toast-top-right");return}let n=`https://www.google.com/maps?q=${_},${e}`;window.open(n,"_blank")}reopen(_){this.alert.confirm("Are you sure?","You want to reopen QR code","Yes it!").then(e=>{e.isConfirmed&&this.api.post({_id:_},"qr-code/qr-reopen").subscribe(n=>{n.statusCode===200&&(this.getScanQr(),this.toastr.success(n.message,"","toast-top-right"))})})}delete(_,e,n){this.comanFuncation.delete(_,this.submodule,n,e,"single_action",_).subscribe(t=>{t===!0&&(this.activeTab==="scan_history"?this.getScanQr():this.activeTab==="generate_history"?this.getGenHisQr():this.getQrData())})}changeToPagination(_){_=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.activeTab=="scan_history"?this.getScanQr():this.activeTab=="generate_history"?this.getGenHisQr():this.getQrData()):this.pagination.next&&(this.pagination++,this.activeTab=="scan_history"?this.getScanQr():this.activeTab=="generate_history"?this.getGenHisQr():this.getQrData())}changeToPage(_){this.pagination.cur_page=_,this.activeTab=="scan_history"?this.getScanQr():this.activeTab=="generate_history"?this.getGenHisQr():this.getQrData()}setHighLight(_){this.comanFuncation.setHighLight(this.pageKey,_,this.activeTab,this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}goToDetail(_){this.setHighLight(_),this.router.navigate(["/apps/loyalty/qr-list/qr-details/"+_])}goToPage(){this.router.navigate(["/apps/loyalty/qr-list/qr-add"])}goToStock(){this.router.navigate(["/apps/loyalty/stock-transfer-list"])}static \u0275fac=function(e){return new(e||a)(S(Y),S(Ee),S(ee),S(be),S(ae),S(re),S(O),S(O),S(Z),S(qe),S(le),S(Le))};static \u0275cmp=V({type:a,selectors:[["app-qr-list"]],inputs:{_id:"_id",active_tab:"active_tab",detail_page_active:"detail_page_active"},features:[j],decls:14,vars:26,consts:[["picker",""],[3,"title","title1","activeitem","btnShow1",4,"ngIf"],[1,"box","py-3","px-4"],["class","sm:flex sm:space-x-2 sm:rtl:space-x-reverse gap-1","aria-label","Tabs","role","tablist",4,"ngIf"],[1,"row"],[1,"col-xl-12"],[3,"onRefresh","button1","pageTitle","listLength","refreshLabel","btnShow","btnShow2","addBtnLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"columns","showCheckbox"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"title","title1","activeitem","btnShow1"],["aria-label","Tabs","role","tablist",1,"sm:flex","sm:space-x-2","sm:rtl:space-x-reverse","gap-1"],[3,"tabs","activeTab","countShow","tabChange",4,"ngFor","ngForOf"],[3,"tabChange","tabs","activeTab","countShow"],[1,"border-b","ti-custom-table","ti-custom-table-head","ti-custom-table-hover","ti-head-primary","whitespace-nowrap"],[1,"w50"],[1,"w120"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","createdAt","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],[1,"w150"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],[1,"w160"],["class","w50",4,"ngIf"],[1,"w60"],[3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["class","w150",4,"ngIf"],[1,"w60","text-right"],[3,"icon","buttonClass","matTooltip","clickEvent",4,"ngIf"],["matTooltip","View Item",1,"link-primary","underline",3,"click"],[3,"clickEvent","icon","buttonClass","matTooltip"],[1,"w160","text-right"],["matTooltip","View Geo Location",1,"link-primary","underline",3,"click"],["matTooltip","Reopen QR Code",3,"clickEvent","icon","buttonClass"],[1,"w80"],[1,"text-[11px]","badge",3,"ngClass"],[1,"w80","text-right"],[3,"icon","disabled","buttonClass","matTooltip","clickEvent",4,"ngIf"],[3,"clickEvent","icon","disabled","buttonClass","matTooltip"],[4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(u(0,je,1,5,"app-page-header",1),o(1,"div",2),u(2,Ke,2,1,"nav",3),o(3,"div",4)(4,"div",5)(5,"app-page-sub-header",6),g("onRefresh",function(){return n.onRefresh()})("button1",function(){return n.goToPage()}),i(),o(6,"div",7)(7,"spk-reusable-tables",8),u(8,qt,4,4,"ng-container",9)(9,Wt,2,2,"ng-container",9)(10,Ft,2,2,"ng-container",9)(11,At,2,2,"ng-container",9),i()(),u(12,Ht,2,0,"ng-container",9),o(13,"app-pagination-footer",10),g("preButtonClick",function(){return n.changeToPagination("Previous")})("nextButtonClick",function(){return n.changeToPagination("Next")})("pageChange",function(c){return n.changeToPage(c)}),i()()()()),e&2&&(m("ngIf",!n.detail_page_active),r(2),m("ngIf",!n.detail_page_active),r(3),x("p-0 pt-3"),m("pageTitle",n.textFormat.formatText(n.activeTab)+" QR List")("listLength",n.pagination.total?n.pagination.total:0)("refreshLabel","Refresh")("btnShow",!0)("btnShow2",!n.detail_page_active&&(n.accessRight==null?null:n.accessRight.addRight))("addBtnLabel","Generate  QR"),r(2),m("columns",n.getColumns())("showCheckbox",!1),r(),m("ngIf",!n.skLoading),r(),m("ngIf",n.skLoading&&E(23,A).includes(n.activeTab)),r(),m("ngIf",n.skLoading&&n.activeTab==="scan_history"),r(),m("ngIf",n.skLoading&&n.activeTab==="generate_history"),r(),m("ngIf",n.qrList.length===0&&!n.skLoading&&E(24,A).includes(n.activeTab)||n.scanQrList.length===0&&!n.skLoading&&n.activeTab=="scan_history"||n.generateQr.length===0&&!n.skLoading&&n.activeTab=="generate_history"),r(),m("currentPage",n.pagination.cur_page)("totalPage",n.pagination.total_pages)("pageLimit",n.pagination.limit)("listLength",n.qrList.length>0&&!n.skLoading&&E(25,A).includes(n.activeTab)||n.scanQrList.length>0&&!n.skLoading&&n.activeTab=="scan_history"||n.generateQr.length>0&&!n.skLoading&&n.activeTab=="generate_history")("preBtn",!n.pagination.prev)("nextBtn",!n.pagination.next))},dependencies:[F,J,R,P,te,ne,ie,Me,_e,Te,we,De,Ve,Qe,ye,U,X,B,pe,ge,ue,fe,de,me,se,ce,W,$,oe,Ie,ve],encapsulation:2})};export{Re as a};
