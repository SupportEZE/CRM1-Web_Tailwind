import{g as ie,h as ne,i as ue,j as oe,l as le,m as re,x as ge,y as he,z as Ce}from"./chunk-VHE3PQ3O.js";import{B as W,C as K,D as Y,F as Q,H as Z,I as ee,M as P,P as te,l as H,w as X,y as $,z as J}from"./chunk-GYDYF5F3.js";import{f as z,g as U,h as j,i as B,o as I}from"./chunk-PD5VTTIY.js";import{Aa as c,Ba as _,Hb as R,Ka as k,Mc as g,Nc as M,Ob as h,Oc as C,Xc as A,Yc as V,_b as r,ac as w,kc as d,lc as s,mc as N,nc as b,oc as E,qc as f,qd as q,rb as a,sb as T,wc as u,yc as m}from"./chunk-2NSPOFEK.js";import{a as L,b as O,g as S}from"./chunk-66YHNWRR.js";var me=S(ue()),de=S(ge()),se=S(he()),pe=S(Ce());var D=()=>[];function xe(o,n){o&1&&(d(0,"span",17),g(1,"*"),s())}function ve(o,n){if(o&1&&(d(0,"label",15),g(1),h(2,xe,2,0,"span",16),s()),o&2){let e=m(2);r("for",e.field.name),a(),C(" ",e.field.label," "),a(),r("ngIf",e.field.required)}}function ye(o,n){if(o&1){let e=f();b(0),d(1,"input",18),u("input",function(t){c(e);let l=m(2);return _(l.emitValueChange(t))}),s(),E()}if(o&2){let e,i,t=m(2);a(),w("border-red-500",((e=t.form.get(t.field.name))==null?null:e.invalid)&&(((e=t.form.get(t.field.name))==null?null:e.touched)||((e=t.form.get(t.field.name))==null?null:e.dirty))),r("type",t.getInputType())("id",t.field.name)("name",t.field.name)("formControlName",t.field.name)("placeholder",(i=t.field.placeholder)!==null&&i!==void 0?i:"")}}function Fe(o,n){if(o&1){let e=f();d(0,"textarea",19),u("input",function(t){c(e);let l=m(2);return _(l.emitValueChange(t))}),g(1,"  "),s()}if(o&2){let e,i,t=m(2);w("border-red-500",((e=t.form.get(t.field.name))==null?null:e.invalid)&&(((e=t.form.get(t.field.name))==null?null:e.touched)||((e=t.form.get(t.field.name))==null?null:e.dirty))),r("id",t.field.name)("name",t.field.name)("formControlName",t.field.name)("placeholder",(i=t.field.placeholder)!==null&&i!==void 0?i:"")}}function Te(o,n){if(o&1){let e=f();b(0),d(1,"input",20),u("input",function(t){c(e);let l=m(2);return _(l.emitValueChange(t))}),s(),E()}if(o&2){let e,i,t=m(2);a(),w("border-red-500",((e=t.form.get(t.field.name))==null?null:e.invalid)&&(((e=t.form.get(t.field.name))==null?null:e.touched)||((e=t.form.get(t.field.name))==null?null:e.dirty))),r("id",t.field.name)("name",t.field.name)("formControlName",t.field.name)("placeholder",(i=t.field.placeholder)!==null&&i!==void 0?i:"")}}function we(o,n){if(o&1){let e=f();d(0,"input",21),u("input",function(t){c(e);let l=m(2);return _(l.emitValueChange(t))}),s()}if(o&2){let e,i,t=m(2);w("border-red-500",((e=t.form.get(t.field.name))==null?null:e.invalid)&&(((e=t.form.get(t.field.name))==null?null:e.touched)||((e=t.form.get(t.field.name))==null?null:e.dirty))),r("id",t.field.name)("name",t.field.name)("formControlName",t.field.name)("placeholder",(i=t.field.placeholder)!==null&&i!==void 0?i:"Enter your email")}}function Se(o,n){if(o&1){let e=f();d(0,"spk-ng-select",22),u("selectedChange",function(t){c(e);let l=m(2);return _(l.onSingleSelectChange(t))})("searchChanged",function(t){c(e);let l=m(2);return _(l.onsearchChange(t))})("valueChange",function(t){c(e);let l=m(2);return _(l.onValueChange(t))}),s()}if(o&2){let e,i,t=m(2);r("formControlName",t.field.name)("options",(e=t.field.options)!==null&&e!==void 0?e:V(7,D))("multiple",!1)("search",t.field.search)("disabled",(i=t.field.disabled)!==null&&i!==void 0?i:!1)("label",t.field.label)("fieldReq",t.field.required)}}function be(o,n){if(o&1){let e=f();d(0,"spk-ng-select",23),u("selectedChange",function(t){c(e);let l=m(2);return _(l.onSingleSelectChange(t))})("searchChanged",function(t){c(e);let l=m(2);return _(l.onsearchChange(t))})("valueChange",function(t){c(e);let l=m(2);return _(l.onValueChange(t))}),s()}if(o&2){let e,i=m(2);r("formControlName",i.field.name)("options",(e=i.field.options)!==null&&e!==void 0?e:V(6,D))("search",i.field.search)("multiple",!0)("label",i.field.label)("fieldReq",i.field.required)}}function Ee(o,n){if(o&1){let e=f();d(0,"spk-flatpickr",24),u("dateChange",function(t){c(e);let l=m(2);return _(l.onDateSelected(t,l.field.name))}),s()}if(o&2){let e,i,t,l=m(2);r("placeholder",(e=l.field.placeholder)!==null&&e!==void 0?e:"Select Date")("formControlName",l.field.name)("max",(i=l.field.max_period)!==null&&i!==void 0?i:"")("min",(t=l.field.min_period)!==null&&t!==void 0?t:"")("dateFormat","Y-m-d")}}function Ve(o,n){if(o&1){let e=f();d(0,"div",25)(1,"input",26),u("change",function(t){c(e);let l=m(2);return _(l.onToggleSwitch(t))}),s(),N(2,"label",27),d(3,"span",28),g(4),s()()}if(o&2){let e=m(2);a(),r("id",e.field.name)("name",e.field.name)("formControlName",e.field.name),a(),r("for",e.field.name),a(2),M(e.field.label)}}function Ie(o,n){if(o&1){let e=f();d(0,"div",31)(1,"div",32)(2,"input",33),u("change",function(t){c(e);let l=m(3);return _(l.onRadioSelect(t))}),s(),d(3,"label",34),g(4),s()()()}if(o&2){let e=n.$implicit,i=m(3);a(2),r("id",i.field.name+"_"+e.value)("value",e.value)("name",i.field.name),a(),r("for",i.field.name+"_"+e.value),a(),C(" ",e.label,`
`)}}function ke(o,n){if(o&1&&(d(0,"div",29),h(1,Ie,5,5,"div",30),s()),o&2){let e=m(2);a(),r("ngForOf",e.field.options)}}function Ne(o,n){if(o&1){let e=f();d(0,"div",31)(1,"div",32)(2,"input",35),u("change",function(t){c(e);let l=m(3);return _(l.onCheckboxChange(t))}),s(),d(3,"label",34),g(4),s()()()}if(o&2){let e=n.$implicit,i=m(3);a(2),r("id",i.field.name+"_"+e.value)("name",i.field.name)("formControlName",i.field.name),a(),r("for",i.field.name+"_"+e.value),a(),C(" ",e.label," ")}}function Pe(o,n){if(o&1&&(d(0,"div",29),h(1,Ne,5,5,"div",30),s()),o&2){let e,i=m(2);a(),r("ngForOf",(e=i.field.options)!==null&&e!==void 0?e:V(1,D))}}function De(o,n){if(o&1&&(d(0,"div",36)(1,"form",1),N(2,"ngx-editor-menu",37)(3,"ngx-editor",38),s()()),o&2){let e=m(2);a(),r("formGroup",e.form),a(),r("editor",e.editor)("toolbar",e.toolbar),a(),r("editor",e.editor)}}function Ge(o,n){if(o&1){let e=f();d(0,"file-pond",39),u("onremovefile",function(t){c(e);let l=m(2);return _(l.onFileRemove(t,l.field.label))})("onprocessfile",function(t){c(e);let l=m(2);return _(l.onFileProcessed(t,l.field.label))}),s()}if(o&2){let e=m(2);r("options",e.pondOptions)("files",e.pondFiles)}}function Le(o,n){if(o&1&&(d(0,"p"),g(1),s()),o&2){let e=m(4);a(),C(" ",e.field.label," is required ")}}function Oe(o,n){o&1&&(d(0,"p"),g(1," Please enter a valid email "),s())}function Re(o,n){if(o&1&&(d(0,"p"),g(1),s()),o&2){let e,i=m(4);a(),C(" Minimum required length is ",(e=i.field.min_length)!==null&&e!==void 0?e:0," characters. ")}}function Me(o,n){if(o&1&&(d(0,"p"),g(1),s()),o&2){let e,i=m(4);a(),C(" Maximum allowed length is ",(e=i.field.max_length)!==null&&e!==void 0?e:0," characters. ")}}function Ae(o,n){if(o&1&&(d(0,"p"),g(1),s()),o&2){let e=m(4);a(),C(" Enter a valid ",e.field.label," ")}}function qe(o,n){if(o&1&&(d(0,"div",41),h(1,Le,2,1,"p",14)(2,Oe,2,0,"p",14)(3,Re,2,1,"p",14)(4,Me,2,1,"p",14)(5,Ae,2,1,"p",14),s()),o&2){let e,i,t,l,y,p=m(3);a(),r("ngIf",(e=p.form.get(p.field.name))==null?null:e.hasError("required")),a(),r("ngIf",(i=p.form.get(p.field.name))==null?null:i.hasError("invalidEmail")),a(),r("ngIf",((t=p.form.get(p.field.name))==null?null:t.hasError("min"))||((t=p.form.get(p.field.name))==null?null:t.hasError("minlength"))),a(),r("ngIf",((l=p.form.get(p.field.name))==null?null:l.hasError("max"))||((l=p.form.get(p.field.name))==null?null:l.hasError("maxlength"))),a(),r("ngIf",(y=p.form.get(p.field.name))==null?null:y.hasError("pattern"))}}function ze(o,n){if(o&1&&(b(0),h(1,qe,6,5,"div",40),E()),o&2){let e,i=m(2);a(),r("ngIf",((e=i.form.get(i.field.name))==null?null:e.invalid)&&(((e=i.form.get(i.field.name))==null?null:e.touched)||((e=i.form.get(i.field.name))==null?null:e.dirty)))}}function Ue(o,n){if(o&1&&(d(0,"div",1),h(1,ve,3,3,"label",2),d(2,"div",3),h(3,ye,2,7,"ng-container",4)(4,Fe,2,6,"textarea",5)(5,Te,2,6,"ng-container",4)(6,we,1,6,"input",6)(7,Se,1,8,"spk-ng-select",7)(8,be,1,7,"spk-ng-select",8)(9,Ee,1,5,"spk-flatpickr",9)(10,Ve,5,5,"div",10)(11,ke,2,1,"div",11)(12,Pe,2,2,"div",11)(13,De,4,4,"div",12)(14,Ge,1,2,"file-pond",13),s(),h(15,ze,2,1,"ng-container",14),s()),o&2){let e=m();r("formGroup",e.form),a(),r("ngIf",e.field.type!==e.fieldTypes.TOGGLE&&e.field.type!=e.fieldTypes.SINGLE_SELECT&&e.field.type!=e.fieldTypes.MULTI_SELECT),a(),r("ngSwitch",e.field.type),a(),r("ngSwitchCase",e.fieldTypes.SHORT_TEXT),a(),r("ngSwitchCase",e.fieldTypes.TEXT_AREA),a(),r("ngSwitchCase",e.fieldTypes.NUMBER),a(),r("ngSwitchCase",e.fieldTypes.EMAIL),a(),r("ngSwitchCase",e.fieldTypes.SINGLE_SELECT),a(),r("ngSwitchCase",e.fieldTypes.MULTI_SELECT),a(),r("ngSwitchCase",e.fieldTypes.DATE),a(),r("ngSwitchCase",e.fieldTypes.TOGGLE),a(),r("ngSwitchCase",e.fieldTypes.RADIO_SELECT),a(),r("ngSwitchCase",e.fieldTypes.CHECKBOX_SELECT),a(),r("ngSwitchCase",e.fieldTypes.EDITOR),a(),r("ngSwitchCase",e.fieldTypes.UPLOAD),a(),r("ngIf",e.field.type!=e.fieldTypes.SINGLE_SELECT&&e.field.type!=e.fieldTypes.DATE&&e.field.type!=e.fieldTypes.MULTI_SELECT)}}me.registerPlugin(de.default,se.default,pe.default);var ae=class o{constructor(n,e,i,t){this.toastr=n;this.formGroupDirective=e;this.cdr=i;this.datePipe=t}field;form;valueChange=new k;searchChanged=new k;control;formControlName;image=[];binary=[];fieldTypes=H;checkboxGroup=new Y({});pondFiles=[];editor;toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]];ngOnInit(){this.formGroupDirective.form&&(this.control=this.formGroupDirective.form.get(this.formControlName)),this.field.control=new Q(this.field.value||null),console.log(this.field.control,"field"),this.field}onSingleSelectChange(n){this.valueChange.emit(n)}onMultiSelectChange(n){this.valueChange.emit(n)}getInputType(){switch(this.field.type){case"NUMBER":return"number";case"EMAIL":return"email";default:return"text"}}onValueChange(n){!this.field||!this.field.control||(this.field.control.setValue(n),this.valueChange.emit(n),this.valueChange.emit(n.target.value))}onsearchChange(n){this.searchChanged.emit(n)}onToggleSwitch(n){this.valueChange.emit(this.field.control.value)}emitValueChange(n){let e=n.target;this.valueChange.emit(e.value)}onDateSelected(n,e){let i=this.form.get(e);i&&(i.setValue(n),i.markAsTouched(),i.markAsDirty()),this.valueChange.emit(n)}onDateRangeSelected(n){n.to!==void 0&&n.from!==void 0&&this.valueChange.emit(n)}onFileRemove(n,e){let i=n.file.file;Object.assign(i,{image_type:e});let t=this.pondFiles.findIndex(l=>l.name===i.name&&l.size===i.size);t>-1&&this.pondFiles.splice(t,1),this.field.control.setValue(this.pondFiles),this.valueChange.emit(this.pondFiles)}onFileProcessed(n,e){let i=n.file.file;Object.assign(i,{image_type:e}),this.pondFiles=[...this.pondFiles||[],i],this.field.control.setValue(this.pondFiles),this.valueChange.emit(this.pondFiles)}pondOptions=this.getPondOptions("image");getPondOptions(n){let e={allowMultiple:!0,allowFileTypeValidation:!0,labelIdle:"Click or drag files here to upload...",maxFiles:5,server:{process:(i,t,l,y)=>{setTimeout(()=>{y(Date.now().toString())},1e3)},revert:(i,t)=>{t()}}};if(n==="image")return O(L({},e),{acceptedFileTypes:["image/jpeg","image/png","image/jpg"],maxFileSize:"2MB",allowImageValidateSize:!0,labelFileTypeNotAllowed:"Only PNG and JPEG files are allowed",fileValidateTypeLabelExpectedTypes:"Allowed: PNG, JPEG",labelImageValidateSizeTooSmall:"Image is too small. Min: {minWidth}\xD7{minHeight}",labelImageValidateSizeTooBig:"Image is too large. Max: {maxWidth}\xD7{maxHeight}"})}onEvent(n){this.valueChange.emit(n.target.value)}onCheckboxChange(n){!this.field||!this.field.control||(this.form.controls[this.field.name].setValue(n.target.checked),this.valueChange.emit(n.target.checked))}onRadioSelect(n){console.log(n.target.value,"event.target.value"),this.form.controls[this.field.name].setValue(n.target.value),this.valueChange.emit(n.target.value)}debugDateChange(n,e){this.form?.get(e)&&(this.form.get(e)?.setValue(n),this.form.get(e)?.markAsTouched(),this.form.get(e)?.updateValueAndValidity())}onFileChange(n){let e=n.target.files[0];this.field.control.setValue(e),this.onValueChange(e)}onSliderChange(n){this.valueChange.emit(n)}onUploadChange(n,e){let i=n.target.files?.[0];i&&this.processImageFile(i).then(({dataURL:t,cleanedFile:l})=>{l&&(this.image.push({srcUrl:t,imageName:i.name}),this.binary.push({file:i}),this.form.patchValue({[e.name]:l}),this.form.get(e.name)?.updateValueAndValidity(),this.valueChange.emit({name:e.name,value:l,images:this.image,binary:this.binary,field_name:this.field.label}))})}processImageFile(n,e=2){return new Promise((i,t)=>{if(!["image/png","image/jpg","image/jpeg"].includes(n.type))return this.toastr.error("Only .png, .jpg, .jpeg files are accepted","","Ok"),t("Only .png, .jpg, .jpeg files are accepted");if(n.size>e*1e6)return t(`Image file size is too large, maximum file size is ${e} MB.`);let p=new FileReader;p.onload=ce=>{let x=new Image;x.src=ce.target.result,x.onload=()=>{let v=document.createElement("canvas"),_e=v.getContext("2d");v.width=x.width,v.height=x.height,_e.drawImage(x,0,0,v.width,v.height);let G=v.toDataURL(n.type);fetch(G).then(F=>F.blob()).then(F=>{let fe=new File([F],n.name,{type:n.type});i({dataURL:G,cleanedFile:fe})}).catch(F=>t(F))},x.onerror=()=>t("Error loading image")},p.onerror=()=>t("Error reading file"),p.readAsDataURL(n)})}static \u0275fac=function(e){return new(e||o)(T(X),T(P),T(q),T(I))};static \u0275cmp=R({type:o,selectors:[["app-form-field"]],inputs:{field:"field",form:"form",control:"control",formControlName:"formControlName"},outputs:{valueChange:"valueChange",searchChanged:"searchChanged"},standalone:!1,features:[A([I])],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","form-label",3,"for",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["rows","3","class","form-control",3,"id","name","formControlName","placeholder","border-red-500","input",4,"ngSwitchCase"],["type","email","class","form-control",3,"id","name","formControlName","placeholder","border-red-500","input",4,"ngSwitchCase"],[3,"formControlName","options","multiple","search","disabled","label","fieldReq","selectedChange","searchChanged","valueChange",4,"ngSwitchCase"],[3,"formControlName","options","search","multiple","label","fieldReq","selectedChange","searchChanged","valueChange",4,"ngSwitchCase"],["class","form-control custom-datepickr",3,"placeholder","formControlName","max","min","dateFormat","dateChange",4,"ngSwitchCase"],["class","custom-toggle-switch flex items-center mb-4",4,"ngSwitchCase"],["class","grid grid-cols-12 gap-4",4,"ngSwitchCase"],["id","product-features","class","ngx-editor-custom",4,"ngSwitchCase"],["multiple","","class","filepond basic-filepond","data-allow-reorder","true","data-max-file-size","3MB","data-max-files","6",3,"options","files","onremovefile","onprocessfile",4,"ngSwitchCase"],[4,"ngIf"],[1,"form-label",3,"for"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],[1,"form-control",3,"input","type","id","name","formControlName","placeholder"],["rows","3",1,"form-control",3,"input","id","name","formControlName","placeholder"],["type","number",1,"form-control",3,"input","id","name","formControlName","placeholder"],["type","email",1,"form-control",3,"input","id","name","formControlName","placeholder"],[3,"selectedChange","searchChanged","valueChange","formControlName","options","multiple","search","disabled","label","fieldReq"],[3,"selectedChange","searchChanged","valueChange","formControlName","options","search","multiple","label","fieldReq"],[1,"form-control","custom-datepickr",3,"dateChange","placeholder","formControlName","max","min","dateFormat"],[1,"custom-toggle-switch","flex","items-center","mb-4"],["type","checkbox",3,"change","id","name","formControlName"],[1,"label-primary",3,"for"],[1,"ms-3"],[1,"grid","grid-cols-12","gap-4"],["class","xl:col-span-6 col-span-12",4,"ngFor","ngForOf"],[1,"xl:col-span-6","col-span-12"],[1,"flex","form-check","items-center"],["type","radio",1,"form-check-input",3,"change","id","value","name"],[1,"form-check-label","whitespace-nowrap",3,"for"],["type","checkbox",1,"form-check-input",3,"change","id","name","formControlName"],["id","product-features",1,"ngx-editor-custom"],[3,"editor","toolbar"],[1,"overflow-auto",3,"editor"],["multiple","","data-allow-reorder","true","data-max-file-size","3MB","data-max-files","6",1,"filepond","basic-filepond",3,"onremovefile","onprocessfile","options","files"],["class","mt-1 text-xs text-red-500 text-right",4,"ngIf"],[1,"mt-1","text-xs","text-red-500","text-right"]],template:function(e,i){e&1&&h(0,Ue,16,16,"div",0),e&2&&r("ngIf",i.field)},dependencies:[z,U,j,B,Z,J,ee,$,W,K,P,te,ie,ne,oe,le,re],styles:[".single-slider[_ngcontent-%COMP%]     .noUi-handle-lower{pointer-events:none!important;background-color:#ccc!important;cursor:not-allowed!important}"]})};export{ae as a};
