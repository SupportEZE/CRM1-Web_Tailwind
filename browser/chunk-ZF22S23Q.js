import{b as Ne}from"./chunk-DUVWFXSE.js";import{a as ce}from"./chunk-CNF4GSI7.js";import{a as Ve}from"./chunk-OEHD5D2Y.js";import{a as Re}from"./chunk-GLWQGYBC.js";import{a as ge}from"./chunk-DC4QM32I.js";import{F as O,c as ue,r as De,s as Ae}from"./chunk-VHE3PQ3O.js";import{$ as pe,A as E,B as A,C as te,G as ie,Ga as be,H as ne,Ha as ve,I as ae,Ia as Se,Ja as j,Ka as Ce,La as we,M as oe,Ma as xe,Na as Me,Oa as ke,P as re,Q as le,Qa as Ee,Ta as He,Ua as Le,V as de,W as se,X as me,Ya as Te,Z as R,cb as Ie,db as Fe,hb as W,jb as B,na as fe,oa as _e,sa as ye,ua as he,va as N,w as V,wa as P,z as D}from"./chunk-GYDYF5F3.js";import{Q as ee,e as Z,f as T,g as I,o as $,t as F}from"./chunk-PD5VTTIY.js";import{Aa as c,Ba as u,Hb as H,Lc as k,Mc as l,Nc as h,Ob as g,Oc as z,Uc as v,Vc as S,Wc as C,Xc as J,Yc as L,Zc as K,_b as m,bc as G,ed as Q,gd as U,jd as X,kc as n,lc as i,mc as _,nc as w,oc as x,qc as M,rb as r,sb as y,wc as f,yc as b}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var Ue=a=>({"ti-btn-loader ti-btn-disabled":a});function Xe(a,o){a&1&&(n(0,"div",28),l(1," Holiday type is required. "),i())}function Ze(a,o){a&1&&(n(0,"mat-hint",29),l(1," Holiday date is required. "),i())}function $e(a,o){a&1&&(n(0,"mat-hint",22),l(1," Holiday title is required. "),i())}function et(a,o){if(a&1&&(n(0,"mat-option",32),l(1),i()),a&2){let t=o.$implicit;m("value",t.label),r(),h(t.label)}}function tt(a,o){a&1&&(n(0,"mat-hint",29),l(1," State is required for regional holidays. "),i())}function it(a,o){if(a&1&&(n(0,"div",12)(1,"label",13),l(2,"State"),n(3,"span",14),l(4,"*"),i()(),n(5,"mat-form-field",15)(6,"mat-select",30),g(7,et,2,2,"mat-option",31),i(),g(8,tt,2,0,"mat-hint",18),i()()),a&2){let t,e=b();r(7),m("ngForOf",e.CommonApiService.statList),r(),m("ngIf",((t=e.holidayForm.get("regional_state"))==null?null:t.invalid)&&((t=e.holidayForm.get("regional_state"))==null?null:t.touched))}}function nt(a,o){a&1&&_(0,"i",33)}function at(a,o){a&1&&(n(0,"span",34),_(1,"i",35),i())}var Y=class a{constructor(o,t,e,s,p,d){this.fb=o;this.toastr=t;this.api=e;this.dialogRef=s;this.dateService=p;this.CommonApiService=d;this.holidayForm=this.fb.group({holiday_type:["National",E.required],holiday_date:["",E.required],holiday_name:["",E.required],regional_state:[""]}),this.CommonApiService.getStates()}holidayForm;states=[];today=new Date;close(){this.dialogRef.close()}get f(){return this.holidayForm.controls}onSubmit(){if(this.holidayForm.get("holiday_type")?.valueChanges.subscribe(o=>{let t=this.holidayForm.get("regional_state");o==="Regional"?t?.setValidators([E.required]):(t?.clearValidators(),t?.setValue("")),t?.updateValueAndValidity()}),this.holidayForm.invalid){this.holidayForm.markAllAsTouched();return}else this.api.disabled=!0,this.holidayForm.value.holiday_date=this.dateService.formatToYYYYMMDD(this.holidayForm.value.holiday_date),this.api.post(this.holidayForm.value,"holiday/create").subscribe(o=>{o.statusCode==200&&(this.api.disabled=!1,this.toastr.success(o.message,"","toast-top-right"),this.dialogRef.close(!0))})}closeModal(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||a)(y(de),y(V),y(R),y(ke),y(B),y(ce))};static \u0275cmp=H({type:a,selectors:[["app-holiday-add"]],features:[J([fe()])],decls:44,vars:16,consts:[["picker",""],[1,"mat-dialoge"],[3,"close","title","closeBtn"],[3,"ngSubmit","formGroup"],[1,"mat-typography"],[1,"grid","grid-cols-12","gap-x-6"],[1,"col-span-12","md:col-span-12","xxl:!col-span-12"],["formControlName","holiday_type","aria-label","Select Holiday Type"],["value","National"],["value","Regional"],["class","error",4,"ngIf"],[1,"grid","grid-cols-12","gap-x-12","mt-4"],[1,"col-span-12","md:col-span-6","xxl:!col-span-6"],[1,"form-label","mb-0"],[1,"text-red-500"],["appearance","outline",1,"mat-custom-field"],["matInput","","formControlName","holiday_date",3,"matDatepicker"],["matIconSuffix","",3,"for"],["align","end","class","error",4,"ngIf"],["matInput","","formControlName","holiday_name","placeholder","Enter holiday title"],["align","end",4,"ngIf"],["class","col-span-12 md:col-span-6 xxl:!col-span-6",4,"ngIf"],["align","end"],["type","button",1,"ti-btn","ti-btn-outline-danger","m-2",3,"click"],["type","submit",1,"ti-btn","ti-btn-primary","m-2",3,"ngClass","disabled"],[1,"me-2"],["class","ri-save-line ms-2 text-[16px] inline-block",4,"ngIf"],["class","loading",4,"ngIf"],[1,"error"],["align","end",1,"error"],["formControlName","regional_state","multiple",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ri-save-line","ms-2","text-[16px]","inline-block"],[1,"loading"],[1,"ri-loader-2-fill","text-[1rem]","animate-spin"]],template:function(t,e){if(t&1){let s=M();n(0,"div",1)(1,"app-modal-header",2),f("close",function(){return c(s),u(e.closeModal())}),i(),n(2,"form",3),f("ngSubmit",function(){return c(s),u(e.onSubmit())}),n(3,"mat-dialog-content",4)(4,"div",5)(5,"div",6)(6,"mat-label"),l(7,"Holiday Type"),i(),n(8,"mat-radio-group",7)(9,"mat-radio-button",8),l(10,"National"),i(),n(11,"mat-radio-button",9),l(12,"Regional"),i()(),g(13,Xe,2,0,"div",10),i()(),n(14,"div",11)(15,"div",12)(16,"label",13),l(17,"Holiday Date"),n(18,"span",14),l(19,"*"),i()(),n(20,"mat-form-field",15),_(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,0),g(25,Ze,2,0,"mat-hint",18),i()(),n(26,"div",12)(27,"label",13),l(28,"Title"),n(29,"span",14),l(30,"*"),i()(),n(31,"mat-form-field",15),_(32,"input",19),g(33,$e,2,0,"mat-hint",20),i()(),g(34,it,9,2,"div",21),i()(),n(35,"mat-dialog-actions",22)(36,"button",23),f("click",function(){return c(s),u(e.close())}),n(37,"span"),l(38,"Cancel"),i()(),n(39,"button",24)(40,"span",25),l(41),g(42,nt,1,0,"i",26),i(),g(43,at,2,0,"span",27),i()()()()}if(t&2){let s,p,d,q=k(24);r(),m("title"," Add New Holiday")("closeBtn",!0),r(),m("formGroup",e.holidayForm),r(11),m("ngIf",((s=e.holidayForm.get("holiday_type"))==null?null:s.invalid)&&((s=e.holidayForm.get("holiday_type"))==null?null:s.touched)),r(8),m("matDatepicker",q),r(),m("for",q),r(3),m("ngIf",((p=e.holidayForm.get("holiday_date"))==null?null:p.invalid)&&((p=e.holidayForm.get("holiday_date"))==null?null:p.touched)),r(8),m("ngIf",((d=e.holidayForm.get("holiday_name"))==null?null:d.invalid)&&((d=e.holidayForm.get("holiday_name"))==null?null:d.touched)),r(),m("ngIf",e.holidayForm.value.holiday_type==="Regional"),r(5),m("ngClass",K(14,Ue,e.api.disabled))("disabled",e.api.disabled===!0),r(2),z("",e.api.disabled===!0?"Saving":"Save"," "),r(),m("ngIf",!e.api.disabled),r(),m("ngIf",e.api.disabled===!0)}},dependencies:[F,Z,T,I,O,ne,D,A,te,oe,re,De,me,W,_e,ve,Se,j,Le,He,be,P,ye,he,N,Ie,Fe,Te],encapsulation:2})};var ot=()=>["Holiday"],je=()=>[];function rt(a,o){if(a&1){let t=M();n(0,"button",9),f("click",function(){c(t);let s=b();return u(s.openModal())}),_(1,"i",40),l(2," Add Holiday "),i()}}function lt(a,o){if(a&1&&(n(0,"span",48),l(1),i()),a&2){let t=o.$implicit;r(),h(t||"All States")}}function dt(a,o){if(a&1&&(w(0),g(1,lt,2,1,"span",47),x()),a&2){let t=b().$implicit;r(),m("ngForOf",t.regional_state)}}function st(a,o){a&1&&(n(0,"span",48),l(1," All States "),i())}function mt(a,o){if(a&1){let t=M();n(0,"a",49),f("click",function(){c(t);let s=b().$implicit,p=b(3);return u(p.deleteRow(s._id))}),_(1,"i",50),i()}}function pt(a,o){if(a&1&&(n(0,"tr",42)(1,"td",43),l(2),i(),n(3,"td"),l(4),Q(5,"date"),i(),n(6,"td"),l(7),i(),n(8,"td"),l(9),i(),n(10,"td"),l(11),i(),n(12,"td"),l(13),i(),n(14,"td"),l(15),i(),n(16,"td"),g(17,dt,2,1,"ng-container",44)(18,st,2,0,"ng-template",null,1,X),i(),n(20,"td",43)(21,"div",45),g(22,mt,2,0,"a",46),i()()()),a&2){let t=o.$implicit,e=o.index,s=k(19),p=b(3);r(2),h(e+1),r(2),h(t.holiday_date?U(5,10,t.holiday_date,"d MMM yyyy"):"--"),r(3),h(t.day||"---"),r(2),h(t.holiday_type?t.holiday_type:"---"),r(2),h(t.holiday_name?t.holiday_name:"---"),r(2),h(t.month?t.month:"---"),r(2),h(t.year?t.year:"---"),r(2),m("ngIf",(t==null||t.regional_state==null?null:t.regional_state.length)>0)("ngIfElse",s),r(5),m("ngIf",p.accessRight==null?null:p.accessRight.deleteRight)}}function ct(a,o){if(a&1&&(w(0),g(1,pt,23,13,"tr",41),x()),a&2){let t=b(2);r(),m("ngForOf",t.holidayList)("ngForTrackBy",t.trackByFn)}}function ut(a,o){if(a&1&&(w(0),g(1,ct,2,2,"ng-container",24),x()),a&2){let t=b();r(),m("ngIf",t.holidayList.length)}}function gt(a,o){a&1&&(n(0,"td"),_(1,"app-skeleton"),i()),a&2&&(r(),G("h20 bg-skeleton"))}function ft(a,o){a&1&&(n(0,"tr",15),g(1,gt,2,2,"td",52),i()),a&2&&(r(),m("ngForOf",L(1,je).constructor(9)))}function _t(a,o){a&1&&(w(0),g(1,ft,2,2,"tr",51),x()),a&2&&(r(),m("ngForOf",L(1,je).constructor(8)))}function yt(a,o){a&1&&(w(0),_(1,"app-data-not-found"),x())}function ht(a,o){if(a&1&&(n(0,"div",53),l(1," Showing "),n(2,"b"),l(3),i(),l(4," to "),n(5,"b"),l(6),i(),l(7," of "),n(8,"b"),l(9),i(),l(10," entries "),_(11,"i",54),i()),a&2){let t=b();r(3),h(t.pagination.cur_page),r(3),h(t.pagination.total_pages),r(3),h(t.pagination.limit)}}var Pe=class a{constructor(o,t,e,s,p,d){this.toastr=o;this.dialog=t;this.api=e;this.alert=s;this.dateService=p;this.moduleService=d}filter={};skLoading=!1;onClick1(o){}disabled=!1;productModule=[];holidayList=[];pagination={};accessRight={};ngOnInit(){let o=this.moduleService.getAccessMap("Masters","Holidays");o&&(this.accessRight=o),this.getList()}onRefresh(){this.filter={},this.getList()}listColumns=[{label:"Date",field:"Date"},{label:"Day",field:"Day"},{label:"Holiday Type",field:"Holiday Type"},{label:"Holiday Name",field:"Holiday Name"},{label:"Month",field:"Month"},{label:"Year",field:"Year"},{label:"Region",field:"Region"}];onDateChange(o,t){o==="start"?this.filter.start_date=t:this.filter.end_date=t,this.filter.start_date&&this.filter.end_date&&this.getList()}getList(){if(this.filter.start_date&&this.filter.end_date){let o=this.filter.start_date?this.dateService.formatToYYYYMMDD(this.filter.start_date):null,t=this.filter.end_date?this.dateService.formatToYYYYMMDD(this.filter.end_date):null;this.filter.holiday_date={start_date:o,end_date:t}}this.filter.regional_state&&!Array.isArray(this.filter.regional_state)&&(this.filter.regional_state=[this.filter.regional_state]),this.skLoading=!0,this.api.post({filters:this.filter,page:this.pagination.cur_page??1},"holiday/read").subscribe(o=>{o.statusCode===200&&(this.skLoading=!1,this.holidayList=o.data,this.pagination=o.pagination)})}trackByFn(o,t){return t.id}changeToPagination(o){o=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.getList()):this.pagination.next&&(this.pagination.cur_page++,this.getList())}openModal(){this.dialog.open(Y,{width:"768px",data:{lastPage:"product"}}).afterClosed().subscribe(t=>{t===!0&&this.getList()})}deleteRow(o){this.alert.confirm("Are you sure?").then(t=>{t.isConfirmed&&this.api.patch({_id:o,is_delete:1},"holiday/delete").subscribe(e=>{e.statusCode===200&&(this.toastr.success(e.message,"","toast-top-right"),this.getList())})})}static \u0275fac=function(t){return new(t||a)(y(V),y(Ee),y(R),y(pe),y(B),y(ge))};static \u0275cmp=H({type:a,selectors:[["app-holiday-list"]],decls:65,vars:27,consts:[["picker",""],["noState",""],[3,"title","title1","activeitem"],[1,"row"],[1,"col-xl-12"],[1,"box"],[1,"box-header","flex","items-center","justify-between","flex-wrap","gap-4"],[1,"box-title"],[1,"flex","gap-2","items-center","flex-wrap"],["type","button",1,"ti-btn-sm","!py-1","btn","ti-btn","ti-btn-soft-primary",3,"click"],[1,"ri-refresh-line","font-medium","align-middle"],["type","button","class","ti-btn-sm !py-1 btn ti-btn ti-btn-soft-primary",3,"click",4,"ngIf"],[1,"box-body"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showCheckbox","showS_No","showSorting","showFilterRow","showAction","columns"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"table-search-filters"],[1,"table-input"],[3,"rangePicker"],["matStartDate","","name","startDate","placeholder","Start date",3,"ngModelChange","ngModel"],["matEndDate","","name","endDate","placeholder","End date",3,"ngModelChange","ngModel"],["matIconSuffix","",3,"for"],["type","text","placeholder","Search...",1,"form-control",3,"ngModelChange","input","ngModel"],["type","text","placeholder","Search...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[4,"ngIf"],[1,"box-footer"],[1,"flex","items-center","flex-wrap","overflow-auto"],["class","mt-2",4,"ngIf"],[1,"ms-auto","my-2"],[1,"grid","justify-center","sm:flex","sm:justify-start","sm:items-center","gap-2","flex-wrap"],["aria-label","pagination35",1,"flex","items-center","-space-x-px","gap-2"],["aria-label","button","type","button",1,"min-h-[32px]","min-w-8","py-1","px-2","inline-flex","justify-center","items-center","gap-x-1.5","text-sm","first:rounded-s-full","last:rounded-e-full","border","border-gray-200","text-gray-800","hover:bg-gray-100","focus:outline-none","focus:bg-gray-100","disabled:opacity-50","disabled:pointer-events-none","dark:border-white/10","dark:text-white","dark:hover:bg-white/10","dark:focus:bg-white/10",3,"click","disabled"],[1,"ri-arrow-left-s-line","align-middle","rtl:rotate-180"],["aria-hidden","true",1,"sr-only"],[1,"flex","justify-center","items-center","gap-x-5"],[1,"flex","justify-center","sm:justify-start","items-center","gap-x-2"],[1,"text-sm","text-gray-800","whitespace-nowrap","dark:text-white","font-medium"],["type","number","min","1",1,"min-h-[32px]","py-1","px-2.5","block","w-12","border-gray-200","rounded-md","text-sm","text-center","focus:border-primary","focus:ring-primary","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","disabled:opacity-50","disabled:pointer-events-none","dark:bg-bodybg","dark:border-white/10","dark:text-gray-400","dark:focus:ring-gray-600",3,"ngModelChange","keyup.enter","ngModel"],["aria-label","button","type","button",1,"min-h-[32px]","min-w-8","py-1","px-2.5","inline-flex","justify-center","items-center","gap-x-1.5","text-sm","first:rounded-s-full","last:rounded-e-full","border","border-gray-200","text-gray-800","hover:bg-gray-100","focus:outline-none","focus:bg-gray-100","disabled:opacity-50","disabled:pointer-events-none","dark:border-white/10","dark:text-white","dark:hover:bg-white/10","dark:focus:bg-white/10",3,"click","disabled"],[1,"ri-arrow-right-s-line","align-middle","rtl:rotate-180"],[1,"ri-apps-2-add-line","font-medium","align-middle"],["class","product-list border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf","ngForTrackBy"],[1,"product-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[4,"ngIf","ngIfElse"],[1,"flex","flex-row","items-center","!gap-2","text-[0.9375rem]"],["aria-label","anchor","class","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light",3,"click",4,"ngIf"],["class","badge bg-light text-textmuted dark:text-textmuted/50 m-1 border border-defaultborder dark:border-defaultborder/10",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-textmuted","dark:text-textmuted/50","m-1","border","border-defaultborder","dark:border-defaultborder/10"],["aria-label","anchor",1,"ti-btn","btn-wave","product-btn","ti-btn-sm","ti-btn-soft-danger","waves-effect","waves-light",3,"click"],[1,"ri-delete-bin-line"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"mt-2"],[1,"bi","bi-arrow-right","ms-2","font-semibold"]],template:function(t,e){if(t&1){let s=M();_(0,"app-page-header",2),n(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),l(6," Holiday List "),i(),n(7,"div",8)(8,"button",9),f("click",function(){return c(s),u(e.onRefresh())}),_(9,"i",10),l(10," Refresh "),i(),g(11,rt,3,0,"button",11),i()(),n(12,"div",12)(13,"div",13)(14,"spk-reusable-tables",14)(15,"tr",15)(16,"th"),l(17,"\xA0"),i(),n(18,"th")(19,"div",16)(20,"mat-form-field",17)(21,"mat-date-range-input",18)(22,"input",19),C("ngModelChange",function(d){return c(s),S(e.filter.start_date,d)||(e.filter.start_date=d),u(d)}),f("ngModelChange",function(d){return c(s),u(e.onDateChange("start",d))}),i(),n(23,"input",20),C("ngModelChange",function(d){return c(s),S(e.filter.end_date,d)||(e.filter.end_date=d),u(d)}),f("ngModelChange",function(d){return c(s),u(e.onDateChange("end",d))}),i()(),_(24,"mat-datepicker-toggle",21)(25,"mat-date-range-picker",null,0),i()()(),n(27,"th"),l(28,"\xA0"),i(),n(29,"th"),l(30,"\xA0"),i(),n(31,"th")(32,"input",22),C("ngModelChange",function(d){return c(s),S(e.filter.holiday_name,d)||(e.filter.holiday_name=d),u(d)}),f("input",function(){return c(s),u(e.getList())}),i()(),n(33,"th")(34,"input",22),C("ngModelChange",function(d){return c(s),S(e.filter.month,d)||(e.filter.month=d),u(d)}),f("input",function(){return c(s),u(e.getList())}),i()(),n(35,"th")(36,"input",22),C("ngModelChange",function(d){return c(s),S(e.filter.year,d)||(e.filter.year=d),u(d)}),f("input",function(){return c(s),u(e.getList())}),i()(),n(37,"th")(38,"input",23),C("ngModelChange",function(d){return c(s),S(e.filter.regional_state,d)||(e.filter.regional_state=d),u(d)}),f("keyup.enter",function(){return c(s),u(e.getList())}),i()(),n(39,"th"),l(40,"\xA0"),i()(),g(41,ut,2,1,"ng-container",24)(42,_t,2,2,"ng-container",24),i(),g(43,yt,2,0,"ng-container",24),i()(),n(44,"div",25)(45,"div",26),g(46,ht,12,3,"div",27),n(47,"div",28)(48,"div",29)(49,"nav",30)(50,"button",31),f("click",function(){return c(s),u(e.changeToPagination("Previous"))}),_(51,"i",32),n(52,"span",33),l(53,"Previous"),i()(),n(54,"div",34)(55,"div",35)(56,"span",36),l(57," Go to "),i(),n(58,"input",37),C("ngModelChange",function(d){return c(s),S(e.pagination.cur_page,d)||(e.pagination.cur_page=d),u(d)}),f("keyup.enter",function(){return c(s),u(e.getList())}),i(),n(59,"span",36),l(60," page "),i()()(),n(61,"button",38),f("click",function(){return c(s),u(e.changeToPagination("Next"))}),n(62,"span",33),l(63,"Next"),i(),_(64,"i",39),i()()()()()()()()()}if(t&2){let s=k(26);m("title","Master Modules")("title1",L(26,ot))("activeitem","Holiday List"),r(11),m("ngIf",e.accessRight==null?null:e.accessRight.addRight),r(3),m("tableHead","border-b")("showCheckbox",!1)("showS_No",!0)("showSorting",!1)("showFilterRow",!1)("showAction",!0)("columns",e.listColumns),r(7),m("rangePicker",s),r(),v("ngModel",e.filter.start_date),r(),v("ngModel",e.filter.end_date),r(),m("for",s),r(8),v("ngModel",e.filter.holiday_name),r(2),v("ngModel",e.filter.month),r(2),v("ngModel",e.filter.year),r(2),v("ngModel",e.filter.regional_state),r(3),m("ngIf",!e.skLoading),r(),m("ngIf",e.skLoading),r(),m("ngIf",!e.holidayList.length&&!e.skLoading),r(3),m("ngIf",e.holidayList.length),r(4),m("disabled",!e.pagination.prev),r(8),v("ngModel",e.pagination.cur_page),r(3),m("disabled",!e.pagination.next)}},dependencies:[O,T,I,D,ae,A,le,ie,Re,ue,Ae,$,W,j,xe,Ce,we,Me,P,N,F,ee,Ve,se,Ne],encapsulation:2})};export{Pe as HolidayListComponent};
