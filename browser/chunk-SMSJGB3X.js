import{a as pe}from"./chunk-J4NDCUAB.js";import{b as oe,c as le}from"./chunk-CIBZCVJQ.js";import{a as ie}from"./chunk-OEHD5D2Y.js";import{a as me}from"./chunk-GLWQGYBC.js";import{a as z}from"./chunk-DC4QM32I.js";import{F as re,c as q,q as ne,s as ae}from"./chunk-VHE3PQ3O.js";import{Aa as Q,B as j,Ea as X,G as K,Ga as Y,Ha as Z,Ia as $,Ja as ee,Z as U,hb as te,va as G,wa as J,z as O}from"./chunk-GYDYF5F3.js";import{M as R,Q as N,f as B,g as H,n as A,o as W}from"./chunk-PD5VTTIY.js";import{Aa as d,Ba as _,Hb as V,Lc as T,Mc as m,Nc as f,Ob as u,Oc as I,Uc as C,Vc as b,Wc as x,Yc as w,_b as s,ac as F,bc as M,ed as k,fc as S,fd as D,gd as E,kc as r,lc as a,mc as y,nc as L,oc as P,qc as v,rb as o,sb as h,wc as g,yc as c}from"./chunk-2NSPOFEK.js";var de=()=>["Accounts"],ce=()=>[];function _e(l,n){l&1&&y(0,"app-page-header",11),l&2&&s("title","DMS")("title1",w(3,de))("activeitem","Payment List")}function ge(l,n){if(l&1){let t=v();r(0,"button",22),g("click",function(){d(t);let e=c(2);return e.filter.invoice_number="",_(e.getList())}),r(1,"mat-icon"),m(2,"close"),a()()}}function ue(l,n){if(l&1){let t=v();r(0,"button",22),g("click",function(){d(t);let e=c(2);return e.filter.customer_type_name="",_(e.getList())}),r(1,"mat-icon"),m(2,"close"),a()()}}function fe(l,n){if(l&1){let t=v();r(0,"button",22),g("click",function(){d(t);let e=c(2);return e.filter.customer_name="",_(e.getList())}),r(1,"mat-icon"),m(2,"close"),a()()}}function he(l,n){if(l&1&&(r(0,"tr",23)(1,"td"),m(2),a(),r(3,"td"),m(4),k(5,"date"),a(),r(6,"td"),m(7),k(8,"date"),a(),r(9,"td")(10,"a",24),m(11),a()(),r(12,"td"),m(13),a(),r(14,"td"),m(15),k(16,"titlecase"),a(),r(17,"td",25),m(18),a(),r(19,"td"),m(20),a(),r(21,"td"),m(22),a(),r(23,"td"),m(24),a()()),l&2){let t=n.$implicit,i=n.index,e=c(2);F("bg-gray-400",e.isHighlighted(t._id)),o(2),f((e.pagination.cur_page-1)*e.pagination.limit+i+1),o(2),f(t.created_at?E(5,12,t.created_at,"dd MMM yyyy hh:mm a"):""),o(3),f(t.payment_date?E(8,15,t.payment_date,"dd MMM yyyy hh:mm a"):""),o(4),I(" ",t.invoice_number?t.invoice_number:"---"," "),o(2),f(t.customer_type_name?t.customer_type_name:"---"),o(2),f(t.customer_name?D(16,18,t.customer_name):"---"),o(3),I(" \u20B9 ",t.payment_amount?t.payment_amount:"0"," "),o(2),f(t.payment_mode?t.payment_mode:"---"),o(2),f(t.transaction_number?t.transaction_number:"---"),o(2),f(t.remarks?t.remarks:"---")}}function ye(l,n){if(l&1){let t=v();L(0),r(1,"tr",12)(2,"td",13),m(3,"\xA0"),a(),r(4,"td")(5,"div",14)(6,"mat-form-field",15)(7,"input",16),x("ngModelChange",function(e){d(t);let p=c();return b(p.filter.created_at,e)||(p.filter.created_at=e),_(e)}),g("ngModelChange",function(){d(t);let e=c();return _(e.getList())}),a(),y(8,"mat-datepicker-toggle",17)(9,"mat-datepicker",null,0),a()()(),r(11,"td")(12,"div",14)(13,"mat-form-field",15)(14,"input",18),x("ngModelChange",function(e){d(t);let p=c();return b(p.filter.payment_date,e)||(p.filter.payment_date=e),_(e)}),g("ngModelChange",function(){d(t);let e=c();return _(e.getList())}),a(),y(15,"mat-datepicker-toggle",17)(16,"mat-datepicker",null,1),a()()(),r(18,"td",13)(19,"div",14)(20,"mat-form-field",15)(21,"input",19),x("ngModelChange",function(e){d(t);let p=c();return b(p.filter.invoice_number,e)||(p.filter.invoice_number=e),_(e)}),g("keyup.enter",function(){d(t);let e=c();return _(e.getList())}),a(),u(22,ge,3,0,"button",20),a()()(),r(23,"td",13)(24,"div",14)(25,"mat-form-field",15)(26,"input",19),x("ngModelChange",function(e){d(t);let p=c();return b(p.filter.customer_type_name,e)||(p.filter.customer_type_name=e),_(e)}),g("keyup.enter",function(){d(t);let e=c();return _(e.getList())}),a(),u(27,ue,3,0,"button",20),a()()(),r(28,"td",13)(29,"div",14)(30,"mat-form-field",15)(31,"input",19),x("ngModelChange",function(e){d(t);let p=c();return b(p.filter.customer_name,e)||(p.filter.customer_name=e),_(e)}),g("keyup.enter",function(){d(t);let e=c();return _(e.getList())}),a(),u(32,fe,3,0,"button",20),a()()(),r(33,"td",13),m(34,"\xA0"),a(),r(35,"td",13),m(36,"\xA0"),a(),r(37,"td"),m(38,"\xA0"),a(),r(39,"td"),m(40,"\xA0"),a(),r(41,"td"),m(42,"\xA0"),a()(),u(43,he,25,20,"tr",21),P()}if(l&2){let t=T(10),i=T(17),e=c();o(7),s("matDatepicker",t),C("ngModel",e.filter.created_at),o(),s("for",t),o(6),s("matDatepicker",i),C("ngModel",e.filter.payment_date),o(),s("for",i),o(6),C("ngModel",e.filter.invoice_number),o(),S(e.filter.invoice_number?22:-1),o(4),C("ngModel",e.filter.customer_type_name),o(),S(e.filter.customer_type_name?27:-1),o(4),C("ngModel",e.filter.customer_name),o(),S(e.filter.customer_name?32:-1),o(11),s("ngForOf",e.listing)}}function Ce(l,n){l&1&&(r(0,"td"),y(1,"app-skeleton"),a()),l&2&&(o(),M("h20 bg-skeleton"))}function be(l,n){l&1&&(r(0,"tr",12),u(1,Ce,2,2,"td",27),a()),l&2&&(o(),s("ngForOf",w(1,ce).constructor(10)))}function xe(l,n){l&1&&(L(0),u(1,be,2,2,"tr",26),P()),l&2&&(o(),s("ngForOf",w(1,ce).constructor(5)))}function ve(l,n){l&1&&(L(0),y(1,"app-data-not-found"),P())}var se=class l{constructor(n,t,i,e,p){this.comanFuncation=n;this.router=t;this.api=i;this.highlightService=e;this.moduleService=p}pageHeader=!0;_id;skLoading=!1;listing=[];pagination={};filter={};pageKey="payment-list";highlightedId;mainTabs=[{name:"Unpaid",label:"Unpaid",icon:"ri-bill-fill"},{name:"All",label:"All",icon:"ri-inbox-fill"}];ngOnInit(){let n=this.highlightService.getHighlight(this.pageKey);n!=null&&(this.highlightedId=n.rowId,this.pagination.cur_page=n.pageIndex,this.filter=n.filters,this.highlightService.clearHighlight(this.pageKey)),this.getList()}onRefresh(){this.getList()}goToDetail(n){this.setHighLight(n),this.router.navigate(["/apps/sfa/accounts/invoice-detail/"+n])}click(n){let t=this.listing.filter(i=>i.Price!=n);this.listing=t}getList(){this.skLoading=!0,this.api.post({page:this.pagination.cur_page??1,filters:this.filter,_id:this._id},"invoice-payment/read").subscribe(n=>{n.statusCode===200?(this.listing=n.data,this.pagination=n.pagination,this.skLoading=!1):this.skLoading=!1})}changeToPagination(n){n=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.getList()):this.pagination.next&&(this.pagination.cur_page++,this.getList())}changeToPage(n){this.pagination.cur_page=n,this.getList()}isHighlighted(n){return this.highlightedId===n}setHighLight(n){this.comanFuncation.setHighLight(this.pageKey,n,"",this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}getColumn(){return[{label:"Created At"},{label:"Payment Date"},{label:"Document No.",table_class:"text-center"},{label:"Customer Category"},{label:"Customer Detail"},{label:"Amount",table_class:"text-right"},{label:"Payment Mode"},{label:"Transaction Detail"},{label:"Transaction Remark"}]}static \u0275fac=function(t){return new(t||l)(h(le),h(R),h(U),h(oe),h(z))};static \u0275cmp=V({type:l,selectors:[["app-payment-list"]],inputs:{pageHeader:"pageHeader",_id:"_id"},decls:11,vars:19,consts:[["picker",""],["picker1",""],[3,"title","title1","activeitem",4,"ngIf"],[1,"row"],[1,"col-xl-12"],[1,"box","py-4","px-4"],[3,"onRefresh","pageTitle","listLength","btnShow","refreshLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","columns"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"title","title1","activeitem"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","created_at","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","name","payment_date","placeholder","Payment Date",3,"ngModelChange","matDatepicker","ngModel"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["class","invoice-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"invoice-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"font-medium","text-primary"],[1,"text-right"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(u(0,_e,1,4,"app-page-header",2),r(1,"div",3)(2,"div",4)(3,"div",5)(4,"app-page-sub-header",6),g("onRefresh",function(){return i.onRefresh()}),a(),r(5,"div",7)(6,"spk-reusable-tables",8),u(7,ye,44,13,"ng-container",9)(8,xe,2,2,"ng-container",9),a(),u(9,ve,2,0,"ng-container",9),r(10,"app-pagination-footer",10),g("preButtonClick",function(){return i.changeToPagination("Previous")})("nextButtonClick",function(){return i.changeToPagination("Next")})("pageChange",function(p){return i.changeToPage(p)}),a()()()()()),t&2&&(s("ngIf",i.pageHeader),o(4),M("p-0 pt-0"),s("pageTitle","Payment List")("listLength",i.listing.length)("btnShow",!0)("refreshLabel","Refresh"),o(2),s("tableHead","border-b")("showS_No",!0)("columns",i.getColumn()),o(),s("ngIf",!i.skLoading),o(),s("ngIf",i.skLoading),o(),s("ngIf",i.listing.length===0&&!i.skLoading),o(),s("currentPage",i.pagination.cur_page)("totalPage",i.pagination.total_pages)("pageLimit",i.pagination.limit)("listLength",i.listing.length)("preBtn",!i.pagination.prev)("nextBtn",!i.pagination.next))},dependencies:[re,B,H,O,j,K,me,q,ae,ne,pe,A,W,N,ie,te,Q,Z,$,ee,X,Y,J,G],encapsulation:2})};export{se as a};
