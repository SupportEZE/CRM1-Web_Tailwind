import{B as Q,C as Z,F as x,G as ee,Ga as de,Ha as me,Ia as _e,Ja as Ce,Ka as ge,L as te,La as he,M as ne,Ma as ue,Na as fe,P as ie,V as oe,W as ae,X as le,Ya as be,Z as re,hb as xe,jb as Se,oa as se,va as ce,wa as pe,y as J,z as K}from"./chunk-GYDYF5F3.js";import{f as z,g as U,k as q,t as X}from"./chunk-PD5VTTIY.js";import{Aa as _,Ac as P,Ba as C,Hb as Y,Ka as b,Lc as V,Mc as m,Nc as I,Ob as g,Oc as D,Uc as H,Vc as A,Wc as N,Zc as W,_b as p,bc as S,cc as M,ec as L,fc as h,gc as w,ic as y,jc as R,kc as c,lc as r,mc as v,nc as k,ob as O,oc as T,qc as f,rb as l,sb as F,wc as u,yc as o,za as B,zc as j}from"./chunk-2NSPOFEK.js";import{i as G}from"./chunk-66YHNWRR.js";var Te=["*"],we=n=>({"max-height":n});function ye(n,t){if(n&1){let e=f();c(0,"th")(1,"input",5),u("change",function(a){_(e);let s=o(2);return C(s.onToggleSelectAll(a))}),r()()}if(n&2){let e=o(2);S(e.checkboxClass)}}function Re(n,t){n&1&&(c(0,"th",4),m(1,"S.No"),r())}function ve(n,t){if(n&1){let e=f();c(0,"div",6)(1,"a",7),u("click",function(){_(e);let a=o().$implicit,s=o(2);return C(s.sendSortRequest(a.name,"asc"))}),v(2,"i",8),r(),c(3,"a",7),u("click",function(){_(e);let a=o().$implicit,s=o(2);return C(s.sendSortRequest(a.name,"desc"))}),v(4,"i",9),r()()}}function Ee(n,t){if(n&1&&(c(0,"th"),m(1),g(2,ve,5,0,"div",6),r()),n&2){let e=t.$implicit,i=o(2);L("",e.tableHeadColumn," ",e.table_class," ",i.showSorting?"pr-28 relative":"",""),l(),D("",e.label," "),l(),h(i.showSorting?2:-1)}}function Fe(n,t){n&1&&(c(0,"th",4),m(1,"Action"),r())}function De(n,t){if(n&1&&(c(0,"tr",2),g(1,ye,2,3,"th",3)(2,Re,2,0,"th",4),y(3,Ee,3,7,"th",3,w),g(5,Fe,2,0,"th",4),r()),n&2){let e=o();l(),h(e.showCheckbox?1:-1),l(),h(e.showS_No?2:-1),l(),R(e.columns),l(2),h(e.showAction?5:-1)}}function Me(n,t){n&1&&(c(0,"th"),m(1,"\xA0"),r())}function Ve(n,t){if(n&1&&(c(0,"mat-option",15),m(1),r()),n&2){let e=t.$implicit;p("value",e),l(),I(e)}}function Ie(n,t){if(n&1){let e=f();k(0),c(1,"mat-form-field",12)(2,"mat-select",13),u("selectionChange",function(a){_(e);let s=o().$implicit,d=o(2);return C(d.handleSelectChange(a,s))}),g(3,Ve,2,2,"mat-option",14),r()(),T()}if(n&2){let e=o().$implicit,i=o(2);l(2),p("formControl",i.multiSelectControls[e.name]),l(),p("ngForOf",e.options)}}function He(n,t){if(n&1&&(c(0,"mat-option",15),m(1),r()),n&2){let e=t.$implicit;p("value",e.value),l(),I(e.label)}}function Ae(n,t){if(n&1){let e=f();k(0),c(1,"mat-form-field",16)(2,"mat-select",17),u("selectionChange",function(a){_(e);let s=o().$implicit,d=o(2);return C(d.handleSingleSelectChange(a,s))}),g(3,He,2,2,"mat-option",14),r()(),T()}if(n&2){let e=o().$implicit,i=o(2);l(2),p("formControl",i.singleSelectControls[e.name]),l(),p("ngForOf",e.options)}}function Ne(n,t){if(n&1){let e=f();k(0),c(1,"input",18),N("ngModelChange",function(a){_(e);let s=o().$implicit,d=o(2);return A(d.searchTexts[s.name],a)||(d.searchTexts[s.name]=a),C(a)}),u("keydown.enter",function(){_(e);let a=o().$implicit,s=o(2);return C(s.handleTextChange(a.name))}),r(),T()}if(n&2){let e=o().$implicit,i=o(2);l(),H("ngModel",i.searchTexts[e.name])}}function $e(n,t){if(n&1){let e=f();k(0),c(1,"mat-form-field",19)(2,"mat-date-range-input",20)(3,"input",21),u("dateChange",function(){_(e);let a=o().$implicit,s=o(2);return C(s.onDateChange(a.name))}),r(),c(4,"input",22),u("dateChange",function(){_(e);let a=o().$implicit,s=o(2);return C(s.onDateChange(a.name))}),r()(),v(5,"mat-datepicker-toggle",23)(6,"mat-date-range-picker",null,0),r(),T()}if(n&2){let e=V(7),i=o().$implicit,a=o(2);l(2),p("formGroup",a.dateRangeGroups[i.name])("rangePicker",e),l(3),p("for",e)}}function Ge(n,t){if(n&1){let e=f();k(0),c(1,"mat-form-field",24)(2,"input",25),u("dateChange",function(a){_(e);let s=o().$implicit,d=o(2);return C(d.onSingleDateChange(s.name,a))}),r(),v(3,"mat-datepicker-toggle",26)(4,"mat-datepicker",null,0),r(),T()}if(n&2){let e=V(5),i=o().$implicit,a=o(2);l(2),p("matDatepicker",e)("formControl",a.dateControls[i.name]),l(),p("for",e)}}function Be(n,t){if(n&1&&(c(0,"th"),g(1,Ie,4,2,"ng-container",11)(2,Ae,4,2,"ng-container",11)(3,Ne,2,1,"ng-container",11)(4,$e,8,3,"ng-container",11)(5,Ge,6,3,"ng-container",11),r()),n&2){let e=t.$implicit;S(e.tableHeadColumn),l(),p("ngIf",e.type=="MULTI_SELECT"&&e.filter_checked),l(),p("ngIf",e.type=="SINGLE_SELECT"&&e.filter_checked),l(),p("ngIf",(e.type=="SHORT_TEXT"||e.type=="NUMBER"||e.type=="TEXT_AREA")&&e.filter_checked),l(),p("ngIf",e.type=="DATE_RANGE"&&e.filter_checked),l(),p("ngIf",e.type=="DATE"&&e.filter_checked)}}function Oe(n,t){n&1&&(c(0,"th",10),m(1,"\xA0"),r())}function Ye(n,t){if(n&1&&(c(0,"tr",2),g(1,Me,2,0,"th"),y(2,Be,6,8,"th",3,w),g(4,Oe,2,0,"th",10),r()),n&2){let e=o();l(),h(e.showS_No?1:-1),l(),R(e.columns),l(2),h(e.showAction?4:-1)}}function Le(n,t){if(n&1&&(c(0,"td"),m(1),r()),n&2){let e=t.$implicit,i=o(2).$implicit;S(e.table_class),l(),D(" ",i[e.field]," ")}}function je(n,t){if(n&1){let e=f();c(0,"td")(1,"input",27),N("ngModelChange",function(a){_(e);let s=o().$implicit;return A(s.checked,a)||(s.checked=a),C(a)}),r()(),y(2,Le,2,4,"td",3,w)}if(n&2){let e=o().$implicit,i=o();l(),p("checked",i.allTasksChecked),H("ngModel",e.checked),l(),R(i.columns)}}function Pe(n,t){if(n&1&&(c(0,"tr"),g(1,je,4,2),r()),n&2){let e=o();l(),h(e.showCheckbox?1:-1)}}function We(n,t){if(n&1&&(c(0,"tfoot")(1,"th",28),m(2),r(),c(3,"td"),m(4," United States "),r(),c(5,"td"),m(6," 558 "),r(),c(7,"td")(8,"span",29),m(9,"56%"),r()()()),n&2){let e=o();S(e.tableFooter),l(2),D(" ",e.tableFoot," ")}}var ke=class n{constructor(t,e,i){this.fb=t;this.api=e;this.dateService=i;this.range=this.fb.group({start:new x(null),end:new x(null)})}columns=[];columnsFilter=[];tableClass="";tableHead="";tableFooter="";tableBody="";trClass="";checkboxClass="";tableFoot="";tableHeadColumn="";data=[];subModule={};title=[];footerData=[];showFooter=!1;showCheckbox=!1;showS_No=!1;showAction=!1;showHeaderRow=!0;showFilterRow=!1;showSorting=!1;rows=[];allTasksChecked;tableData;toggleSelectAll=new b;openDetails=new b;sortChanged=new b;selectionChange=new b;textSearchChange=new b;initialRange=null;dateRangeChange=new b;dateChange=new b;tableHeight="450px";ngOnInit(){this.setTableHeight()}onResize(){this.setTableHeight()}setTableHeight(){let i=window.innerHeight-160-160;this.tableHeight=`${i}px`}onToggleSelectAll(t){this.toggleSelectAll.emit(t.target.checked)}toggleRowChecked(t){t.checked=!t.checked,this.allTasksChecked=this.data.every(e=>e.checked)}updateSelectAllCheckbox(){this.allTasksChecked=this.data.every(t=>t.checked)}sendSortRequest(t,e){let i=e==="asc"?1:-1;this.sortChanged.emit({field:t,order:i})}handleSelectChange(t,e){e.selections=t.value,this.selectionChange.emit({category_name:e.name,selections:e.selections})}handleSingleSelectChange(t,e){e.selections=t.value,this.selectionChange.emit({category_name:e.name,selections:e.selections})}searchTexts={};searchText="";handleTextChange(t){let e=this.searchTexts[t]||"";this.textSearchChange.emit({searchText:e,name:t})}range;singleSelectControls={};dateControls={};dateRangeGroups={};multiSelectControls={};ngOnChanges(){this.initialRange&&this.range.patchValue(this.initialRange),this.columns.forEach(t=>{t.type==="SINGLE_SELECT"&&!this.singleSelectControls[t.name]&&(this.singleSelectControls[t.name]=new x(null)),t.type==="MULTI_SELECT"&&!this.multiSelectControls[t.name]&&(this.multiSelectControls[t.name]=new x([])),t.type==="DATE"&&!this.dateControls[t.name]&&(this.dateControls[t.name]=new x(null)),t.type==="DATE_RANGE"&&!this.dateRangeGroups[t.name]&&(this.dateRangeGroups[t.name]=this.fb.group({start:new x(null),end:new x(null)})),t.api_path&&this.getOptions(t.label,t.name,t.api_path,t.api_payload,t.api_payload_key)})}clearSearchInputs(){this.searchTexts={},Object.keys(this.singleSelectControls).forEach(t=>{this.singleSelectControls[t].setValue(null)}),Object.keys(this.multiSelectControls).forEach(t=>{this.multiSelectControls[t].setValue([])}),Object.keys(this.dateControls).forEach(t=>{this.dateControls[t].setValue(null)}),Object.keys(this.dateRangeGroups).forEach(t=>{this.dateRangeGroups[t].reset()})}getOptions(t,e,i,a,s){return G(this,null,function*(){try{let d={dropdown_name:t,module_id:this.subModule.sub_module_id||this.subModule.module_id};a&&s&&(d[s]=a);let E=yield this.api.post(d,i).toPromise();E?.statusCode===200&&this.columns.forEach($=>{$.name===e&&($.options=E.data)})}catch{}})}onDateChange(t){let e=this.dateRangeGroups[t],i=e?.get("start")?.value,a=e?.get("end")?.value;if(i&&a){let s=this.dateService.formatToYYYYMMDD(new Date(i)),d=this.dateService.formatToYYYYMMDD(new Date(a)),E={[t]:{start:s,end:d}};this.dateRangeChange.emit(E)}}onSingleDateChange(t,e){let i;if(i=e.value,i&&(i=this.dateService.formatToYYYYMMDD(i)),i){let a={[t]:i};this.dateChange.emit(a)}}static \u0275fac=function(e){return new(e||n)(F(oe),F(re),F(Se))};static \u0275cmp=Y({type:n,selectors:[["spk-reusable-tables"]],hostBindings:function(e,i){e&1&&u("resize",function(s){return i.onResize(s)},!1,O)},inputs:{columns:"columns",columnsFilter:"columnsFilter",tableClass:"tableClass",tableHead:"tableHead",tableFooter:"tableFooter",tableBody:"tableBody",trClass:"trClass",checkboxClass:"checkboxClass",tableFoot:"tableFoot",tableHeadColumn:"tableHeadColumn",data:"data",subModule:"subModule",title:"title",footerData:"footerData",showFooter:"showFooter",showCheckbox:"showCheckbox",showS_No:"showS_No",showAction:"showAction",showHeaderRow:"showHeaderRow",showFilterRow:"showFilterRow",showSorting:"showSorting",rows:"rows",initialRange:"initialRange",tableHeight:"tableHeight"},outputs:{toggleSelectAll:"toggleSelectAll",openDetails:"openDetails",sortChanged:"sortChanged",selectionChange:"selectionChange",textSearchChange:"textSearchChange",dateRangeChange:"dateRangeChange",dateChange:"dateChange"},features:[B],ngContentSelectors:Te,decls:10,vars:15,consts:[["picker",""],[3,"ngStyle"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[3,"class"],[1,"!text-center"],["type","checkbox","aria-label","...",1,"form-check-input",3,"change"],[1,"table_pagination"],[3,"click"],[1,"ri-arrow-drop-up-line"],[1,"ri-arrow-drop-down-line"],[1,"w60"],[4,"ngIf"],[1,"table_filter"],["placeholder","Select an option","multiple","",3,"selectionChange","formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"table_filter_single"],["placeholder","Select an option",3,"selectionChange","formControl"],["type","text","id","input-text","placeholder","Search...",1,"form-control","mw100",3,"ngModelChange","keydown.enter","ngModel"],[1,"table-date-range"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date",3,"dateChange"],["matEndDate","","formControlName","end","placeholder","End date",3,"dateChange"],["matIconSuffix","",3,"for"],[1,"table-input"],["matInput","","placeholder","Choose a date",3,"dateChange","matDatepicker","formControl"],["matSuffix","",3,"for"],["type","checkbox",1,"form-check-input",3,"ngModelChange","checked","ngModel"],["scope","row"],[1,"badge","bg-primary","text-white"]],template:function(e,i){e&1&&(j(),c(0,"div",1)(1,"table")(2,"thead"),g(3,De,6,3,"tr",2)(4,Ye,5,2,"tr",2),r(),c(5,"tbody"),y(6,Pe,2,1,"tr",null,w),P(8),r(),g(9,We,10,4,"tfoot",3),r()()),e&2&&(p("ngStyle",W(13,we,i.tableHeight)),l(),M("  ",i.tableClass,""),l(),M("",i.tableHead," table-header"),l(),h(i.showHeaderRow?3:-1),l(),h(i.showFilterRow?4:-1),l(),S(i.tableBody),l(),R(i.data),l(3),h(i.showFooter==!0?9:-1))},dependencies:[ae,K,J,Q,Z,ee,le,te,ne,ie,X,z,U,q,xe,se,me,_e,Ce,ue,ge,he,fe,de,pe,ce,be],encapsulation:2})};export{ke as a};
