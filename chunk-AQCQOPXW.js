import{a as ot}from"./chunk-56RTIVDZ.js";import"./chunk-PU6S26UW.js";import{a as nt}from"./chunk-SQZ3YN6N.js";import{c as et}from"./chunk-CIBZCVJQ.js";import{a as tt}from"./chunk-OTFCGVEU.js";import{a as Z}from"./chunk-HPLI5COI.js";import"./chunk-CNF4GSI7.js";import{a as H}from"./chunk-OEHD5D2Y.js";import{a as it}from"./chunk-GLWQGYBC.js";import{a as B}from"./chunk-DC4QM32I.js";import{B as W,F as X,c as P,l as $,m as z,n as J,p as K}from"./chunk-VHE3PQ3O.js";import{Qa as j,Z as U,Za as A,hb as V,jb as G,p as O,w as N}from"./chunk-GYDYF5F3.js";import{K as L,M as Y,f as R,g as T,o as Q,y as F}from"./chunk-PD5VTTIY.js";import{Aa as g,Ba as D,Bc as E,Hb as w,Mc as o,Nc as m,Ob as u,Oc as C,Pc as c,Qc as S,Yc as v,_b as r,bc as _,ed as y,gd as I,kc as e,lc as i,mc as p,nc as q,oc as k,qc as M,rb as n,sb as s,wc as h,yc as b}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var lt=()=>["Quotation Details"],f=()=>[];function rt(a,l){if(a&1&&(e(0,"tr",25)(1,"th",26)(2,"p",20),o(3,"Reject Reason"),i()(),e(4,"td",27)(5,"span",28),o(6),i()()()),a&2){let t=b(2);n(5),E("matTooltip",(t.quotationDetail==null?null:t.quotationDetail.reject_reason)||"---"),n(),m((t.quotationDetail==null?null:t.quotationDetail.reject_reason)||"---")}}function dt(a,l){if(a&1&&(e(0,"tr",50)(1,"td")(2,"div",51),o(3),i()(),e(4,"td")(5,"div",52),o(6),i()(),e(7,"td",53),o(8),i(),e(9,"td",54),o(10),i(),e(11,"td",55),o(12),i(),e(13,"td",55),o(14),i(),e(15,"td",55),o(16),i(),e(17,"td",55),o(18),i()()),a&2){let t=l.$implicit,x=l.index,d=b(3);n(3),m(x+1),n(3),m((t==null?null:t.product_name)||"---"),n(2),c("",d.CURRENCY_SYMBOLS.RUPEE,"",(t==null?null:t.price)||"---",""),n(2),m(t==null?null:t.qty),n(2),S("",d.CURRENCY_SYMBOLS.RUPEE,"",(t==null?null:t.discount_amount)||"---"," \xA0 (",(t==null?null:t.discount_percent)||"---","%)"),n(2),c("",d.CURRENCY_SYMBOLS.RUPEE,"",(t==null?null:t.sub_total)||"---",""),n(2),S("",d.CURRENCY_SYMBOLS.RUPEE,"",t==null?null:t.gst_amount," \xA0 (",(t==null?null:t.gst_percent)||"---","%)"),n(2),c("",d.CURRENCY_SYMBOLS.RUPEE,"",(t==null?null:t.total_price)||"---","")}}function st(a,l){if(a&1&&(q(0),u(1,dt,19,15,"tr",49),k()),a&2){let t=b(2);n(),r("ngForOf",t.cartDetail)}}function ut(a,l){if(a&1){let t=M();e(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9),o(7,"Quotation Id : "),e(8,"span",10),o(9),i()()()(),e(10,"div",11),p(11,"app-icon-button",12)(12,"app-icon-button",12),e(13,"app-icon-button",13),h("click",function(){g(t);let d=b();return D(d.exportQuotationPdf())}),i(),e(14,"app-icon-button",14),h("click",function(){g(t);let d=b();return D(d.openMainLogModal(d.quotationDetail==null?null:d.quotationDetail._id))}),i()()(),e(15,"div",15)(16,"div",16)(17,"div",4)(18,"div",3)(19,"div",17)(20,"p",18),o(21," Customer Details : "),i(),e(22,"p",19),o(23),i(),e(24,"p",19),o(25),i(),e(26,"p",19),o(27),i(),e(28,"p",19),o(29),i(),e(30,"p",20),o(31,"For more information check for "),e(32,"a",21)(33,"u"),o(34,"GSTIN"),i()(),o(35," Details."),i()(),p(36,"div",22),e(37,"div",17)(38,"spk-reusable-tables",23)(39,"p",24),o(40," Quotation Details : "),i(),e(41,"tr",25)(42,"th",26)(43,"p",20),o(44,"Last Activity: "),i()(),e(45,"td")(46,"p",20),o(47),y(48,"date"),i()()(),e(49,"tr",25)(50,"th",26)(51,"p",20),o(52,"Next Followup : "),i()(),e(53,"td")(54,"p",20),o(55),y(56,"date"),i()()(),e(57,"tr",25)(58,"th",26)(59,"p",20),o(60,"Quotation Type :"),i()(),e(61,"td")(62,"p",20),o(63),i()()(),e(64,"tr",25)(65,"th",26)(66,"p",20),o(67,"Customer Type :"),i()(),e(68,"td")(69,"p",20),o(70),i()()(),e(71,"tr",25)(72,"th",26)(73,"p",20),o(74,"Customer Detail :"),i()(),e(75,"td",27)(76,"span",28),o(77),i()()(),e(78,"tr",25)(79,"th",26)(80,"p",20),o(81,"Total Amount :"),i()(),e(82,"td")(83,"p",20),o(84),i()()(),e(85,"tr",25)(86,"th",26)(87,"p",20),o(88,"Status :"),i()(),e(89,"td")(90,"div",29)(91,"span",30),o(92),e(93,"a",31),h("click",function(){g(t);let d=b();return D(d.updateQuotationStatus())}),e(94,"i",32),o(95,"edit"),i()()()()()(),u(96,rt,7,2,"tr",33),i()()()(),e(97,"div",4)(98,"div",34)(99,"spk-reusable-tables",35),u(100,st,2,1,"ng-container",36),e(101,"tr",37)(102,"td",38)(103,"div",4)(104,"label",39),o(105,"Terms & Conditions"),e(106,"span",40),o(107,"*"),i()(),e(108,"div",41),p(109,"ngx-editor-menu",42)(110,"ngx-editor",43),i()()(),e(111,"td",44)(112,"spk-reusable-tables",23)(113,"tr",25)(114,"th",26)(115,"p",45),o(116,"Total Amount:"),i()(),e(117,"td")(118,"p",46),o(119),i()()(),e(120,"tr",25)(121,"th",26)(122,"p",45),o(123,"Total Discount Amount :"),i()(),e(124,"td")(125,"p",46),o(126),i()()(),e(127,"tr",25)(128,"th",26)(129,"p",45),o(130,"Sub Total :"),i()(),e(131,"td")(132,"p",46),o(133),i()()(),e(134,"tr",25)(135,"th",26)(136,"p",45),o(137,"Total GST Amount :"),i()(),e(138,"td")(139,"p",46),o(140),i()()(),e(141,"tr",25)(142,"th",26)(143,"p",47),o(144,"Net Amount :"),i()(),e(145,"td")(146,"p",48),o(147),i()()()()()()()()()()()()()()}if(a&2){let t=b();n(9),m(t.quotationDetail!=null&&t.quotationDetail.quotation_id?t.quotationDetail==null?null:t.quotationDetail.quotation_id:"---"),n(2),r("icon","ri-mail-line")("buttonClass","ti-btn ti-btn-icon bg-primary/10 text-primary !border hover:bg-primary hover:text-white !rounded-full btn-wave"),n(),r("icon","ri-whatsapp-line")("buttonClass","ti-btn ti-btn-icon bg-secondary/10 text-secondary hover:bg-secondary hover:text-white !rounded-full btn-wave"),n(),r("icon","bi bi-file-earmark-pdf")("buttonClass","ti-btn ti-btn-icon bg-primary/10 text-primary !border hover:bg-primary hover:text-white !rounded-full btn-wave"),n(),r("icon","ri-file-list-line")("buttonClass","ti-btn ti-btn-icon bg-secondary/10 text-secondary hover:bg-secondary hover:text-white !rounded-full btn-wave"),n(9),C(" ",(t.customerDetail==null?null:t.customerDetail.customer_name)||"---"," "),n(2),S(" ",(t.customerDetail==null?null:t.customerDetail.address)||"---"," , ",(t.customerDetail==null?null:t.customerDetail.city)||"---"," , ",(t.customerDetail==null?null:t.customerDetail.district)||"---"," "),n(2),S(" ",(t.customerDetail==null?null:t.customerDetail.state)||"---",",",(t.customerDetail==null?null:t.customerDetail.country)||"---",",",(t.customerDetail==null?null:t.customerDetail.pincode)||"---"," "),n(2),C(" ",(t.customerDetail==null?null:t.customerDetail.mobile)||"---"," "),n(9),r("showCheckbox",!1),n(9),m(t.quotationDetail!=null&&t.quotationDetail.created_at?I(48,45,t.quotationDetail==null?null:t.quotationDetail.created_at,"d MMM yyyy, hh:mm a"):"---"),n(8),m(t.quotationDetail!=null&&t.quotationDetail.followup_date?I(56,48,t.quotationDetail==null?null:t.quotationDetail.followup_date,"d MMM yyyy, hh:mm a"):"---"),n(8),m((t.quotationDetail==null?null:t.quotationDetail.quotation_type)||"---"),n(7),m((t.quotationDetail==null?null:t.quotationDetail.customer_type_name)||"---"),n(6),E("matTooltip",(t.quotationDetail==null?null:t.quotationDetail.customer_name)||"---"),n(),m((t.quotationDetail==null?null:t.quotationDetail.customer_name)||"---"),n(7),c("",t.CURRENCY_SYMBOLS.RUPEE,"",(t.quotationDetail==null?null:t.quotationDetail.total_amount)||"---",""),n(8),C("",(t.quotationDetail==null?null:t.quotationDetail.status)||"--"," "),n(4),r("ngIf",t.quotationDetail.status=="Reject"),n(3),r("columns",t.quotationColumns)("showCheckbox",!1),n(),r("ngIf",!t.skLoading),n(9),r("editor",t.editor)("toolbar",t.toolbar),n(),r("editor",t.editor),n(2),r("showCheckbox",!1),n(7),c("",t.CURRENCY_SYMBOLS.RUPEE,"",(t.quotationDetail==null?null:t.quotationDetail.total_amount)||"---",""),n(7),c("",t.CURRENCY_SYMBOLS.RUPEE,"",(t.quotationDetail==null?null:t.quotationDetail.total_discount)||"---",""),n(7),c("",t.CURRENCY_SYMBOLS.RUPEE,"",(t.quotationDetail==null?null:t.quotationDetail.sub_total)||"---",""),n(7),c("",t.CURRENCY_SYMBOLS.RUPEE,"",(t.quotationDetail==null?null:t.quotationDetail.gst)||"---",""),n(7),c("",t.CURRENCY_SYMBOLS.RUPEE,"",(t.quotationDetail==null?null:t.quotationDetail.total_amount)||"---","")}}function mt(a,l){a&1&&p(0,"app-skeleton"),a&2&&_("wp100 h35 mb-3")}function pt(a,l){a&1&&p(0,"app-skeleton"),a&2&&_("wp100 h35 mb-3")}function ct(a,l){a&1&&p(0,"app-skeleton"),a&2&&_("wp100 h35 mb-3")}function xt(a,l){a&1&&(e(0,"div",29),p(1,"app-skeleton"),i()),a&2&&(n(),_("w180"))}function bt(a,l){a&1&&p(0,"app-skeleton"),a&2&&_("wp100 h35 mb-3")}function vt(a,l){a&1&&p(0,"app-skeleton"),a&2&&_("wp100 h35 mb-3")}function _t(a,l){a&1&&(e(0,"div",56)(1,"div",4)(2,"div",56)(3,"div",57)(4,"app-showcode-card",58),u(5,mt,1,2,"app-skeleton",59),i()(),e(6,"div",57)(7,"app-showcode-card",58),u(8,pt,1,2,"app-skeleton",59),i()(),e(9,"div",57)(10,"app-showcode-card",58),u(11,ct,1,2,"app-skeleton",59),i()(),e(12,"div",4)(13,"app-showcode-card",58)(14,"div")(15,"div",60),u(16,xt,2,2,"div",61),i()()()(),e(17,"div",62)(18,"app-showcode-card",58),u(19,bt,1,2,"app-skeleton",59),i()(),e(20,"div",57)(21,"app-showcode-card",58),u(22,vt,1,2,"app-skeleton",59),i()()()()()),a&2&&(n(4),r("titleView",!1)("view",!1),n(),r("ngForOf",v(18,f).constructor(7)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",v(19,f).constructor(7)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",v(20,f).constructor(7)),n(2),r("titleView",!1)("view",!1),n(3),r("ngForOf",v(21,f).constructor(10)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",v(22,f).constructor(7)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",v(23,f).constructor(7)))}var at=class a{constructor(l,t,x,d,ft,ht,St,gt,Dt,Ct){this.toastr=l;this.api=t;this.route=x;this.moduleService=d;this.router=ft;this.http=ht;this.dateService=St;this.dialog=gt;this.comanFuncation=Dt;this.logService=Ct}CURRENCY_SYMBOLS=O;submodule;FORMID=Z;skLoading=!1;DetailId;quotationDetail={};customerDetail={};editor;cartDetail=[];subModule={};submoduleId=0;logList=[];toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]];ngOnInit(){let l=this.moduleService.getSubModuleByName("SFA","Quotation");l&&(this.submoduleId=l,this.subModule.sub_module_id=l.module_id,this.subModule.title=l.module_name,this.subModule.module_type=l.module_type),this.route.paramMap.subscribe(t=>{this.DetailId=t.get("id"),this.DetailId&&this.getDetail()}),this.editor=new K}quotationColumns=[{label:"S.No",table_class:"text-center"},{label:"Product Details",table_class:""},{label:"Price Per Unit",table_class:"text-right"},{label:"Quantity",table_class:"text-center"},{label:"Discount",table_class:"text-right"},{label:"Sub Total",table_class:"text-right"},{label:"Gst",table_class:"text-right"},{label:"Net Amount",table_class:"text-right"}];getDetail(){this.skLoading=!0,this.api.post({_id:this.DetailId},"quotation/detail").subscribe(l=>{l.statusCode===200&&(this.skLoading=!1,this.quotationDetail=l.data,this.cartDetail=l.data.cart_item,this.customerDetail=l.data.customer_details,this.logService.getLogs(this.subModule.sub_module_id,t=>{this.logList=t},this.DetailId?this.DetailId:"",this.subModule.module_type),this.quotationDetail=this.dateService.formatToDDMMYYYY(this.quotationDetail))})}editQuotationItem(){this.router.navigate(["/apps/sfa/quotation-list/quotation-detail/"+this.DetailId+"/edit"])}deleteQuotation(){this.cartDetail.splice(1),this.toastr.success("Quotation removed from the list.","","toast-top-right")}exportQuotationPdf(){this.skLoading=!0,this.api.post({_id:this.DetailId},"quotation/export-pdf").subscribe(l=>{this.skLoading=!1,l.statusCode===200&&window.open(l.data.signedUrl,"_blank")})}updateQuotationStatus(){this.dialog.open(ot,{width:"450px",data:{lastPage:"quotation-detail",quotationId:this.DetailId,status:this.quotationDetail.status,subModule:this.subModule}}).afterClosed().subscribe(t=>{t===!0&&this.getDetail()})}openMainLogModal(l){this.comanFuncation.listLogsModal(this.submoduleId.module_id,l,this.subModule.module_type).subscribe(t=>{t===!0&&this.getDetail()})}static \u0275fac=function(t){return new(t||a)(s(N),s(U),s(L),s(B),s(Y),s(F),s(G),s(j),s(et),s(tt))};static \u0275cmp=w({type:a,selectors:[["app-quotation-detail"]],decls:3,vars:9,consts:[[3,"buttonClick1","title","title1","activeitem","buttonText1","icon1","btnShow1"],["class","grid grid-cols-12 gap-x-6",4,"ngIf"],["class","grid grid-cols-12 sm:gap-x-6",4,"ngIf"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xl:col-span-12","col-span-12"],[1,"box"],[1,"box-header","md:flex","block"],[1,"h5","mb-0","sm:flex","block","items-center"],[1,"sm:ms-2","ms-0","sm:mt-0","mt-2"],[1,"h6","font-medium","mb-0"],[1,"text-primary"],[1,"ms-auto","mt-md-0","mt-2"],[3,"icon","buttonClass"],["matTooltip","Export Pdf",3,"click","icon","buttonClass"],["matTooltip","Logs",3,"click","icon","buttonClass"],[1,"box-body"],[1,"grid","grid-cols-12","sm:gap-x-6","gap-y-3"],[1,"xl:col-span-4","lg:col-span-4","md:col-span-5","sm:col-span-12","col-span-12"],[1,"h6","font-medium","mb-5"],[1,"mb-1","text-textmuted","dark:text-textmuted/50"],[1,"text-textmuted","dark:text-textmuted/50"],["href","javascript:void(0);",1,"text-primary","font-medium"],[1,"xl:col-span-4","lg:col-span-3","md:col-span-2","sm:col-span-12","col-span-12"],["tableClass","table table-sm text-nowrap mb-0 table-borderless",3,"showCheckbox"],[1,"h6","font-medium","mb-3"],[1,"border-b","!border-transparent"],["scope","row"],[1,"ellipsis"],[1,"ellipsis","text-textmuted","dark:text-textmuted/50",3,"matTooltip"],[1,"flex","items-center"],[1,"flex","items-center","block","font-medium","badge","bg-info/10","text-info"],[1,"text-info","font-medium",3,"click"],[1,"material-icons","ms-1"],["class","border-b !border-transparent",4,"ngIf"],[1,"table-responsive"],["tableClass","ti-custom-table ti-custom-table-head mt-3 border border-defaultborder dark:border-defaultborder/10",3,"columns","showCheckbox"],[4,"ngIf"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],["colspan","5"],[1,"form-label"],[1,"text-red-500"],["id","product-features",1,"ngx-editor-custom","editor-height500"],[3,"editor","toolbar"],[1,"overflow-auto",3,"editor"],["colspan","4"],[1,"mb-0","font-medium","text-[15px]"],[1,"mb-0","font-medium","text-[15px]","text-right"],[1,"mb-0","text-[14px]","font-medium","text-[15px]"],[1,"mb-0","font-medium","text-[1rem]","text-right","text-success"],["class","invoice-list border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[1,"invoice-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"font-medium","text-center"],[1,"font-medium"],[1,"w140","text-right"],[1,"w120","text-center"],[1,"w120","text-right"],[1,"grid","grid-cols-12","sm:gap-x-6"],[1,"xl:col-span-4","col-span-12"],[3,"titleView","view"],[3,"class",4,"ngFor","ngForOf"],[1,"flex","gap-2","mb-1","flex-wrap"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"xl:col-span-8","col-span-12"]],template:function(t,x){t&1&&(e(0,"app-page-header",0),h("buttonClick1",function(){return x.editQuotationItem()}),i(),u(1,ut,148,51,"div",1)(2,_t,23,24,"div",2)),t&2&&(r("title","Quotation")("title1",v(8,lt))("activeitem","Quotation Details")("buttonText1","Edit Quotation")("icon1","edit")("btnShow1",!0),n(),r("ngIf",!x.skLoading),n(),r("ngIf",x.skLoading))},dependencies:[V,X,R,T,it,P,nt,A,Q,H,J,$,z,W],encapsulation:2})};export{at as QuotationDetailComponent};
