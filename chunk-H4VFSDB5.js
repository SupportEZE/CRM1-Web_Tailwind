import{a as Y}from"./chunk-ZVIIKUJ2.js";import{a as X}from"./chunk-56RTIVDZ.js";import{a as W}from"./chunk-5QFGLOXN.js";import"./chunk-GXF7AAOQ.js";import"./chunk-PU6S26UW.js";import"./chunk-54KZ5YIV.js";import{a as Q}from"./chunk-JUPJFX3F.js";import{a as z}from"./chunk-PJTW4QXW.js";import{a as K}from"./chunk-SQZ3YN6N.js";import{c as $}from"./chunk-CIBZCVJQ.js";import{a as q}from"./chunk-OTFCGVEU.js";import"./chunk-HPLI5COI.js";import"./chunk-CNF4GSI7.js";import"./chunk-OEHD5D2Y.js";import{a as J}from"./chunk-GLWQGYBC.js";import{a as N}from"./chunk-DC4QM32I.js";import{B as U,F as G,c as A,s as O,t as H}from"./chunk-VHE3PQ3O.js";import{Qa as V,Z as T,Za as j,hb as P}from"./chunk-GYDYF5F3.js";import{K as L,e as w,f as E,g as k,o as F,t as R}from"./chunk-PD5VTTIY.js";import{Aa as D,Ba as _,Hb as I,Mc as r,Nc as d,Ob as c,Yc as x,_b as s,ad as y,bc as f,ed as B,gd as M,kc as l,lc as a,mc as g,nc as b,oc as h,qc as C,rb as o,sb as m,wc as v,yc as u}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var ee=()=>["Branding Detail"],te=(i,n,t,e)=>({"text-success bg-success/10":i,"text-info bg-info/10":n,"text-warning bg-warning/10":t,"text-danger bg-danger/10":e}),ie=()=>[];function ne(i,n){if(i&1&&(l(0,"div")(1,"span",6),r(2),a(),l(3,"span",8),r(4,"Remark"),a()()),i&2){let t=u();o(2),d((t.Detail==null?null:t.Detail.remark)||"---")}}function ae(i,n){if(i&1){let t=C();l(0,"app-icon-button",19),v("click",function(){D(t);let p=u();return _(p.statusChange(p.Detail._id))}),a()}i&2&&s("icon","ri-pencil-line")("buttonClass","btn-wave ti-btn ti-btn-sm ti-btn-soft-primary waves-effect waves-light")}function le(i,n){if(i&1&&(l(0,"div")(1,"span",6),r(2),a(),l(3,"span",8),r(4,"Reason"),a()()),i&2){let t=u();o(2),d((t.Detail==null?null:t.Detail.reason)||"---")}}function oe(i,n){i&1&&(l(0,"div",22),g(1,"app-skeleton"),a()),i&2&&(o(),f("w180"))}function re(i,n){i&1&&(l(0,"div")(1,"div",20),c(2,oe,2,2,"div",21),a()()),i&2&&(o(2),s("ngForOf",x(1,ie).constructor(6)))}function se(i,n){if(i&1){let t=C();l(0,"div",25)(1,"spk-product-card",26),v("delete",function(){let p=D(t).$implicit,S=u(2);return _(S.delete(p._id,"brand-audit/delete-file","delete"))}),a()()}if(i&2){let t=n.$implicit;o(),s("apiPath","brand-audit/get-doc")("imageData",t)("editBtn",!1)("heading",!1)("subHeading",!1)}}function de(i,n){if(i&1&&(l(0,"div",23),b(1),c(2,se,2,5,"div",24),h(),a()),i&2){let t=u();o(2),s("ngForOf",t.brandDetailImages)}}function pe(i,n){i&1&&(b(0),g(1,"app-data-not-found"),h())}var Z=class i{constructor(n,t,e,p,S,me,ce){this.nameUtils=n;this.moduleService=t;this.route=e;this.api=p;this.logService=S;this.dialog=me;this.comanFuncation=ce}Detail;subModule={};DetailId;brandDetailImages=[];skLoading=!1;customerDetail=[];countDetail=[];logList=[];accessRight={};statusOptions=[{name:"Approved"},{name:"Reject"},{name:"Complete"}];ngOnInit(){let n=this.moduleService.getAccessMap("SFA","Branding");n&&(this.accessRight=n);let t=this.moduleService.getSubModuleByName("SFA","Branding");t&&(this.subModule=t),this.route.paramMap.subscribe(e=>{this.DetailId=e.get("id"),this.DetailId&&this.getBrandDetail()})}getBrandDetail(){this.skLoading=!0,this.brandDetailImages=[],this.api.post({_id:this.DetailId},"brand-audit/detail").subscribe(n=>{n.statusCode===200&&(this.skLoading=!1,this.Detail=n.data,this.countDetail=n.data.count,this.customerDetail=n.data.customers,this.brandDetailImages=n.data.files,this.logService.getLogs(this.subModule.module_id,t=>{this.logList=t},this.DetailId?this.DetailId:"",this.subModule.module_type))})}addBrandGallery(){this.dialog.open(X,{width:"500px",data:{lastPage:"branding-gallery-modal",DetailId:this.DetailId,status:this.Detail.status,subModule:this.subModule}}).afterClosed().subscribe(t=>{t===!0&&this.getBrandDetail()})}delete(n,t,e){this.comanFuncation.delete(n,this.subModule,e,t,"single_action",this.DetailId).subscribe(p=>{p===!0&&this.getBrandDetail()})}statusChange(n){this.dialog.open(Y,{width:"400px",data:{lastPage:"branding-list",DetailId:n,options:this.statusOptions,subModule:this.subModule,status:this.Detail.status}}).afterClosed().subscribe(e=>{e===!0&&this.getBrandDetail()})}static \u0275fac=function(t){return new(t||i)(m(W),m(N),m(L),m(T),m(q),m(V),m($))};static \u0275cmp=I({type:i,selectors:[["app-branding-detail"]],decls:53,vars:40,consts:[[3,"title","title1","activeitem"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xl:col-span-12","col-span-12"],[3,"title","titleView"],[1,"flex","gap-6","mb-1","flex-wrap","text-[11px]"],[1,"flex","items-center","gap-2"],[1,"block","font-medium"],[1,"text-xs","text-textmuted","dark:text-textmuted/50"],[1,"text-textmuted","dark:text-textmuted/50"],[4,"ngIf"],[1,"block","font-medium","text-primay"],[1,"badge",3,"ngClass"],["matTooltip","Change Status",3,"icon","buttonClass","click",4,"ngIf"],[1,"grid","grid-cols-12","sm:gap-x-6"],[1,"xl:col-span-4","col-span-12"],[3,"action","title","titleView","actionIcons","iconClass","classbody","iconName"],["class","grid grid-cols-12 gap-x-4",4,"ngIf"],[1,"xxl:col-span-4","xl:col-span-4","lg:col-span-4","md:col-span-5","col-span-12"],[3,"logList","scrollHeight","closeBtn"],["matTooltip","Change Status",3,"click","icon","buttonClass"],[1,"flex","gap-2","mb-1","flex-wrap"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"grid","grid-cols-12","gap-x-4"],["class","xl:col-span-2 lg:col-span-3 xl:col-span-4 sm:col-span-6 col-span-12",4,"ngFor","ngForOf"],[1,"xl:col-span-2","lg:col-span-3","xl:col-span-4","sm:col-span-6","col-span-12"],[3,"delete","apiPath","imageData","editBtn","heading","subHeading"]],template:function(t,e){t&1&&(g(0,"app-page-header",0),l(1,"div",1)(2,"div",2)(3,"app-showcode-card",3)(4,"div")(5,"div",4)(6,"div",5)(7,"div")(8,"span",6),r(9),B(10,"date"),a(),l(11,"span",7),r(12,"Created At"),a()()(),l(13,"div",5)(14,"div")(15,"span",6),r(16),a(),l(17,"span",7),r(18,"Created By"),a()()(),l(19,"div",5)(20,"div")(21,"span",6),r(22),a(),l(23,"span",7),r(24,"Brand Request Id"),a()()(),l(25,"div")(26,"span",6),r(27),a(),l(28,"span",8),r(29,"Customer Name"),a()(),l(30,"div")(31,"span",6),r(32),a(),l(33,"span",8),r(34,"Customer Mobile"),a()(),c(35,ne,5,1,"div",9),l(36,"div",5)(37,"div")(38,"span",10)(39,"span",11),r(40),a()(),l(41,"span",8),r(42,"Status"),a()(),c(43,ae,1,2,"app-icon-button",12),a(),c(44,le,5,1,"div",9),a()(),c(45,re,3,2,"div",9),a(),l(46,"div",13)(47,"div",14)(48,"app-showcode-card",15),v("action",function(){return e.addBrandGallery()}),c(49,de,3,1,"div",16)(50,pe,2,0,"ng-container",9),a()(),l(51,"div",17),g(52,"app-logs",18),a()()()()),t&2&&(s("title","Branding")("title1",x(34,ee))("activeitem","Branding Detail"),o(3),f("box-title font-medium text-[15px] block text-primarytint1color"),s("title","Basic Detail")("titleView",!0),o(6),d(e.Detail!=null&&e.Detail.created_at?M(10,31,e.Detail==null?null:e.Detail.created_at,"d MMM yyyy, hh:mm a"):"---"),o(7),d((e.Detail==null?null:e.Detail.created_name)||"---"),o(6),d((e.Detail==null?null:e.Detail.brand_req_id)||"---"),o(5),d((e.Detail==null?null:e.Detail.customer_name)||"---"),o(5),d((e.Detail==null?null:e.Detail.customer_mobile)||"---"),o(3),s("ngIf",e.Detail==null?null:e.Detail.remark),o(4),s("ngClass",y(35,te,(e.Detail==null?null:e.Detail.status)==="Approved",(e.Detail==null?null:e.Detail.status)==="Complete",(e.Detail==null?null:e.Detail.status)==="Pending",(e.Detail==null?null:e.Detail.status)==="Reject")),o(),d((e.Detail==null?null:e.Detail.status)||"--"),o(3),s("ngIf",e.accessRight==null?null:e.accessRight.approveRight),o(),s("ngIf",e.Detail==null?null:e.Detail.reason),o(),s("ngIf",e.skLoading),o(3),f("box-title font-medium text-[15px] block text-primarytint1color"),s("title","Location Images")("titleView",!0)("actionIcons",!0)("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName","ri-add-line"),o(),s("ngIf",e.brandDetailImages.length>0),o(),s("ngIf",e.brandDetailImages.length===0),o(2),s("logList",e.logList)("scrollHeight","400")("closeBtn",!1))},dependencies:[G,w,E,k,J,A,O,K,H,j,F,Q,U,R,P,z],encapsulation:2})};export{Z as BrandingDetailComponent};
