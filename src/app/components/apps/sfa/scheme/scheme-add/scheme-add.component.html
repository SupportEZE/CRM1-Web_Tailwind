<app-page-header [title]="'Scheme'" [title1]="['Scheme']" [activeitem]="(pageType | titlecase) + ' Scheme'"></app-page-header>

<div class="xl:col-span-12 col-span-12" *ngIf="!skLoading">
    
    <form [formGroup]="schemeForm" (ngSubmit)="onSubmit()">
        <div class="box">
            <div class=" p-4">
                <div class="grid grid-cols-12 sm:gap-x-6">
                    <div class="xl:col-span-4 col-span-12 mb-3">
                        <spk-ng-select formControlName="product_data" label="Products" [fieldReq]="true" [multiple]="true" [options]="CommonApiService.productList"></spk-ng-select>
                    </div>
                    <div class="col-span-12 mb-4 xl:col-span-4 xxl:col-span-3">
                        <spk-flatpickr placeholder="Date From" label="Date From" [fieldReq]="true" [min]="today" class="form-control custom-datepickr"
                        formControlName="date_from" (dateChange)="onDateChange()"></spk-flatpickr>
                    </div>
                    <div class="col-span-12 mb-4 xl:col-span-4 xxl:col-span-3">
                        <spk-flatpickr placeholder="End Date" label="End Date" [min]="schemeForm.value.date_from" [fieldReq]="true" class="form-control custom-datepickr"
                        formControlName="date_to"></spk-flatpickr>
                    </div>   
                    <!-- Banner File-Pond -->
                    <div class="xl:col-span-6 col-span-12 mb-3">
                        <label class="form-label mb-0">Banner<span class="text-red-500">*</span></label>
                        <file-pond 
                        class="filepond basic-filepond" 
                        [options]="pondOptions" 
                        [files]="pondBannerFiles" 
                        (onremovefile)="onFileRemove($event, 'image')"
                        (onprocessfile)="onFileProcessed($event, 'image')"></file-pond>
                    </div>
                    <div class="xl:col-span-6 col-span-12 mb-3">
                        <spk-input label="Description"  formControlName="description" [fieldReq]="true" class="remove-default-class" type="textarea"></spk-input>
                    </div>
                </div>
            </div>
            
            <div class="box-footer border-t border-block-start-dashed sm:flex justify-end">
                <app-button [buttonType]="'submit'" [buttonClass]="'ti-btn ti-btn-primary m-0'" [disabled]="api.disabled" [formType]="pageType" [iconClass]="'ri-save-line'"  [loadingIconClass]="'ri-loader-2-fill'"></app-button>
            </div>
        </div>            
        
    </form>
    
</div>