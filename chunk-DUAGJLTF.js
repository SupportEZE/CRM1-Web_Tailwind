import{a as de}from"./chunk-J4NDCUAB.js";import{b as me,c as _e}from"./chunk-CIBZCVJQ.js";import{a as re}from"./chunk-OEHD5D2Y.js";import{a as ue}from"./chunk-GLWQGYBC.js";import{a as X}from"./chunk-DC4QM32I.js";import{F as pe,c as U,q as le,s as ce,u as se}from"./chunk-VHE3PQ3O.js";import{Aa as $,B as z,Ea as ee,G,Ga as te,Ha as ie,Ia as ne,Ja as ae,Z as J,hb as oe,va as Y,wa as Z,z as Q}from"./chunk-GYDYF5F3.js";import{K as O,M as K,Q as q,e as H,f as W,g as A,n as N,o as j}from"./chunk-PD5VTTIY.js";import{$c as D,Aa as p,Ba as m,Hb as P,Lc as M,Mc as u,Nc as f,Ob as g,Oc as V,Uc as C,Vc as S,Wc as k,Yc as T,Zc as F,_b as _,ac as B,bc as R,ed as v,fc as x,fd as I,gd as E,kc as r,lc as a,mc as y,nc as L,oc as w,qc as h,rb as l,sb as b,wc as d,yc as s}from"./chunk-2NSPOFEK.js";var he=()=>["Stock Transfer"],be=(o,n,t)=>({name:o,label:n,icon:t}),Ce=o=>[o],fe=()=>[];function Se(o,n){o&1&&y(0,"app-page-header",13),o&2&&_("title","IRP")("title1",T(3,he))("activeitem","Customer To Company Stock Return")}function ke(o,n){if(o&1){let t=h();r(0,"app-listing-tab",14),d("tabChange",function(e){p(t);let c=s();return m(c.onTabChange(e.tab))}),a()}if(o&2){let t=n.$implicit,i=s();_("tabs",F(7,Ce,D(3,be,t.name,t.label,t.icon)))("activeTab",i.activeTab)("countShow",!1)}}function ye(o,n){if(o&1){let t=h();r(0,"button",25),d("click",function(){p(t);let e=s(2);return e.filter.created_name="",m(e.getList())}),r(1,"mat-icon"),u(2,"close"),a()()}}function xe(o,n){if(o&1){let t=h();r(0,"button",25),d("click",function(){p(t);let e=s(2);return e.filter.bill_number="",m(e.getList())}),r(1,"mat-icon"),u(2,"close"),a()()}}function ve(o,n){if(o&1){let t=h();r(0,"button",25),d("click",function(){p(t);let e=s(2);return e.filter.customer_type_name="",m(e.getList())}),r(1,"mat-icon"),u(2,"close"),a()()}}function Le(o,n){if(o&1){let t=h();r(0,"button",25),d("click",function(){p(t);let e=s(2);return e.filter.customer_name="",m(e.getList())}),r(1,"mat-icon"),u(2,"close"),a()()}}function we(o,n){if(o&1){let t=h();r(0,"tr",26)(1,"td"),u(2),a(),r(3,"td"),u(4),v(5,"date"),a(),r(6,"td"),u(7),v(8,"titlecase"),a(),r(9,"td"),u(10),v(11,"date"),a(),r(12,"td")(13,"a",27),d("click",function(){let e=p(t).$implicit,c=s(2);return m(c.goToDetail(e._id))}),u(14),a()(),r(15,"td"),u(16),a(),r(17,"td"),u(18),v(19,"titlecase"),a(),r(20,"td",28),u(21),a(),r(22,"td",28),u(23),a(),r(24,"td",29),u(25),a()()}if(o&2){let t=n.$implicit,i=n.index,e=s(2);B("bg-gray-400",e.isHighlighted(t._id)),l(2),f((e.pagination.cur_page-1)*e.pagination.limit+i+1),l(2),f(t.created_at?E(5,12,t.created_at,"dd MMM yyyy hh:mm a"):""),l(3),f(t.created_name?I(8,15,t.created_name):"---"),l(3),f(t.bill_date?E(11,17,t.bill_date,"dd MMM yyyy hh:mm a"):""),l(4),V(" ",t.invoice_number?t.invoice_number:"---"," "),l(2),f(t.customer_type_name?t.customer_type_name:"---"),l(2),f(t.customer_name?I(19,20,t.customer_name):"---"),l(3),f(t.total_item_count?t.total_item_count:"---"),l(2),f(t.total_item_quantity?t.total_item_quantity:"---"),l(2),V("\u20B9 ",t.balance_amount?t.balance_amount:"0","")}}function Te(o,n){if(o&1){let t=h();L(0),r(1,"tr",15)(2,"td",16),u(3,"\xA0"),a(),r(4,"td")(5,"div",17)(6,"mat-form-field",18)(7,"input",19),k("ngModelChange",function(e){p(t);let c=s();return S(c.filter.created_at,e)||(c.filter.created_at=e),m(e)}),d("ngModelChange",function(){p(t);let e=s();return m(e.getList())}),a(),y(8,"mat-datepicker-toggle",20)(9,"mat-datepicker",null,0),a()()(),r(11,"td",16)(12,"div",17)(13,"mat-form-field",18)(14,"input",21),k("ngModelChange",function(e){p(t);let c=s();return S(c.filter.created_name,e)||(c.filter.created_name=e),m(e)}),d("keyup.enter",function(){p(t);let e=s();return m(e.getList())}),a(),g(15,ye,3,0,"button",22),a()()(),r(16,"td")(17,"div",17)(18,"mat-form-field",18)(19,"input",23),k("ngModelChange",function(e){p(t);let c=s();return S(c.filter.billing_date,e)||(c.filter.billing_date=e),m(e)}),d("ngModelChange",function(){p(t);let e=s();return m(e.getList())}),a(),y(20,"mat-datepicker-toggle",20)(21,"mat-datepicker",null,1),a()()(),r(23,"td",16)(24,"div",17)(25,"mat-form-field",18)(26,"input",21),k("ngModelChange",function(e){p(t);let c=s();return S(c.filter.bill_number,e)||(c.filter.bill_number=e),m(e)}),d("keyup.enter",function(){p(t);let e=s();return m(e.getList())}),a(),g(27,xe,3,0,"button",22),a()()(),r(28,"td",16)(29,"div",17)(30,"mat-form-field",18)(31,"input",21),k("ngModelChange",function(e){p(t);let c=s();return S(c.filter.customer_type_name,e)||(c.filter.customer_type_name=e),m(e)}),d("keyup.enter",function(){p(t);let e=s();return m(e.getList())}),a(),g(32,ve,3,0,"button",22),a()()(),r(33,"td",16)(34,"div",17)(35,"mat-form-field",18)(36,"input",21),k("ngModelChange",function(e){p(t);let c=s();return S(c.filter.customer_name,e)||(c.filter.customer_name=e),m(e)}),d("keyup.enter",function(){p(t);let e=s();return m(e.getList())}),a(),g(37,Le,3,0,"button",22),a()()(),r(38,"td"),u(39,"\xA0"),a(),r(40,"td"),u(41,"\xA0"),a(),r(42,"td"),u(43,"\xA0"),a()(),g(44,we,26,22,"tr",24),w()}if(o&2){let t=M(10),i=M(22),e=s();l(7),_("matDatepicker",t),C("ngModel",e.filter.created_at),l(),_("for",t),l(6),C("ngModel",e.filter.created_name),l(),x(e.filter.created_name?15:-1),l(4),_("matDatepicker",i),C("ngModel",e.filter.billing_date),l(),_("for",i),l(6),C("ngModel",e.filter.bill_number),l(),x(e.filter.bill_number?27:-1),l(4),C("ngModel",e.filter.customer_type_name),l(),x(e.filter.customer_type_name?32:-1),l(4),C("ngModel",e.filter.customer_name),l(),x(e.filter.customer_name?37:-1),l(7),_("ngForOf",e.listing)}}function Re(o,n){o&1&&(r(0,"td"),y(1,"app-skeleton"),a()),o&2&&(l(),R("h20 bg-skeleton"))}function Me(o,n){o&1&&(r(0,"tr",15),g(1,Re,2,2,"td",31),a()),o&2&&(l(),_("ngForOf",T(1,fe).constructor(9)))}function Ve(o,n){o&1&&(L(0),g(1,Me,2,2,"tr",30),w()),o&2&&(l(),_("ngForOf",T(1,fe).constructor(5)))}function Ie(o,n){o&1&&(L(0),y(1,"app-data-not-found"),w())}var ge=class o{constructor(n,t,i,e,c,Ee){this.comanFuncation=n;this.highlightService=t;this.router=i;this.api=e;this.route=c;this.moduleService=Ee}pageHeader=!0;_id;customerDetail;tabCount={};activeTab="Pending";skLoading=!1;highlightedId;pageKey="stock-list";pagination={};filter={};listing=[];stockType={};accessRight={};mainTabs=[{name:"Pending",label:"Pending",icon:"ri-time-fill",count:this.tabCount.Pending?this.tabCount.Pending:0},{name:"Approved",label:"Approved",icon:"ri-check-fill",count:this.tabCount.Approved?this.tabCount.Approved:0},{name:"Reject",label:"Reject",icon:"ri-close-fill",count:this.tabCount.Reject?this.tabCount.Reject:0}];ngOnInit(){let n=this.moduleService.getAccessMap("IRP","Stock Transfer","Company To Customer");n&&(this.accessRight=n);let t=this.highlightService.getHighlight(this.pageKey);t!=null&&(this.activeTab=t.tab,this.highlightedId=t.rowId,this.pagination.cur_page=t.pageIndex,this.filter=t.filters,this.highlightService.clearHighlight(this.pageKey)),this.route.paramMap.subscribe(i=>{i.get("type")&&(this.stockType=i.get("type"),this.getList())}),this.getList()}onRefresh(){this.getList()}getList(){this.skLoading=!0,this.api.post({page:this.pagination.cur_page??1,activeTab:this.activeTab,filters:this.filter,_id:this._id},"stock-transfer/company-return-read").subscribe(n=>{n.statusCode===200?(this.listing=n.data.result,this.pagination=n.pagination,this.skLoading=!1):this.skLoading=!1})}changeToPagination(n){n=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.getList()):this.pagination.next&&(this.pagination.cur_page++,this.getList())}changeToPage(n){this.pagination.cur_page=n,this.getList()}isHighlighted(n){return this.highlightedId===n}setHighLight(n){this.comanFuncation.setHighLight(this.pageKey,n,this.activeTab,this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}goToDetail(n){this.setHighLight(n);let t={"return-type":"customer"};this.router.navigate(["/apps/loyalty/stock-transfer-list/company/stock-return-detail/"+n],{state:{detail:t}})}onTabChange(n){this.activeTab=n,this.getList()}goToPage(){let n={"return-type":"company"};this.router.navigate(["/apps/loyalty/stock-transfer-list/company/stock-return-add"],{state:{detail:n}})}invoiceColumn=[{label:"Date Created"},{label:"Created By"},{label:"Bill Date"},{label:"Bill/Slip Number"},{label:"Customer Category"},{label:"Customer Detail"},{label:"Total Item",table_class:"text-center"},{label:"Total Qty",table_class:"text-center"},{label:"Bill Amount",table_class:"text-right"}];static \u0275fac=function(t){return new(t||o)(b(_e),b(me),b(K),b(J),b(O),b(X))};static \u0275cmp=P({type:o,selectors:[["app-stock-return-list"]],inputs:{pageHeader:"pageHeader",_id:"_id",customerDetail:"customerDetail"},decls:13,vars:23,consts:[["picker",""],["picker2",""],[3,"title","title1","activeitem",4,"ngIf"],[1,"row"],[1,"col-xl-12"],[1,"py-4",3,"ngClass"],["aria-label","Tabs","role","tablist",1,"sm:flex","sm:space-x-2","sm:rtl:space-x-reverse","gap-1"],[3,"tabs","activeTab","countShow","tabChange",4,"ngFor","ngForOf"],[3,"onRefresh","button1","pageTitle","listLength","btnShow","btnShow2","addBtnLabel","refreshLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","columns"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"title","title1","activeitem"],[3,"tabChange","tabs","activeTab","countShow"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","created_at","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["matInput","","name","billing_date","placeholder","Bill Date",3,"ngModelChange","matDatepicker","ngModel"],["class","invoice-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"invoice-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"font-medium","text-primary","underline",3,"click"],[1,"text-center"],[1,"text-right"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(g(0,Se,1,4,"app-page-header",2),r(1,"div",3)(2,"div",4)(3,"div",5)(4,"nav",6),g(5,ke,1,9,"app-listing-tab",7),a(),r(6,"app-page-sub-header",8),d("onRefresh",function(){return i.onRefresh()})("button1",function(){return i.goToPage()}),a(),r(7,"div",9)(8,"spk-reusable-tables",10),g(9,Te,45,15,"ng-container",11)(10,Ve,2,2,"ng-container",11),a(),g(11,Ie,2,0,"ng-container",11),r(12,"app-pagination-footer",12),d("preButtonClick",function(){return i.changeToPagination("Previous")})("nextButtonClick",function(){return i.changeToPagination("Next")})("pageChange",function(c){return i.changeToPage(c)}),a()()()()()),t&2&&(_("ngIf",i.pageHeader),l(3),_("ngClass",i.pageHeader?"box px-4":""),l(2),_("ngForOf",i.mainTabs),l(),R("p-0 pt-3"),_("pageTitle","Customer To Company Stock Return")("listLength",i.listing.length)("btnShow",!0)("btnShow2",(i.accessRight==null?null:i.accessRight.addRight)&&i.pageHeader)("addBtnLabel","Stock Return")("refreshLabel","Refresh"),l(2),_("tableHead","border-b")("showS_No",!0)("columns",i.invoiceColumn),l(),_("ngIf",!i.skLoading),l(),_("ngIf",i.skLoading),l(),_("ngIf",i.listing.length===0&&!i.skLoading),l(),_("currentPage",i.pagination.cur_page)("totalPage",i.pagination.total_pages)("pageLimit",i.pagination.limit)("listLength",i.listing.length)("preBtn",!i.pagination.prev)("nextBtn",!i.pagination.next))},dependencies:[pe,H,W,A,Q,z,G,ue,U,ce,le,de,se,N,j,q,re,oe,$,ie,ne,ae,ee,te,Z,Y],encapsulation:2})};export{ge as a};
