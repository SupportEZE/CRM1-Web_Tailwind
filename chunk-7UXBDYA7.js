import{a as xe}from"./chunk-JNCBHWNI.js";import"./chunk-HMNG3Q5Y.js";import{a as Ce}from"./chunk-SQZ3YN6N.js";import{c as we}from"./chunk-CIBZCVJQ.js";import{a as fe}from"./chunk-OTFCGVEU.js";import"./chunk-CNF4GSI7.js";import{a as me}from"./chunk-OEHD5D2Y.js";import{a as be}from"./chunk-GLWQGYBC.js";import{a as Z}from"./chunk-DC4QM32I.js";import{B as ue,F as ge,c as X,q as de,s as _e}from"./chunk-VHE3PQ3O.js";import{$ as Q,Aa as te,B as q,Ea as ie,G as z,Ga as ne,Ha as oe,Ia as le,Ja as ae,Qa as re,W as J,Z as K,Za as se,hb as pe,jb as ce,va as $,wa as ee,z as G}from"./chunk-GYDYF5F3.js";import{e as N,f as j,g as O,o as Y,t as H}from"./chunk-PD5VTTIY.js";import{$c as R,Aa as c,Ba as m,Bc as A,Hb as D,Lc as T,Mc as p,Nc as b,Ob as g,Oc as F,Pc as V,Uc as C,Vc as x,Wc as v,Yc as E,Zc as W,_b as _,bc as M,cc as P,dc as B,ed as U,fc as S,hd as I,kc as o,lc as n,mc as w,nc as k,oc as L,qc as f,rb as a,sb as h,wc as u,yc as d}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var ye=()=>["Followup"],Se=r=>({active:r}),ke=(r,l,t)=>({"text-success":r,"text-warning":l,"text-info":t}),he=()=>[];function Le(r,l){if(r&1&&(o(0,"span"),p(1),n()),r&2){let t=d().$implicit;B("badge bg-",t.countClass,"/10 text-",t.countClass," rounded-full"),a(),F(" ",t.count," ")}}function Fe(r,l){if(r&1){let t=f();o(0,"li",38),u("click",function(){let e=c(t).$implicit,s=d();return m(s.setActiveTab(e.label))}),o(1,"a")(2,"div",39)(3,"span",40),w(4,"i"),n(),o(5,"span",41),p(6),n(),g(7,Le,2,5,"span",42),n()()()}if(r&2){let t=l.$implicit,i=d();_("ngClass",W(5,Se,i.activeTab===t.value)),a(4),M(t.icon+" align-middle text-[14px] text-primary"),a(2),F(" ",t.label," "),a(),_("ngIf",t.count!==null)}}function Ee(r,l){if(r&1){let t=f();o(0,"li")(1,"div",43)(2,"a",44),u("click",function(){let e=c(t).$implicit,s=d();return m(s.updateFilter(e.assigned_to_user_name))}),o(3,"div")(4,"span",40),w(5,"i",45),n()(),o(6,"div",41)(7,"span",46),p(8),n()()(),o(9,"span",47),p(10),n()()()}if(r&2){let t=l.$implicit;a(8),b(t.assigned_to_user_name),a(2),b(t.assigned_count)}}function Me(r,l){r&1&&(o(0,"div")(1,"label",48),p(2," No data available! "),n()())}function Te(r,l){if(r&1){let t=f();o(0,"button",58),u("click",function(){c(t);let e=d(2);return e.filter.created_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),n()()}}function Ve(r,l){if(r&1){let t=f();o(0,"button",58),u("click",function(){c(t);let e=d(2);return e.filter.category_type="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),n()()}}function Ue(r,l){if(r&1){let t=f();o(0,"button",58),u("click",function(){c(t);let e=d(2);return e.filter.followup_type="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),n()()}}function Ie(r,l){if(r&1){let t=f();o(0,"button",58),u("click",function(){c(t);let e=d(2);return e.filter.status="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),n()()}}function De(r,l){if(r&1){let t=f();o(0,"button",58),u("click",function(){c(t);let e=d(2);return e.filter.remark="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),n()()}}function Pe(r,l){if(r&1){let t=f();o(0,"app-icon-button",76),u("clickEvent",function(){c(t);let e=d().$implicit,s=d(2);return m(s.openModal(e))}),n()}r&2&&_("icon","ri-edit-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-success waves-effect waves-light")}function Be(r,l){if(r&1){let t=f();o(0,"app-icon-button",77),u("clickEvent",function(){c(t);let e=d().$implicit,s=d(2);return m(s.onComplete(e._id))}),n()}r&2&&_("icon","ri-checkbox-circle-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light")}function Ae(r,l){if(r&1){let t=f();o(0,"app-icon-button",78),u("clickEvent",function(){c(t);let e=d().$implicit,s=d(2);return m(s.delete(e._id,"followup/delete","Delete"))}),n()}r&2&&_("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function We(r,l){if(r&1){let t=f();o(0,"tr",59)(1,"td",60),p(2),n(),o(3,"td"),p(4),U(5,"date"),n(),o(6,"td"),p(7),n(),o(8,"td"),p(9),n(),o(10,"td")(11,"div",61)(12,"div",28)(13,"span",62),p(14),n(),o(15,"span",63)(16,"span",64),p(17,"Mobile: "),n(),p(18),n()()()(),o(19,"td"),w(20,"i"),o(21,"span",65),p(22),n()(),o(23,"td"),p(24),U(25,"date"),n(),o(26,"td")(27,"span",66),p(28),n()(),o(29,"td")(30,"div",61)(31,"span",67),w(32,"img",68),n(),o(33,"div",28)(34,"span",62),p(35),n(),o(36,"span",63)(37,"span",64),p(38,"Mobile: "),n(),p(39),n()()()(),o(40,"td")(41,"span",69),p(42),n()(),o(43,"td",70)(44,"div",71),g(45,Pe,1,2,"app-icon-button",72)(46,Be,1,2,"app-icon-button",73),o(47,"app-icon-button",74),u("clickEvent",function(){let e=c(t).$implicit,s=d(2);return m(s.openMainLogModal(e._id))}),n(),g(48,Ae,1,2,"app-icon-button",75),n()()()}if(r&2){let t=l.$implicit,i=l.index,e=d(2);a(2),b((e.pagination.cur_page-1)*e.pagination.limit+i+1),a(2),b(I(5,24,t.created_at,"d MMM yyyy, hh:mm a","--")),a(3),b(t.created_name||"--"),a(2),b(t.category_type||"--"),a(5),b((t==null||t.category_detail==null?null:t.category_detail.name)||"--"),a(4),b((t==null||t.category_detail==null?null:t.category_detail.mobile)||"--"),a(2),P("ri-",t.followup_type==="Call"?"phone-fill text-primarytint3color":"walk-fill text-info"," text-[14px]"),a(),_("ngClass",t.followup_type==="Call"?"text-primarytint3color":"text-info"),a(),F(" ",t.followup_type||"--"," "),a(2),V("",I(25,28,t.followup_date,"d MMM yyyy","--")," ",t.followup_time,""),a(3),_("ngClass",R(32,ke,t.status==="Complete",t.status==="Pending",t.status==="Inactive")),a(),b(t.status||"--"),a(7),b((t==null||t.assigned_user_detail==null?null:t.assigned_user_detail.name)||"--"),a(4),b((t==null||t.assigned_user_detail==null?null:t.assigned_user_detail.mobile)||"--"),a(2),A("matTooltip",t.remark),a(),b(t.remark||"--"),a(3),_("ngIf",(e.activeTab==="Pending"||e.activeTab==="Upcoming")&&(e.accessRight==null?null:e.accessRight.modifyRight)),a(),_("ngIf",e.activeTab==="Pending"&&(e.accessRight==null?null:e.accessRight.modifyRight)),a(),_("icon","ri-file-list-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),a(),_("ngIf",e.accessRight==null?null:e.accessRight.deleteRight)}}function Re(r,l){if(r&1){let t=f();k(0),o(1,"tr",49)(2,"td"),p(3,"\xA0"),n(),o(4,"td")(5,"div",50)(6,"mat-form-field",51)(7,"input",52),v("ngModelChange",function(e){c(t);let s=d();return x(s.filter.created_at,e)||(s.filter.created_at=e),m(e)}),u("ngModelChange",function(e){c(t);let s=d();return m(s.onDateChange("created_at",e))}),n(),w(8,"mat-datepicker-toggle",53)(9,"mat-datepicker",null,1),n()()(),o(11,"td")(12,"div",50)(13,"mat-form-field",51)(14,"input",54),v("ngModelChange",function(e){c(t);let s=d();return x(s.filter.created_name,e)||(s.filter.created_name=e),m(e)}),u("keyup.enter",function(){c(t);let e=d();return m(e.getList())}),n(),g(15,Te,3,0,"button",55),n()()(),o(16,"td")(17,"div",50)(18,"mat-form-field",51)(19,"input",54),v("ngModelChange",function(e){c(t);let s=d();return x(s.filter.category_type,e)||(s.filter.category_type=e),m(e)}),u("keyup.enter",function(){c(t);let e=d();return m(e.getList())}),n(),g(20,Ve,3,0,"button",55),n()()(),o(21,"td"),p(22,"\xA0"),n(),o(23,"td")(24,"div",50)(25,"mat-form-field",51)(26,"input",54),v("ngModelChange",function(e){c(t);let s=d();return x(s.filter.followup_type,e)||(s.filter.followup_type=e),m(e)}),u("keyup.enter",function(){c(t);let e=d();return m(e.getList())}),n(),g(27,Ue,3,0,"button",55),n()()(),o(28,"td")(29,"div",50)(30,"mat-form-field",51)(31,"input",56),v("ngModelChange",function(e){c(t);let s=d();return x(s.filter.followup_date,e)||(s.filter.followup_date=e),m(e)}),u("ngModelChange",function(e){c(t);let s=d();return m(s.onDateChange("followup_date",e))}),n(),w(32,"mat-datepicker-toggle",53)(33,"mat-datepicker",null,2),n()()(),o(35,"td")(36,"div",50)(37,"mat-form-field",51)(38,"input",54),v("ngModelChange",function(e){c(t);let s=d();return x(s.filter.status,e)||(s.filter.status=e),m(e)}),u("keyup.enter",function(){c(t);let e=d();return m(e.getList())}),n(),g(39,Ie,3,0,"button",55),n()()(),o(40,"td"),p(41,"\xA0"),n(),o(42,"td")(43,"div",50)(44,"mat-form-field",51)(45,"input",54),v("ngModelChange",function(e){c(t);let s=d();return x(s.filter.remark,e)||(s.filter.remark=e),m(e)}),u("keyup.enter",function(){c(t);let e=d();return m(e.getList())}),n(),g(46,De,3,0,"button",55),n()()(),o(47,"td"),p(48,"\xA0"),n()(),g(49,We,49,36,"tr",57),L()}if(r&2){let t=T(10),i=T(34),e=d();a(7),_("matDatepicker",t),C("ngModel",e.filter.created_at),a(),_("for",t),a(6),C("ngModel",e.filter.created_name),a(),S(e.filter.created_name?15:-1),a(4),C("ngModel",e.filter.category_type),a(),S(e.filter.category_type?20:-1),a(6),C("ngModel",e.filter.followup_type),a(),S(e.filter.followup_type?27:-1),a(4),_("matDatepicker",i),C("ngModel",e.filter.followup_date),a(),_("for",i),a(6),C("ngModel",e.filter.status),a(),S(e.filter.status?39:-1),a(6),C("ngModel",e.filter.remark),a(),S(e.filter.remark?46:-1),a(3),_("ngForOf",e.listing)}}function Ne(r,l){r&1&&(o(0,"td"),w(1,"app-skeleton"),n()),r&2&&(a(),M("h20 bg-skeleton"))}function je(r,l){r&1&&(o(0,"tr",49),g(1,Ne,2,2,"td",22),n()),r&2&&(a(),_("ngForOf",E(1,he).constructor(10)))}function Oe(r,l){r&1&&(k(0),g(1,je,2,2,"tr",79),L()),r&2&&(a(),_("ngForOf",E(1,he).constructor(6)))}function Ye(r,l){r&1&&(k(0),w(1,"app-data-not-found"),L())}var ve=class r{constructor(l,t,i,e,s,y,He){this.dialog=l;this.api=t;this.comanFuncation=i;this.moduleService=e;this.logService=s;this.alert=y;this.date=He}listing=[];filter={};skLoading=!1;activeTab="Pending";submodule={};pagination={};page=1;tabs=[];listingData={};accessRight={};ngOnInit(){let l=this.moduleService.getAccessMap("SFA","Follow Up");l&&(this.accessRight=l),this.filter={};let t=this.moduleService.getSubModuleByName("SFA","Follow Up");t&&(this.submodule=t),this.listingData={tabCounts:{pending:0,complete:0,upcoming:0}},this.getList()}setActiveTab(l){this.activeTab=l,this.filter={},this.getList()}onRefresh(){this.filter={},this.getList()}updateFilter(l){this.filter.assigned_to_user_name=l,this.getList()}onDateChange(l,t){if(t){let i=this.date.formatToYYYYMMDD(t);this.filter[l]=i}else this.filter[l]=null;(this.filter.followup_date||this.filter.created_at)&&this.getList()}getList(){this.skLoading=!0,this.api.post({filters:this.filter,activeTab:this.activeTab},"followup/read").subscribe(l=>{l.statusCode==200&&(this.skLoading=!1,this.listingData=l.data,this.listing=l.data.result,this.pagination=l.pagination,this.tabs=[{label:"Pending",value:"Pending",icon:"ri-briefcase-line",countClass:"warning",count:this.listingData.tabCounts?.pending||0},{label:"Upcoming",value:"Upcoming",icon:"ri-calendar-line",countClass:"info",count:this.listingData.tabCounts?.upcoming||0},{label:"Complete",value:"Complete",icon:"ri-checkbox-circle-line",countClass:"success",count:this.listingData.tabCounts?.complete||0}])})}changeToPagination(l){l=="Previous"?this.pagination.prev&&this.page>1&&(this.page--,this.getList()):this.pagination.next&&(this.page++,this.getList())}changeToPage(l){this.page=l,this.pagination.cur_page=l,this.getList()}openModal(l){this.dialog.open(xe,{width:"700px",data:{lastPage:"folloup-list",formType:l?"edit":"create",formData:l||{}}}).afterClosed().subscribe(i=>{i===!0&&this.getList()})}delete(l,t,i){this.comanFuncation.delete(l,this.submodule,i,t,"single_action",l).subscribe(e=>{e===!0&&this.getList()})}onComplete(l){this.comanFuncation.statusChange("Complete",l,"Pending",this.submodule,"without-toggle","followup/status-update").subscribe(t=>{t&&this.getList()})}openMainLogModal(l){this.comanFuncation.listLogsModal(this.submodule.module_id,l,this.submodule.module_type).subscribe(t=>{t===!0&&this.getList()})}headers=[{label:"Created At"},{label:"Created By"},{label:"Category Type"},{label:"Party Details"},{label:"Type"},{label:"Followup Date & Time"},{label:"Status"},{label:"Assigner"},{label:"Remark"}];static \u0275fac=function(t){return new(t||r)(h(re),h(K),h(we),h(Z),h(fe),h(Q),h(ce))};static \u0275cmp=D({type:r,selectors:[["app-follow-up-list"]],decls:51,vars:32,consts:[["customer_name","ngModel"],["picker",""],["picker1",""],[3,"title","title1","activeitem"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xl:col-span-3","col-span-12"],[1,"box"],[1,"box-header","gap-2","items-center","pb-3","border-b","border-dashed","border-defaultborder","dark:border-defaultborder/10"],[1,"avatar","avatar-md","bg-primary","avatar-rounded"],[1,"ri-file-list-3-line","text-[1rem]"],[1,"box-title"],[1,"text-textmuted","dark:text-textmuted/50","block","text-xs"],[1,"ti-btn","ti-btn-sm","ti-btn-soft-primary1","ms-auto","!rounded-full",3,"click"],[1,"ri-add-line"],[1,"box-body","p-0"],[1,"p-4","task-navigation","border-b","border-dashed","border-defaultborder","dark:border-defaultborder/10"],[1,"list-none","task-main-nav","mb-0"],[1,"px-0","pt-0"],[1,"text-[11px]","text-textmuted","dark:text-textmuted/50","opacity-70","font-medium"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"px-0","pt-2","flex","justify-between","gap-2","items-center"],[1,"scroll-y-250","mb-0"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","items-center","justify-between","m-4","p-4","bg-primary/10","rounded-md","border","border-defaultborder","dark:border-defaultborder/10","overflow-hidden","todo-list-card"],[1,"text-[15px]","font-medium","!text-primary"],[1,"mb-4","text-[15px]","font-medium","!text-primary"],[1,"mb-0"],[1,""],["src","./assets/images/media/media-66.png","alt","",1,"img-fluid"],[1,"xl:col-span-9","col-span-12"],[3,"refresh","logBtn","title","classbody","titleView","view","refresBtnShow","logBtnShow","overallCountShow","overallCount"],[1,"custom-form-group","mb-3"],["type","text","placeholder","Search by Party Details","aria-label","Party Details","name","customer_name",1,"form-control","form-control-md",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"ti-btn","bg-primary","text-white","ti-btn-sm","border-0","custom-form-btn",3,"click"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table text-nowrap",3,"tableHeight","showCheckbox","showS_No","showAction","columns"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"click","ngClass"],[1,"flex","items-center"],[1,"me-2","leading-none"],[1,"flex-auto","text-nowrap"],[3,"class",4,"ngIf"],[1,"flex","items-center","justify-between","flex-wrap","gap-2"],[1,"flex",3,"click"],[1,"ri-account-circle-fill","text-primarytint1color","align-middle","text-[14px]"],[1,"font-medium"],[1,"badge","bg-primarytint1color/10","text-primarytint1color","rounded-full"],[1,"form-check-label","!ps-0","text11px","font-normal"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","createdAt","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["matInput","","name","createdAt","placeholder","Followup Date",3,"ngModelChange","matDatepicker","ngModel"],["class","todo-box border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"todo-box","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"flex","items-center","gap-2"],[1,"block","font-medium"],[1,"block"],[1,"text-textmuted","dark:text-textmuted/50","text-[11px]"],[3,"ngClass"],[1,"badge","p-0",3,"ngClass"],[1,"avatar","avatar-sm","avatar-rounded"],["src","./assets/images/faces/12.jpg","alt",""],[1,"ellipsis",3,"matTooltip"],[1,"text-end"],[1,"flex","gap-2"],["matTooltip","Edit",3,"icon","buttonClass","clickEvent",4,"ngIf"],["matTooltip","Complete",3,"icon","buttonClass","clickEvent",4,"ngIf"],[3,"clickEvent","icon","buttonClass"],["matTooltip","Delete",3,"icon","buttonClass","clickEvent",4,"ngIf"],["matTooltip","Edit",3,"clickEvent","icon","buttonClass"],["matTooltip","Complete",3,"clickEvent","icon","buttonClass"],["matTooltip","Delete",3,"clickEvent","icon","buttonClass"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"]],template:function(t,i){if(t&1){let e=f();w(0,"app-page-header",3),o(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"span",8),w(6,"i",9),n(),o(7,"div",10),p(8," To Do List "),o(9,"span",11),p(10,"Create Followup"),n()(),o(11,"button",12),u("click",function(){return c(e),m(i.openModal(""))}),w(12,"i",13),p(13,"Add New "),n()(),o(14,"div",14)(15,"div",15)(16,"ul",16)(17,"li",17)(18,"span",18),p(19,"General"),n()(),g(20,Fe,8,7,"li",19),n(),o(21,"ul",16)(22,"li",20)(23,"span",18),p(24,"Team"),n()(),o(25,"ul",21),g(26,Ee,11,2,"li",22)(27,Me,3,0,"div",23),n()()(),o(28,"div",24)(29,"div")(30,"div",25),p(31,"Today Completed"),n(),o(32,"div",26),p(33,"Followups"),n(),o(34,"h4",27),p(35),n()(),o(36,"div",28),w(37,"img",29),n()()()()(),o(38,"div",30)(39,"app-showcode-card",31),u("refresh",function(){return c(e),m(i.onRefresh())})("logBtn",function(){return c(e),m(i.openMainLogModal(""))}),o(40,"div",32)(41,"input",33,0),v("ngModelChange",function(y){return c(e),x(i.filter.customer_name,y)||(i.filter.customer_name=y),m(y)}),u("keyup.enter",function(){return c(e),m(i.getList())}),n(),o(43,"button",34),u("click",function(){return c(e),m(i.filter.customer_name?i.getList():"")}),p(44,"Search"),n()(),o(45,"div",35)(46,"spk-reusable-tables",36),g(47,Re,50,17,"ng-container",23)(48,Oe,2,2,"ng-container",23),n(),g(49,Ye,2,0,"ng-container",23),n(),o(50,"app-pagination-footer",37),u("preButtonClick",function(){return c(e),m(i.changeToPagination("Previous"))})("nextButtonClick",function(){return c(e),m(i.changeToPagination("Next"))})("pageChange",function(y){return c(e),m(i.changeToPage(y))}),n()()()()}t&2&&(_("title","SFA")("title1",E(31,ye))("activeitem","Followup List"),a(20),_("ngForOf",i.tabs),a(6),_("ngForOf",i.listingData.userViceCounts),a(),_("ngIf",!(i.listingData.userViceCounts!=null&&i.listingData.userViceCounts.length)),a(8),V("",i.listingData.completedFollowups==null?null:i.listingData.completedFollowups.today,"/",i.listingData.completedFollowups==null?null:i.listingData.completedFollowups.total," Followups"),a(4),_("title","Followup List")("classbody","pt-0")("titleView",!0)("view",!1)("refresBtnShow",!0)("logBtnShow",!0)("overallCountShow",!0)("overallCount",i.listing.length),a(2),C("ngModel",i.filter.customer_name),a(5),_("tableHeight","630px")("showCheckbox",!1)("showS_No",!0)("showAction",!0)("columns",i.headers),a(),_("ngIf",!i.skLoading),a(),_("ngIf",i.skLoading),a(),_("ngIf",!i.listing.length&&!i.skLoading),a(),_("currentPage",i.pagination.cur_page)("totalPage",i.pagination.total_pages)("pageLimit",i.pagination.limit)("listLength",i.listing.length)("preBtn",!i.pagination.prev)("nextBtn",!i.pagination.next))},dependencies:[me,ge,N,j,O,G,q,z,be,X,_e,de,Ce,se,Y,H,ue,J,pe,te,oe,le,ae,ie,ne,ee,$],encapsulation:2})};export{ve as FollowUpListComponent};
