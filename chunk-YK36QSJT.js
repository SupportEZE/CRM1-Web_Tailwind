import{a as ue}from"./chunk-7X2DQYED.js";import{a as ge}from"./chunk-J4NDCUAB.js";import"./chunk-PU6S26UW.js";import{a as de}from"./chunk-54KZ5YIV.js";import{a as me}from"./chunk-SQZ3YN6N.js";import{b as _e,c as pe}from"./chunk-CIBZCVJQ.js";import"./chunk-OTFCGVEU.js";import"./chunk-CNF4GSI7.js";import{a as ae}from"./chunk-OEHD5D2Y.js";import{a as ce}from"./chunk-GLWQGYBC.js";import{a as J}from"./chunk-DC4QM32I.js";import{F as se,c as z,q as re,s as le}from"./chunk-VHE3PQ3O.js";import{Aa as X,B as O,Ea as Y,G as K,Ga as Z,Ha as $,Ia as ee,Ja as te,Qa as ie,Z as q,Za as ne,hb as oe,va as Q,wa as U,z as j}from"./chunk-GYDYF5F3.js";import{K as N,M as H,Q as A,f as P,g as D,n as F,o as R}from"./chunk-PD5VTTIY.js";import{Aa as p,Ba as c,Hb as G,Lc as W,Mc as d,Nc as w,Ob as g,Oc as M,Uc as b,Vc as C,Wc as h,Yc as k,_b as u,ac as I,bc as V,ed as T,fc as x,fd as E,gd as B,kc as o,lc as n,mc as v,nc as L,oc as S,qc as f,rb as a,sb as y,wc as m,yc as _}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var Ce=()=>["Dispatch"],be=()=>[];function he(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.billing_company="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function xe(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.gatepass_number="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function we(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.invoice_number="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function ye(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.e_way_number="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function ve(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.driver_name="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function Le(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.mobile="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function Se(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.vehicle_number="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function ke(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.transportation_mode="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function Te(s,r){if(s&1){let i=f();o(0,"button",19),m("click",function(){p(i);let e=_(2);return e.filter.bilty_number="",c(e.getList())}),o(1,"mat-icon"),d(2,"close"),n()()}}function Ve(s,r){if(s&1){let i=f();o(0,"tr",20)(1,"td"),d(2),n(),o(3,"td"),d(4),T(5,"date"),n(),o(6,"td"),d(7),T(8,"titlecase"),n(),o(9,"td")(10,"a",21),m("click",function(){let e=p(i).$implicit,l=_(2);return c(l.goToDetail(e._id))}),d(11),n()(),o(12,"td"),d(13),n(),o(14,"td",22),d(15),n(),o(16,"td"),d(17),T(18,"titlecase"),n(),o(19,"td"),d(20),n(),o(21,"td"),d(22),n(),o(23,"td"),d(24),n(),o(25,"td"),d(26),n(),o(27,"td")(28,"app-icon-button",23),m("clickEvent",function(){let e=p(i).$implicit,l=_(2);return c(l.goToDetail(e._id))}),n(),o(29,"app-icon-button",24),m("clickEvent",function(){let e=p(i).$implicit,l=_(2);return c(l.openDialog(l.pageType==="gatepass_genrated"?"gatepass_edit":"bilty_update",e._id))}),n()()()}if(s&2){let i=r.$implicit,t=r.index,e=_(2);I("bg-gray-400",e.isHighlighted(i._id)),a(2),w((e.pagination.cur_page-1)*e.pagination.limit+t+1),a(2),w(i.created_at?B(5,17,i.created_at,"dd MMM yyyy hh:mm a"):""),a(3),w(i.created_name?E(8,20,i.created_name):""),a(4),M(" ",i.gatepass_number?i.gatepass_number:"---"," "),a(2),w(i.invoice_number?i.invoice_number:"---"),a(2),M(" ",i.e_way_number?i.e_way_number:"---"," "),a(2),w(i.driver_name?E(18,22,i.driver_name):"---"),a(3),w(i.mobile?i.mobile:"---"),a(2),w(i.vehicle_number?i.vehicle_number:"---"),a(2),w(i.transportation_mode?i.transportation_mode:"---"),a(2),w(i.bilty_number?i.bilty_number:"---"),a(2),u("icon","ri-eye-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),a(),u("icon","ri-edit-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-success waves-effect waves-light")}}function Me(s,r){if(s&1){let i=f();L(0),o(1,"tr",10)(2,"td",11),d(3,"\xA0"),n(),o(4,"td")(5,"div",12)(6,"mat-form-field",13)(7,"input",14),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.created_at,e)||(l.filter.created_at=e),c(e)}),m("ngModelChange",function(){p(i);let e=_();return c(e.getList())}),n(),v(8,"mat-datepicker-toggle",15)(9,"mat-datepicker",null,0),n()()(),o(11,"td")(12,"div",12)(13,"mat-form-field",13)(14,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.billing_company,e)||(l.filter.billing_company=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(15,he,3,0,"button",17),n()()(),o(16,"td",11)(17,"div",12)(18,"mat-form-field",13)(19,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.gatepass_number,e)||(l.filter.gatepass_number=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(20,xe,3,0,"button",17),n()()(),o(21,"td",11)(22,"div",12)(23,"mat-form-field",13)(24,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.invoice_number,e)||(l.filter.invoice_number=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(25,we,3,0,"button",17),n()()(),o(26,"td",11)(27,"div",12)(28,"mat-form-field",13)(29,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.e_way_number,e)||(l.filter.e_way_number=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(30,ye,3,0,"button",17),n()()(),o(31,"td",11)(32,"div",12)(33,"mat-form-field",13)(34,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.driver_name,e)||(l.filter.driver_name=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(35,ve,3,0,"button",17),n()()(),o(36,"td",11)(37,"div",12)(38,"mat-form-field",13)(39,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.mobile,e)||(l.filter.mobile=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(40,Le,3,0,"button",17),n()()(),o(41,"td",11)(42,"div",12)(43,"mat-form-field",13)(44,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.vehicle_number,e)||(l.filter.vehicle_number=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(45,Se,3,0,"button",17),n()()(),o(46,"td",11)(47,"div",12)(48,"mat-form-field",13)(49,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.transportation_mode,e)||(l.filter.transportation_mode=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(50,ke,3,0,"button",17),n()()(),o(51,"td",11)(52,"div",12)(53,"mat-form-field",13)(54,"input",16),h("ngModelChange",function(e){p(i);let l=_();return C(l.filter.bilty_number,e)||(l.filter.bilty_number=e),c(e)}),m("keyup.enter",function(){p(i);let e=_();return c(e.getList())}),n(),g(55,Te,3,0,"button",17),n()()(),o(56,"td",11),d(57,"\xA0"),n()(),g(58,Ve,30,24,"tr",18),S()}if(s&2){let i=W(10),t=_();a(7),u("matDatepicker",i),b("ngModel",t.filter.created_at),a(),u("for",i),a(6),b("ngModel",t.filter.billing_company),a(),x(t.filter.billing_company?15:-1),a(4),b("ngModel",t.filter.gatepass_number),a(),x(t.filter.gatepass_number?20:-1),a(4),b("ngModel",t.filter.invoice_number),a(),x(t.filter.invoice_number?25:-1),a(4),b("ngModel",t.filter.e_way_number),a(),x(t.filter.e_way_number?30:-1),a(4),b("ngModel",t.filter.driver_name),a(),x(t.filter.driver_name?35:-1),a(4),b("ngModel",t.filter.mobile),a(),x(t.filter.mobile?40:-1),a(4),b("ngModel",t.filter.vehicle_number),a(),x(t.filter.vehicle_number?45:-1),a(4),b("ngModel",t.filter.transportation_mode),a(),x(t.filter.transportation_mode?50:-1),a(4),b("ngModel",t.filter.bilty_number),a(),x(t.filter.bilty_number?55:-1),a(3),u("ngForOf",t.listing)}}function Ee(s,r){s&1&&(o(0,"td"),v(1,"app-skeleton"),n()),s&2&&(a(),V("h20 bg-skeleton"))}function Ge(s,r){s&1&&(o(0,"tr",10),g(1,Ee,2,2,"td",26),n()),s&2&&(a(),u("ngForOf",k(1,be).constructor(12)))}function Ie(s,r){s&1&&(L(0),g(1,Ge,2,2,"tr",25),S()),s&2&&(a(),u("ngForOf",k(1,be).constructor(10)))}function We(s,r){s&1&&(L(0),v(1,"app-data-not-found"),S())}var fe=class s{constructor(r,i,t,e,l,Be,Pe,De){this.route=r;this.comanFuncation=i;this.router=t;this.api=e;this.dialog=l;this.removeSpace=Be;this.highlightService=Pe;this.moduleService=De}_id;skLoading=!1;listing=[];pagination={};filter={};pageKey="payment-list";highlightedId;pageType={};checked={};selectedBillingCom=null;selectedRows=[];submodule;ngOnInit(){let r=this.moduleService.getSubModuleByName("WMS","Dispatch");console.log(r,"subModule"),r&&(this.submodule=r);let i=this.highlightService.getHighlight(this.pageKey);i!=null&&(this.highlightedId=i.rowId,this.pagination.cur_page=i.pageIndex,this.filter=i.filters,this.highlightService.clearHighlight(this.pageKey)),this.route.paramMap.subscribe(t=>{t.get("type")&&(this.pageType=t.get("type"),this.getList())})}onRefresh(){this.getList()}isCheckboxDisabled(r){return this.selectedBillingCom?r.organisation_name!==this.selectedBillingCom:!1}goToDetail(r){this.setHighLight(r),this.router.navigate(["/apps/wms/dispatch-list/type/list",this.pageType,"detail",r])}getList(){this.skLoading=!0,this.api.post({page:this.pagination.cur_page??1,activeTab:this.pageType,filters:this.filter,_id:this._id},"gatepass/read").subscribe(r=>{r.statusCode===200?(this.listing=r?.data??[],this.pagination=r.pagination,this.skLoading=!1):this.skLoading=!1})}changeToPagination(r){r=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.getList()):this.pagination.next&&(this.pagination.cur_page++,this.getList())}changeToPage(r){this.pagination.cur_page=r,this.getList()}isHighlighted(r){return this.highlightedId===r}setHighLight(r){this.comanFuncation.setHighLight(this.pageKey,r,"",this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}getColumn(){return[{label:"Created At"},{label:"Created By"},{label:"Gatepass No."},{label:"Invoice No."},{label:"E-Way Bill No."},{label:"Driver Name"},{label:"Mobile No."},{label:"Vehicle No."},{label:"Transportation Mode"},{label:"Bilty Number"},{label:"Action"}]}openDialog(r,i){this.dialog.open(ue,{width:"1024px",data:{lastPage:r,_id:i,item:this.selectedRows??[],submodule:this.submodule}}).afterClosed().subscribe(e=>{e===!0&&this.getList()})}static \u0275fac=function(i){return new(i||s)(y(N),y(pe),y(H),y(q),y(ie),y(de),y(_e),y(J))};static \u0275cmp=G({type:s,selectors:[["app-gatepass-list"]],inputs:{_id:"_id"},decls:11,vars:22,consts:[["picker",""],[3,"title","title1","activeitem"],[1,"row"],[1,"col-xl-12"],[1,"box","py-4","px-4"],[3,"onRefresh","pageTitle","listLength","btnShow","refreshLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","columns"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","created_at","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["class","invoice-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"invoice-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"font-medium","text-primary",3,"click"],[1,"text-right"],["matTooltip","View Detail",3,"clickEvent","icon","buttonClass"],["matTooltip","Edit",3,"clickEvent","icon","buttonClass"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(i,t){i&1&&(v(0,"app-page-header",1),o(1,"div",2)(2,"div",3)(3,"div",4)(4,"app-page-sub-header",5),m("onRefresh",function(){return t.onRefresh()}),n(),o(5,"div",6)(6,"spk-reusable-tables",7),g(7,Me,59,22,"ng-container",8)(8,Ie,2,2,"ng-container",8),n(),g(9,We,2,0,"ng-container",8),o(10,"app-pagination-footer",9),m("preButtonClick",function(){return t.changeToPagination("Previous")})("nextButtonClick",function(){return t.changeToPagination("Next")})("pageChange",function(l){return t.changeToPage(l)}),n()()()()()),i&2&&(u("title","WMS")("title1",k(21,Ce))("activeitem",t.removeSpace.formatText(t.pageType)),a(4),V("p-0 pt-0"),u("pageTitle",t.removeSpace.formatText(t.pageType)+" List")("listLength",t.pagination.total?t.pagination.total:0)("btnShow",!0)("refreshLabel","Refresh"),a(2),u("tableHead","border-b")("showS_No",!0)("columns",t.getColumn()),a(),u("ngIf",!t.skLoading),a(),u("ngIf",t.skLoading),a(),u("ngIf",t.listing.length===0&&!t.skLoading),a(),u("currentPage",t.pagination.cur_page)("totalPage",t.pagination.total_pages)("pageLimit",t.pagination.limit)("listLength",t.listing.length)("preBtn",!t.pagination.prev)("nextBtn",!t.pagination.next))},dependencies:[se,P,D,j,O,K,ce,z,le,re,ge,me,ne,F,R,A,ae,oe,X,$,ee,te,Y,Z,U,Q],encapsulation:2})};export{fe as GatepassListComponent};
