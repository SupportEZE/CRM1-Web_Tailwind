import{c as ie}from"./chunk-CIBZCVJQ.js";import{C as ee,F as te,r as $}from"./chunk-VHE3PQ3O.js";import{B as A,C as R,E as q,G as O,Ga as z,H as j,Oa as J,Pa as K,R as W,Ra as Q,Ta as U,Ua as X,W as B,X as P,Ya as Y,Z as L,hb as Z,oa as G,w as D,wa as H,z as N}from"./chunk-GYDYF5F3.js";import{f as F,g as E,t as V}from"./chunk-PD5VTTIY.js";import{Aa as f,Ba as _,Hb as x,Lc as d,Mc as c,Nc as I,Ob as p,Oc as w,Uc as b,Vc as T,Wc as y,_b as l,kc as o,lc as r,mc as k,nc as v,oc as h,qc as S,rb as n,sb as u,wc as M,yc as C}from"./chunk-2NSPOFEK.js";function ne(e,i){if(e&1&&(o(0,"mat-option",19),c(1),r()),e&2){let t=i.$implicit;l("value",t.name),n(),I(t.name)}}function oe(e,i){e&1&&(v(0),c(1,"This field is required"),h())}function re(e,i){if(e&1&&(o(0,"div",20),p(1,oe,2,0,"ng-container",21),r()),e&2){C();let t=d(13);n(),l("ngIf",t.errors==null?null:t.errors.required)}}function se(e,i){e&1&&(v(0),c(1,"This field is required"),h())}function le(e,i){if(e&1&&(o(0,"div",20),p(1,se,2,0,"ng-container",21),r()),e&2){C();let t=d(8);n(),l("ngIf",t.errors==null?null:t.errors.required)}}function me(e,i){if(e&1){let t=S();o(0,"div",8)(1,"div",22)(2,"label",9),c(3),o(4,"span",10),c(5,"*"),r()(),o(6,"mat-form-field",11)(7,"textarea",23,2),y("ngModelChange",function(s){f(t);let m=C();return T(m.data.status_remark,s)||(m.data.status_remark=s),_(s)}),r()(),p(9,le,2,1,"div",14),r()()}if(e&2){let t=d(8),a=C(),s=d(3);n(3),w("",a.data.status," Remark"),n(4),b("ngModel",a.data.status_remark),n(2),l("ngIf",t.touched||s.submitted)}}var ae=class e{constructor(i,t,a,s,m){this.modalData=i;this.dialogRef=t;this.api=a;this.toastr=s;this.comanFuncation=m;this.data.status=i.status?i.status:"Complete",this.data.reason=i.reason,this.data._id=i._id}data={};statusOptions=[{name:"Complete"},{name:"Cancel"}];statusChange(){this.api.disabled=!0,this.api.post(this.data,"ticket/close").subscribe(i=>{i.statusCode===200&&(this.toastr.success(i.message,"","toast-top-right"),this.api.disabled=!1,this.dialogRef.close(!0))})}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||e)(u(K),u(J),u(L),u(D),u(ie))};static \u0275cmp=x({type:e,selectors:[["app-status-change-modal"]],decls:20,vars:15,consts:[["f","ngForm"],["status","ngModel"],["status_remark","ngModel"],[1,"mat-dialoge"],[3,"close","title","closeBtn"],[3,"ngSubmit"],[1,"mat-typography","py-1"],[1,"grid","grid-cols-12","sm:gap-x-6"],[1,"xl:col-span-12","col-span-12"],[1,"form-label","mb-0"],[1,"text-red-500"],[1,"mat-custom-field","remove-space"],["placeholder","Select an option","name","status","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","mt-1 text-xs text-red-500 text-right",4,"ngIf"],["class","xl:col-span-12 col-span-12",4,"ngIf"],["align","end",1,"gap-2"],["mat-dialog-close","",3,"buttonType","buttonClass","label"],[3,"buttonType","buttonClass","disabled","formType","iconClass","loadingIconClass"],[3,"value"],[1,"mt-1","text-xs","text-red-500","text-right"],[4,"ngIf"],[1,"mt-2"],["matInput","","placeholder","Type Here ...","name","status_remark","required","",3,"ngModelChange","ngModel"]],template:function(t,a){if(t&1){let s=S();o(0,"div",3)(1,"app-modal-header",4),M("close",function(){return f(s),_(a.close())}),r(),o(2,"form",5,0),M("ngSubmit",function(){f(s);let g=d(3);return _(g.valid&&a.statusChange())}),o(4,"mat-dialog-content",6)(5,"div",7)(6,"div",8)(7,"label",9),c(8,"Status"),o(9,"span",10),c(10,"*"),r()(),o(11,"mat-form-field",11)(12,"mat-select",12,1),y("ngModelChange",function(g){return f(s),T(a.data.status,g)||(a.data.status=g),_(g)}),p(14,ne,2,2,"mat-option",13),r()(),p(15,re,2,1,"div",14),r(),p(16,me,10,3,"div",15),r()(),o(17,"mat-dialog-actions",16),k(18,"app-button",17)(19,"app-button",18),r()()()}if(t&2){let s=d(3),m=d(13);n(),l("title","Change Status")("closeBtn",!0),n(11),b("ngModel",a.data.status),n(2),l("ngForOf",a.statusOptions),n(),l("ngIf",m.touched||s.submitted),n(),l("ngIf",a.data.status!=="Pending"),n(2),l("buttonType","button")("buttonClass","ti-btn ti-btn-outline-danger m-2")("label","Cancel"),n(),l("buttonType","submit")("buttonClass","ti-btn ti-btn-primary m-0")("disabled",a.api.disabled)("formType",a.modalData.formType)("iconClass","ri-save-line")("loadingIconClass","ri-loader-2-fill")}},dependencies:[P,j,N,A,R,W,Z,G,Q,X,U,z,H,Y,te,F,E,O,q,ee,V,B,$],encapsulation:2})};export{ae as a};
