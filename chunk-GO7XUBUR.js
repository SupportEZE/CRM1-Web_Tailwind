import{a as y}from"./chunk-56RTIVDZ.js";import{a as le}from"./chunk-5QFGLOXN.js";import"./chunk-PU6S26UW.js";import{a as ae}from"./chunk-JUPJFX3F.js";import{a as ie}from"./chunk-PJTW4QXW.js";import"./chunk-SQZ3YN6N.js";import{c as te}from"./chunk-CIBZCVJQ.js";import{a as ee}from"./chunk-OTFCGVEU.js";import"./chunk-CNF4GSI7.js";import"./chunk-OEHD5D2Y.js";import{a as ne}from"./chunk-GLWQGYBC.js";import{a as q}from"./chunk-DC4QM32I.js";import{B as X,F as Z,c as J,s as K,t as Q}from"./chunk-VHE3PQ3O.js";import{Qa as z,Z as G,hb as W,p as H,r as Y,s as $}from"./chunk-GYDYF5F3.js";import{K as j,e as N,f as O,g as A,n as L,o as B,t as U}from"./chunk-PD5VTTIY.js";import{Aa as f,Ba as D,Ca as T,Da as k,Hb as F,Mc as o,Nc as m,Ob as d,Oc as h,Pc as w,Yc as S,Zb as V,_b as s,bc as u,ed as C,fd as P,gd as M,kc as t,lc as n,mc as v,nc as x,oc as g,qc as b,rb as i,sb as _,wc as E,yc as p}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var se=()=>["Event Plan Detail"],R=()=>[];function re(a,l){if(a&1&&(t(0,"div",10)(1,"div")(2,"span",11),o(3),n(),t(4,"span",12),o(5,"Remark"),n()()()),a&2){let e=p(2);i(3),m((e.Detail==null?null:e.Detail.remark)||"---")}}function de(a,l){if(a&1){let e=b();t(0,"a",39),E("click",function(){f(e);let c=p(2);return D(c.updateStatus())}),t(1,"i",40),o(2,"edit"),n()()}}function ce(a,l){if(a&1&&(t(0,"div",10)(1,"div")(2,"span",11),o(3),n(),t(4,"span",12),o(5,"Reason"),n()()()),a&2){let e=p(2);i(3),m((e.Detail==null?null:e.Detail.reason)||"---")}}function pe(a,l){if(a&1){let e=b();t(0,"div",43)(1,"spk-product-card",44),E("delete",function(){let c=f(e).$implicit,I=p(3);return D(I.delete(c._id,"event/delete-file","Delete Event Image"))}),n()()}if(a&2){let e=l.$implicit;i(),s("apiPath","event/get-doc")("imageData",e)("editBtn",!1)("heading",!1)("subHeading",!1)}}function me(a,l){if(a&1&&(t(0,"div",41),x(1),d(2,pe,2,5,"div",42),g(),n()),a&2){let e=p(2);i(2),s("ngForOf",e.eventDetailImages)}}function ve(a,l){a&1&&(x(0),v(1,"app-data-not-found"),g())}function ue(a,l){if(a&1&&(t(0,"li",45)(1,"div",14)(2,"span",46),o(3),n(),t(4,"div",47),o(5),C(6,"titlecase"),n()()()),a&2){let e=l.$implicit,r=p(2);i(3),h(" ",r.nameUtils.getInitials(e.name)," "),i(2),w(" ",e.name?P(6,3,e.name):"---"," ",e.mobile?"("+e.mobile+")":""," ")}}function _e(a,l){a&1&&(x(0),v(1,"app-data-not-found"),g())}function xe(a,l){if(a&1&&(t(0,"li",45)(1,"div",48)(2,"div",14)(3,"span",46),o(4),n(),t(5,"div",47),o(6),C(7,"titlecase"),n()(),t(8,"span",49),o(9),n()()()),a&2){let e=l.$implicit,r=p(2);i(4),h(" ",r.nameUtils.getInitials(e.expense_type)," "),i(2),h(" ",e.expense_type?P(7,4,e.expense_type):"---"," "),i(3),w("",r.CURRENCY_SYMBOLS.RUPEE," ",e.expense_amount,"")}}function ge(a,l){a&1&&(x(0),v(1,"app-data-not-found"),g())}function fe(a,l){if(a&1){let e=b();t(0,"div",51)(1,"spk-product-card",44),E("delete",function(){let c=f(e).$implicit,I=p(3);return D(I.delete(c._id,"expense/delete-file","Delete Expense Image"))}),n()()}if(a&2){let e=l.$implicit;i(),s("apiPath","expense/get-doc")("imageData",e)("editBtn",!1)("heading",!1)("subHeading",!1)}}function De(a,l){if(a&1&&(t(0,"div",41),x(1),d(2,fe,2,5,"div",50),g(),n()),a&2){let e=p(2);i(2),s("ngForOf",e.eventExpenseDetailImages)}}function Ee(a,l){a&1&&(x(0),v(1,"app-data-not-found"),g())}function he(a,l){if(a&1&&(x(0),t(1,"div",52)(2,"div",53)(3,"div")(4,"span",54),v(5,"i"),n()(),t(6,"div",55)(7,"h6",56),o(8),n(),t(9,"p",57),o(10),n()()()(),g()),a&2){let e=l.$implicit;i(4),s("ngClass","bg-"+e.color+"/10 !text-"+e.color),i(),u(e.icon+" text-[17px]"),i(3),m(e.label),i(2),m(e.value)}}function be(a,l){if(a&1){let e=b();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),o(5," Basic Detail "),n()(),t(6,"div",7)(7,"ul",8)(8,"li")(9,"div",9)(10,"div",10)(11,"div")(12,"span",11),o(13),C(14,"date"),n(),t(15,"span",12),o(16,"Created At"),n()()(),t(17,"div",10)(18,"div")(19,"span",11),o(20),n(),t(21,"span",12),o(22,"Created By"),n()()(),t(23,"div",10)(24,"div")(25,"span",11),o(26),C(27,"date"),n(),t(28,"span",12),o(29,"Event Date"),n()()(),t(30,"div",10)(31,"div")(32,"span",11),o(33),n(),t(34,"span",12),o(35,"Request By"),n()()(),t(36,"div",10)(37,"div")(38,"span",11),o(39),n(),t(40,"span",12),o(41,"Customer Details"),n()()(),t(42,"div",10)(43,"div")(44,"span",11),o(45),n(),t(46,"span",12),o(47,"Event Id"),n()()(),t(48,"div",10)(49,"div")(50,"span",11),o(51),n(),t(52,"span",12),o(53,"Event Type"),n()()(),t(54,"div",10)(55,"div")(56,"span",11),o(57),n(),t(58,"span",12),o(59,"Invite Members"),n()()(),t(60,"div",10)(61,"div")(62,"span",11),o(63),n(),t(64,"span",12),o(65,"Request Budget"),n()()(),d(66,re,6,1,"div",13),t(67,"div",10)(68,"div")(69,"span",11),o(70),n(),t(71,"span",12),o(72,"Event Venue"),n()()(),t(73,"div",14)(74,"div")(75,"span",15),o(76),d(77,de,3,0,"a",16),n(),t(78,"span",17),o(79,"Status"),n()()(),d(80,ce,6,1,"div",13),n()()()()(),t(81,"div",2)(82,"div",18)(83,"app-showcode-card",19),E("action",function(){f(e);let c=p();return D(c.addEventGallery())}),d(84,me,3,1,"div",20)(85,ve,2,0,"ng-container",21),n()(),t(86,"div",18)(87,"app-showcode-card",19),E("action",function(){f(e);let c=p();return D(c.addEventModal())}),t(88,"ul",22),d(89,ue,7,5,"li",23)(90,_e,2,0,"ng-container",21),n()()()(),t(91,"div",2)(92,"div",18)(93,"app-showcode-card",19),E("action",function(){f(e);let c=p();return D(c.addEventExpenseModal())}),t(94,"ul",24),d(95,xe,10,6,"li",23)(96,ge,2,0,"ng-container",21),n()()(),t(97,"div",18)(98,"app-showcode-card",25),d(99,De,3,1,"div",20)(100,Ee,2,0,"ng-container",21),n()()()(),t(101,"div",26)(102,"app-showcode-card",27)(103,"div",28),d(104,he,11,5,"ng-container",29),n(),t(105,"div",30),T(),t(106,"svg",31),v(107,"circle",32),t(108,"g",33),v(109,"circle",34),n()(),k(),t(110,"div",35)(111,"span",36),o(112),n(),t(113,"span",37),o(114,"Success Rate"),n()()()(),v(115,"app-logs",38),n()()}if(a&2){let e=p();i(13),m(e.Detail!=null&&e.Detail.created_at?M(14,66,e.Detail==null?null:e.Detail.created_at,"d MMM yyyy, hh:mm a"):"---"),i(7),m((e.Detail==null?null:e.Detail.created_name)||"---"),i(6),m(e.Detail!=null&&e.Detail.event_date?M(27,69,e.Detail==null?null:e.Detail.event_date,"d MMM yyyy, hh:mm a"):"---"),i(7),m((e.Detail==null?null:e.Detail.assigned_to_user_name)||"---"),i(6),m((e.Detail==null?null:e.Detail.customer_name)||"---"),i(6),m((e.Detail==null?null:e.Detail.event_id)||"---"),i(6),m((e.Detail==null?null:e.Detail.event_type)||"---"),i(6),m((e.Detail==null?null:e.Detail.invite_members)||"---"),i(6),w("",e.CURRENCY_SYMBOLS.RUPEE,"",(e.Detail==null?null:e.Detail.budget_request_per_person)||"---"," / Person"),i(3),s("ngIf",e.Detail==null?null:e.Detail.remark),i(4),m((e.Detail==null?null:e.Detail.event_venue)||"---"),i(6),h("",(e.Detail==null?null:e.Detail.status)||"--"," "),i(),s("ngIf",e.accessRight==null?null:e.accessRight.approveRight),i(3),s("ngIf",e.Detail==null?null:e.Detail.reason),i(3),u("box-title font-medium text-[15px] block text-primarytint1color"),s("title","Event Gallery")("titleView",!0)("actionIcons",e.EDIT_STATUS_PEN_REJ.includes(e.Detail==null?null:e.Detail.status)&&(e.accessRight==null?null:e.accessRight.addRight))("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName","ri-add-line"),i(),s("ngIf",e.eventDetailImages.length>0),i(),s("ngIf",e.eventDetailImages.length===0),i(2),u("box-title font-medium text-[15px] block text-primarytint1color"),s("title","Participants")("titleView",!0)("actionIcons",e.EDIT_STATUS_PEN_REJ.includes(e.Detail==null?null:e.Detail.status)&&(e.accessRight==null?null:e.accessRight.addRight))("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName","ri-add-line"),i(2),s("ngForOf",e.participantDetail),i(),s("ngIf",e.participantDetail.length===0),i(3),u("box-title font-medium text-[15px] block text-primarytint1color"),s("title","Event Expense")("titleView",!0)("actionIcons",e.EDIT_STATUS_PEN_REJ.includes(e.Detail==null?null:e.Detail.status)&&(e.accessRight==null?null:e.accessRight.addRight))("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName","ri-add-line"),i(2),s("ngForOf",e.eventDetail),i(),s("ngIf",e.eventDetail.length===0),i(2),u("box-title font-medium text-[15px] block text-primarytint1color"),s("title","Expense Attachment")("titleView",!0)("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName","ri-add-line"),i(),s("ngIf",e.eventExpenseDetailImages.length>0),i(),s("ngIf",e.eventExpenseDetailImages.length===0),i(2),u("text-primarytint1color"),s("title","Event Overview")("boxHeader","pt-3")("classbody","pt-0")("titleView",!0),i(2),s("ngForOf",e.stats),i(5),V("stroke-dashoffset",e.countDetail.successRatePercent),i(3),h("",e.countDetail.successRatePercent,"%"),i(3),s("logList",e.logList)("scrollHeight","400")("closeBtn",!1)}}function Se(a,l){a&1&&(t(0,"div",14),v(1,"app-skeleton"),n()),a&2&&(i(),u("w180"))}function Ce(a,l){a&1&&v(0,"app-skeleton"),a&2&&u("wp100 h35 mb-3")}function ye(a,l){a&1&&v(0,"app-skeleton"),a&2&&u("wp100 h35 mb-3")}function Ie(a,l){a&1&&(t(0,"div",2)(1,"div",58)(2,"div",2)(3,"div",58)(4,"app-showcode-card",59)(5,"div")(6,"div",60),d(7,Se,2,2,"div",61),n()()()(),t(8,"div",62)(9,"app-showcode-card",59),d(10,Ce,1,2,"app-skeleton",63),n()(),t(11,"div",62)(12,"app-showcode-card",59),d(13,ye,1,2,"app-skeleton",63),n()()()()()),a&2&&(i(4),s("titleView",!1)("view",!1),i(3),s("ngForOf",S(9,R).constructor(10)),i(2),s("titleView",!1)("view",!1),i(),s("ngForOf",S(10,R).constructor(7)),i(2),s("titleView",!1)("view",!1),i(),s("ngForOf",S(11,R).constructor(7)))}var oe=class a{constructor(l,e,r,c,I,we,Pe){this.nameUtils=l;this.moduleService=e;this.route=r;this.api=c;this.logService=I;this.dialog=we;this.comanFuncation=Pe}CURRENCY_SYMBOLS=H;EDIT_STATUS_PEN_REJ=$;EDIT_STATUS_PEN_APP=Y;subModule={};DetailId;Detail;countDetail=[];skLoading=!1;customerDetail=[];participantDetail=[];eventDetail=[];stats=[];logList=[];eventDetailImages=[];eventExpenseDetailImages=[];accessRight={};ngOnInit(){let l=this.moduleService.getAccessMap("SFA","Event Plan");l&&(this.accessRight=l);let e=this.moduleService.getSubModuleByName("SFA","Event Plan");e&&(this.subModule=e),this.route.paramMap.subscribe(r=>{this.DetailId=r.get("id"),this.DetailId&&this.getEventDetail()})}getEventDetail(){this.skLoading=!0,this.eventDetailImages=[],this.eventExpenseDetailImages=[],this.api.post({_id:this.DetailId},"event/detail").subscribe(l=>{l.statusCode===200&&(this.skLoading=!1,this.Detail=l.data,this.countDetail=l.data.count,this.customerDetail=l.data.customers,this.participantDetail=l.data.participant_data,this.eventDetail=l.data.expense_data,this.eventDetailImages=l.data.files,this.eventExpenseDetailImages=l.data.expense_files,this.logService.getLogs(this.subModule.module_id,e=>{this.logList=e},this.DetailId?this.DetailId:"",this.subModule.module_type),this.stats=[{icon:"ri-group-line",label:"Total",value:this.countDetail.totalCount||0,color:"primary",percent:this.countDetail.successRatePercent+"%"},{icon:"ri-repeat-line",label:"Repeated",value:this.countDetail.repeatCustomerCount||0,color:"info",percent:this.countDetail.successRatePercent+"%"},{icon:"ri-add-circle-line",label:"New",value:this.countDetail.newCustomerCount||0,color:"secondary",percent:this.countDetail.successRatePercent+"%"},{icon:"ri-user-add-line",label:"Win",value:this.countDetail.winCount||0,color:"primary",percent:this.countDetail.successRatePercent+"%"}])})}statusOptions=[{name:"Approved"},{name:"Reject"},{name:"Complete"}];updateStatus(){this.dialog.open(y,{width:"450px",data:{lastPage:"event-plan",DetailId:this.DetailId,status:this.Detail.status,reason:this.Detail.reason,options:this.statusOptions,subModule:this.subModule}}).afterClosed().subscribe(e=>{e===!0&&this.getEventDetail()})}addEventModal(){this.dialog.open(y,{width:"500px",data:{lastPage:"event-participants-modal",DetailId:this.DetailId,status:this.Detail.status,subModule:this.subModule}}).afterClosed().subscribe(e=>{e===!0&&this.getEventDetail()})}addEventGallery(){this.dialog.open(y,{width:"500px",data:{lastPage:"event-gallery-modal",DetailId:this.DetailId,status:this.Detail.status,subModule:this.subModule}}).afterClosed().subscribe(e=>{e===!0&&this.getEventDetail()})}addEventExpenseModal(){this.dialog.open(y,{width:"800px",data:{lastPage:"event-expense-modal",DetailId:this.DetailId,eventDetail:this.Detail,status:this.Detail.status,subModule:this.subModule}}).afterClosed().subscribe(e=>{e===!0&&this.getEventDetail()})}delete(l,e,r){this.comanFuncation.delete(l,this.subModule,r,e,"single_action",this.DetailId).subscribe(c=>{c===!0&&this.getEventDetail()})}static \u0275fac=function(e){return new(e||a)(_(le),_(q),_(j),_(G),_(ee),_(z),_(te))};static \u0275cmp=F({type:a,selectors:[["app-event-detail"]],decls:3,vars:6,consts:[[3,"title","title1","activeitem"],["class","grid grid-cols-12 sm:gap-x-6",4,"ngIf"],[1,"grid","grid-cols-12","sm:gap-x-6"],[1,"xl:col-span-8","col-span-12"],[1,"box"],[1,"box-header"],[1,"box-title","text-primarytint1color","wp100","flex","justify-between"],[1,"box-body","pt-0"],[1,"ti-list-group","list-group-flush","border-0"],[1,"flex","items-center","gap-5","flex-wrap","text-[12px]"],[1,"flex","items-center","me-2","flex-wrap"],[1,"block","font-medium"],[1,"text-textmuted","dark:text-textmuted/50"],["class","flex items-center me-2 flex-wrap",4,"ngIf"],[1,"flex","items-center"],[1,"flex","items-center","block","font-medium","badge","bg-info/10","text-info"],["class","text-info font-medium",3,"click",4,"ngIf"],[1,"text-xs","text-textmuted","dark:text-textmuted/50"],[1,"xl:col-span-6","col-span-12"],[3,"action","title","titleView","actionIcons","iconClass","classbody","iconName"],["class","grid grid-cols-12 gap-x-4",4,"ngIf"],[4,"ngIf"],[1,"ti-list-group","list-group-flush","border-0","scroll-y-220"],["class","border-b-2 pb-2 pt-2",4,"ngFor","ngForOf"],[1,"ti-list-group","list-group-flush","border-0","scroll-y-325"],[3,"title","titleView","iconClass","classbody","iconName"],[1,"xxl:col-span-4","xl:col-span-4","lg:col-span-4","md:col-span-5","col-span-12"],[3,"title","boxHeader","classbody","titleView"],[1,"grid","grid-cols-12"],[4,"ngFor","ngForOf"],[1,"relative","size-30"],["width","50","height","50","viewBox","0 0 50 50","xmlns","http://www.w3.org/2000/svg",1,"size-full"],["cx","25","cy","25","r","16","fill","none","stroke-width","2",1,"stroke-current","text-success"],[1,"origin-center","-rotate-90","transform"],["cx","25","cy","25","r","16","fill","none","stroke-width","2","stroke-dasharray","100",1,"stroke-current","text-gray-200","dark:text-white/10"],[1,"absolute","top-1/2","left-1/2","transform","-translate-y-1/2","-translate-x-1/2"],[1,"block","text-center","text-[11px]","font-bold"],[1,"block","text-center","text9px","font-bold","mt-1"],[3,"logList","scrollHeight","closeBtn"],[1,"text-info","font-medium",3,"click"],[1,"material-icons","ms-1"],[1,"grid","grid-cols-12","gap-x-4"],["class","xxl:col-span-2 lg:col-span-3 xl:col-span-4 sm:col-span-6 col-span-12",4,"ngFor","ngForOf"],[1,"xxl:col-span-2","lg:col-span-3","xl:col-span-4","sm:col-span-6","col-span-12"],[3,"delete","apiPath","imageData","editBtn","heading","subHeading"],[1,"border-b-2","pb-2","pt-2"],[1,"avatar","avatar-sm","bg-primarytint1color"],[1,"ms-2","font-semibold"],[1,"flex","items-center","justify-between"],[1,"badge","bg-light","bg-textmuted/10","text-textmuted","float-end","ms-auto"],["class","xxl:col-span-4 lg:col-span-3 xl:col-span-4 sm:col-span-6 col-span-12",4,"ngFor","ngForOf"],[1,"xxl:col-span-4","lg:col-span-3","xl:col-span-4","sm:col-span-6","col-span-12"],[1,"xl:col-span-6","lg:col-span-6","md:col-span-6","sm:col-span-6","col-span-6","border-e","border-defaultborder","dark:border-defaultborder/10","p-2"],[1,"flex","flex-wrap"],[1,"avatar","avatar-md","avatar-rounded","p-2",3,"ngClass"],[1,"ms-2"],[1,"mb-1","font-medium"],[1,"mb-0","text-textmuted","dark:text-textmuted/50","flex"],[1,"xl:col-span-12","col-span-12"],[3,"titleView","view"],[1,"flex","gap-2","mb-1","flex-wrap"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"xl:col-span-4","col-span-12"],[3,"class",4,"ngFor","ngForOf"]],template:function(e,r){e&1&&(v(0,"app-page-header",0),d(1,be,116,72,"div",1)(2,Ie,14,12,"div",1)),e&2&&(s("title","Event Plan")("title1",S(5,se))("activeitem","Event Plan Detail"),i(),s("ngIf",!r.skLoading),i(),s("ngIf",r.skLoading))},dependencies:[Z,N,O,A,ne,J,K,Q,L,B,ae,X,U,W,ie],encapsulation:2})};export{oe as EventPlanDetailComponent};
