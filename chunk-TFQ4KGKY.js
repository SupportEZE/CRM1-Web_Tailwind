import{a as z}from"./chunk-J4NDCUAB.js";import{a as q}from"./chunk-SQZ3YN6N.js";import{c as U}from"./chunk-CIBZCVJQ.js";import"./chunk-OTFCGVEU.js";import{a as V}from"./chunk-OEHD5D2Y.js";import{a as $}from"./chunk-GLWQGYBC.js";import{a as O}from"./chunk-DC4QM32I.js";import{F as j,c as N,q as Y,s as H}from"./chunk-VHE3PQ3O.js";import{$ as A,Z as I,hb as D,p as B}from"./chunk-GYDYF5F3.js";import{M as R,f as M,g as E,o as k,t as F}from"./chunk-PD5VTTIY.js";import{Aa as f,Ba as b,Hb as P,Mc as p,Nc as c,Ob as g,Pc as x,Yc as S,_b as s,bc as w,ed as T,gd as L,kc as l,lc as r,mc as h,nc as v,oc as C,qc as y,rb as a,sb as _,wc as u,yc as m}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var K=()=>["Target"],J=()=>[];function Q(n,t){if(n&1){let e=y();l(0,"app-icon-button",14),u("clickEvent",function(){f(e);let o=m().$implicit,d=m(2);return b(d.delete(o._id,"target/delete","Target List"))}),r()}n&2&&s("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function W(n,t){if(n&1){let e=y();l(0,"tr",11)(1,"td",12),p(2),r(),l(3,"td"),p(4),T(5,"date"),r(),l(6,"td"),p(7),r(),l(8,"td")(9,"a",13),u("click",function(){let o=f(e).$implicit,d=m(2);return b(d.goToDetailPage(o._id))}),p(10),r()(),l(11,"td"),p(12),r(),l(13,"td"),p(14),T(15,"date"),r(),l(16,"td"),p(17),T(18,"date"),r(),l(19,"td"),p(20),r(),l(21,"td"),p(22),r(),l(23,"td",12)(24,"app-icon-button",14),u("clickEvent",function(){let o=f(e).$implicit,d=m(2);return b(d.goToDetailPage(o._id))}),r(),g(25,Q,1,2,"app-icon-button",15),r()()}if(n&2){let e=t.$implicit,i=t.index,o=m(2);a(2),c((o.listPagination.cur_page-1)*o.listPagination.limit+i+1),a(2),c(e.created_at?L(5,13,e.created_at,"d MMM yyyy, hh:mm a"):"--"),a(3),c(e.created_name||"--"),a(3),c(e.title||"--"),a(2),c(e.target_type||"--"),a(2),c(e.start_date?L(15,16,e.start_date,"d MMM yyyy"):"--"),a(3),c(e.end_date?L(18,19,e.end_date,"d MMM yyyy"):"--"),a(3),x("",o.CURRENCY_SYMBOLS.RUPEE," ",e.sale_value||"--",""),a(2),c(e.is_additional_target===!0?"Yes":"No"),a(2),s("icon","ri-eye-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),a(),s("ngIf",o.accessRight==null?null:o.accessRight.deleteRight)}}function X(n,t){if(n&1&&(v(0),g(1,W,26,22,"tr",10),C()),n&2){let e=m();a(),s("ngForOf",e.listing)}}function Z(n,t){n&1&&(l(0,"td"),h(1,"app-skeleton"),r()),n&2&&(a(),w("h20 bg-skeleton"))}function ee(n,t){n&1&&(l(0,"tr",17),g(1,Z,2,2,"td",18),r()),n&2&&(a(),s("ngForOf",S(1,J).constructor(10)))}function te(n,t){n&1&&(v(0),g(1,ee,2,2,"tr",16),C()),n&2&&(a(),s("ngForOf",S(1,J).constructor(8)))}function ie(n,t){n&1&&(v(0),h(1,"app-data-not-found"),C())}var G=class n{constructor(t,e,i,o,d){this.router=t;this.api=e;this.moduleService=i;this.alert=o;this.comanFuncation=d}skLoading=!1;listPagination={};filter={};listing=[];subModule={};CURRENCY_SYMBOLS=B;accessRight={};ngOnInit(){let t=this.moduleService.getAccessMap("SFA","Target");t&&(this.accessRight=t);let e=this.moduleService.getSubModuleByName("SFA","Target");e&&(this.subModule=e),this.getList()}onRefresh(){this.filter={},this.getList()}changeToPage(t){this.listPagination.cur_page=t,this.getList()}changeToPagination(t){t==="Next"&&this.listPagination.cur_page<this.listPagination.total_pages?this.listPagination.cur_page++:t==="Previous"&&this.listPagination.cur_page>1&&this.listPagination.cur_page--,this.getList()}getList(){this.skLoading=!0,this.api.post({filters:this.filter},"target/read").subscribe(t=>{t.statusCode==200&&(this.skLoading=!1,this.listing=t.data,this.listPagination=t.pagination)})}delete(t,e,i){this.comanFuncation.delete(t,this.subModule,i,e,"single_action",t).subscribe(o=>{o===!0&&this.getList()})}openMainLogModal(t){this.comanFuncation.listLogsModal(this.subModule.module_id,t,this.subModule.module_type).subscribe(e=>{e===!0&&this.getList()})}goToAddPage(){this.router.navigate(["/apps/sfa/target/target-add"])}goToDetailPage(t){this.router.navigate(["/apps/sfa/target/target-detail",t])}PageHeaders=[{label:"Created At"},{label:"Created By"},{label:"Title"},{label:"Target For"},{label:"Start Date"},{label:"End Date"},{label:"Target Value"},{label:"Additional Target"}];static \u0275fac=function(e){return new(e||n)(_(R),_(I),_(O),_(A),_(U))};static \u0275cmp=P({type:n,selectors:[["app-target-list"]],decls:12,vars:25,consts:[[3,"title","title1","activeitem"],[1,"row"],[1,"col-xl-12"],[1,"box"],[3,"onRefresh","logBtn","button1","pageTitle","listLength","btnShow","refreshLabel","btnShow1","logsLabel","btnShow2","addBtnLabel"],[1,"box-body"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","showAction","columns"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],["class","product-list border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[1,"product-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"text-primary","font-semibold","underline",3,"click"],[3,"clickEvent","icon","buttonClass"],[3,"icon","buttonClass","clickEvent",4,"ngIf"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(h(0,"app-page-header",0),l(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-page-sub-header",4),u("onRefresh",function(){return i.onRefresh()})("logBtn",function(){return i.openMainLogModal("")})("button1",function(){return i.goToAddPage()}),r(),l(5,"div",5)(6,"div",6)(7,"spk-reusable-tables",7),g(8,X,2,1,"ng-container",8)(9,te,2,2,"ng-container",8),r(),g(10,ie,2,0,"ng-container",8),r()(),l(11,"app-pagination-footer",9),u("preButtonClick",function(){return i.changeToPagination("Previous")})("nextButtonClick",function(){return i.changeToPagination("Next")})("pageChange",function(d){return i.changeToPage(d)}),r()()()()),e&2&&(s("title","SFA")("title1",S(24,K))("activeitem","Target List"),a(4),s("pageTitle","Target")("listLength",i.listing.length)("btnShow",!0)("refreshLabel","Refresh")("btnShow1",!0)("logsLabel","Logs")("btnShow2",i.accessRight==null?null:i.accessRight.addRight)("addBtnLabel","Add Target"),a(3),s("tableHead","border-b")("showS_No",!0)("showAction",!0)("columns",i.PageHeaders),a(),s("ngIf",!i.skLoading),a(),s("ngIf",i.skLoading),a(),s("ngIf",!i.listing.length&&!i.skLoading),a(),s("currentPage",i.listPagination.cur_page)("totalPage",i.listPagination.total_pages)("pageLimit",i.listPagination.limit)("listLength",i.listing.length)("preBtn",!i.listPagination.prev)("nextBtn",!i.listPagination.next))},dependencies:[F,M,E,k,j,$,N,H,Y,z,q,V,D],encapsulation:2})};export{G as TargetListComponent};
