import{a as I}from"./chunk-56RTIVDZ.js";import{a as z}from"./chunk-5QFGLOXN.js";import"./chunk-PU6S26UW.js";import{a as q}from"./chunk-JUPJFX3F.js";import{a as U}from"./chunk-PJTW4QXW.js";import"./chunk-SQZ3YN6N.js";import{c as H}from"./chunk-CIBZCVJQ.js";import{a as G}from"./chunk-OTFCGVEU.js";import"./chunk-CNF4GSI7.js";import"./chunk-OEHD5D2Y.js";import{a as $}from"./chunk-GLWQGYBC.js";import{a as V}from"./chunk-DC4QM32I.js";import{B as R,F as j,c as L,s as P}from"./chunk-VHE3PQ3O.js";import{Qa as O,Z as N,hb as B}from"./chunk-GYDYF5F3.js";import{K as T,f as w,g as E,o as k,t as F}from"./chunk-PD5VTTIY.js";import{Aa as b,Ba as h,Hb as S,Mc as r,Nc as u,Ob as p,Yc as y,_b as l,bc as g,ed as A,gd as M,kc as n,lc as o,mc as f,nc as v,oc as _,qc as C,rb as a,sb as m,wc as x,yc as c}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var K=()=>["Audit Detail"],Q=()=>[];function W(i,t){if(i&1&&(n(0,"div")(1,"div",9)(2,"div",10)(3,"div")(4,"span",11),r(5),A(6,"date"),o(),n(7,"span",12),r(8,"Created At"),o()()(),n(9,"div",10)(10,"div")(11,"span",11),r(12),o(),n(13,"span",12),r(14,"Created By"),o()()(),n(15,"div")(16,"span",11),r(17),o(),n(18,"span",13),r(19,"Customer Name"),o()(),n(20,"div")(21,"span",11),r(22),o(),n(23,"span",13),r(24,"Customer Mobile"),o()(),n(25,"div")(26,"span",11),r(27),o(),n(28,"span",13),r(29,"Remark"),o()()()()),i&2){let e=c();a(5),u(e.Detail.created_at?M(6,5,e.Detail.created_at,"d MMM yyyy, hh:mm a"):"---"),a(7),u(e.Detail.created_name||"---"),a(5),u(e.Detail.customer_name||"---"),a(5),u(e.Detail.customer_mobile||"---"),a(5),u(e.Detail.remark||"---")}}function X(i,t){i&1&&(n(0,"div",16),f(1,"app-skeleton"),o()),i&2&&(a(),g("w180"))}function Y(i,t){i&1&&(n(0,"div")(1,"div",14),p(2,X,2,2,"div",15),o()()),i&2&&(a(2),l("ngForOf",y(1,Q).constructor(6)))}function Z(i,t){if(i&1){let e=C();n(0,"div",19)(1,"spk-product-card",20),x("delete",function(){let s=b(e).$implicit,D=c(2);return h(D.delete(s._id,"brand-audit/delete-file","delete"))}),o()()}if(i&2){let e=t.$implicit;a(),l("apiPath","brand-audit/get-doc")("imageData",e)("editBtn",!1)("heading",!1)("subHeading",!1)}}function ee(i,t){if(i&1&&(n(0,"div",17),v(1),p(2,Z,2,5,"div",18),_(),o()),i&2){let e=c();a(2),l("ngForOf",e.auditDetailImages)}}function te(i,t){i&1&&(v(0),f(1,"app-data-not-found"),_())}function ie(i,t){if(i&1){let e=C();n(0,"div",22)(1,"spk-product-card",20),x("delete",function(){let s=b(e).$implicit,D=c(2);return h(D.delete(s._id,"brand-audit/delete-file","delete"))}),o()()}if(i&2){let e=t.$implicit;a(),l("apiPath","brand-audit/get-doc")("imageData",e)("editBtn",!1)("heading",!1)("subHeading",!1)}}function ae(i,t){if(i&1&&(n(0,"div",17),v(1),p(2,ie,2,5,"div",21),_(),o()),i&2){let e=c();a(2),l("ngForOf",e.auditCompetitorDetailImages)}}function ne(i,t){i&1&&(v(0),f(1,"app-data-not-found"),_())}var J=class i{constructor(t,e,d,s,D,oe,le){this.nameUtils=t;this.moduleService=e;this.route=d;this.api=s;this.logService=D;this.dialog=oe;this.comanFuncation=le}Detail;subModule={};DetailId;auditDetailImages=[];auditCompetitorDetailImages=[];skLoading=!1;customerDetail=[];countDetail=[];logList=[];submoduleId=0;statusOptions=[{name:"Approved"},{name:"Reject"},{name:"Complete"}];ngOnInit(){let t=this.moduleService.getSubModuleByName("SFA","Branding");t&&(this.subModule=t),this.route.paramMap.subscribe(e=>{this.DetailId=e.get("id"),this.DetailId&&this.getAuditDetail()})}getAuditDetail(){this.skLoading=!0,this.auditDetailImages=[],this.api.post({_id:this.DetailId},"brand-audit/detail-brand-audit").subscribe(t=>{t.statusCode===200&&(this.skLoading=!1,this.Detail=t.data,this.countDetail=t.data.count,this.customerDetail=t.data.customers,this.auditDetailImages=t.data.images,this.auditCompetitorDetailImages=t.data.competitor_images,this.logService.getLogs(this.subModule.module_id,e=>{this.logList=e},this.DetailId?this.DetailId:"",this.subModule.module_type))})}updateStatus(){this.dialog.open(I,{width:"450px",data:{lastPage:"branding",DetailId:this.DetailId,status:this.Detail.status,reason:this.Detail.reason,options:this.statusOptions,subModule:this.subModule}}).afterClosed().subscribe(e=>{e===!0&&this.getAuditDetail()})}addAuditGallery(t){this.dialog.open(I,{width:"500px",data:{type:t,lastPage:"branding-detail",DetailId:this.DetailId,status:this.Detail.status,subModule:this.subModule}}).afterClosed().subscribe(d=>{d===!0&&this.getAuditDetail()})}delete(t,e,d){this.comanFuncation.delete(t,this.submoduleId,d,e,"single_action",this.DetailId).subscribe(s=>{s===!0&&this.getAuditDetail()})}static \u0275fac=function(e){return new(e||i)(m(z),m(V),m(T),m(N),m(G),m(O),m(H))};static \u0275cmp=S({type:i,selectors:[["app-audit-detail"]],decls:15,vars:30,consts:[[3,"title","title1","activeitem"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xl:col-span-12","col-span-12"],[3,"title","titleView"],[4,"ngIf"],[1,"grid","grid-cols-12","sm:gap-x-6"],[1,"xl:col-span-4","col-span-12"],[3,"action","title","titleView","actionIcons","iconClass","classbody","iconName"],["class","grid grid-cols-12 gap-x-4",4,"ngIf"],[1,"flex","gap-6","mb-1","flex-wrap","text-[11px]"],[1,"flex","items-center","gap-2"],[1,"block","font-medium"],[1,"text-xs","text-textmuted","dark:text-textmuted/50"],[1,"text-textmuted","dark:text-textmuted/50"],[1,"flex","gap-2","mb-1","flex-wrap"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"grid","grid-cols-12","gap-x-4"],["class","xl:col-span-2 lg:col-span-3 xl:col-span-4 sm:col-span-6 col-span-12",4,"ngFor","ngForOf"],[1,"xl:col-span-2","lg:col-span-3","xl:col-span-4","sm:col-span-6","col-span-12"],[3,"delete","apiPath","imageData","editBtn","heading","subHeading"],["class","xxl:col-span-4 lg:col-span-3 xl:col-span-4 sm:col-span-6 col-span-12",4,"ngFor","ngForOf"],[1,"xxl:col-span-4","lg:col-span-3","xl:col-span-4","sm:col-span-6","col-span-12"]],template:function(e,d){e&1&&(f(0,"app-page-header",0),n(1,"div",1)(2,"div",2)(3,"app-showcode-card",3),p(4,W,30,8,"div",4)(5,Y,3,2,"div",4),o(),n(6,"div",5)(7,"div",6)(8,"app-showcode-card",7),x("action",function(){return d.addAuditGallery("audit-gallery-modal")}),p(9,ee,3,1,"div",8)(10,te,2,0,"ng-container",4),o()(),n(11,"div",6)(12,"app-showcode-card",7),x("action",function(){return d.addAuditGallery("audit-gallery-modal")}),p(13,ae,3,1,"div",8)(14,ne,2,0,"ng-container",4),o()()()()()),e&2&&(l("title","Branding")("title1",y(29,K))("activeitem","Audit Detail"),a(3),g("box-title font-medium text-[15px] block text-primarytint1color"),l("title","Basic Detail")("titleView",!0),a(),l("ngIf",!d.skLoading),a(),l("ngIf",d.skLoading),a(3),g("box-title font-medium text-[15px] block text-primarytint1color"),l("title","Audit Gallery")("titleView",!0)("actionIcons",!0)("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName","ri-add-line"),a(),l("ngIf",d.auditDetailImages.length>0),a(),l("ngIf",d.auditDetailImages.length===0),a(2),g("box-title font-medium text-[15px] block text-primarytint1color"),l("title","Audit Competitor Gallery")("titleView",!0)("actionIcons",!0)("iconClass","ti-btn btn-wave ti-btn-sm ti-btn-soft-primary waves-effect waves-light")("classbody","pt-0")("iconName","ri-add-line"),a(),l("ngIf",d.auditCompetitorDetailImages.length>0),a(),l("ngIf",d.auditCompetitorDetailImages.length===0))},dependencies:[j,w,E,$,L,P,k,q,R,F,B,U],encapsulation:2})};export{J as AuditDetailComponent};
