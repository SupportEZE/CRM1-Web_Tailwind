import{a as Se}from"./chunk-J4NDCUAB.js";import{b as Ce,c as he}from"./chunk-CIBZCVJQ.js";import{a as fe}from"./chunk-OTFCGVEU.js";import{a as ue}from"./chunk-HPLI5COI.js";import{a as de}from"./chunk-OEHD5D2Y.js";import{a as be}from"./chunk-GLWQGYBC.js";import{a as $}from"./chunk-DC4QM32I.js";import{F as ge,c as Z,q as _e,s as pe,u as me}from"./chunk-VHE3PQ3O.js";import{$ as X,Aa as ie,B as G,Ea as ne,G as Q,Ga as re,Ha as oe,Ia as ae,Ja as le,Qa as ce,W as z,Z as J,_ as Le,hb as se,p as K,va as ee,w as U,wa as te,z as q}from"./chunk-GYDYF5F3.js";import{M as Y,f as W,g as A,o as H,r as N,t as j}from"./chunk-PD5VTTIY.js";import{Aa as _,Ba as p,Hb as I,Lc as P,Mc as d,Nc as h,Ob as u,Oc as T,Pc as R,Uc as b,Vc as S,Wc as y,Yc as O,Zc as B,_b as g,ac as F,ad as D,bc as k,ed as M,fc as x,gd as V,kc as a,lc as o,mc as v,nc as L,oc as w,qc as f,rb as l,sb as C,wc as m,yc as s}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import{g as ve}from"./chunk-66YHNWRR.js";var xe=ve(Le());var we=()=>["Secondary Order"],E=()=>[],Te=(r,n,e,i)=>({name:r,label:n,icon:e,count:i}),Oe=r=>[r];function ke(r,n){r&1&&v(0,"app-page-header",11),r&2&&g("title","Secondary Order")("title1",O(3,we))("activeitem","Secondary Order List")}function Me(r,n){r&1&&v(0,"app-skeleton"),r&2&&k("w100 h25")}function Ve(r,n){r&1&&(L(0),u(1,Me,1,2,"app-skeleton",12),w()),r&2&&(l(),g("ngForOf",O(1,E).constructor(3)))}function Ee(r,n){if(r&1){let e=f();a(0,"app-listing-tab",14),m("tabChange",function(t){_(e);let c=s(2);return p(c.onTabChange(t.tab))}),o()}if(r&2){let e=n.$implicit,i=s(2);g("tabs",B(7,Oe,D(2,Te,e.name,e.label,e.icon,e.count)))("activeTab",i.activeTab)}}function Ie(r,n){if(r&1&&(L(0),u(1,Ee,1,9,"app-listing-tab",13),w()),r&2){let e=s();l(),g("ngForOf",e.mainTabs)}}function Fe(r,n){if(r&1){let e=f();a(0,"button",23),m("click",function(){_(e);let t=s(2);return t.filter.created_name="",p(t.getList())}),a(1,"mat-icon"),d(2,"close"),o()()}}function Pe(r,n){if(r&1){let e=f();a(0,"button",23),m("click",function(){_(e);let t=s(2);return t.filter.order_no="",p(t.getList())}),a(1,"mat-icon"),d(2,"close"),o()()}}function Re(r,n){if(r&1){let e=f();a(0,"button",23),m("click",function(){_(e);let t=s(2);return t.filter.customer_category="",p(t.getList())}),a(1,"mat-icon"),d(2,"close"),o()()}}function Be(r,n){if(r&1){let e=f();a(0,"button",23),m("click",function(){_(e);let t=s(2);return t.filter.customer_detail="",p(t.getList())}),a(1,"mat-icon"),d(2,"close"),o()()}}function De(r,n){if(r&1){let e=f();a(0,"button",23),m("click",function(){_(e);let t=s(2);return t.filter.distributor_details="",p(t.getList())}),a(1,"mat-icon"),d(2,"close"),o()()}}function We(r,n){if(r&1){let e=f();a(0,"button",23),m("click",function(){_(e);let t=s(2);return t.filter.state="",p(t.getList())}),a(1,"mat-icon"),d(2,"close"),o()()}}function Ae(r,n){if(r&1){let e=f();a(0,"button",23),m("click",function(){_(e);let t=s(2);return t.filter.district="",p(t.getList())}),a(1,"mat-icon"),d(2,"close"),o()()}}function He(r,n){if(r&1){let e=f();a(0,"tr",24)(1,"td",25),d(2),o(),a(3,"td"),d(4),M(5,"date"),o(),a(6,"td"),d(7),o(),a(8,"td")(9,"a",26),m("click",function(){let t=_(e).$implicit,c=s(2);return p(c.goToDetailPage(t._id))}),d(10),o()(),a(11,"td"),d(12),o(),a(13,"td")(14,"div",27)(15,"span",28),d(16),o(),a(17,"span",29)(18,"span",30),d(19,"Mobile: "),o(),d(20),o()()(),a(21,"td")(22,"div",27)(23,"span",28),d(24),o(),a(25,"span",29)(26,"span",30),d(27,"Mobile: "),o(),d(28),o()()(),a(29,"td",31),d(30),o(),a(31,"td",31),d(32),o(),a(33,"td",31),d(34),o(),a(35,"td",31),d(36),o(),a(37,"td",32)(38,"div",27)(39,"span",28),d(40),M(41,"number"),o()()()()}if(r&2){let e=n.$implicit,i=n.index,t=s(2);F("bg-gray-400",t.isHighlighted(e._id)),l(2),h(i+1),l(2),h(e!=null&&e.created_at?V(5,17,e==null?null:e.created_at,"d MMM yyyy, hh:mm a"):"--"),l(3),h((e==null?null:e.created_name)||"--"),l(3),h(e==null?null:e.order_no),l(2),h((e==null?null:e.customer_type_name)||"--"),l(4),T(" ",(e==null?null:e.customer_name)||"--",""),l(4),T(" ",(e==null?null:e.mobile)||"--",""),l(4),T(" ",(e==null?null:e.distributor_name)||"--",""),l(4),T(" ",(e==null?null:e.distributor_mobile)||"--",""),l(2),h((e==null?null:e.state)||"--"),l(2),h((e==null?null:e.district)||"--"),l(2),h((e==null?null:e.total_item_count)||0),l(2),h((e==null?null:e.total_item_quantity)||0),l(4),R("",t.CURRENCY_SYMBOLS.RUPEE," ",V(41,20,(e==null?null:e.net_amount_before_tax)||"--","1.2-2"),"")}}function Ne(r,n){if(r&1){let e=f();L(0),a(1,"tr",15)(2,"td"),d(3,"\xA0"),o(),a(4,"td")(5,"div",16)(6,"mat-form-field",17)(7,"input",18),y("ngModelChange",function(t){_(e);let c=s();return S(c.filter.created_at,t)||(c.filter.created_at=t),p(t)}),m("ngModelChange",function(){_(e);let t=s();return p(t.getList())}),o(),v(8,"mat-datepicker-toggle",19)(9,"mat-datepicker",null,0),o()()(),a(11,"td")(12,"div",16)(13,"mat-form-field",17)(14,"input",20),y("ngModelChange",function(t){_(e);let c=s();return S(c.filter.created_name,t)||(c.filter.created_name=t),p(t)}),m("keyup.enter",function(){_(e);let t=s();return p(t.getList())}),o(),u(15,Fe,3,0,"button",21),o()()(),a(16,"td")(17,"div",16)(18,"mat-form-field",17)(19,"input",20),y("ngModelChange",function(t){_(e);let c=s();return S(c.filter.order_no,t)||(c.filter.order_no=t),p(t)}),m("keyup.enter",function(){_(e);let t=s();return p(t.getList())}),o(),u(20,Pe,3,0,"button",21),o()()(),a(21,"td")(22,"div",16)(23,"mat-form-field",17)(24,"input",20),y("ngModelChange",function(t){_(e);let c=s();return S(c.filter.customer_category,t)||(c.filter.customer_category=t),p(t)}),m("keyup.enter",function(){_(e);let t=s();return p(t.getList())}),o(),u(25,Re,3,0,"button",21),o()()(),a(26,"td")(27,"div",16)(28,"mat-form-field",17)(29,"input",20),y("ngModelChange",function(t){_(e);let c=s();return S(c.filter.customer_detail,t)||(c.filter.customer_detail=t),p(t)}),m("keyup.enter",function(){_(e);let t=s();return p(t.getList())}),o(),u(30,Be,3,0,"button",21),o()()(),a(31,"td")(32,"div",16)(33,"mat-form-field",17)(34,"input",20),y("ngModelChange",function(t){_(e);let c=s();return S(c.filter.distributor_details,t)||(c.filter.distributor_details=t),p(t)}),m("keyup.enter",function(){_(e);let t=s();return p(t.getList())}),o(),u(35,De,3,0,"button",21),o()()(),a(36,"td")(37,"div",16)(38,"mat-form-field",17)(39,"input",20),y("ngModelChange",function(t){_(e);let c=s();return S(c.filter.state,t)||(c.filter.state=t),p(t)}),m("keyup.enter",function(){_(e);let t=s();return p(t.getList())}),o(),u(40,We,3,0,"button",21),o()()(),a(41,"td")(42,"div",16)(43,"mat-form-field",17)(44,"input",20),y("ngModelChange",function(t){_(e);let c=s();return S(c.filter.district,t)||(c.filter.district=t),p(t)}),m("keyup.enter",function(){_(e);let t=s();return p(t.getList())}),o(),u(45,Ae,3,0,"button",21),o()()(),a(46,"td"),d(47,"\xA0"),o(),a(48,"td"),d(49,"\xA0"),o(),a(50,"td"),d(51,"\xA0"),o()(),u(52,He,42,23,"tr",22),w()}if(r&2){let e=P(10),i=s();l(7),g("matDatepicker",e),b("ngModel",i.filter.created_at),l(),g("for",e),l(6),b("ngModel",i.filter.created_name),l(),x(i.filter.created_name?15:-1),l(4),b("ngModel",i.filter.order_no),l(),x(i.filter.order_no?20:-1),l(4),b("ngModel",i.filter.customer_category),l(),x(i.filter.customer_category?25:-1),l(4),b("ngModel",i.filter.customer_detail),l(),x(i.filter.customer_detail?30:-1),l(4),b("ngModel",i.filter.distributor_details),l(),x(i.filter.distributor_details?35:-1),l(4),b("ngModel",i.filter.state),l(),x(i.filter.state?40:-1),l(4),b("ngModel",i.filter.district),l(),x(i.filter.district?45:-1),l(7),g("ngForOf",i.listing)}}function je(r,n){r&1&&(a(0,"td"),v(1,"app-skeleton"),o()),r&2&&(l(),k("h20 bg-skeleton"))}function Ye(r,n){r&1&&(a(0,"tr",15),u(1,je,2,2,"td",34),o()),r&2&&(l(),g("ngForOf",O(1,E).constructor(12)))}function Ke(r,n){r&1&&(L(0),u(1,Ye,2,2,"tr",33),w()),r&2&&(l(),g("ngForOf",O(1,E).constructor(12)))}function Ue(r,n){r&1&&(L(0),v(1,"app-data-not-found"),w())}var ye=class r{constructor(n,e,i,t,c,qe,Ge,Qe,ze){this.dialog=n;this.api=e;this.comanFuncation=i;this.moduleService=t;this.alert=c;this.router=qe;this.logService=Ge;this.toastr=Qe;this.highlightService=ze}pageHeader=!0;_id;CURRENCY_SYMBOLS=K;FORMID=ue;skLoading=!1;activeTab="Pending";pagination={};filter={};mainTabs=[];modules={};listingCount={};listing=[];accessRight={};highlightedId;pageKey="primary-order";ngOnInit(){let n=this.highlightService.getHighlight(this.pageKey);n!=null&&(this.activeTab=n.tab,this.highlightedId=n.rowId,this.pagination.cur_page=n.pageIndex,this.filter=n.filters,this.highlightService.clearHighlight(this.pageKey));let e=this.moduleService.getAccessMap("SFA","Order","Secondary Order");e&&(this.accessRight=e);let i=this.moduleService.getSubSubModuleByName("SFA","Order","Secondary Order");i&&(this.modules=i),this.getList()}goToAddPage(){this.router.navigate(["/apps/order/secondary-order/secondary-order-add"])}setHighLight(n){this.comanFuncation.setHighLight(this.pageKey,n,this.activeTab,this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}isHighlighted(n){return this.highlightedId===n}goToDetailPage(n){this.setHighLight(n),this.router.navigate(["/apps/order/secondary-order/secondary-order-detail/",n])}onRefresh(){this.filter={},this.getList()}onTabChange(n){this.activeTab=n,this.getList()}changeToPage(n){this.pagination.cur_page=n,this.getList()}changeToPagination(n){n==="Next"&&this.pagination.cur_page<this.pagination.total_pages?this.pagination.cur_page++:n==="Previous"&&this.pagination.cur_page>1&&this.pagination.cur_page--,this.getList()}getList(){this.skLoading=!0,this.api.post({filters:this.filter,activeTab:this.activeTab,page:this.pagination.cur_page??1},"secondary-order/secondary-order-list").subscribe(n=>{n.statusCode==200&&(this.skLoading=!1,this.listing=n.data.result,this.listingCount=n.data.activeTab,this.pagination=n.pagination,this.mainTabs=[{name:"Pending",label:"Pending",icon:"ri-time-fill",count:this.listingCount.pending_count},{name:"Approved",label:"Approved",icon:"ri-checkbox-circle-fill",count:this.listingCount.approved_count},{name:"Reject",label:"Reject",icon:"ri-close-circle-fill",count:this.listingCount.reject_count},{name:"Hold",label:"Hold",icon:"ri-pause-circle-fill",count:this.listingCount.hold_count}])})}openMainLogModal(n){this.comanFuncation.listLogsModal(this.modules.module_id,n,this.modules.module_type).subscribe(e=>{e===!0&&this.getList()})}onDeleteRow(n){this.alert.confirm("Are you sure?").then(e=>{e.isConfirmed&&this.api.patch({_id:n,is_delete:1},"secondary-order/delete").subscribe(i=>{i.statusCode===200&&(this.logService.logActivityOnDelete(this.modules.module_id,this.modules.title,"delete",n,"Secondary Order"),xe.default.fire("Deleted!",i.message,"success"),this.getList())})})}PageHeaders=[{label:"Created At"},{label:"Created By"},{label:"Order Id"},{label:"Customer Category"},{label:"Retailer Detail"},{label:"Distributors Detail"},{label:"State",table_class:"text-center"},{label:"District",table_class:"text-center"},{label:"Total Items",table_class:"text-center"},{label:"Item QTY",table_class:"text-center"},{label:"Total Order Value",table_class:"text-center"}];static \u0275fac=function(e){return new(e||r)(C(ce),C(J),C(he),C($),C(X),C(Y),C(fe),C(U),C(Ce))};static \u0275cmp=I({type:r,selectors:[["app-secondary-order-list"]],inputs:{pageHeader:"pageHeader",_id:"_id"},decls:14,vars:22,consts:[["picker",""],[3,"title","title1","activeitem",4,"ngIf"],[1,"box","py-3","px-4"],["aria-label","Tabs","role","tablist",1,"sm:flex","sm:space-x-2","sm:rtl:space-x-reverse","gap-1"],[4,"ngIf"],[1,"row"],[1,"col-xl-12"],[3,"onRefresh","button1","pageTitle","btnShow","refreshLabel","btnShow2","addBtnLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","columns"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"title","title1","activeitem"],[3,"class",4,"ngFor","ngForOf"],[3,"tabs","activeTab","tabChange",4,"ngFor","ngForOf"],[3,"tabChange","tabs","activeTab"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","createdAt","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["class","product-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"product-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"text-primary","font-semibold","underline",3,"click"],[1,""],[1,"block","font-medium"],[1,"block"],[1,"text-textmuted","dark:text-textmuted/50","text-[11px]"],[1,"text-center"],[1,"text-right"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(u(0,ke,1,4,"app-page-header",1),a(1,"div",2)(2,"nav",3),u(3,Ve,2,2,"ng-container",4)(4,Ie,2,1,"ng-container",4),o(),a(5,"div",5)(6,"div",6)(7,"app-page-sub-header",7),m("onRefresh",function(){return i.onRefresh()})("button1",function(){return i.goToAddPage()}),o(),a(8,"div",8)(9,"spk-reusable-tables",9),u(10,Ne,53,18,"ng-container",4)(11,Ke,2,2,"ng-container",4),o(),u(12,Ue,2,0,"ng-container",4),o(),a(13,"app-pagination-footer",10),m("preButtonClick",function(){return i.changeToPagination("Previous")})("nextButtonClick",function(){return i.changeToPagination("Next")})("pageChange",function(c){return i.changeToPage(c)}),o()()()()),e&2&&(g("ngIf",i.pageHeader),l(3),g("ngIf",i.skLoading),l(),g("ngIf",!i.skLoading),l(3),k("p-0 pt-3"),g("pageTitle","Secondary Order List")("btnShow",!0)("refreshLabel","Refresh")("btnShow2",i.accessRight==null?null:i.accessRight.addRight)("addBtnLabel","Create Order"),l(2),g("tableHead","border-b")("showS_No",!0)("columns",i.PageHeaders),l(),g("ngIf",!i.skLoading),l(),g("ngIf",i.skLoading),l(),g("ngIf",!i.listing.length&&!i.skLoading),l(),g("currentPage",i.pagination.cur_page)("totalPage",i.pagination.total_pages)("pageLimit",i.pagination.limit)("listLength",i.listing.length)("preBtn",!i.pagination.prev)("nextBtn",!i.pagination.next))},dependencies:[ge,W,A,q,G,Q,be,Z,pe,_e,Se,me,N,H,j,de,se,ie,oe,ae,le,ne,re,te,ee,z],encapsulation:2})};export{ye as SecondaryOrderListComponent};
