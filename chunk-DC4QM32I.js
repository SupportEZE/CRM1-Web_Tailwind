import{aa as u,o as h}from"./chunk-GYDYF5F3.js";import{ka as d,pa as f}from"./chunk-2NSPOFEK.js";var R={[h.ORGANIZATION_ADMIN]:{SFA_Expense:{addRight:!0,approveRight:!0,deleteRight:!1,exportRight:!0,importRight:!0,modifyRight:!0,viewRight:!0},"SFA_Stock_Stock Audit":{addRight:!1,approveRight:!0,deleteRight:!0,exportRight:!0,importRight:!0,modifyRight:!0,viewRight:!0},SFA_Leave:{addRight:!1,approveRight:!0,deleteRight:!0,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0},"SFA_Payment Collection":{addRight:!0,approveRight:!0,deleteRight:!0,exportRight:!0,importRight:!0,modifyRight:!0,viewRight:!0},"WCMS_Spare Part":{addRight:!0,approveRight:!0,deleteRight:!0,exportRight:!0,importRight:!0,modifyRight:!0,viewRight:!0},"SFA_Event Plan":{addRight:!1,approveRight:!0,deleteRight:!0,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0}},[h.FIELD_USER]:{SFA_Attendance:{addRight:!1,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!1},Customers:{addRight:!1,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0},SFA_Enquiry:{addRight:!1,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0},SFA_Order_Primary:{addRight:!1,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0},SFA_Expense:{addRight:!0,approveRight:!1,deleteRight:!0,exportRight:!0,importRight:!0,modifyRight:!0,viewRight:!0},"SFA_Stock_Stock Audit":{addRight:!0,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0},SFA_Leave:{addRight:!1,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0},"SFA_Payment Collection":{addRight:!1,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0},"WCMS_Spare Part":{addRight:!0,approveRight:!0,deleteRight:!0,exportRight:!0,importRight:!0,modifyRight:!0,viewRight:!0},Ticket:{addRight:!0,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0},"SFA_Event Plan":{addRight:!0,approveRight:!1,deleteRight:!1,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!0}},[h.PRIMARY]:{Customers:{addRight:!1,approveRight:!1,deleteRight:!0,exportRight:!1,importRight:!1,modifyRight:!1,viewRight:!1}}};var p=class s{constructor(e){this.authService=e}moduleKey="module";getModuleByName(e){return this.authService.getModule()?.find(i=>i.title===e)}getModuleForm(e,t){return this.getModuleByName(e)?.forms?.find(r=>r.form_id===t)}getModuleTable(e,t){return this.getModuleByName(e)?.tables?.find(r=>r.table_id===t)}getSubModuleByName(e,t){return this.getModuleByName(e)?.children?.find(r=>r.title===t)}getSubSubModuleByName(e,t,i){return this.getSubModuleByName(e,t)?.children?.find(o=>o.title===i)}getFormById(e,t,i){return this.getSubModuleByName(e,t)?.forms?.find(o=>o.form_id===i)}getTableById(e,t,i){return this.getSubModuleByName(e,t)?.tables?.find(o=>o.table_id===i)}getAccessMap(e,t,i){let r=this.authService.getModule();t&&i?r=this.getSubSubModuleByName(e,t,i):t?r=this.getSubModuleByName(e,t):r=this.getModuleByName(e);let o=r?.default_access||{},a=this.authService.getUser()?.login_type_id,l=[e,t,i].filter(Boolean).join("_");if(a===h.ORGANIZATION_ADMIN){let g=R[a][l]||{};return{addRight:g.addRight??!0,approveRight:g.approveRight??!0,deleteRight:g.deleteRight??!0,exportRight:g.exportRight??!0,importRight:g.importRight??!0,modifyRight:g.modifyRight??!0,viewRight:g.viewRight??!0}}else if(a===h.PRIMARY||a===h.FIELD_USER){let g=R[a][l]||{};return{addRight:g.addRight??!1,approveRight:g.approveRight??!1,deleteRight:g.deleteRight??!1,exportRight:g.exportRight??!1,importRight:g.importRight??!1,modifyRight:g.modifyRight??!1,viewRight:g.viewRight??!1}}else return{addRight:o.add===!0,approveRight:o.approve===!0,deleteRight:o.delete===!0,exportRight:o.export===!0,importRight:o.import===!0,modifyRight:o.modify===!0,viewRight:o.view===!0}}getAllowedPaths(){let e=[],t=this.authService.getModule();if(!t)return e;for(let i of t)if(i.path&&e.push("/"+i.path.replace(/^\/+/,"")),Array.isArray(i.children)){for(let r of i.children)if(r.path&&e.push("/"+r.path.replace(/^\/+/,"")),Array.isArray(r.children))for(let o of r.children)o.path&&e.push("/"+o.path.replace(/^\/+/,""))}return e}static \u0275fac=function(t){return new(t||s)(f(u))};static \u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})};export{p as a};
