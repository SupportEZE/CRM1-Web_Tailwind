import{a as Se}from"./chunk-JNCBHWNI.js";import"./chunk-HMNG3Q5Y.js";import{a as Ee}from"./chunk-56RTIVDZ.js";import{c as se}from"./chunk-7FUDRD4B.js";import"./chunk-PU6S26UW.js";import{a as De}from"./chunk-PJTW4QXW.js";import{a as he}from"./chunk-SQZ3YN6N.js";import"./chunk-CIBZCVJQ.js";import{a as ye}from"./chunk-OTFCGVEU.js";import"./chunk-CNF4GSI7.js";import{a as ue}from"./chunk-OEHD5D2Y.js";import{a as be}from"./chunk-GLWQGYBC.js";import{a as re}from"./chunk-DC4QM32I.js";import{A as ge,B as xe,F as fe,c as oe,s as _e,t as ve}from"./chunk-VHE3PQ3O.js";import{$ as le,B as ee,G as te,J as ie,Qa as pe,W as ne,Z as ae,Za as de,hb as me,jb as ce,w as J,y as Q,z as Z}from"./chunk-GYDYF5F3.js";import{K as X,M as G,e as K,f as W,g as N,n as H,o as U,q as Y,t as $}from"./chunk-PD5VTTIY.js";import{Aa as x,Ba as f,Bc as B,Hb as j,Mc as a,Nc as v,Ob as u,Oc as c,Pc as T,Uc as M,Vc as O,Wc as A,Yc as S,Zc as q,_b as r,bc as k,cc as L,ed as g,fd as C,gd as D,kc as i,lc as t,mc as _,nc as h,oc as E,qc as I,rb as n,sb as b,wc as y,yc as d}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import{a as R,b as P}from"./chunk-66YHNWRR.js";var we=()=>["Enquiry Detail"],F=l=>({active:l}),z=()=>[];function ke(l,o){if(l&1){let e=I();i(0,"button",53),y("click",function(){x(e);let s=d(2);return f(s.onSaveFollowup())}),_(1,"i",54),a(2," Followup "),t()}}function Ie(l,o){if(l&1&&(h(0),i(1,"tr",55)(2,"td")(3,"span",56),a(4,"Name :"),t()(),i(5,"td")(6,"div",39)(7,"span",57),a(8),t()()()(),i(9,"tr",55)(10,"td")(11,"span",56),a(12,"Type :"),t()(),i(13,"td")(14,"span",58),_(15,"i"),a(16),g(17,"titlecase"),t()()(),i(18,"tr",55)(19,"td")(20,"span",56),a(21,"Date :"),t()(),i(22,"td")(23,"span",59),a(24),g(25,"date"),t(),i(26,"span",60),a(27),t()()(),i(28,"tr",55)(29,"td",61)(30,"span",56),a(31,"Remark :"),t()(),i(32,"td")(33,"span",62),a(34),t()()(),E()),l&2){let e=d(2);n(8),T("",(e.Detail==null||e.Detail.upcoming_followup==null||e.Detail.upcoming_followup.category_detail==null?null:e.Detail.upcoming_followup.category_detail.name)||"--"," (",(e.Detail==null||e.Detail.upcoming_followup==null||e.Detail.upcoming_followup.category_detail==null?null:e.Detail.upcoming_followup.category_detail.mobile)||"--",")"),n(7),L("ri-",(e.Detail==null||e.Detail.upcoming_followup==null?null:e.Detail.upcoming_followup.followup_type)==="call"?"phone":"walk","-fill text-[11px] me-1"),n(),c(" ",!(e.Detail==null||e.Detail.upcoming_followup==null)&&e.Detail.upcoming_followup.followup_type?C(17,10,e.Detail.upcoming_followup==null?null:e.Detail.upcoming_followup.followup_type):"--"," "),n(8),c(" ",!(e.Detail==null||e.Detail.upcoming_followup==null)&&e.Detail.upcoming_followup.followup_date?D(25,12,e.Detail==null||e.Detail.upcoming_followup==null?null:e.Detail.upcoming_followup.followup_date,"d MMM yyyy"):"--"," "),n(3),c(" ",e.getTatDaysReadable(e.Detail==null||e.Detail.upcoming_followup==null?null:e.Detail.upcoming_followup.tat_days)," "),n(6),B("matTooltip",e.Detail==null||e.Detail.upcoming_followup==null?null:e.Detail.upcoming_followup.remark),n(),v((e.Detail==null||e.Detail.upcoming_followup==null?null:e.Detail.upcoming_followup.remark)||"--")}}function Te(l,o){if(l&1&&(h(0),i(1,"tr",55)(2,"td")(3,"span",56),a(4,"Name :"),t()(),i(5,"td")(6,"div",39)(7,"span",57),a(8),t()()()(),i(9,"tr",55)(10,"td")(11,"span",56),a(12,"Type :"),t()(),i(13,"td")(14,"span",58),_(15,"i"),a(16),g(17,"titlecase"),t()()(),i(18,"tr",55)(19,"td")(20,"span",56),a(21,"Date :"),t()(),i(22,"td")(23,"span",59),a(24),g(25,"date"),t(),i(26,"span",60),a(27),t()()(),i(28,"tr",55)(29,"td",61)(30,"span",56),a(31,"Remark :"),t()(),i(32,"td")(33,"span",62),a(34),t()()(),E()),l&2){let e=d(2);n(8),T("",(e.Detail==null||e.Detail.last_activity==null||e.Detail.last_activity.customer_details==null?null:e.Detail.last_activity.customer_details.customer_name)||"--"," (",(e.Detail==null||e.Detail.last_activity==null||e.Detail.last_activity.customer_details==null?null:e.Detail.last_activity.customer_details.mobile)||"--",")"),n(7),L("ri-",(e.Detail==null||e.Detail.last_activity==null?null:e.Detail.last_activity.visit_type)==="call"?"phone":"walk","-fill text-[11px] me-1"),n(),c(" ",!(e.Detail==null||e.Detail.last_activity==null)&&e.Detail.last_activity.visit_type?C(17,10,e.Detail.last_activity.visit_type):"--"," "),n(8),c(" ",!(e.Detail==null||e.Detail.last_activity==null)&&e.Detail.last_activity.activity_date?D(25,12,e.Detail==null||e.Detail.last_activity==null?null:e.Detail.last_activity.activity_date,"d MMM yyyy"):"--"," "),n(3),c(" ",e.getTatDaysReadable(e.Detail==null||e.Detail.last_activity==null?null:e.Detail.last_activity.tat_days)," "),n(6),B("matTooltip",e.Detail==null||e.Detail.last_activity==null?null:e.Detail.last_activity.remark),n(),v((e.Detail==null||e.Detail.last_activity==null?null:e.Detail.last_activity.remark)||"--")}}function qe(l,o){if(l&1){let e=I();i(0,"li",63)(1,"div",64)(2,"div",39)(3,"input",65),A("ngModelChange",function(s){let m=x(e).$implicit,w=d(2);return O(m[w.getKey(m)],s)||(m[w.getKey(m)]=s),f(s)}),y("change",function(){let s=x(e).$implicit,m=d(2);return f(m.onUpdateStage(m.getKey(s),!s[m.getKey(s)],s[m.getKey(s)]))}),t(),i(4,"div",66),a(5),t()()()()}if(l&2){let e=o.$implicit,p=d(2);n(3),r("id",p.getKey(e)),M("ngModel",e[p.getKey(e)]),n(2),v(p.getKey(e))}}function Me(l,o){if(l&1){let e=I();i(0,"a",67),y("click",function(){x(e);let s=d(2);return f(s.updateStatus())}),i(1,"i",68),a(2,"edit"),t()()}}function Oe(l,o){if(l&1&&(i(0,"div",39)(1,"div")(2,"span",40),a(3,"Reason"),t(),i(4,"span",41),a(5),t()()()),l&2){let e=d(2);n(5),c("",(e.Detail==null?null:e.Detail.reason)||"--"," ")}}function Ae(l,o){if(l&1&&(i(0,"div",69)(1,"div")(2,"span",40),a(3),t(),i(4,"span",41),a(5),t()()()),l&2){let e=o.$implicit;n(3),v(e.key),n(2),v(e.value)}}function Fe(l,o){if(l&1&&(i(0,"div")(1,"span",72),_(2,"i",73),t(),i(3,"p",74)(4,"span",75)(5,"span",66),a(6),t(),a(7),t(),i(8,"span",76),a(9),g(10,"titlecase"),g(11,"date"),t()(),i(12,"p",77)(13,"span",56),a(14,"Visit Start : "),t(),a(15),g(16,"date"),t(),i(17,"p",77)(18,"span",56),a(19,"Start Address : "),t(),a(20),t(),i(21,"p",77)(22,"span",56),a(23,"Visit Stop : "),t(),a(24),g(25,"date"),t(),i(26,"p",77)(27,"span",56),a(28,"Stop Address : "),t(),a(29),t(),i(30,"p",77)(31,"span",56),a(32,"Avarage Meeting Time : "),t(),i(33,"span",78),a(34),t()(),i(35,"p",77)(36,"span",56),a(37,"Remark : "),t(),i(38,"span",78),a(39),t()()()),l&2){let e=d().$implicit;n(6),c("",e==null||e.customer_details==null?null:e.customer_details.customer_name," "),n(),c("",e==null||e.customer_details==null?null:e.customer_details.mobile," "),n(2),T("",C(10,10,e.type)," - ",e!=null&&e.activity_date?D(11,12,e==null?null:e.activity_date,"d MMM yyyy, hh:mm a"):"--",""),n(6),c("",e!=null&&e.visit_start?D(16,15,e==null?null:e.visit_start,"hh:mm a"):"--"," "),n(5),c("",(e==null?null:e.start_location)||"--"," "),n(4),c("",e!=null&&e.visit_end?D(25,18,e==null?null:e.visit_end,"hh:mm a"):"--"," "),n(5),c("",(e==null?null:e.end_location)||"--"," "),n(5),v((e==null?null:e.avarage_meeting_time)||"--"),n(5),v((e==null?null:e.remark)||"--")}}function ze(l,o){if(l&1&&(i(0,"div")(1,"span",79),_(2,"i",80),t(),i(3,"p",74)(4,"span",75)(5,"span",66),a(6),t(),a(7),t(),i(8,"span",81),a(9),g(10,"titlecase"),g(11,"date"),t()(),i(12,"p",77)(13,"span",56),a(14,"Call Start : "),t(),a(15),g(16,"date"),t(),i(17,"p",77)(18,"span",56),a(19,"Call End : "),t(),a(20),g(21,"date"),t(),i(22,"p",77)(23,"span",56),a(24,"Remark : "),t(),a(25),t(),i(26,"audio",82),_(27,"source",83),t()()),l&2){let e=d().$implicit;n(6),c("",e==null||e.customer_details==null?null:e.customer_details.customer_name," "),n(),c("",e==null||e.customer_details==null?null:e.customer_details.mobile," "),n(2),T("",C(10,7,e.type)," - ",e!=null&&e.activity_date?D(11,9,e==null?null:e.activity_date,"d MMM yyyy, hh:mm a"):"--",""),n(6),c(" ",e!=null&&e.call_start?D(16,12,e==null?null:e.call_start,"hh:mm a"):"--"," "),n(5),c(" ",e!=null&&e.call_end?D(21,15,e==null?null:e.call_end,"hh:mm a"):"--"," "),n(5),c(" ",(e==null?null:e.remark)||"--"," ")}}function Ve(l,o){if(l&1&&(i(0,"li"),u(1,Fe,40,21,"div",25)(2,ze,28,18,"div",25),t()),l&2){let e=o.$implicit;n(),r("ngIf",e.type==="visit"),n(),r("ngIf",e.type==="call")}}function Le(l,o){l&1&&(h(0),_(1,"app-data-not-found"),E())}function Be(l,o){if(l&1&&(h(0),i(1,"ul",70),u(2,Ve,3,2,"li",71),t(),u(3,Le,2,0,"ng-container",25),E()),l&2){let e=d(3);n(2),r("ngForOf",e.taskActivity),n(),r("ngIf",!e.taskActivity.length)}}function Re(l,o){l&1&&(i(0,"div"),_(1,"app-skeleton"),t()),l&2&&(n(),k("h50 mb-2"))}function Pe(l,o){l&1&&(h(0),u(1,Re,2,2,"div",71),E()),l&2&&(n(),r("ngForOf",S(1,z).constructor(5)))}function je(l,o){if(l&1&&(i(0,"div"),u(1,Be,4,2,"ng-container",25)(2,Pe,2,2,"ng-container",25),t()),l&2){let e=d(2);n(),r("ngIf",!e.skLoading1),n(),r("ngIf",e.skLoading1)}}function Ke(l,o){if(l&1&&(i(0,"div"),_(1,"app-comments",84),t()),l&2){let e=d(2);n(),r("detailId",e.DetailId)("module","enquiry")("showAvatar",!0)}}function We(l,o){if(l&1&&(i(0,"div"),_(1,"app-logs",85),t()),l&2){let e=d(2);n(),r("logList",e.logList)("scrollHeight","400")("closeBtn",!1)("hideHeader",!1)}}function Ne(l,o){if(l&1&&(i(0,"div",88),_(1,"spk-product-card",89),t()),l&2){let e=o.$implicit;n(),r("apiPath","enquiry/get-doc")("imageData",e)("editBtn",!1)("delBtn",!1)("heading",!1)("subHeading",!1)}}function He(l,o){if(l&1&&(h(0),i(1,"div",86),u(2,Ne,2,6,"div",87),t(),E()),l&2){let e=d(3);n(2),r("ngForOf",e.Detail.files)}}function Ue(l,o){l&1&&(h(0),_(1,"app-data-not-found"),E())}function Ye(l,o){if(l&1&&(i(0,"div"),u(1,He,3,1,"ng-container",25)(2,Ue,2,0,"ng-container",25),t()),l&2){let e=d(2);n(),r("ngIf",e.Detail.files.length!==0),n(),r("ngIf",e.Detail.files.length===0)}}function $e(l,o){if(l&1){let e=I();i(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14),a(6,"Activity Information"),t(),u(7,ke,3,0,"button",15),t()(),i(8,"div",16)(9,"div",17)(10,"div",18)(11,"input",19),A("ngModelChange",function(s){x(e);let m=d();return O(m.assignType,s)||(m.assignType=s),f(s)}),t(),i(12,"label",20),a(13," Upcomming "),t()(),i(14,"div",18)(15,"input",21),A("ngModelChange",function(s){x(e);let m=d();return O(m.assignType,s)||(m.assignType=s),f(s)}),t(),i(16,"label",22),a(17," Last "),t()()(),i(18,"div",23)(19,"spk-reusable-tables",24),u(20,Ie,35,15,"ng-container",25)(21,Te,35,15,"ng-container",25),t()()()(),i(22,"div",11)(23,"div",26)(24,"div",14),a(25,"Stages"),t()(),i(26,"div",27)(27,"div",28),_(28,"spk-apexcharts",29),t(),i(29,"ul",30),u(30,qe,6,3,"li",31),t()()()(),i(31,"div",32)(32,"app-showcode-card",33)(33,"div",34)(34,"div",35),a(35,"Basic Detail"),t(),i(36,"div",36)(37,"app-icon-button",37),y("clickEvent",function(){x(e);let s=d();return f(s.goToDetailPage())}),t(),i(38,"app-icon-button",37),y("clickEvent",function(){x(e);let s=d();return f(s.goToDetailPage())}),t()()(),i(39,"div",38)(40,"div",39)(41,"div")(42,"span",40),a(43,"Enquiry ID"),t(),i(44,"span",41),a(45),t()()(),i(46,"div",39)(47,"div")(48,"span",40),a(49,"Created At"),t(),i(50,"span",41),a(51),g(52,"date"),t()()(),i(53,"div",39)(54,"div")(55,"span",40),a(56,"Created By"),t(),i(57,"span",41),a(58),t()()(),i(59,"div",39)(60,"div")(61,"span",40),a(62,"Enquiry Type"),t(),i(63,"span",41),a(64),t()()(),i(65,"div",39)(66,"div")(67,"span",40),a(68,"Source"),t(),i(69,"span",41),a(70),t()()(),i(71,"div",39)(72,"div")(73,"span",40),a(74,"Name"),t(),i(75,"span",41),a(76),t()()(),i(77,"div",39)(78,"div")(79,"span",40),a(80,"Mobile"),t(),i(81,"span",41),a(82),t()()(),i(83,"div",39)(84,"div")(85,"span",40),a(86,"Email Id"),t(),i(87,"span",41),a(88),t()()(),i(89,"div",39)(90,"div")(91,"span",40),a(92,"Assigned Date"),t(),i(93,"span",41),a(94),g(95,"date"),t()()(),i(96,"div",39)(97,"div")(98,"span",40),a(99,"Assign Sales User"),t(),i(100,"span",41),a(101),t()()(),i(102,"div",39)(103,"div")(104,"span",40),a(105,"Status"),t(),i(106,"span",42),a(107),u(108,Me,3,0,"a",43),t()()(),u(109,Oe,6,1,"div",44),i(110,"div",39)(111,"div")(112,"span",40),a(113,"Requirement"),t(),i(114,"span",41),a(115),t()()()(),_(116,"div",45),i(117,"div",46),u(118,Ae,6,2,"div",47),g(119,"keyvalue"),t()(),i(120,"div",48)(121,"div",26)(122,"nav",49)(123,"button",50),y("click",function(){x(e);let s=d();return f(s.activeTab="Task Activity")}),a(124," Task Activity "),t(),i(125,"button",51),y("click",function(){x(e);let s=d();return f(s.activeTab="Comments")}),a(126," Comments "),t(),i(127,"button",51),y("click",function(){x(e);let s=d();return s.activeTab="Logs",f(s.getLogs())}),a(128," Logs "),t(),i(129,"button",51),y("click",function(){x(e);let s=d();return f(s.activeTab="Attachment")}),a(130," Attachment "),t()()(),i(131,"div",52),u(132,je,3,2,"div",25)(133,Ke,2,3,"div",25)(134,We,2,4,"div",25)(135,Ye,3,2,"div",25),t()()()()}if(l&2){let e=d();n(7),r("ngIf",e.accessRight==null?null:e.accessRight.addRight),n(4),M("ngModel",e.assignType),r("value","upcomming"),n(4),M("ngModel",e.assignType),r("value","last"),n(4),r("showCheckbox",!1),n(),r("ngIf",e.assignType==="upcomming"),n(),r("ngIf",e.assignType==="last"),n(7),r("chartOptions",e.chartOptions1),n(2),r("ngForOf",e.enquiryMainStages),n(2),r("titleView",!1)("view",!1),n(5),r("icon","ri-mail-line")("buttonClass","ti-btn ti-btn-icon bg-primary/10 text-primary !border hover:bg-primary hover:text-white !rounded-full btn-wave"),n(),r("icon","ri-whatsapp-line")("buttonClass","ti-btn ti-btn-icon bg-secondary/10 text-secondary hover:bg-secondary hover:text-white !rounded-full btn-wave"),n(7),v((e.Detail==null?null:e.Detail.enquiry_id)||"--"),n(6),v(e.Detail!=null&&e.Detail.created_at?D(52,39,e.Detail==null?null:e.Detail.created_at,"d MMM yyyy, hh:mm a"):"--"),n(7),v((e.Detail==null?null:e.Detail.created_name)||"--"),n(6),v((e.Detail==null?null:e.Detail.enquiry_type)||"--"),n(6),v((e.Detail==null?null:e.Detail.enquiry_source)||"--"),n(6),v((e.Detail==null?null:e.Detail.name)||"--"),n(6),v((e.Detail==null?null:e.Detail.mobile)||"--"),n(6),v((e.Detail==null?null:e.Detail.email)||"--"),n(6),v(e.Detail!=null&&e.Detail.assigned_date?D(95,42,e.Detail==null?null:e.Detail.assigned_date,"d MMM yyyy"):"--"),n(7),v((e.Detail==null?null:e.Detail.assigned_to_user_name)||"--"),n(6),c("",(e.Detail==null?null:e.Detail.status)||"--"," "),n(),r("ngIf",(e.Detail==null?null:e.Detail.status)==="Review Pending"||(e.Detail==null?null:e.Detail.status)==="Inprocess"||(e.Detail==null?null:e.Detail.status)==="Assigned"),n(),r("ngIf",e.Detail.reason),n(6),v((e.Detail==null?null:e.Detail.requirement)||"--"),n(3),r("ngForOf",C(119,45,e.formattedKeysFormData)),n(5),r("ngClass",q(47,F,e.activeTab==="Task Activity")),n(2),r("ngClass",q(49,F,e.activeTab==="Comments")),n(2),r("ngClass",q(51,F,e.activeTab==="Logs")),n(2),r("ngClass",q(53,F,e.activeTab==="Attachment")),n(3),r("ngIf",e.activeTab==="Task Activity"),n(),r("ngIf",e.activeTab==="Comments"),n(),r("ngIf",e.activeTab==="Logs"),n(),r("ngIf",e.activeTab==="Attachment")}}function Xe(l,o){l&1&&(i(0,"div",39),_(1,"app-skeleton"),t()),l&2&&(n(),k("w180"))}function Ge(l,o){l&1&&_(0,"app-skeleton"),l&2&&k("wp100 h35 mb-3")}function Je(l,o){l&1&&_(0,"app-skeleton"),l&2&&k("wp100 h35 mb-3")}function Qe(l,o){l&1&&(i(0,"div",86)(1,"div",2)(2,"div",86)(3,"div",2)(4,"app-showcode-card",33)(5,"div")(6,"div",90),u(7,Xe,2,2,"div",91),t()()()(),i(8,"div",92)(9,"app-showcode-card",33),u(10,Ge,1,2,"app-skeleton",93),t()(),i(11,"div",94)(12,"app-showcode-card",33),u(13,Je,1,2,"app-skeleton",93),t()()()()()),l&2&&(n(4),r("titleView",!1)("view",!1),n(3),r("ngForOf",S(9,z).constructor(10)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",S(10,z).constructor(7)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",S(11,z).constructor(7)))}var Ce=class l{constructor(o,e,p,s,m,w,V,Ze,et){this.router=o;this.route=e;this.api=p;this.logService=s;this.moduleService=m;this.dateService=w;this.alert=V;this.dialog=Ze;this.toastr=et}DetailId;Detail;formattedKeysFormData={};DetailFormData;enquiryMainStages=[];logList=[];skLoading=!1;skLoading1=!1;subModule={};originalData={};assignType="upcomming";activeTab="Task Activity";taskActivity=[];accessRight={};ngOnInit(){let o=this.moduleService.getAccessMap("SFA","Enquiry");o&&(this.accessRight=o);let e=this.moduleService.getSubModuleByName("SFA","Enquiry");e&&(this.subModule=e),this.route.paramMap.subscribe(p=>{this.DetailId=p.get("id"),this.DetailId&&this.getEnquiryDetail()})}getEnquiryDetail(){this.skLoading=!0,this.api.post({_id:this.DetailId},"enquiry/detail").subscribe(o=>{if(o.statusCode===200){this.skLoading=!1,this.Detail=o.data,this.DetailFormData=this.Detail.form_data,this.enquiryMainStages=this.Detail.stages;let e=this.enquiryMainStages.filter(m=>Object.values(m)[0]===!0).length,p=this.enquiryMainStages.length,s=p>0?e/p*100:0;this.chartOptions1=P(R({},this.chartOptions1),{series:[parseFloat(s.toFixed(2))]}),this.formattedKeysFormData=this.formatAndPrintFormData(this.DetailFormData),this.getLogs(),this.getTaskActivity()}})}getKey(o){return Object.keys(o)[0]}getLogs(){this.logService.getLogs(this.subModule.module_id,o=>{this.logList=o},this.DetailId?this.DetailId:"",this.subModule.module_type)}formatAndPrintFormData(o){let e={};for(let p in o)if(o.hasOwnProperty(p)){let s=p.split("_").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ");e[s]=o[p]}return e}onUpdateStage(o,e,p){let s={[o]:e},m={[o]:p};this.alert.confirm("Are you sure?","You want to update stage","Yes it!").then(w=>{w.isConfirmed&&this.api.post({stage:o,enquiry_id:this.DetailId,checked:p},"enquiry/save-stage").subscribe(V=>{V.statusCode===200&&(this.logService.logActivityOnUpdate(!0,s,m,this.subModule.module_id,this.subModule.title,"update",this.DetailId||null,()=>{},this.subModule.module_type),this.getEnquiryDetail(),this.toastr.success(V.message,"","toast-top-right"))})})}getTaskActivity(){this.skLoading1=!0,this.api.post({enquiry_id:this.DetailId},"enquiry/activities").subscribe(o=>{o.statusCode===200&&(this.skLoading1=!1,this.taskActivity=o.data)})}editPage(o){this.router.navigate(["/apps/sfa/enquiry-list/enquiry-detail/"+this.DetailId+"/edit"])}updateStatus(){this.dialog.open(Ee,{width:"450px",data:{lastPage:"enquiry",DetailId:this.DetailId,status:this.Detail.status,reason:this.Detail.reason,subModule:this.subModule,options:this.statusOptions,apiPath:"enquiry/status-update"}}).afterClosed().subscribe(e=>{e===!0&&this.getEnquiryDetail()})}goToDetailPage(){this.alert.confirm("Comming Soon !").then(o=>{o.isConfirmed})}getTatDaysReadable(o){if(!o)return"--";let e=o.match(/(\d+)h\s*(\d+)min\s*(\d+)sec/);if(!e)return o;let p=parseInt(e[1],10);if(p>=24){let s=Math.floor(p/24);return`${s} day${s>1?"s":""}`}else return`${p}h`}onSaveFollowup(){let o={category_type:"Enquiry",category_id:this.Detail._id,assigned_to_user_name:this.Detail.assigned_to_user_name,assigned_to_user_id:this.Detail.assigned_to_user_id};this.dialog.open(Se,{width:"700px",data:{lastPage:"folloup-list",enquiryType:"add",formData:o||{}}}).afterClosed().subscribe(p=>{p===!0&&this.getEnquiryDetail()})}statusOptions=[{name:"Inprocess"},{name:"Lost"},{name:"Drop"},{name:"Junk & Close"},{name:"Win"}];chartOptions1={chart:{height:286,type:"radialBar",responsive:"true",offsetX:0,offsetY:15},plotOptions:{radialBar:{startAngle:-135,endAngle:135,size:120,imageWidth:50,imageHeight:50,track:{strokeWidth:"97%"},dropShadow:{enabled:!1,top:0,left:0,bottom:0,blur:3,opacity:.5},dataLabels:{name:{fontSize:"16px",color:void 0,offsetY:30},hollow:{size:"60%"},value:{offsetY:-10,fontSize:"22px",color:void 0,formatter:function(o){return o+"%"}}}}},colors:["rgba(var(--primary-rgb))"],fill:{type:"solid",gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:["#5c67f7"],inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{dashArray:3},series:[0],labels:["Complete"]};static \u0275fac=function(e){return new(e||l)(b(G),b(X),b(ae),b(ye),b(re),b(ce),b(le),b(pe),b(J))};static \u0275cmp=j({type:l,selectors:[["app-enquiry-detail"]],decls:9,vars:9,consts:[[3,"buttonClick1","title","title1","activeitem","buttonText1","icon1","btnShow1"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xl:col-span-12","col-span-12"],[1,"box","profile-card"],[1,"profile-banner-img"],["src","./assets/images/media/media-3.jpg","alt","...",1,"card-img-top"],[1,"box-body","pb-0","relative","profile-content"],["class","grid grid-cols-12 sm:gap-x-6 profile-content",4,"ngIf"],["class","grid grid-cols-12 sm:gap-x-6",4,"ngIf"],[1,"grid","grid-cols-12","sm:gap-x-6","profile-content"],[1,"xl:col-span-3","col-span-12"],[1,"box","overflow-hidden"],[1,"box-header"],[1,"flex","items-center","justify-between","wp100"],[1,"box-title"],["type","button","class","ti-btn-sm !py-1 btn ti-btn ti-btn-soft-primary m-0",3,"click",4,"ngIf"],[1,"box-body","p-0"],[1,"p-2","flex","gap-4","border-b","bg-light","border-defaultborder","dark:border-defaultborder/10"],[1,"form-check"],["type","radio","name","upcomming","id","upcomming",1,"form-check-input",3,"ngModelChange","ngModel","value"],["for","upcomming",1,"form-check-label"],["type","radio","name","last","id","last",1,"form-check-input",3,"ngModelChange","ngModel","value"],["for","last",1,"form-check-label"],[1,"table-responsive"],["tableClass","table text-nowrap",3,"showCheckbox"],[4,"ngIf"],[1,"box-header","justify-between"],[1,"box-body","pt-0"],["id","total-orders",1,"mt-45px","mb-3"],[3,"chartOptions"],[1,"ti-list-group"],["class","ti-list-group-item",4,"ngFor","ngForOf"],[1,"xxl:col-span-9","xl:col-span-8","lg:col-span-8","md:col-span-7","col-span-12"],[3,"titleView","view"],[1,"flex","justify-between","mb-3"],[1,"box-title","flex","items-center","text-primarytint1color"],[1,"md:mb-0","mb-2"],[3,"clickEvent","icon","buttonClass"],[1,"flex","gap-6","mb-1","flex-wrap","text-[11px]"],[1,"flex","items-center"],[1,"text-xs","text-textmuted","dark:text-textmuted/50"],[1,"block","font-medium"],[1,"flex","items-center","block","font-medium","badge","bg-info/10","text-info"],["class","text-info font-medium",3,"click",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"dropdown-divider","mb-3","mt-3"],[1,"flex","gap-5","mb-1","flex-wrap","text-[11px]"],["class","flex items-center gap-2",4,"ngFor","ngForOf"],[1,"box"],["aria-label","Tabs","role","tablist","aria-orientation","horizontal",1,"nav","nav-tabs","tab-style-8","scaleX","profile-settings-tab","gap-2","flex","mt-2"],["type","button",1,"nav-link","ti-btn-soft-primary","px-4","rounded-md","active",3,"click","ngClass"],["type","button",1,"nav-link","ti-btn-soft-primary","px-4","rounded-md",3,"click","ngClass"],[1,"box-body","tab-content"],["type","button",1,"ti-btn-sm","!py-1","btn","ti-btn","ti-btn-soft-primary","m-0",3,"click"],[1,"ri-apps-2-add-line","font-medium","align-middle"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10","text-[11px]"],[1,"font-medium","text-[11px]"],[1,"text-[11px]"],[1,"badge","bg-info/10","text-info","text-[11px]"],[1,"text-primary","font-medium","me-1","text-[11px]"],[1,"badge","bg-primary/10","text-primary","text-[12px]"],[1,"vertical-align-top"],[1,"text-[11px]","ellipsis","w180",3,"matTooltip"],[1,"ti-list-group-item"],[1,"flex","items-center","justify-between"],["type","checkbox",1,"form-check-input","form-checked-success","me-2",3,"ngModelChange","change","id","ngModel"],[1,"font-medium"],[1,"text-info","font-medium",3,"click"],[1,"material-icons","ms-1"],[1,"flex","items-center","gap-2"],[1,"list-none","profile-timeline","mb-3"],[4,"ngFor","ngForOf"],[1,"avatar","avatar-sm","avatar-rounded","profile-timeline-avatar","bg-primarytint3color"],[1,"ri-walk-fill","text-[14px]"],[1,"text-textmuted","dark:text-textmuted/50","mb-2"],[1,"text-defaulttextcolor","dark:text-defaulttextcolor/80"],[1,"float-end","text-[11px]","badge","bg-primarytint3color/10","text-primarytint3color"],[1,"text-textmuted","dark:text-textmuted/50","mb-1","text-[12px]"],[1,"font-medium","text-success"],[1,"avatar","avatar-sm","avatar-rounded","profile-timeline-avatar","bg-info"],[1,"ri-phone-fill","text-[14px]"],[1,"float-end","text-[11px]","badge","bg-info/10","text-info"],["id","player2","controls",""],["src","./assets/audio/perfect-beauty.mp3","type","audio/mp3"],[3,"detailId","module","showAvatar"],[3,"logList","scrollHeight","closeBtn","hideHeader"],[1,"grid","grid-cols-12","sm:gap-x-6"],["class","xxl:col-span-2 lg:col-span-3 xl:col-span-4 sm:col-span-6 col-span-12",4,"ngFor","ngForOf"],[1,"xxl:col-span-2","lg:col-span-3","xl:col-span-4","sm:col-span-6","col-span-12"],[3,"apiPath","imageData","editBtn","delBtn","heading","subHeading"],[1,"flex","gap-2","mb-1","flex-wrap"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"xl:col-span-4","col-span-12"],[3,"class",4,"ngFor","ngForOf"],[1,"xl:col-span-8","col-span-12"]],template:function(e,p){e&1&&(i(0,"app-page-header",0),y("buttonClick1",function(m){return p.editPage(m)}),t(),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),_(5,"img",5),t(),i(6,"div",6),u(7,$e,136,55,"div",7)(8,Qe,14,12,"div",8),t()()()()),e&2&&(r("title","SFA Ozone")("title1",S(8,we))("activeitem","Enquiry Detail")("buttonText1","Edit Enquiry")("icon1","edit")("btnShow1",!0),n(7),r("ngIf",!p.skLoading),n(),r("ngIf",p.skLoading))},dependencies:[fe,K,W,N,Z,Q,ie,ee,te,be,oe,_e,he,ve,ge,de,H,U,Y,ue,se,$,ne,xe,De,me],encapsulation:2})};export{Ce as OzoneEnquiryDetailComponent};
