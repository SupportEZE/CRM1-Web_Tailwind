import{a as V}from"./chunk-Z42RT33F.js";import"./chunk-SQZ3YN6N.js";import{c as j}from"./chunk-CIBZCVJQ.js";import{a as B}from"./chunk-OTFCGVEU.js";import{a as Y}from"./chunk-OEHD5D2Y.js";import{a as A}from"./chunk-GLWQGYBC.js";import{a as L}from"./chunk-DC4QM32I.js";import{B as P,F as U,c as O}from"./chunk-VHE3PQ3O.js";import{Qa as N,Z as F,jb as T,p as R}from"./chunk-GYDYF5F3.js";import{K as k,f as C,g as y,o as M,r as w}from"./chunk-PD5VTTIY.js";import{Hb as h,Mc as l,Nc as u,Ob as d,Oc as p,Pc as x,Yc as s,_b as r,bc as v,ed as S,gd as g,kc as t,lc as i,mc as c,nc as I,oc as E,rb as n,sb as m,yc as _}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import"./chunk-66YHNWRR.js";var q=()=>["Invoice Details"],b=()=>[];function G(a,o){if(a&1&&(t(0,"tr",28)(1,"td",46),l(2),i(),t(3,"td"),l(4),i(),t(5,"td",46),l(6),i(),t(7,"td",47),l(8),S(9,"number"),i(),t(10,"td",47),l(11),i(),t(12,"td",47),l(13),S(14,"number"),i()()),a&2){let e=o.$implicit,f=o.index,D=_(3);n(2),u(f+1),n(2),u((e==null?null:e.product_name)||"--"),n(2),u((e==null?null:e.qty)||0),n(2),x("",D.CURRENCY_SYMBOLS.RUPEE,"",g(9,8,e==null?null:e.mrp,"1.2-2"),""),n(3),p("",(e==null?null:e.discount)||0,"%"),n(2),x("",D.CURRENCY_SYMBOLS.RUPEE,"",g(14,11,e==null?null:e.net_price,"1.2-2"),"")}}function H(a,o){if(a&1&&(I(0),d(1,G,15,14,"tr",45),E()),a&2){let e=_(2);n(),r("ngForOf",e.cartDetail)}}function W(a,o){if(a&1&&(t(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9),l(7,"INVOICE NO: "),t(8,"span",10),l(9),i()()()(),t(10,"div",11)(11,"button",12),l(12,"Print"),c(13,"i",13),i()()(),t(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",3)(18,"div",17)(19,"p",18),l(20," Billing From : "),i(),t(21,"p",19),l(22),i(),t(23,"p",20),l(24),i(),t(25,"p",20),l(26),i()(),c(27,"div",21),t(28,"div",17)(29,"p",18),l(30," Billing To : "),i(),t(31,"p",19),l(32),i(),t(33,"p",20),l(34),i(),t(35,"p",20),l(36),i(),t(37,"p",20),l(38),i()()()(),t(39,"div",22)(40,"p",23),l(41,"Invoice ID :"),i(),t(42,"p",24),l(43),i()(),t(44,"div",22)(45,"p",23),l(46,"Date Issued :"),i(),t(47,"p",24),l(48),S(49,"date"),i()(),t(50,"div",16)(51,"div",25)(52,"spk-reusable-tables",26),d(53,H,2,1,"ng-container",27),t(54,"tr",28),c(55,"td",29),t(56,"td",29)(57,"spk-reusable-tables",30)(58,"tr",31)(59,"th",32)(60,"p",33),l(61,"Sub Total :"),i()(),t(62,"td")(63,"p",34),l(64),i()()(),t(65,"tr",31)(66,"th",32)(67,"p",33),l(68,"Avail Discount :"),i()(),t(69,"td")(70,"p",34),l(71),i()()(),t(72,"tr",31)(73,"th",32)(74,"p",33),l(75,"GST "),t(76,"span",35),l(77,"(18%)"),i(),l(78," :"),i()(),t(79,"td")(80,"p",34),l(81),i()()(),t(82,"tr",31)(83,"th",32)(84,"p",36),l(85,"Total :"),i()(),t(86,"td")(87,"p",37),l(88),i()()()()()()()()()()()()(),t(89,"div",22)(90,"div",5)(91,"div",38)(92,"div",39),l(93," Mode Of Payment "),i()(),t(94,"div",40)(95,"div",41)(96,"div",16)(97,"p",42),l(98," UPI / Online "),i(),t(99,"p",43)(100,"span",44),l(101,"Transaction Number :"),i(),l(102),i()()()()()()()),a&2){let e=_();n(9),u(e.invoiceDetail!=null&&e.invoiceDetail.invoice_no?e.invoiceDetail==null?null:e.invoiceDetail.invoice_no:"---"),n(13),p(" ",(e.invoiceDetail==null?null:e.invoiceDetail.customer_name)||"---"," "),n(2),p(" ",(e.invoiceDetail==null?null:e.invoiceDetail.customer_address)||"---"," "),n(2),p(" ",(e.invoiceDetail==null?null:e.invoiceDetail.customer_mobile)||"---"," "),n(6),p(" ",(e.invoiceDetail==null?null:e.invoiceDetail.service_engineer_name)||"---"," "),n(2),p(" ",(e.invoiceDetail==null?null:e.invoiceDetail.service_type)||"---"," "),n(2),p(" ",(e.invoiceDetail==null?null:e.invoiceDetail.billing_to_email)||"---"," "),n(2),p(" ",(e.invoiceDetail==null?null:e.invoiceDetail.billing_to_phone)||"---"," "),n(5),u(e.invoiceDetail!=null&&e.invoiceDetail.invoice_no?e.invoiceDetail==null?null:e.invoiceDetail.invoice_no:"---"),n(5),u(e.invoiceDetail!=null&&e.invoiceDetail.invoice_date?g(49,24,e.invoiceDetail==null?null:e.invoiceDetail.invoice_date,"d MMM yyyy, hh:mm a"):"---"),n(4),r("columns",e.invoiceColumns)("showS_No",!0)("showCheckbox",!1),n(),r("ngIf",!e.skLoading),n(4),r("showCheckbox",!1),n(7),x("",e.CURRENCY_SYMBOLS.RUPEE,"",e.invoiceDetail!=null&&e.invoiceDetail.sub_total?e.invoiceDetail==null?null:e.invoiceDetail.sub_total:"---",""),n(7),x("",e.CURRENCY_SYMBOLS.RUPEE,"",e.invoiceDetail!=null&&e.invoiceDetail.sub_total?e.invoiceDetail==null?null:e.invoiceDetail.sub_total:"---",""),n(10),x("",e.CURRENCY_SYMBOLS.RUPEE,"",e.invoiceDetail!=null&&e.invoiceDetail.sub_total?e.invoiceDetail==null?null:e.invoiceDetail.sub_total:"---",""),n(7),x("",e.CURRENCY_SYMBOLS.RUPEE,"",e.invoiceDetail!=null&&e.invoiceDetail.sub_total?e.invoiceDetail==null?null:e.invoiceDetail.sub_total:"---",""),n(14),p(" TRX-",(e.invoiceDetail==null?null:e.invoiceDetail.transaction_number)||"--"," ")}}function X(a,o){a&1&&c(0,"app-skeleton"),a&2&&v("wp100 h35 mb-3")}function $(a,o){a&1&&c(0,"app-skeleton"),a&2&&v("wp100 h35 mb-3")}function z(a,o){a&1&&c(0,"app-skeleton"),a&2&&v("wp100 h35 mb-3")}function J(a,o){a&1&&(t(0,"div",55),c(1,"app-skeleton"),i()),a&2&&(n(),v("w180"))}function K(a,o){a&1&&c(0,"app-skeleton"),a&2&&v("wp100 h35 mb-3")}function Z(a,o){a&1&&c(0,"app-skeleton"),a&2&&v("wp100 h35 mb-3")}function ee(a,o){a&1&&(t(0,"div",48)(1,"div",16)(2,"div",48)(3,"div",49)(4,"app-showcode-card",50),d(5,X,1,2,"app-skeleton",51),i()(),t(6,"div",49)(7,"app-showcode-card",50),d(8,$,1,2,"app-skeleton",51),i()(),t(9,"div",49)(10,"app-showcode-card",50),d(11,z,1,2,"app-skeleton",51),i()(),t(12,"div",16)(13,"app-showcode-card",50)(14,"div")(15,"div",52),d(16,J,2,2,"div",53),i()()()(),t(17,"div",54)(18,"app-showcode-card",50),d(19,K,1,2,"app-skeleton",51),i()(),t(20,"div",49)(21,"app-showcode-card",50),d(22,Z,1,2,"app-skeleton",51),i()()()()()),a&2&&(n(4),r("titleView",!1)("view",!1),n(),r("ngForOf",s(18,b).constructor(7)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",s(19,b).constructor(7)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",s(20,b).constructor(7)),n(2),r("titleView",!1)("view",!1),n(3),r("ngForOf",s(21,b).constructor(10)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",s(22,b).constructor(7)),n(2),r("titleView",!1)("view",!1),n(),r("ngForOf",s(23,b).constructor(7)))}var Q=class a{constructor(o,e,f,D,te,ie,ne){this.moduleService=o;this.route=e;this.comanFuncation=f;this.logService=D;this.api=te;this.dateService=ie;this.dialog=ne}CURRENCY_SYMBOLS=R;subModule={};submoduleId=0;DetailId;invoiceDetail={};skLoading=!1;customerDetail={};cartDetail=[];logList=[];statusOptions=[{name:"Unpaid"},{name:"Paid"},{name:"Cancel"}];invoiceColumns=[{label:"Product Name"},{label:"Qty",table_class:"text-center"},{label:"Mrp",table_class:"text-right"},{label:"Total Discount",table_class:"text-right"},{label:"Net Amount",table_class:"text-right"}];ngOnInit(){let o=this.moduleService.getSubModuleByName("WCMS","Invoice");o&&(this.submoduleId=o,this.subModule.sub_module_id=o.module_id,this.subModule.title=o.module_name,this.subModule.module_type=o.module_type,console.log(this.submoduleId,"submodule")),this.route.paramMap.subscribe(e=>{this.DetailId=e.get("id"),this.DetailId&&this.getDetail()})}openMainLogModal(o){this.comanFuncation.listLogsModal(this.submoduleId.module_id,o,this.subModule.module_type).subscribe(e=>{e===!0&&this.getDetail()})}getDetail(){this.skLoading=!0,this.api.post({_id:this.DetailId},"complaint-invoice/detail").subscribe(o=>{o.statusCode===200&&(this.skLoading=!1,this.invoiceDetail=o.data,this.cartDetail=o.data.item,this.customerDetail=o.data.customer_details,this.logService.getLogs(this.subModule.sub_module_id,e=>{this.logList=e},this.DetailId?this.DetailId:"",this.subModule.module_type),this.invoiceDetail=this.dateService.formatToDDMMYYYY(this.invoiceDetail))})}updateQuotationStatus(){this.dialog.open(V,{width:"450px",data:{lastPage:"invoice-detail",serviceId:this.DetailId,status:this.invoiceDetail.status,subModule:this.subModule,options:this.statusOptions}}).afterClosed().subscribe(e=>{e===!0&&this.getDetail()})}static \u0275fac=function(e){return new(e||a)(m(L),m(k),m(j),m(B),m(F),m(T),m(N))};static \u0275cmp=h({type:a,selectors:[["app-service-invoice-detail"]],decls:3,vars:6,consts:[[3,"title","title1","activeitem"],["class","grid grid-cols-12 gap-x-6",4,"ngIf"],["class","grid grid-cols-12 sm:gap-x-6",4,"ngIf"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xl:col-span-9","col-span-12"],[1,"box"],[1,"box-header","md:flex","block"],[1,"h5","mb-0","sm:flex","block","items-center"],[1,"sm:ms-2","ms-0","sm:mt-0","mt-2"],[1,"h6","font-medium","mb-0"],[1,"text-primary"],[1,"ms-auto","mt-md-0","mt-2"],["onclick","javascript:window.print();",1,"ti-btn","ti-btn-sm","bg-primarytint1color","text-white","me-1"],[1,"ri-printer-line","ms-1","align-middle","inline-block"],[1,"box-body"],[1,"grid","grid-cols-12","sm:gap-x-6","gap-y-3"],[1,"xl:col-span-12","col-span-12"],[1,"xl:col-span-4","lg:col-span-4","md:col-span-5","sm:col-span-12","col-span-12"],[1,"text-textmuted","dark:text-textmuted/50","mb-2"],[1,"font-bold","mb-1"],[1,"mb-1","text-textmuted","dark:text-textmuted/50"],[1,"xl:col-span-4","lg:col-span-4","md:col-span-2","sm:col-span-12","col-span-12"],[1,"xl:col-span-3","col-span-12"],[1,"font-medium","text-textmuted","dark:text-textmuted/50","mb-1"],[1,"text-[15px]","mb-1"],[1,"table-responsive"],["tableClass","ti-custom-table ti-custom-table-head mt-3 border border-defaultborder dark:border-defaultborder/10",3,"columns","showS_No","showCheckbox"],[4,"ngIf"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],["colspan","4"],["tableClass","table table-sm text-nowrap mb-0 table-borderless",3,"showCheckbox"],[1,"border-b","!border-transparent"],["scope","row"],[1,"mb-0"],[1,"mb-0","font-medium","text-[15px]"],[1,"text-danger"],[1,"mb-0","text-[14px]"],[1,"mb-0","font-medium","text-[1rem]","text-success"],[1,"box-header"],[1,"box-title"],[1,"box-body","pt-0"],[1,"grid","grid-cols-12","gap-y-3"],[1,"text-[14px]","font-medium","mb-4"],[1,"mb-4"],[1,"font-medium","text-textmuted","dark:text-textmuted/50","text-xs"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[1,"text-center"],[1,"text-right"],[1,"grid","grid-cols-12","sm:gap-x-6"],[1,"xl:col-span-4","col-span-12"],[3,"titleView","view"],[3,"class",4,"ngFor","ngForOf"],[1,"flex","gap-2","mb-1","flex-wrap"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"xl:col-span-8","col-span-12"],[1,"flex","items-center"]],template:function(e,f){e&1&&(c(0,"app-page-header",0),d(1,W,103,27,"div",1)(2,ee,23,24,"div",2)),e&2&&(r("title","Invoice")("title1",s(5,q))("activeitem","Invoice Details"),n(),r("ngIf",!f.skLoading),n(),r("ngIf",f.skLoading))},dependencies:[U,C,y,A,O,w,M,Y,P],encapsulation:2})};export{Q as ServiceInvoiceDetailComponent};
