import{a as Yt}from"./chunk-AKNUDX3V.js";import{a as Qt}from"./chunk-SQZ3YN6N.js";import{c as Jt}from"./chunk-CIBZCVJQ.js";import{a as ot}from"./chunk-OTFCGVEU.js";import{a as Y}from"./chunk-CNF4GSI7.js";import{a as Ot}from"./chunk-OEHD5D2Y.js";import{a as Kt}from"./chunk-GLWQGYBC.js";import{a as K}from"./chunk-DC4QM32I.js";import{B as it,C as nt,F as R,c as J,g as qt,n as Zt,o as et,q as jt,r as zt,s as Ht,t as Ut,v as Gt}from"./chunk-VHE3PQ3O.js";import{$ as G,Aa as It,B as I,C as Z,D as j,E as bt,Ea as Bt,F as ht,G as z,Ga as X,H,M as Mt,Oa as $,P as Lt,Pa as tt,Qa as Dt,R as yt,S as wt,T as St,Ta as Rt,U as Tt,Ua as Ft,V as Et,W as U,X as Vt,Ya as Wt,Z as B,Za as Nt,_ as se,hb as D,o as vt,oa as kt,ua as Pt,va as At,w as A,wa as Q,y as xt,z as q}from"./chunk-GYDYF5F3.js";import{e as Ct,f as N,g as O,t as P}from"./chunk-PD5VTTIY.js";import{Aa as _,Ba as m,Bc as gt,Hb as k,Lc as x,Mc as u,Nc as w,Ob as p,Oc as st,Uc as M,Vc as L,Wc as y,Yc as E,Zc as ft,_b as d,bc as W,cc as _t,fc as T,gc as mt,ic as pt,jc as ut,kc as r,lc as a,mc as h,nc as C,oc as v,qc as f,rb as o,sb as b,wc as g,yc as c}from"./chunk-2NSPOFEK.js";import"./chunk-EU2KAMEK.js";import{a as ct,b as dt,g as re}from"./chunk-66YHNWRR.js";var lt=()=>[];function Ce(i,n){i&1&&(r(0,"div",15),h(1,"app-skeleton"),a())}function ve(i,n){i&1&&(r(0,"div",12)(1,"div",13),p(2,Ce,2,0,"div",14),a()()),i&2&&(o(2),d("ngForOf",E(1,lt).constructor(4)))}function xe(i,n){if(i&1&&(r(0,"mat-option",31),u(1),a()),i&2){let t=n.$implicit;d("value",t.label),o(),w(t.label)}}function be(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function he(i,n){if(i&1&&(r(0,"div",32),p(1,be,2,0,"ng-container",7),a()),i&2){c();let t=x(10);o(),d("ngIf",t.errors==null?null:t.errors.required)}}function Me(i,n){if(i&1&&(r(0,"mat-option",31),u(1),a()),i&2){let t=n.$implicit;d("value",t.label),o(),w(t.label)}}function Le(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function ye(i,n){if(i&1&&(r(0,"div",32),p(1,Le,2,0,"ng-container",7),a()),i&2){c();let t=x(20);o(),d("ngIf",t.errors==null?null:t.errors.required)}}function we(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function Se(i,n){if(i&1&&(r(0,"div",32),p(1,we,2,0,"ng-container",7),a()),i&2){c();let t=x(30);o(),d("ngIf",t.errors==null?null:t.errors.required)}}function Te(i,n){i&1&&h(0,"mat-hint",33)}function Ee(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function Ve(i,n){i&1&&(C(0),u(1,"Enter a valid 6-digit pincode"),v())}function ke(i,n){if(i&1&&(r(0,"div",32),p(1,Ee,2,0,"ng-container",7)(2,Ve,2,0,"ng-container",7),a()),i&2){c();let t=x(39);o(),d("ngIf",t.errors==null?null:t.errors.required),o(),d("ngIf",t.errors.pattern||t.errors.minlength||t.errors.maxlength)}}function Pe(i,n){if(i&1){let t=f();r(0,"form",16,0),g("ngSubmit",function(){_(t);let e=x(1),l=c(2);return m(e.valid&&l.onSubmitPincode())}),r(2,"div",12)(3,"div",17)(4,"label",18),u(5,"State"),r(6,"span",19),u(7,"*"),a()(),r(8,"mat-form-field",20)(9,"mat-select",21,1),y("ngModelChange",function(e){_(t);let l=c(2);return L(l.data.state,e)||(l.data.state=e),m(e)}),g("selectionChange",function(){_(t);let e=c(2);return m(e.getDistrict(e.data.state))}),p(11,xe,2,2,"mat-option",22),a()(),p(12,he,2,1,"div",23),a(),r(13,"div",17)(14,"label",18),u(15,"District"),r(16,"span",19),u(17,"*"),a()(),r(18,"mat-form-field",20)(19,"mat-select",24,2),y("ngModelChange",function(e){_(t);let l=c(2);return L(l.data.district,e)||(l.data.district=e),m(e)}),p(21,Me,2,2,"mat-option",22),a()(),p(22,ye,2,1,"div",23),a(),r(23,"div",17)(24,"label",18),u(25,"City"),r(26,"span",19),u(27,"*"),a()(),r(28,"mat-form-field",20)(29,"input",25,3),y("ngModelChange",function(e){_(t);let l=c(2);return L(l.data.city,e)||(l.data.city=e),m(e)}),a()(),p(31,Se,2,1,"div",23),a(),r(32,"div",17)(33,"label",18),u(34,"Pincode"),r(35,"span",19),u(36,"*"),a()(),r(37,"mat-form-field",20)(38,"input",26,4),y("ngModelChange",function(e){_(t);let l=c(2);return L(l.data.pincode,e)||(l.data.pincode=e),m(e)}),a(),p(40,Te,1,0,"mat-hint",27),a(),p(41,ke,3,2,"div",23),a(),r(42,"div",28)(43,"app-button",29),g("buttonClick",function(){_(t);let e=c(2);return m(e.close())}),a(),h(44,"app-button",30),a()()()}if(i&2){let t=x(1),s=x(10),e=x(20),l=x(30),S=x(39),V=c(2);o(9),M("ngModel",V.data.state),o(2),d("ngForOf",V.CommonApiService.statList),o(),d("ngIf",s.touched||t.submitted),o(7),M("ngModel",V.data.district),o(2),d("ngForOf",V.districtList),o(),d("ngIf",e.touched||t.submitted),o(7),M("ngModel",V.data.city),o(2),d("ngIf",l.touched||t.submitted),o(7),M("ngModel",V.data.pincode),o(2),d("ngIf",S.touched||t.submitted),o(),d("ngIf",S.errors),o(2),d("buttonType","button")("buttonClass","ti-btn ti-btn-outline-danger m-0")("label","Cancel"),o(),d("buttonType","submit")("buttonClass","ti-btn ti-btn-primary m-0")("disabled",V.api.disabled)("formType",V.modalData.formType)("iconClass","ri-save-line")("loadingIconClass","ri-loader-2-fill")}}function Ae(i,n){if(i&1&&(C(0),r(1,"div",8)(2,"app-showcode-card",9),p(3,ve,3,2,"div",10)(4,Pe,45,20,"form",11),a()(),v()),i&2){let t=c();o(2),d("title","Pincode")("view",!1),o(),d("ngIf",t.skLoading),o(),d("ngIf",!t.skLoading)}}function Ie(i,n){i&1&&(r(0,"div",15),h(1,"app-skeleton"),a())}function Be(i,n){i&1&&(r(0,"div",12)(1,"div",13),p(2,Ie,2,0,"div",14),a()()),i&2&&(o(2),d("ngForOf",E(1,lt).constructor(2)))}function De(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function Re(i,n){if(i&1&&(r(0,"div",32),p(1,De,2,0,"ng-container",7),a()),i&2){c();let t=x(9);o(),d("ngIf",t.errors==null?null:t.errors.required)}}function Fe(i,n){if(i&1&&(r(0,"mat-option",31),u(1),a()),i&2){let t=n.$implicit;d("value",t.label),o(),w(t.label)}}function We(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function Ne(i,n){if(i&1&&(r(0,"div",32),p(1,We,2,0,"ng-container",7),a()),i&2){c();let t=x(8);o(),d("ngIf",t.errors==null?null:t.errors.required)}}function Oe(i,n){if(i&1){let t=f();C(0),r(1,"div",17)(2,"label",18),u(3,"State"),r(4,"span",19),u(5,"*"),a()(),r(6,"mat-form-field",35)(7,"mat-select",36,1),y("ngModelChange",function(e){_(t);let l=c(3);return L(l.data.state,e)||(l.data.state=e),m(e)}),p(9,Fe,2,2,"mat-option",22),a()(),p(10,Ne,2,1,"div",23),a(),v()}if(i&2){let t=x(8);c();let s=x(1),e=c(2);o(7),M("ngModel",e.data.state),o(2),d("ngForOf",e.CommonApiService.statList),o(),d("ngIf",t.touched||s.submitted)}}function qe(i,n){if(i&1){let t=f();r(0,"form",16,0),g("ngSubmit",function(){_(t);let e=x(1),l=c(2);return m(e.valid&&l.onSubmiZone())}),r(2,"div",17)(3,"label",18),u(4,"Zone Name"),r(5,"span",19),u(6,"*"),a()(),r(7,"mat-form-field",20)(8,"input",34,5),y("ngModelChange",function(e){_(t);let l=c(2);return L(l.data.zone,e)||(l.data.zone=e),m(e)}),a()(),p(10,Re,2,1,"div",23),a(),p(11,Oe,11,3,"ng-container",7),r(12,"div",28)(13,"app-button",29),g("buttonClick",function(){_(t);let e=c(2);return m(e.close())}),a(),h(14,"app-button",30),a()()}if(i&2){let t=x(1),s=x(9),e=c(2);o(8),M("ngModel",e.data.zone),o(2),d("ngIf",s.touched||t.submitted),o(),d("ngIf",e.modalData.formType==="edit"),o(2),d("buttonType","button")("buttonClass","ti-btn ti-btn-outline-danger m-0")("label","Cancel"),o(),d("buttonType","submit")("buttonClass","ti-btn ti-btn-primary m-0")("disabled",e.api.disabled)("formType",e.modalData.formType)("iconClass","ri-save-line")("loadingIconClass","ri-loader-2-fill")}}function Ze(i,n){if(i&1&&(C(0),r(1,"div",8)(2,"app-showcode-card",9),p(3,Be,3,2,"div",10),r(4,"div",12),p(5,qe,15,12,"form",11),a()()(),v()),i&2){let t=c();o(2),d("title","Zone")("view",!1),o(),d("ngIf",t.skLoading),o(2),d("ngIf",!t.skLoading)}}function je(i,n){i&1&&(r(0,"div",15),h(1,"app-skeleton"),a())}function ze(i,n){i&1&&(r(0,"div",12)(1,"div",13),p(2,je,2,0,"div",14),a()()),i&2&&(o(2),d("ngForOf",E(1,lt).constructor(3)))}function He(i,n){if(i&1&&(r(0,"mat-option",31),u(1),a()),i&2){let t=n.$implicit;d("value",t.label),o(),w(t.label)}}function Ue(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function Ge(i,n){if(i&1&&(r(0,"div",32),p(1,Ue,2,0,"ng-container",7),a()),i&2){c();let t=x(9);o(),d("ngIf",t.errors==null?null:t.errors.required)}}function Ye(i,n){if(i&1&&(r(0,"mat-option",31),u(1),a()),i&2){let t=n.$implicit;d("value",t.label),o(),w(t.label)}}function Je(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function Ke(i,n){if(i&1&&(r(0,"div",32),p(1,Je,2,0,"ng-container",7),a()),i&2){c();let t=x(19);o(),d("ngIf",t.errors==null?null:t.errors.required)}}function Qe(i,n){i&1&&(C(0),u(1,"This field is required"),v())}function Xe(i,n){if(i&1&&(r(0,"div",32),p(1,Qe,2,0,"ng-container",7),a()),i&2){c();let t=x(29);o(),d("ngIf",t.errors==null?null:t.errors.required)}}function $e(i,n){if(i&1){let t=f();r(0,"form",16,0),g("ngSubmit",function(){_(t);let e=x(1),l=c(2);return m(e.valid&&l.onSubmiBeatCode())}),r(2,"div",17)(3,"label",18),u(4,"State"),r(5,"span",19),u(6,"*"),a()(),r(7,"mat-form-field",20)(8,"mat-select",21,1),y("ngModelChange",function(e){_(t);let l=c(2);return L(l.data.state,e)||(l.data.state=e),m(e)}),g("selectionChange",function(){_(t);let e=c(2);return m(e.getDistrict(e.data.state))}),p(10,He,2,2,"mat-option",22),a()(),p(11,Ge,2,1,"div",23),a(),r(12,"div",17)(13,"label",18),u(14,"District"),r(15,"span",19),u(16,"*"),a()(),r(17,"mat-form-field",20)(18,"mat-select",24,2),y("ngModelChange",function(e){_(t);let l=c(2);return L(l.data.district,e)||(l.data.district=e),m(e)}),p(20,Ye,2,2,"mat-option",22),a()(),p(21,Ke,2,1,"div",23),a(),r(22,"div",17)(23,"label",18),u(24,"Description"),r(25,"span",19),u(26,"*"),a()(),r(27,"mat-form-field",20)(28,"textarea",37,6),y("ngModelChange",function(e){_(t);let l=c(2);return L(l.data.description,e)||(l.data.description=e),m(e)}),a()(),p(30,Xe,2,1,"div",23),a(),r(31,"div",28)(32,"app-button",29),g("buttonClick",function(){_(t);let e=c(2);return m(e.close())}),a(),h(33,"app-button",30),a()()}if(i&2){let t=x(1),s=x(9),e=x(19),l=x(29),S=c(2);o(8),M("ngModel",S.data.state),o(2),d("ngForOf",S.CommonApiService.statList),o(),d("ngIf",s.touched||t.submitted),o(7),M("ngModel",S.data.district),o(2),d("ngForOf",S.districtList),o(),d("ngIf",e.touched||t.submitted),o(7),M("ngModel",S.data.description),o(2),d("ngIf",l.touched||t.submitted),o(2),d("buttonType","button")("buttonClass","ti-btn ti-btn-outline-danger m-0")("label","Cancel"),o(),d("buttonType","submit")("buttonClass","ti-btn ti-btn-primary m-0")("disabled",S.api.disabled)("formType",S.modalData.formType)("iconClass","ri-save-line")("loadingIconClass","ri-loader-2-fill")}}function ti(i,n){if(i&1&&(C(0),r(1,"div",8)(2,"app-showcode-card",9),p(3,ze,3,2,"div",10),r(4,"div",12),p(5,$e,34,17,"form",11),a()()(),v()),i&2){let t=c();o(2),d("title","Beat Route")("view",!1),o(),d("ngIf",t.skLoading),o(2),d("ngIf",!t.skLoading)}}function ei(i,n){if(i&1&&(C(0),h(1,"app-logs",38),v()),i&2){let t=c();o(),d("logList",t.logList)("skLoading",t.skLoading)}}var at=class i{constructor(n,t,s,e,l,S,V,zi){this.modalData=n;this.api=t;this.toastr=s;this.dialogRef=e;this.alert=l;this.logService=S;this.CommonApiService=V;this.moduleService=zi}data={};originalData={};districtList=[];logList=[];skLoading=!1;lastPageRowId="";subModule={};ngOnInit(){let n=this.moduleService.getSubModuleByName("Masters","Location Master");n&&(this.subModule=n),this.modalData.formType==="edit"?(this.CommonApiService.getStates(),this.skLoading=!0,setTimeout(()=>{let t={};this.modalData.lastPage==="Pincode"?t=this.modalData.formData?{state:this.modalData.formData.state,district:this.modalData.formData.district,city:this.modalData.formData.city,pincode:this.modalData.formData.pincode,_id:this.modalData.formData._id}:{}:this.modalData.lastPage==="Zone"?t=this.modalData.formData?{zone:this.modalData.formData.zone,state:this.modalData.formData.state,_id:this.modalData.formData._id}:{}:this.modalData.lastPage==="Beat Route"&&(t=this.modalData.formData?{state:this.modalData.formData.state,district:this.modalData.formData.district,description:this.modalData.formData.description,_id:this.modalData.formData._id}:{}),this.data=t,this.originalData=this.modalData.formData,this.data.state&&(this.modalData.lastPage==="Pincode"||this.modalData.lastPage==="Beat Route")&&this.getDistrict(this.data.state),this.skLoading=!1},500)):(this.CommonApiService.getStates(),this.data={},this.skLoading=!1),this.modalData.lastPage==="logs"&&(this.lastPageRowId=this.modalData.formData._id,this.logService.getLogs(this.subModule.module_id,t=>{this.logList=t},this.lastPageRowId?this.lastPageRowId:"",this.subModule.module_type))}close(){this.dialogRef.close()}getDistrict(n){this.api.post({state:n},"postal-code/districts").subscribe(t=>{t.statusCode==200&&(this.districtList=t.data)})}onSubmitPincode(){this.api.disabled=!0;let n=this.modalData.formType==="edit",t=n?"postal-code/update":"postal-code/create",s=n?"patch":"post";this.api[s](this.data,t).subscribe(e=>{e.statusCode===200&&(this.api.disabled=!1,this.logService.logActivityOnUpdate(n,this.originalData,this.data,this.subModule.module_id,this.subModule.title,"update",this.data._id||null,()=>{},this.subModule.module_type),this.toastr.success(e.message,"","toast-top-right"),this.dialogRef.close(!0))})}onSubmiZone(){this.api.disabled=!0;let n=this.modalData.formType==="edit",t=n?"zone-master/update":"zone-master/create",s=n?"patch":"post";this.api[s](this.data,t).subscribe(e=>{e.statusCode===200?(this.api.disabled=!1,this.logService.logActivityOnUpdate(n,this.originalData,this.data,this.subModule.module_id,this.subModule.title,"update",this.data._id||null,()=>{},this.subModule.module_type),this.toastr.success(e.message,"","toast-top-right"),this.dialogRef.close(!0)):e.statusCode===202&&(this.api.disabled=!1,this.alert.confirm("Are you sure? ",e.message).then(l=>{l.isConfirmed&&(this.data.forcefully=!0,this.data.responseData=e.data,this.onSubmiZone())}))})}onSubmiBeatCode(){this.api.disabled=!0;let n=this.modalData.formType==="edit",t=n?"beat-route/update":"beat-route/create",s=n?"patch":"post";this.api[s](this.data,t).subscribe(e=>{e.statusCode===200&&(this.api.disabled=!1,this.logService.logActivityOnUpdate(n,this.originalData,this.data,this.subModule.module_id,this.subModule.title,"update",this.data._id||null,()=>{},this.subModule.module_type),this.toastr.success(e.message,"","toast-top-right"),this.dialogRef.close(!0))})}static \u0275fac=function(t){return new(t||i)(b(tt),b(B),b(A),b($),b(G),b(ot),b(Y),b(K))};static \u0275cmp=k({type:i,selectors:[["app-location-master-add"]],decls:4,vars:4,consts:[["f","ngForm"],["state","ngModel"],["district","ngModel"],["city","ngModel"],["pincode","ngModel"],["zone","ngModel"],["description","ngModel"],[4,"ngIf"],[1,"xl:col-span-12","col-span-12"],[3,"title","view"],["class","xxl:col-span-8 xl:col-span-12 lg:col-span-12 md:col-span-6 col-span-12",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"xxl:col-span-8","xl:col-span-12","lg:col-span-12","md:col-span-6","col-span-12"],[1,"grid","grid-cols-12","gap-4","mt-0"],["class","md:col-span-12 col-span-12",4,"ngFor","ngForOf"],[1,"md:col-span-12","col-span-12"],[3,"ngSubmit"],[1,"mt-2"],[1,"form-label"],[1,"text-red-500"],[1,"mat-custom-field","remove-space"],["placeholder","Select an option","name","state","required","",3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","mt-1 text-xs text-red-500 text-right",4,"ngIf"],["placeholder","Select an option","name","district","required","",3,"ngModelChange","ngModel"],["matInput","","placeholder","Type Here ...","name","city","pattern","^[^\\s].*","required","",3,"ngModelChange","ngModel"],["type","text","matInput","","placeholder","Type Here ...","name","pincode","pattern","^[0-9]{6}$","minlength","6","maxlength","6","required","",3,"ngModelChange","ngModel"],["align","end",4,"ngIf"],[1,"flex","items-center","justify-end","mt-10","gap-2"],[3,"buttonClick","buttonType","buttonClass","label"],[3,"buttonType","buttonClass","disabled","formType","iconClass","loadingIconClass"],[3,"value"],[1,"mt-1","text-xs","text-red-500","text-right"],["align","end"],["matInput","","placeholder","Type Here ...","name","zone","pattern","^[^\\s].*","required","",3,"ngModelChange","ngModel"],[1,"mat-custom-field","multiple","remove-space"],["placeholder","Select an option","name","state","multiple","","required","",3,"ngModelChange","ngModel"],["matInput","","placeholder","Type Here ...","name","description","required","",3,"ngModelChange","ngModel"],[3,"logList","skLoading"]],template:function(t,s){t&1&&p(0,Ae,5,4,"ng-container",7)(1,Ze,6,4,"ng-container",7)(2,ti,6,4,"ng-container",7)(3,ei,2,2,"ng-container",7),t&2&&(d("ngIf",s.modalData.lastPage==="Pincode"),o(),d("ngIf",s.modalData.lastPage==="Zone"),o(),d("ngIf",s.modalData.lastPage==="Beat Route"),o(),d("ngIf",s.modalData.lastPage==="logs"))},dependencies:[R,N,O,H,q,I,Z,yt,wt,St,Tt,z,bt,J,nt,Ut,D,kt,X,Q,Pt,Wt,P,Zt,it,U],encapsulation:2})};var ae=re(se());var rt=class i{constructor(n,t,s,e,l,S,V){this.modalData=n;this.dialogRef=t;this.api=s;this.fb=e;this.formValidation=l;this.toastr=S;this.CommonApiService=V}statusForm=new j({});ngOnInit(){this.CommonApiService.getUserData(),this.statusForm=this.fb.group({user_id:["",et.required]})}onSearch(n,t){t==="user"&&this.CommonApiService.getUserData([vt.FIELD_USER],n)}onSubmitAssigning(){if(this.statusForm.invalid){this.statusForm.markAllAsTouched();return}let n=dt(ct({},this.statusForm.value),{beat_route_code:this.modalData.selectedRows});this.api.disabled=!0,this.api.patch(n,"beat-route/assign-beat").subscribe(t=>{t.statusCode===200&&(this.api.disabled=!1,this.toastr.success(t.message,"","toast-top-right"),this.dialogRef.close(!0))})}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||i)(b(tt),b($),b(B),b(Et),b(Gt),b(A),b(Y))};static \u0275cmp=k({type:i,selectors:[["app-beat-route-modal"]],decls:9,vars:13,consts:[[1,"mat-dialoge"],[3,"close","title","closeBtn"],[3,"ngSubmit","formGroup"],[1,"mat-typography","py-1"],[1,"grid","grid-cols-12","sm:gap-x-6"],[1,"xl:col-span-12","col-span-12"],["formControlName","user_id","label","Select User",3,"searchChanged","fieldReq","options","search","multiple"],["align","end",1,"gap-2"],[3,"buttonType","buttonClass","disabled","formType","iconClass","loadingIconClass"]],template:function(t,s){t&1&&(r(0,"div",0)(1,"app-modal-header",1),g("close",function(){return s.close()}),a(),r(2,"form",2),g("ngSubmit",function(){return s.onSubmitAssigning()}),r(3,"mat-dialog-content",3)(4,"div",4)(5,"div",5)(6,"spk-ng-select",6),g("searchChanged",function(l){return s.onSearch(l,"user")}),a()()()(),r(7,"mat-dialog-actions",7),h(8,"app-button",8),a()()()),t&2&&(o(),d("title","Assign Beat Route")("closeBtn",!0),o(),d("formGroup",s.statusForm),o(4),d("fieldReq",!0)("options",s.CommonApiService.userData)("search",!0)("multiple",!0),o(2),d("buttonType","submit")("buttonClass","ti-btn ti-btn-primary m-0")("disabled",s.api.disabled)("formType",s.modalData.formType)("iconClass","ri-save-line")("loadingIconClass","ri-loader-2-fill"))},dependencies:[P,R,H,I,Z,Mt,Lt,qt,nt,zt,D,Ft,Rt],encapsulation:2})};var ii=()=>["Location Master"],ni=i=>({active:i}),F=()=>[];function oi(i,n){if(i&1){let t=f();r(0,"li",7)(1,"a",9),g("click",function(){let e=_(t).$implicit,l=c();return l.activeTab=e.name,m(l.getNavData(l.activeTab))}),r(2,"div",10)(3,"div",11),h(4,"i"),a(),r(5,"span",12),u(6),a()()(),r(7,"button",13),g("click",function(){let e=_(t).$implicit,l=c();return l.activeTab=e.name,l.getNavData(l.activeTab),m(l.openModal(l.activeTab))}),h(8,"i",14),a()()}if(i&2){let t=n.$implicit,s=c();d("ngClass",ft(6,ni,t.name===s.activeTab)),o(4),_t("",t.icon," text-[1rem]"),o(2),st(" ",t.name," "),o(),gt("matTooltip",t.tooltipLabel)}}function ai(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.state="",m(e.getPincodeMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function ri(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.district="",m(e.getPincodeMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function si(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.city="",m(e.getPincodeMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function li(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.pincode="",m(e.getPincodeMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function ci(i,n){if(i&1){let t=f();r(0,"app-icon-button",30),g("clickEvent",function(){_(t);let e=c().$implicit,l=c(3);return m(l.onUpdate(l.activeTab,e))}),a()}i&2&&d("icon","ri-edit-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-success waves-effect waves-light")}function di(i,n){if(i&1){let t=f();r(0,"app-icon-button",30),g("clickEvent",function(){_(t);let e=c().$implicit,l=c(3);return m(l.onDeleteRow(e._id,"Pincode"))}),a()}i&2&&d("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function _i(i,n){if(i&1){let t=f();r(0,"tr",18)(1,"td",19),u(2),a(),r(3,"td"),u(4),a(),r(5,"td"),u(6),a(),r(7,"td"),u(8),a(),r(9,"td"),u(10),a(),r(11,"td",28)(12,"div",29)(13,"app-icon-button",30),g("clickEvent",function(){let e=_(t).$implicit,l=c(3);return m(l.openModal("logs",e))}),a(),p(14,ci,1,2,"app-icon-button",31)(15,di,1,2,"app-icon-button",31),a()()()}if(i&2){let t=n.$implicit,s=n.index,e=c(3);o(2),w((e.listingPagination.cur_page-1)*e.listingPagination.limit+s+1),o(2),w(t.state||"--"),o(2),w(t.district||"--"),o(2),w(t.city||"--"),o(2),w(t.pincode||"--"),o(3),d("icon","ri-file-list-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),o(),d("ngIf",e.accessRight==null?null:e.accessRight.modifyRight),o(),d("ngIf",e.accessRight==null?null:e.accessRight.deleteRight)}}function mi(i,n){if(i&1&&(C(0),p(1,_i,16,9,"tr",27),v()),i&2){let t=c(2);o(),d("ngForOf",t.pincodeMasterList)("ngForTrackBy",t.trackById)}}function pi(i,n){i&1&&(r(0,"td"),h(1,"app-skeleton"),a()),i&2&&(o(),W("h20 bg-skeleton"))}function ui(i,n){i&1&&(r(0,"tr",18),p(1,pi,2,2,"td",33),a()),i&2&&(o(),d("ngForOf",E(1,F).constructor(6)))}function gi(i,n){i&1&&(C(0),p(1,ui,2,2,"tr",32),v()),i&2&&(o(),d("ngForOf",E(1,F).constructor(5)))}function fi(i,n){i&1&&(C(0),h(1,"app-data-not-found"),v())}function Ci(i,n){if(i&1){let t=f();r(0,"div",1)(1,"div",3)(2,"app-showcode-card",15),g("refresh",function(e){_(t);let l=c();return m(l.onRefresh(e))}),r(3,"div",16)(4,"spk-reusable-tables",17)(5,"tr",18)(6,"td",19),u(7,"\xA0"),a(),r(8,"td",19)(9,"div",20)(10,"mat-form-field",21)(11,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.state,e)||(l.filter.state=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getPincodeMaster())}),a(),p(12,ai,3,0,"button",23),a()()(),r(13,"td",19)(14,"div",20)(15,"mat-form-field",21)(16,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.district,e)||(l.filter.district=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getPincodeMaster())}),a(),p(17,ri,3,0,"button",23),a()()(),r(18,"td",19)(19,"div",20)(20,"mat-form-field",21)(21,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.city,e)||(l.filter.city=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getPincodeMaster())}),a(),p(22,si,3,0,"button",23),a()()(),r(23,"td",19)(24,"div",20)(25,"mat-form-field",21)(26,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.pincode,e)||(l.filter.pincode=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getPincodeMaster())}),a(),p(27,li,3,0,"button",23),a()()(),h(28,"td"),a(),p(29,mi,2,2,"ng-container",24)(30,gi,2,2,"ng-container",24),a(),p(31,fi,2,0,"ng-container",24),a(),r(32,"app-pagination-footer",25),g("preButtonClick",function(){_(t);let e=c();return m(e.changeToPagination("Previous"))})("nextButtonClick",function(){_(t);let e=c();return m(e.changeToPagination("Next"))})("pageChange",function(e){_(t);let l=c();return m(l.changeToPage(e))}),a()()()()}if(i&2){let t=c();o(2),W("pb-0 pt-0"),d("title","Pincode")("classbody","pt-0")("titleView",!0)("view",!1)("refresBtnShow",!0)("overallCountShow",!0)("overallCount",t.listingPagination.total)("activeTab","Pincode"),o(2),d("tableHead","border-b")("tableHeadColumn","!text-center")("tableHeight","630px")("showCheckbox",!1)("columns",t.listColumns),o(7),M("ngModel",t.filter.state),o(),T(t.filter.state?12:-1),o(4),M("ngModel",t.filter.district),o(),T(t.filter.district?17:-1),o(4),M("ngModel",t.filter.city),o(),T(t.filter.city?22:-1),o(4),M("ngModel",t.filter.pincode),o(),T(t.filter.pincode?27:-1),o(2),d("ngIf",!t.skLoading),o(),d("ngIf",t.skLoading),o(),d("ngIf",!t.pincodeMasterList.length&&!t.skLoading),o(),d("currentPage",t.listingPagination.cur_page)("totalPage",t.listingPagination.total_pages)("pageLimit",t.listingPagination.limit)("preBtn",!t.listingPagination.prev)("nextBtn",!t.listingPagination.next)}}function vi(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.zone="",m(e.getZoneMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function xi(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.state="",m(e.getZoneMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function bi(i,n){if(i&1&&(r(0,"span",43),u(1),a()),i&2){let t=n.$implicit;o(),w(t)}}function hi(i,n){if(i&1&&(r(0,"div",41),p(1,bi,2,1,"span",42),a()),i&2){let t=c().$implicit;o(),d("ngForOf",t.state)}}function Mi(i,n){if(i&1){let t=f();r(0,"app-icon-button",30),g("clickEvent",function(){_(t);let e=c().$implicit,l=c(3);return m(l.onUpdate(l.activeTab,e))}),a()}i&2&&d("icon","ri-edit-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-success waves-effect waves-light")}function Li(i,n){if(i&1){let t=f();r(0,"app-icon-button",30),g("clickEvent",function(){_(t);let e=c().$implicit,l=c(3);return m(l.onDeleteRow(e._id,"Zone"))}),a()}i&2&&d("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}function yi(i,n){if(i&1){let t=f();r(0,"tr",18)(1,"td",37),u(2),a(),r(3,"td",38),u(4),a(),r(5,"td"),p(6,hi,2,1,"div",39),a(),r(7,"td",40)(8,"div",29)(9,"app-icon-button",30),g("clickEvent",function(){let e=_(t).$implicit,l=c(3);return m(l.openModal("logs",e))}),a(),p(10,Mi,1,2,"app-icon-button",31)(11,Li,1,2,"app-icon-button",31),a()()()}if(i&2){let t=n.$implicit,s=n.index,e=c(3);o(2),w((e.listingPagination.cur_page-1)*e.listingPagination.limit+s+1),o(2),w(t.zone||"--"),o(2),d("ngIf",t.state),o(3),d("icon","ri-file-list-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),o(),d("ngIf",e.accessRight==null?null:e.accessRight.modifyRight),o(),d("ngIf",e.accessRight==null?null:e.accessRight.deleteRight)}}function wi(i,n){if(i&1&&(C(0),p(1,yi,12,7,"tr",27),v()),i&2){let t=c(2);o(),d("ngForOf",t.zoneMasterList)("ngForTrackBy",t.trackById)}}function Si(i,n){i&1&&(r(0,"td"),h(1,"app-skeleton"),a()),i&2&&(o(),W("h20 bg-skeleton"))}function Ti(i,n){i&1&&(r(0,"tr",18),p(1,Si,2,2,"td",33),a()),i&2&&(o(),d("ngForOf",E(1,F).constructor(4)))}function Ei(i,n){i&1&&(C(0),p(1,Ti,2,2,"tr",32),v()),i&2&&(o(),d("ngForOf",E(1,F).constructor(8)))}function Vi(i,n){i&1&&(C(0),h(1,"app-data-not-found"),v())}function ki(i,n){if(i&1){let t=f();r(0,"div",1)(1,"div",3)(2,"app-showcode-card",34),g("refresh",function(e){_(t);let l=c();return m(l.onRefresh(e))}),r(3,"div",16)(4,"spk-reusable-tables",17)(5,"tr",35)(6,"td",19),u(7,"\xA0"),a(),r(8,"td",19)(9,"div",20)(10,"mat-form-field",21)(11,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.zone,e)||(l.filter.zone=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getZoneMaster())}),a(),p(12,vi,3,0,"button",23),a()()(),r(13,"td",19)(14,"div",20)(15,"mat-form-field",21)(16,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.state,e)||(l.filter.state=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getZoneMaster())}),a(),p(17,xi,3,0,"button",23),a()()(),r(18,"td"),u(19,"\xA0"),a()(),p(20,wi,2,2,"ng-container",24)(21,Ei,2,2,"ng-container",24),a(),p(22,Vi,2,0,"ng-container",24),a(),r(23,"app-pagination-footer",36),g("preButtonClick",function(){_(t);let e=c();return m(e.changeToPagination("Previous"))})("nextButtonClick",function(){_(t);let e=c();return m(e.changeToPagination("Next"))})("pageChange",function(e){_(t);let l=c();return m(l.changeToPage(e))}),a()()()()}if(i&2){let t=c();o(2),d("title","Zone")("view",!1)("refresBtnShow",!0)("overallCountShow",!0)("overallCount",t.listingPagination.total)("activeTab","Zone"),o(2),d("tableHead","border-b")("tableHeadColumn","!text-center")("tableHeight","630px")("showCheckbox",!1)("columns",t.zoneColumns),o(7),M("ngModel",t.filter.zone),o(),T(t.filter.zone?12:-1),o(4),M("ngModel",t.filter.state),o(),T(t.filter.state?17:-1),o(3),d("ngIf",!t.skLoading),o(),d("ngIf",t.skLoading),o(),d("ngIf",!t.zoneMasterList.length&&!t.skLoading),o(),d("currentPage",t.listingPagination.cur_page)("totalPage",t.listingPagination.total_pages)("pageLimit",t.listingPagination.limit)("listLength",t.pincodeMasterList.length)("preBtn",!t.listingPagination.prev)("nextBtn",!t.listingPagination.next)}}function Pi(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.state="",m(e.getBeatRouteMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function Ai(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.district="",m(e.getBeatRouteMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function Ii(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.beat_route_code="",m(e.getBeatRouteMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function Bi(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.name="",m(e.getBeatRouteMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function Di(i,n){if(i&1){let t=f();r(0,"button",26),g("click",function(){_(t);let e=c(2);return e.filter.description="",m(e.getBeatRouteMaster())}),r(1,"mat-icon"),u(2,"close"),a()()}}function Ri(i,n){if(i&1){let t=f();r(0,"span",50),u(1),r(2,"span",51),g("click",function(){let e=_(t).$implicit,l=c().$implicit,S=c(3);return m(S.onRemoveAssigning(l,e._id))}),h(3,"i",52),a()()}if(i&2){let t=n.$implicit;o(),st(" ",t.name," ")}}function Fi(i,n){if(i&1){let t=f();r(0,"tr",18)(1,"td",46)(2,"input",47),y("ngModelChange",function(e){let l=_(t).$implicit;return L(l.checked,e)||(l.checked=e),m(e)}),g("change",function(){_(t);let e=c(3);return m(e.toggleRowChecked())}),a()(),r(3,"td",19),u(4),a(),r(5,"td"),u(6),a(),r(7,"td"),u(8),a(),r(9,"td"),u(10),a(),r(11,"td")(12,"div",41),p(13,Ri,4,1,"span",48),a()(),r(14,"td"),u(15),a(),r(16,"td",49)(17,"div",29)(18,"app-icon-button",30),g("clickEvent",function(){let e=_(t).$implicit,l=c(3);return m(l.openModal("logs",e))}),a(),r(19,"app-icon-button",30),g("clickEvent",function(){let e=_(t).$implicit,l=c(3);return m(l.onUpdate(l.activeTab,e))}),a(),r(20,"app-icon-button",30),g("clickEvent",function(){let e=_(t).$implicit,l=c(3);return m(l.onDeleteRow(e._id,"Beat Route"))}),a()()()()}if(i&2){let t=n.$implicit,s=n.index,e=c(3);o(2),M("ngModel",t.checked),o(2),w((e.listingPagination.cur_page-1)*e.listingPagination.limit+s+1),o(2),w(t.state||"--"),o(2),w(t.district||"--"),o(2),w(t.beat_route_code||"--"),o(3),d("ngForOf",t==null?null:t.assigned_users),o(2),w(t.description||"--"),o(3),d("icon","ri-file-list-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-primary waves-effect waves-light"),o(),d("icon","ri-edit-line")("buttonClass","ti-btn btn-wave  ti-btn-sm ti-btn-soft-success waves-effect waves-light"),o(),d("icon","ri-delete-bin-line")("buttonClass","ti-btn btn-wave product-btn ti-btn-sm ti-btn-soft-danger waves-effect waves-light")}}function Wi(i,n){if(i&1&&(C(0),p(1,Fi,21,13,"tr",27),v()),i&2){let t=c(2);o(),d("ngForOf",t.beatRouteMasterList)("ngForTrackBy",t.trackById)}}function Ni(i,n){i&1&&(r(0,"td"),h(1,"app-skeleton"),a()),i&2&&(o(),W("h20 bg-skeleton"))}function Oi(i,n){i&1&&(r(0,"tr",18),p(1,Ni,2,2,"td",33),a()),i&2&&(o(),d("ngForOf",E(1,F).constructor(8)))}function qi(i,n){i&1&&(C(0),p(1,Oi,2,2,"tr",32),v()),i&2&&(o(),d("ngForOf",E(1,F).constructor(8)))}function Zi(i,n){i&1&&(C(0),h(1,"app-data-not-found"),v())}function ji(i,n){if(i&1){let t=f();r(0,"div",1)(1,"div",3)(2,"app-showcode-card",44),g("refresh",function(e){_(t);let l=c();return m(l.onRefresh(e))})("btnClick",function(){_(t);let e=c();return m(e.onAssignTeam())}),r(3,"div",16)(4,"spk-reusable-tables",45)(5,"tr",35)(6,"td"),u(7,"\xA0"),a(),r(8,"td"),u(9,"\xA0"),a(),r(10,"td")(11,"div",20)(12,"mat-form-field",21)(13,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.state,e)||(l.filter.state=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getBeatRouteMaster())}),a(),p(14,Pi,3,0,"button",23),a()()(),r(15,"td")(16,"div",20)(17,"mat-form-field",21)(18,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.district,e)||(l.filter.district=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getBeatRouteMaster())}),a(),p(19,Ai,3,0,"button",23),a()()(),r(20,"td")(21,"div",20)(22,"mat-form-field",21)(23,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.beat_route_code,e)||(l.filter.beat_route_code=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getBeatRouteMaster())}),a(),p(24,Ii,3,0,"button",23),a()()(),r(25,"td")(26,"div",20)(27,"mat-form-field",21)(28,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.name,e)||(l.filter.name=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getBeatRouteMaster())}),a(),p(29,Bi,3,0,"button",23),a()()(),r(30,"td")(31,"div",20)(32,"mat-form-field",21)(33,"input",22),y("ngModelChange",function(e){_(t);let l=c();return L(l.filter.description,e)||(l.filter.description=e),m(e)}),g("keyup.enter",function(){_(t);let e=c();return m(e.getBeatRouteMaster())}),a(),p(34,Di,3,0,"button",23),a()()(),r(35,"td"),u(36,"\xA0"),a()(),p(37,Wi,2,2,"ng-container",24)(38,qi,2,2,"ng-container",24),a(),p(39,Zi,2,0,"ng-container",24),a(),r(40,"app-pagination-footer",36),g("preButtonClick",function(){_(t);let e=c();return m(e.changeToPagination("Previous"))})("nextButtonClick",function(){_(t);let e=c();return m(e.changeToPagination("Next"))})("pageChange",function(e){_(t);let l=c();return m(l.changeToPage(e))}),a()()()()}if(i&2){let t=c();o(2),d("title","Beat Route")("boxHeader","pb-0 pt-0")("classbody","pt-0")("titleView",!0)("view",!1)("refresBtnShow",!0)("overallCountShow",!0)("overallCount",t.listingPagination.total)("activeTab","Beat Route")("btn1",t.showChangeStatusBtn)("iconName","ri-file-list-line")("buttonName","Assign User"),o(2),d("tableHead","border-b")("tableHeight","630px")("showCheckbox",!1)("columns",t.beatRouteColumns),o(9),M("ngModel",t.filter.state),o(),T(t.filter.state?14:-1),o(4),M("ngModel",t.filter.district),o(),T(t.filter.district?19:-1),o(4),M("ngModel",t.filter.beat_route_code),o(),T(t.filter.beat_route_code?24:-1),o(4),M("ngModel",t.filter.name),o(),T(t.filter.name?29:-1),o(4),M("ngModel",t.filter.description),o(),T(t.filter.description?34:-1),o(3),d("ngIf",!t.skLoading),o(),d("ngIf",t.skLoading),o(),d("ngIf",!t.beatRouteMasterList.length&&!t.skLoading),o(),d("currentPage",t.listingPagination.cur_page)("totalPage",t.listingPagination.total_pages)("pageLimit",t.listingPagination.limit)("listLength",t.pincodeMasterList.length)("preBtn",!t.listingPagination.prev)("nextBtn",!t.listingPagination.next)}}var oe=class i{constructor(n,t,s,e,l,S,V){this.dialog=n;this.api=t;this.alert=s;this.logService=e;this.comanFuncation=l;this.moduleService=S;this.toastr=V}activeTab="Pincode";skLoading=!1;pincodeMasterList=[];zoneMasterList=[];beatRouteMasterList=[];listingPagination={};filter={};accessRight={};subModule={};fileNavItems=[{name:"Pincode",icon:"ri-map-pin-line",active:!0,tooltipLabel:"Add Pincode"},{name:"Zone",icon:"ri-global-line",tooltipLabel:"Add Zone"},{name:"Beat Route",icon:"ri-road-map-line",tooltipLabel:"Add Beat Route"}];ngOnInit(){let n=this.moduleService.getAccessMap("Masters","Location Master");n&&(this.accessRight=n);let t=this.moduleService.getSubModuleByName("Masters","Location Master");t&&(this.subModule=t),this.getPincodeMaster()}onRefresh(n){this.filter={},n=="Pincode"&&this.getPincodeMaster(),n=="Zone"&&this.getZoneMaster(),n=="Beat Route"&&this.getBeatRouteMaster()}getNavData(n){this.filter={},this.page=1,this.listingPagination.cur_page=1,n=="Pincode"&&this.getPincodeMaster(),n=="Zone"&&this.getZoneMaster(),n=="Beat Route"&&this.getBeatRouteMaster()}form=new j({editorLocation:new ht({value:Yt,disabled:!1},et.required())});trackById(n,t){return t.id}listColumns=[{label:"S.No",field:"S.No"},{label:"State",field:"State"},{label:"District",field:"District"},{label:"City",field:"City"},{label:"Pincode",field:"Pincode"},{label:"Action",field:"Action"}];getPincodeMaster(){let n=this.listingPagination.cur_page;this.skLoading=!0,this.api.post({filters:this.filter,page:n},"postal-code/read").subscribe(t=>{t.statusCode==200&&(this.skLoading=!1,this.pincodeMasterList=t.data,this.listingPagination=t.pagination)})}onDeleteRow(n,t){this.alert.confirm("Are you sure?").then(s=>{if(s.isConfirmed){let e="";switch(t){case"Pincode":e="postal-code/delete";break;case"Zone":e="zone-master/delete";break;case"Beat Route":e="beat-route/delete";break;default:return}this.api.patch({_id:n,is_delete:1},e).subscribe(l=>{l.statusCode===200&&(this.logService.logActivityOnDelete(this.subModule.module_id,this.subModule.title,"delete",n,t,this.subModule.module_type),ae.default.fire("Deleted!",l.message,"success"),t=="Pincode"&&this.getPincodeMaster(),t=="Zone"&&this.getPincodeMaster(),t=="Beat Route"&&this.getBeatRouteMaster())})}})}onUpdate(n,t){this.openModal(n,t)}openModal(n,t){this.dialog.open(at,{width:"350px",panelClass:"mat-right-modal",position:{right:"0px"},data:{lastPage:n,formType:t?"edit":"create",formData:t||{}}}).afterClosed().subscribe(e=>{e===!0&&(n=="Pincode"&&this.getPincodeMaster(),n=="Zone"&&this.getZoneMaster(),n=="Beat Route"&&this.getBeatRouteMaster())})}page=1;changeToPage(n){this.listingPagination.cur_page=n,this.getPincodeMaster()}changeToPagination(n){n==="Next"&&this.listingPagination.cur_page<this.listingPagination.total_pages?this.listingPagination.cur_page++:n==="Previous"&&this.listingPagination.cur_page>1&&this.listingPagination.cur_page--,this.getPincodeMaster()}zoneColumns=[{label:"S.No",field:"S.No"},{label:"Zone",field:"Zone"},{label:"State",field:"State"},{label:"Action",field:"Action"}];getZoneMaster(){let n=this.listingPagination.cur_page;this.skLoading=!0,this.filter.state&&!Array.isArray(this.filter.state)&&(this.filter.state=[this.filter.state]),this.api.post({filters:this.filter,page:n},"zone-master/read").subscribe(t=>{t.statusCode==200&&(this.skLoading=!1,this.zoneMasterList=t.data,this.listingPagination=t.pagination)})}beatRouteColumns=[{label:""},{label:"S.No",table_class:"text-center"},{label:"State"},{label:"District"},{label:"Beat Code"},{label:"Users"},{label:"Description"},{label:"Action"}];sampleUsers=[{label:"Admin"},{label:"Manager"},{label:"Field User"},{label:"Support Staff"},{label:"Viewer"}];getBeatRouteMaster(){let n=this.listingPagination.cur_page;this.skLoading=!0,this.filter.state&&!Array.isArray(this.filter.state)&&(this.filter.state=[this.filter.state]),this.api.post({filters:this.filter,page:n},"beat-route/read").subscribe(t=>{t.statusCode==200&&(this.skLoading=!1,this.beatRouteMasterList=t.data,this.listingPagination=t.pagination)})}showChangeStatusBtn=!1;toggleRowChecked(){this.showChangeStatusBtn=this.beatRouteMasterList.some(n=>n.checked)}onAssignTeam(){let n=this.beatRouteMasterList.filter(s=>s.checked).map(s=>s.beat_route_code);if(n.length===0){this.toastr.error("Please select at least one row.","","toast-top-right");return}this.dialog.open(rt,{width:"400px",data:{selectedRows:n}}).afterClosed().subscribe(s=>{s===!0&&(this.showChangeStatusBtn=!1,this.getBeatRouteMaster())})}onRemoveAssigning(n,t){this.alert.confirm("Are you sure?","You want to remove this assigning ","Yes it!").then(s=>{s.isConfirmed&&this.api.patch({beat_route_code:n.beat_route_code,user_id:t},"beat-route/unassign-beat").subscribe(e=>{e.statusCode===200&&(this.logService.logActivityOnDelete(this.subModule.module_id,this.subModule.title,"delete",n._id,"Unassign User",this.subModule.module_type),this.getBeatRouteMaster(),this.toastr.success(e.message,"","toast-top-right"))})})}openMainLogModal(n){this.comanFuncation.listLogsModal(this.subModule.module_id,n,this.subModule.module_type).subscribe(t=>{t===!0&&(this.activeTab=="Pincode"&&this.getPincodeMaster(),this.activeTab=="Zone"&&this.getZoneMaster(),this.activeTab=="Beat Route"&&this.getBeatRouteMaster())})}static \u0275fac=function(t){return new(t||i)(b(Dt),b(B),b(G),b(ot),b(Jt),b(K),b(A))};static \u0275cmp=k({type:i,selectors:[["app-location-master-list"]],decls:14,vars:7,consts:[[3,"title","title1","activeitem"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xxl:col-span-12","col-span-12"],[1,"xl:col-span-12","col-span-12"],[1,"box"],[1,"box-body","px-2","py-2"],["id","files-main-nav",1,"list-none","files-main-nav","flex","items-center"],[1,"files-type","flex","items-center","justify-between","py-1",3,"ngClass"],["class","grid grid-cols-12 gap-x-6",4,"ngIf"],[3,"click"],[1,"flex","items-center"],[1,"me-2"],[1,"flex-auto","text-nowrap"],[1,"ti-btn","ti-btn-sm","ti-btn-icon","ti-btn-soft-primary","ml-2",3,"click","matTooltip"],[1,"ri-add-line","leading-none","align-middle"],[3,"refresh","title","classbody","titleView","view","refresBtnShow","overallCountShow","overallCount","activeTab"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-hover ti-head-primary",3,"tableHead","tableHeadColumn","tableHeight","showCheckbox","columns"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","preBtn","nextBtn"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf","ngForTrackBy"],[1,"w140","relative"],[1,"flex","flex-row","items-center","!gap-2","text-[0.9375rem]"],[3,"clickEvent","icon","buttonClass"],[3,"icon","buttonClass","clickEvent",4,"ngIf"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"refresh","title","view","refresBtnShow","overallCountShow","overallCount","activeTab"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10","td-p-x-10"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[1,"w60","!text-center"],[1,"w140"],["class","flex flex-wrap",4,"ngIf"],[1,"w150","relative"],[1,"flex","flex-wrap"],["class","badge bg-light text-textmuted dark:text-textmuted/50 m-1 border border-defaultborder dark:border-defaultborder/10",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-textmuted","dark:text-textmuted/50","m-1","border","border-defaultborder","dark:border-defaultborder/10"],[3,"refresh","btnClick","title","boxHeader","classbody","titleView","view","refresBtnShow","overallCountShow","overallCount","activeTab","btn1","iconName","buttonName"],["tableClass","ti-custom-table ti-custom-table-hover ti-head-primary",3,"tableHead","tableHeight","showCheckbox","columns"],[1,"task-checkbox"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["class","badge bg-primary/10 text-primary m-1 border border-defaultborder dark:border-defaultborder/10 ng-star-inserted p-1",4,"ngFor","ngForOf"],[1,"relative"],[1,"badge","bg-primary/10","text-primary","m-1","border","border-defaultborder","dark:border-defaultborder/10","ng-star-inserted","p-1"],["matTooltip","Remove User",1,"cursor-pointer",3,"click"],[1,"ri-close-line"]],template:function(t,s){t&1&&(h(0,"app-page-header",0),r(1,"div",1)(2,"div",2)(3,"div",1)(4,"div",3)(5,"div",4)(6,"div",5)(7,"ul",6),pt(8,oi,9,8,"li",7,mt),a()()()()()(),r(10,"div",2),p(11,Ci,33,31,"div",8)(12,ki,24,24,"div",8)(13,ji,41,35,"div",8),a()()),t&2&&(d("title","Master")("title1",E(6,ii))("activeitem","Location Master"),o(8),ut(s.fileNavItems),o(3),d("ngIf",s.activeTab==="Pincode"),o(),d("ngIf",s.activeTab==="Zone"),o(),d("ngIf",s.activeTab==="Beat Route"))},dependencies:[R,Ct,N,O,q,xt,I,z,Kt,J,Ht,jt,Qt,Nt,Vt,P,Ot,U,it,D,It,Bt,X,Q,At],encapsulation:2})};export{oe as LocationMasterListComponent};
