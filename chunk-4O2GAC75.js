import{a as de}from"./chunk-J4NDCUAB.js";import{b as me,c as pe}from"./chunk-CIBZCVJQ.js";import{a as ae}from"./chunk-OEHD5D2Y.js";import{a as fe}from"./chunk-GLWQGYBC.js";import{a as ge}from"./chunk-DC4QM32I.js";import{F as _e,c as X,q as se,s as le,u as ce}from"./chunk-VHE3PQ3O.js";import{Aa as $,B as z,Ea as ee,G as J,Ga as te,Ha as ie,Ia as ne,Ja as re,Z as U,hb as oe,va as Y,wa as Z,z as Q}from"./chunk-GYDYF5F3.js";import{K,M as q,Q as G,e as H,f as A,g as N,n as O,o as j}from"./chunk-PD5VTTIY.js";import{$c as D,Aa as _,Ba as m,Hb as B,Lc as E,Mc as p,Nc as C,Ob as g,Oc as L,Uc as h,Vc as b,Wc as x,Yc as V,Zc as W,_b as u,ac as R,bc as M,ed as w,fc as y,fd as I,gd as P,kc as o,lc as r,mc as T,nc as k,oc as v,qc as f,rb as s,sb as S,wc as d,yc as l,za as F}from"./chunk-2NSPOFEK.js";var He=(a,n,t)=>({name:a,label:n,icon:t}),Ae=a=>[a],Ce=()=>[];function Ne(a,n){if(a&1){let t=f();o(0,"app-listing-tab",12),d("tabChange",function(e){_(t);let c=l();return m(c.onTabChange(e.tab))}),r()}if(a&2){let t=n.$implicit,i=l();u("tabs",W(7,Ae,D(3,He,t.name,t.label,t.icon)))("activeTab",i.activeTab)("countShow",!1)}}function Oe(a,n){if(a&1){let t=f();o(0,"button",23),d("click",function(){_(t);let e=l(2);return e.filter.created_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function je(a,n){if(a&1){let t=f();o(0,"button",23),d("click",function(){_(t);let e=l(2);return e.filter.bill_number="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function Ke(a,n){if(a&1){let t=f();o(0,"button",23),d("click",function(){_(t);let e=l(2);return e.filter.transfer_id="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function qe(a,n){if(a&1){let t=f();o(0,"button",23),d("click",function(){_(t);let e=l(2);return e.filter.sender_customer_type_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function Ge(a,n){if(a&1){let t=f();o(0,"button",23),d("click",function(){_(t);let e=l(2);return e.filter.sender_customer_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function Qe(a,n){if(a&1){let t=f();o(0,"button",23),d("click",function(){_(t);let e=l(2);return e.filter.receiver_customer_type_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function ze(a,n){if(a&1){let t=f();o(0,"button",23),d("click",function(){_(t);let e=l(2);return e.filter.receiver_customer_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function Je(a,n){if(a&1){let t=f();o(0,"tr",24)(1,"td"),p(2),r(),o(3,"td"),p(4),w(5,"date"),r(),o(6,"td",25),p(7),w(8,"titlecase"),r(),o(9,"td"),p(10),w(11,"date"),r(),o(12,"td")(13,"a",26),d("click",function(){let e=_(t).$implicit,c=l(2);return m(c.goToDetail(e._id))}),p(14),r()(),o(15,"td")(16,"a",26),d("click",function(){let e=_(t).$implicit,c=l(2);return m(c.goToDetail(e._id))}),p(17),r()(),o(18,"td"),p(19),r(),o(20,"td"),p(21),r(),o(22,"td"),p(23),r(),o(24,"td"),p(25),r(),o(26,"td",27),p(27),r(),o(28,"td",27),p(29),r(),o(30,"td",28),p(31),r()()}if(a&2){let t=n.$implicit,i=n.index,e=l(2);R("bg-gray-400",e.isHighlighted(t._id)),s(2),C((e.pagination.cur_page-1)*e.pagination.limit+i+1),s(2),C(t.created_at?P(5,15,t.created_at,"dd MMM yyyy hh:mm a"):""),s(3),C(t.created_name?I(8,18,t.created_name):"---"),s(3),C(t.bill_date?P(11,20,t.bill_date,"dd MMM yyyy hh:mm a"):""),s(4),L(" ",t.bill_number?t.bill_number:"---"," "),s(3),L(" ",t.transfer_id?t.transfer_id:"---"," "),s(2),C(t.sender_customer_type_name?t.sender_customer_type_name:"---"),s(2),C(t.sender_customer_name?t.sender_customer_name:"---"),s(2),C(t.receiver_customer_type_name?t.receiver_customer_type_name:"---"),s(2),C(t.receiver_customer_name?t.receiver_customer_name:"---"),s(2),C(t.total_item_count?t.total_item_count:"---"),s(2),C(t.total_item_quantity?t.total_item_quantity:"---"),s(2),L("\u20B9 ",t.bill_amount?t.bill_amount:"0","")}}function Ue(a,n){if(a&1){let t=f();k(0),o(1,"tr",13)(2,"td",14),p(3,"\xA0"),r(),o(4,"td")(5,"div",15)(6,"mat-form-field",16)(7,"input",17),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.created_at,e)||(c.filter.created_at=e),m(e)}),d("ngModelChange",function(){_(t);let e=l();return m(e.getList())}),r(),T(8,"mat-datepicker-toggle",18)(9,"mat-datepicker",null,0),r()()(),o(11,"td",14)(12,"div",15)(13,"mat-form-field",16)(14,"input",19),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.created_name,e)||(c.filter.created_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=l();return m(e.getList())}),r(),g(15,Oe,3,0,"button",20),r()()(),o(16,"td",14)(17,"div",15)(18,"mat-form-field",16)(19,"input",21),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.bill_date,e)||(c.filter.bill_date=e),m(e)}),d("ngModelChange",function(){_(t);let e=l();return m(e.getList())}),r(),T(20,"mat-datepicker-toggle",18)(21,"mat-datepicker",null,1),r()()(),o(23,"td",14)(24,"div",15)(25,"mat-form-field",16)(26,"input",19),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.bill_number,e)||(c.filter.bill_number=e),m(e)}),d("keyup.enter",function(){_(t);let e=l();return m(e.getList())}),r(),g(27,je,3,0,"button",20),r()()(),o(28,"td",14)(29,"div",15)(30,"mat-form-field",16)(31,"input",19),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.transfer_id,e)||(c.filter.transfer_id=e),m(e)}),d("keyup.enter",function(){_(t);let e=l();return m(e.getList())}),r(),g(32,Ke,3,0,"button",20),r()()(),o(33,"td",14)(34,"div",15)(35,"mat-form-field",16)(36,"input",19),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.sender_customer_type_name,e)||(c.filter.sender_customer_type_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=l();return m(e.getList())}),r(),g(37,qe,3,0,"button",20),r()()(),o(38,"td",14)(39,"div",15)(40,"mat-form-field",16)(41,"input",19),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.sender_customer_name,e)||(c.filter.sender_customer_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=l();return m(e.getList())}),r(),g(42,Ge,3,0,"button",20),r()()(),o(43,"td",14)(44,"div",15)(45,"mat-form-field",16)(46,"input",19),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.receiver_customer_type_name,e)||(c.filter.receiver_customer_type_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=l();return m(e.getList())}),r(),g(47,Qe,3,0,"button",20),r()()(),o(48,"td",14)(49,"div",15)(50,"mat-form-field",16)(51,"input",19),x("ngModelChange",function(e){_(t);let c=l();return b(c.filter.receiver_customer_name,e)||(c.filter.receiver_customer_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=l();return m(e.getList())}),r(),g(52,ze,3,0,"button",20),r()()(),o(53,"td"),p(54,"\xA0"),r(),o(55,"td"),p(56,"\xA0"),r(),o(57,"td"),p(58,"\xA0"),r()(),g(59,Je,32,23,"tr",22),v()}if(a&2){let t=E(10),i=E(22),e=l();s(7),u("matDatepicker",t),h("ngModel",e.filter.created_at),s(),u("for",t),s(6),h("ngModel",e.filter.created_name),s(),y(e.filter.created_name?15:-1),s(4),u("matDatepicker",i),h("ngModel",e.filter.bill_date),s(),u("for",i),s(6),h("ngModel",e.filter.bill_number),s(),y(e.filter.bill_number?27:-1),s(4),h("ngModel",e.filter.transfer_id),s(),y(e.filter.transfer_id?32:-1),s(4),h("ngModel",e.filter.sender_customer_type_name),s(),y(e.filter.sender_customer_type_name?37:-1),s(4),h("ngModel",e.filter.sender_customer_name),s(),y(e.filter.sender_customer_name?42:-1),s(4),h("ngModel",e.filter.receiver_customer_type_name),s(),y(e.filter.receiver_customer_type_name?47:-1),s(4),h("ngModel",e.filter.receiver_customer_name),s(),y(e.filter.receiver_customer_name?52:-1),s(7),u("ngForOf",e.listing)}}function Xe(a,n){a&1&&(o(0,"td"),T(1,"app-skeleton"),r()),a&2&&(s(),M("h20 bg-skeleton"))}function Ye(a,n){a&1&&(o(0,"tr",13),g(1,Xe,2,2,"td",30),r()),a&2&&(s(),u("ngForOf",V(1,Ce).constructor(13)))}function Ze(a,n){a&1&&(k(0),g(1,Ye,2,2,"tr",29),v()),a&2&&(s(),u("ngForOf",V(1,Ce).constructor(5)))}function $e(a,n){a&1&&(k(0),T(1,"app-data-not-found"),v())}var ue=class a{constructor(n,t,i,e,c,ht){this.comanFuncation=n;this.highlightService=t;this.router=i;this.api=e;this.route=c;this.moduleService=ht}pageHeader=!0;btnLabel;mainTab;customerDetail;stockType;_id;tabCount={};activeTab="Pending";skLoading=!1;highlightedId;pageKey="stock-list";pagination={};filter={};listing=[];accessRight={};mainTabs=[{name:"Pending",label:"Pending",icon:"ri-time-fill",count:this.tabCount.Pending?this.tabCount.Pending:0},{name:"Approved",label:"Approved",icon:"ri-check-fill",count:this.tabCount.Approved?this.tabCount.Approved:0},{name:"Reject",label:"Reject",icon:"ri-close-fill",count:this.tabCount.Reject?this.tabCount.Reject:0}];ngOnChanges(){this.getList()}ngOnInit(){let n=this.moduleService.getAccessMap("IRP","Stock Transfer","Company To Customer");n&&(this.accessRight=n);let t=this.highlightService.getHighlight(this.pageKey);t!=null&&(this.activeTab=t.tab,this.highlightedId=t.rowId,this.pagination.cur_page=t.pageIndex,this.filter=t.filters,this.highlightService.clearHighlight(this.pageKey)),this.route.paramMap.subscribe(i=>{i.get("type")&&(this.stockType=i.get("type"),this.getList())})}onRefresh(){this.getList()}getList(){this.skLoading=!0,this.api.post({page:this.pagination.cur_page??1,mainTab:this.mainTab,activeTab:this.activeTab,_id:this._id,filters:this.filter},"stock-transfer/read").subscribe(n=>{n.statusCode===200?(this.listing=n.data.result,this.pagination=n.pagination,this.skLoading=!1):this.skLoading=!1})}changeToPagination(n){n=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.getList()):this.pagination.next&&(this.pagination.cur_page++,this.getList())}changeToPage(n){this.pagination.cur_page=n,this.getList()}isHighlighted(n){return this.highlightedId===n}setHighLight(n){this.comanFuncation.setHighLight(this.pageKey,n,this.activeTab,this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}goToDetail(n){this.setHighLight(n),this.router.navigate(["/apps/loyalty/stock-transfer-list/company/customer-stock-transfer-detail/"+n])}goToPage(){let n;this.customerDetail&&(n=this.customerDetail),this.router.navigate(["/apps/loyalty/stock-transfer-list/company/stock-add"],{state:{detail:n}})}onTabChange(n){this.activeTab=n,this.getList()}invoiceColumn=[{label:"Date Created"},{label:"Created By"},{label:"Bill Date"},{label:"Bill No."},{label:"Transfer ID"},{label:"Sender Customer Category"},{label:"Sender Customer Detail"},{label:"Receiver Customer Category"},{label:"Receiver Customer Detail"},{label:"Total Item",table_class:"text-center"},{label:"Total Qty",table_class:"text-center"},{label:"Bill Amount",table_class:"text-right"}];static \u0275fac=function(t){return new(t||a)(S(pe),S(me),S(q),S(U),S(K),S(ge))};static \u0275cmp=B({type:a,selectors:[["app-customer-stock-transfer-list"]],inputs:{pageHeader:"pageHeader",btnLabel:"btnLabel",mainTab:"mainTab",customerDetail:"customerDetail",stockType:"stockType",_id:"_id"},features:[F],decls:12,vars:22,consts:[["picker",""],["picker1",""],[1,"row"],[1,"col-xl-12"],[1,"py-4",3,"ngClass"],["aria-label","Tabs","role","tablist",1,"sm:flex","sm:space-x-2","sm:rtl:space-x-reverse","gap-1"],[3,"tabs","activeTab","countShow","tabChange",4,"ngFor","ngForOf"],[3,"onRefresh","button1","pageTitle","listLength","btnShow","refreshLabel","btnShow2","addBtnLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","columns"],[4,"ngIf"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"tabChange","tabs","activeTab","countShow"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","created_at","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["matInput","","name","bill_date","placeholder","Bill Date",3,"ngModelChange","matDatepicker","ngModel"],["class","invoice-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"invoice-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"w150"],[1,"font-medium","text-primary","underline",3,"click"],[1,"text-center"],[1,"text-right"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(o(0,"div",2)(1,"div",3)(2,"div",4)(3,"nav",5),g(4,Ne,1,9,"app-listing-tab",6),r(),o(5,"app-page-sub-header",7),d("onRefresh",function(){return i.onRefresh()})("button1",function(){return i.goToPage()}),r(),o(6,"div",8)(7,"spk-reusable-tables",9),g(8,Ue,60,21,"ng-container",10)(9,Ze,2,2,"ng-container",10),r(),g(10,$e,2,0,"ng-container",10),o(11,"app-pagination-footer",11),d("preButtonClick",function(){return i.changeToPagination("Previous")})("nextButtonClick",function(){return i.changeToPagination("Next")})("pageChange",function(c){return i.changeToPage(c)}),r()()()()()),t&2&&(s(2),u("ngClass",i.pageHeader?"box px-4":""),s(2),u("ngForOf",i.mainTabs),s(),M("p-0 pt-3"),u("pageTitle",(i.pageHeader?"Stock Transfer":i.btnLabel)+" List")("listLength",i.listing.length)("btnShow",!0)("refreshLabel","Refresh")("btnShow2",i.accessRight==null?null:i.accessRight.addRight)("addBtnLabel",i.pageHeader?"Stock Transfer":i.btnLabel),s(2),u("tableHead","border-b")("showS_No",!0)("columns",i.invoiceColumn),s(),u("ngIf",!i.skLoading),s(),u("ngIf",i.skLoading),s(),u("ngIf",i.listing.length===0&&!i.skLoading),s(),u("currentPage",i.pagination.cur_page)("totalPage",i.pagination.total_pages)("pageLimit",i.pagination.limit)("listLength",i.listing.length)("preBtn",!i.pagination.prev)("nextBtn",!i.pagination.next))},dependencies:[_e,H,A,N,Q,z,J,X,le,se,de,ce,O,j,G,ae,oe,$,ie,ne,re,ee,te,Z,Y],encapsulation:2})};var et=()=>["Stock Transfer"],tt=(a,n,t)=>({name:a,label:n,icon:t}),it=a=>[a],be=()=>[];function nt(a,n){if(a&1&&T(0,"app-page-header",4),a&2){let t=l();u("title","IRP")("title1",V(3,et))("activeitem",t.stockType==="company"?"Company To Customer":"Customer To Customer")}}function rt(a,n){if(a&1){let t=f();o(0,"app-listing-tab",14),d("tabChange",function(e){_(t);let c=l(2);return m(c.onTabChange(e.tab))}),r()}if(a&2){let t=n.$implicit,i=l(2);u("tabs",W(7,it,D(3,tt,t.name,t.label,t.icon)))("activeTab",i.activeTab)("countShow",!1)}}function ot(a,n){if(a&1){let t=f();o(0,"button",24),d("click",function(){_(t);let e=l(3);return e.filter.created_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function at(a,n){if(a&1){let t=f();o(0,"button",24),d("click",function(){_(t);let e=l(3);return e.filter.invoice_number="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function st(a,n){if(a&1){let t=f();o(0,"button",24),d("click",function(){_(t);let e=l(3);return e.filter.customer_type_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function lt(a,n){if(a&1){let t=f();o(0,"button",24),d("click",function(){_(t);let e=l(3);return e.filter.customer_name="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function ct(a,n){if(a&1){let t=f();o(0,"button",24),d("click",function(){_(t);let e=l(3);return e.filter.customer_code="",m(e.getList())}),o(1,"mat-icon"),p(2,"close"),r()()}}function _t(a,n){if(a&1){let t=f();o(0,"tr",25)(1,"td"),p(2),r(),o(3,"td"),p(4),w(5,"date"),r(),o(6,"td"),p(7),w(8,"titlecase"),r(),o(9,"td")(10,"a",26),d("click",function(){let e=_(t).$implicit,c=l(3);return m(c.goToDetail(e._id))}),p(11),r()(),o(12,"td"),p(13),r(),o(14,"td"),p(15),w(16,"titlecase"),r(),o(17,"td"),p(18),r(),o(19,"td",27),p(20),r(),o(21,"td",27),p(22),r(),o(23,"td",28),p(24),r()()}if(a&2){let t=n.$implicit,i=n.index,e=l(3);R("bg-gray-400",e.isHighlighted(t._id)),s(2),C((e.pagination.cur_page-1)*e.pagination.limit+i+1),s(2),C(t.billing_date?P(5,12,t.billing_date,"dd MMM yyyy hh:mm a"):""),s(3),C(t.created_name?I(8,15,t.created_name):"---"),s(4),L(" ",t.invoice_number?t.invoice_number:"---"," "),s(2),C(t.customer_type_name?t.customer_type_name:"---"),s(2),C(t.customer_name?I(16,17,t.customer_name):"---"),s(3),C(t.customer_code?t.customer_code:"---"),s(2),C(t.total_item_count?t.total_item_count:"---"),s(2),C(t.total_item_quantity?t.total_item_quantity:"---"),s(2),L("\u20B9 ",t.net_amount_with_tax?t.net_amount_with_tax:"0","")}}function mt(a,n){if(a&1){let t=f();k(0),o(1,"tr",15)(2,"td",16),p(3,"\xA0"),r(),o(4,"td")(5,"div",17)(6,"mat-form-field",18)(7,"input",19),x("ngModelChange",function(e){_(t);let c=l(2);return b(c.filter.billing_date,e)||(c.filter.billing_date=e),m(e)}),d("ngModelChange",function(){_(t);let e=l(2);return m(e.getList())}),r(),T(8,"mat-datepicker-toggle",20)(9,"mat-datepicker",null,0),r()()(),o(11,"td",16)(12,"div",17)(13,"mat-form-field",18)(14,"input",21),x("ngModelChange",function(e){_(t);let c=l(2);return b(c.filter.created_name,e)||(c.filter.created_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=l(2);return m(e.getList())}),r(),g(15,ot,3,0,"button",22),r()()(),o(16,"td",16)(17,"div",17)(18,"mat-form-field",18)(19,"input",21),x("ngModelChange",function(e){_(t);let c=l(2);return b(c.filter.invoice_number,e)||(c.filter.invoice_number=e),m(e)}),d("keyup.enter",function(){_(t);let e=l(2);return m(e.getList())}),r(),g(20,at,3,0,"button",22),r()()(),o(21,"td",16)(22,"div",17)(23,"mat-form-field",18)(24,"input",21),x("ngModelChange",function(e){_(t);let c=l(2);return b(c.filter.customer_type_name,e)||(c.filter.customer_type_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=l(2);return m(e.getList())}),r(),g(25,st,3,0,"button",22),r()()(),o(26,"td",16)(27,"div",17)(28,"mat-form-field",18)(29,"input",21),x("ngModelChange",function(e){_(t);let c=l(2);return b(c.filter.customer_name,e)||(c.filter.customer_name=e),m(e)}),d("keyup.enter",function(){_(t);let e=l(2);return m(e.getList())}),r(),g(30,lt,3,0,"button",22),r()()(),o(31,"td",16)(32,"div",17)(33,"mat-form-field",18)(34,"input",21),x("ngModelChange",function(e){_(t);let c=l(2);return b(c.filter.customer_code,e)||(c.filter.customer_code=e),m(e)}),d("keyup.enter",function(){_(t);let e=l(2);return m(e.getList())}),r(),g(35,ct,3,0,"button",22),r()()(),o(36,"td"),p(37,"\xA0"),r(),o(38,"td"),p(39,"\xA0"),r(),o(40,"td"),p(41,"\xA0"),r()(),g(42,_t,25,19,"tr",23),v()}if(a&2){let t=E(10),i=l(2);s(7),u("matDatepicker",t),h("ngModel",i.filter.billing_date),s(),u("for",t),s(6),h("ngModel",i.filter.created_name),s(),y(i.filter.created_name?15:-1),s(4),h("ngModel",i.filter.invoice_number),s(),y(i.filter.invoice_number?20:-1),s(4),h("ngModel",i.filter.customer_type_name),s(),y(i.filter.customer_type_name?25:-1),s(4),h("ngModel",i.filter.customer_name),s(),y(i.filter.customer_name?30:-1),s(4),h("ngModel",i.filter.customer_code),s(),y(i.filter.customer_code?35:-1),s(7),u("ngForOf",i.listing)}}function pt(a,n){a&1&&(o(0,"td"),T(1,"app-skeleton"),r()),a&2&&(s(),M("h20 bg-skeleton"))}function dt(a,n){a&1&&(o(0,"tr",15),g(1,pt,2,2,"td",30),r()),a&2&&(s(),u("ngForOf",V(1,be).constructor(10)))}function ut(a,n){a&1&&(k(0),g(1,dt,2,2,"tr",29),v()),a&2&&(s(),u("ngForOf",V(1,be).constructor(5)))}function gt(a,n){a&1&&(k(0),T(1,"app-data-not-found"),v())}function ft(a,n){if(a&1){let t=f();o(0,"div",5)(1,"div",6)(2,"div",7)(3,"nav",8),g(4,rt,1,9,"app-listing-tab",9),r(),o(5,"app-page-sub-header",10),d("onRefresh",function(){_(t);let e=l();return m(e.onRefresh())}),r(),o(6,"div",11)(7,"spk-reusable-tables",12),g(8,mt,43,14,"ng-container",3)(9,ut,2,2,"ng-container",3),r(),g(10,gt,2,0,"ng-container",3),o(11,"app-pagination-footer",13),d("preButtonClick",function(){_(t);let e=l();return m(e.changeToPagination("Previous"))})("nextButtonClick",function(){_(t);let e=l();return m(e.changeToPagination("Next"))})("pageChange",function(e){_(t);let c=l();return m(c.changeToPage(e))}),r()()()()()}if(a&2){let t=l();s(2),u("ngClass",t.pageHeader?"box px-4":""),s(2),u("ngForOf",t.mainTabs),s(),M("p-0 pt-3"),u("pageTitle","Stock Transfer List")("listLength",t.listing.length)("btnShow",!0)("refreshLabel","Refresh"),s(2),u("tableHead","border-b")("showS_No",!0)("columns",t.invoiceColumn),s(),u("ngIf",!t.skLoading),s(),u("ngIf",t.skLoading),s(),u("ngIf",t.listing.length===0&&!t.skLoading),s(),u("currentPage",t.pagination.cur_page)("totalPage",t.pagination.total_pages)("pageLimit",t.pagination.limit)("listLength",t.listing.length)("preBtn",!t.pagination.prev)("nextBtn",!t.pagination.next)}}function Ct(a,n){a&1&&(k(0),T(1,"app-customer-stock-transfer-list"),v())}var he=class a{constructor(n,t,i,e,c){this.comanFuncation=n;this.highlightService=t;this.router=i;this.api=e;this.route=c}pageHeader=!0;stockType;_id;tabCount={};activeTab="Pending";skLoading=!1;highlightedId;pageKey="stock-list";pagination={};filter={};listing=[];mainTabs=[{name:"Pending",label:"GRN Pending",icon:"ri-time-fill",count:this.tabCount.Pending?this.tabCount.Pending:0},{name:"Received",label:"GRN Received",icon:"ri-check-fill",count:this.tabCount.Approved?this.tabCount.Approved:0},{name:"Reject",label:"GRN Reject",icon:"ri-close-fill",count:this.tabCount.Reject?this.tabCount.Reject:0}];ngOnChanges(){this.stockType!=="customer"&&this.getList()}ngOnInit(){let n=this.highlightService.getHighlight(this.pageKey);n!=null&&(this.activeTab=n.tab,this.highlightedId=n.rowId,this.pagination.cur_page=n.pageIndex,this.filter=n.filters,this.highlightService.clearHighlight(this.pageKey)),this.route.paramMap.subscribe(t=>{t.get("type")&&(this.stockType=t.get("type"),this.getList())})}onRefresh(){this.getList()}getList(){this.skLoading=!0,this.api.post({page:this.pagination.cur_page??1,activeTab:this.activeTab,_id:this._id,filters:this.filter},"invoice/read").subscribe(n=>{n.statusCode===200?(this.listing=n.data.result,this.pagination=n.pagination,this.skLoading=!1):this.skLoading=!1})}changeToPagination(n){n=="Previous"?this.pagination.prev&&this.pagination.cur_page>1&&(this.pagination.cur_page--,this.getList()):this.pagination.next&&(this.pagination.cur_page++,this.getList())}changeToPage(n){this.pagination.cur_page=n,this.getList()}isHighlighted(n){return this.highlightedId===n}setHighLight(n){this.comanFuncation.setHighLight(this.pageKey,n,this.activeTab,this.filter,this.pagination.cur_page?this.pagination.cur_page:1)}goToDetail(n){this.setHighLight(n);let t={"return-type":"customer"};this.router.navigate(["/apps/loyalty/stock-transfer-list/company/stock-transfer-detail/"+n],{state:{detail:t}})}onTabChange(n){this.activeTab=n,this.getList()}invoiceColumn=[{label:"Invoice Date"},{label:"Created By"},{label:"Invoice Id"},{label:"Customer Category"},{label:"Customer Detail"},{label:"Account Code"},{label:"Total Item",table_class:"text-center"},{label:"Total Qty",table_class:"text-center"},{label:"Amount",table_class:"text-right"}];static \u0275fac=function(t){return new(t||a)(S(pe),S(me),S(q),S(U),S(K))};static \u0275cmp=B({type:a,selectors:[["app-company-stock-transfer-list"]],inputs:{pageHeader:"pageHeader",stockType:"stockType",_id:"_id"},features:[F],decls:3,vars:3,consts:[["picker",""],[3,"title","title1","activeitem",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],[3,"title","title1","activeitem"],[1,"row"],[1,"col-xl-12"],[1,"py-4",3,"ngClass"],["aria-label","Tabs","role","tablist",1,"sm:flex","sm:space-x-2","sm:rtl:space-x-reverse","gap-1"],[3,"tabs","activeTab","countShow","tabChange",4,"ngFor","ngForOf"],[3,"onRefresh","pageTitle","listLength","btnShow","refreshLabel"],[1,"table-responsive","overflow-auto","table-bordered-default"],["tableClass","ti-custom-table ti-custom-table-head ti-custom-table-hover ti-head-primary whitespace-nowrap",3,"tableHead","showS_No","columns"],[3,"preButtonClick","nextButtonClick","pageChange","currentPage","totalPage","pageLimit","listLength","preBtn","nextBtn"],[3,"tabChange","tabs","activeTab","countShow"],[1,"border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"!text-center"],[1,"table-search-filters"],[1,"table-input"],["matInput","","name","billing_date","placeholder","Date Created",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear"],["class","invoice-list border-b !border-defaultborder dark:!border-defaultborder/10",3,"bg-gray-400",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"invoice-list","border-b","!border-defaultborder","dark:!border-defaultborder/10"],[1,"font-medium","text-primary","underline",3,"click"],[1,"text-center"],[1,"text-right"],["class","border-b !border-defaultborder dark:!border-defaultborder/10",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&g(0,nt,1,4,"app-page-header",1)(1,ft,12,20,"div",2)(2,Ct,2,0,"ng-container",3),t&2&&(u("ngIf",i.pageHeader),s(),u("ngIf",i.stockType==="company"),s(),u("ngIf",i.stockType==="customer"))},dependencies:[_e,H,A,N,Q,z,J,fe,X,le,se,de,ce,O,j,G,ae,ue,oe,$,ie,ne,re,ee,te,Z,Y],encapsulation:2})};export{ue as a,he as b};
